{"post_stream":{"posts":[{"id":9841,"name":"","username":"TheComet","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","created_at":"2016-01-26T03:12:00.000Z","cooked":"\u003cp\u003eHey!\u003c/p\u003e\n\u003cp\u003eI think this is a great project and I want to help contribute. Is there a style/concept guideline anywhere? More specifically I want to know more about the way you handle errors (i.e. why did you choose not to use exceptions).\u003c/p\u003e\n\u003cp\u003eTake this snippet for example:\u003c/p\u003e\n\u003cp\u003e(Source: \u003ca href=\"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/IO/File.cpp#L251\" data-bbcode=\"true\" rel=\"nofollow noopener\"\u003ehttps://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/IO/File.cpp#L251\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003e[code]unsigned File::Read(void* dest, unsigned size)\u003cbr\u003e\n{\u003cbr\u003e\n// SNIP\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eif (compressed_)\n{\n    unsigned sizeLeft = size;\n    unsigned char* destPtr = (unsigned char*)dest;\n\n\n    while (sizeLeft)\n    {\n        if (!readBuffer_ || readBufferOffset_ \u0026gt;= readBufferSize_)\n        {\n            unsigned char blockHeaderBytes[4];\n            fread(blockHeaderBytes, sizeof blockHeaderBytes, 1, (FILE*)handle_);\n\n\n            MemoryBuffer blockHeader(\u0026amp;blockHeaderBytes[0], sizeof blockHeaderBytes);\n            unsigned unpackedSize = blockHeader.ReadUShort();\n            unsigned packedSize = blockHeader.ReadUShort();\n\n\n            if (!readBuffer_)\n            {\n                readBuffer_ = new unsigned char[unpackedSize];\n                inputBuffer_ = new unsigned char[LZ4_compressBound(unpackedSize)];\n            }\n\n\n            /// \\todo Handle errors\n            fread(inputBuffer_.Get(), packedSize, 1, (FILE*)handle_);\n            LZ4_decompress_fast((const char*)inputBuffer_.Get(), (char*)readBuffer_.Get(), unpackedSize);\n\n\n            readBufferSize_ = unpackedSize;\n            readBufferOffset_ = 0;\n        }\n\n\n        unsigned copySize = (unsigned)Min((int)(readBufferSize_ - readBufferOffset_), (int)sizeLeft);\n        memcpy(destPtr, readBuffer_.Get() + readBufferOffset_, copySize);\n        destPtr += copySize;\n        sizeLeft -= copySize;\n        readBufferOffset_ += copySize;\n        position_ += copySize;\n    }\n\n\n    return size;\n}\n\n// SNIP\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e}[/code]\u003c/p\u003e\n\u003cp\u003eMy questions are these.\u003cbr\u003e\n[ul][li]Is it normal not to check the return value of fread() or read()? If the return values shouldn’t be checked, what’s your rationale for that decision?[/li]\u003cbr\u003e\n[li]Is it normal not to check if memory allocations succeeded? Again, rationale?[/li]\u003cbr\u003e\n[li]I see a \u003cspan class=\"bbcode-b\"\u003e\\todo Handle errors\u003c/span\u003e there, which I assume is referring to the decompression of the data. Seeing as all callers of File::Read never check the return value either – and the use of exceptions is discouraged – there seems to be little reason to implement error checking unless everyone in the call stack starts checking the return value of File::Read too. Is this something that needs implementing?[/li][/ul]\u003c/p\u003e\n\u003cp\u003eThanks!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:09:39.095Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":9,"reads":4,"readers_count":3,"score":45.8,"yours":false,"topic_id":1713,"topic_slug":"file-read-and-error-checking","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/IO/File.cpp#L251","internal":false,"reflection":false,"title":"Urho3D/File.cpp at master · urho3d/Urho3D · GitHub","clicks":1}],"read":true,"user_title":"Community repository maintainer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":37,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9846,"name":"","username":"valera_rozuvan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/46a35a/{size}.png","created_at":"2016-01-26T07:57:02.000Z","cooked":"\u003cp\u003eHello \u003cspan class=\"bbcode-b\"\u003eTheComet\u003c/span\u003e. I was also wondering just today why there are no exceptions…\u003c/p\u003e\n\u003cp\u003eMaybe better to move this topic to \u003cspan class=\"bbcode-b\"\u003eDeveloper Talk\u003c/span\u003e \u003ca href=\"http://urho3d.prophpbb.com/forum7.html\" data-bbcode=\"true\" rel=\"nofollow noopener\"\u003ehttp://urho3d.prophpbb.com/forum7.html\u003c/a\u003e?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:09:39.396Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":3,"readers_count":2,"score":5.6,"yours":false,"topic_id":1713,"topic_slug":"file-read-and-error-checking","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://urho3d.prophpbb.com/forum7.html","internal":false,"reflection":false,"title":"Developer Talk","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":384,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9847,"name":"","username":"valera_rozuvan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/46a35a/{size}.png","created_at":"2016-01-26T07:58:12.000Z","cooked":"\u003cp\u003eBy the way, take a look at the code conventions that are at \u003ca href=\"http://urho3d.github.io/documentation/1.5/_conventions.html\" data-bbcode=\"true\" rel=\"nofollow noopener\"\u003ehttp://urho3d.github.io/documentation/1.5/_conventions.html\u003c/a\u003e. It does mention that:\u003c/p\u003e\n\u003caside class=\"quote\"\u003e\n\u003cblockquote\u003e\n\u003cp\u003eNo C++ exceptions. Error return values (false / null pointer / dummy reference) are used instead. Script exceptions are used when there is no other sensible way, such as with out of bounds array access.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:09:39.464Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":1713,"topic_slug":"file-read-and-error-checking","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://urho3d.github.io/documentation/1.5/_conventions.html","internal":false,"reflection":false,"title":"Urho3D - Documentation","clicks":2}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":384,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9850,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-01-26T14:51:53.000Z","cooked":"\u003cp\u003eThe primary reason to avoid exceptions was that they wreak havoc with script bindings, as script VM’s usually can’t handle it when an exposed C++ function throws an exception within the VM run loop.\u003c/p\u003e\n\u003cp\u003eThere is fread() error checking in the normal (non-compressed) execution path. For the compressed path there’s a todo marked. Overall I know that Urho could use some more error checking.\u003c/p\u003e\n\u003cp\u003eOut-of-memory situations are not really handled, because it’s unsure how well the program could recover at that point (even allocating an error message string could also fail.) We use new and new[] instead of malloc, so this should throw a bad alloc, which is typically caught in the Urho application top level.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:09:39.691Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":1713,"topic_slug":"file-read-and-error-checking","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[9841,9846,9847,9850]},"timeline_lookup":[[1,2493]],"suggested_topics":[{"id":7347,"title":"How does Urho handle script objects each frame?","fancy_title":"How does Urho handle script objects each frame?","slug":"how-does-urho-handle-script-objects-each-frame","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-08T02:33:56.461Z","last_posted_at":"2022-11-08T14:46:09.857Z","bumped":true,"bumped_at":"2022-11-08T14:46:09.857Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":64,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7304,"title":"Urho3D is crashing on Android 12","fancy_title":"Urho3D is crashing on Android 12","slug":"urho3d-is-crashing-on-android-12","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-28T10:03:51.280Z","last_posted_at":"2022-07-28T10:03:51.349Z","bumped":true,"bumped_at":"2022-07-28T10:38:06.014Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":126,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7344,"title":"Do we give up supporting dx11？","fancy_title":"Do we give up supporting dx11？","slug":"do-we-give-up-supporting-dx11","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-03T09:37:37.893Z","last_posted_at":"2022-11-03T13:09:15.153Z","bumped":true,"bumped_at":"2022-11-03T15:28:58.128Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":78,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7200,"title":"Urho3D just building if I check \"use SHARED libraries\"","fancy_title":"Urho3D just building if I check \u0026ldquo;use SHARED libraries\u0026rdquo;","slug":"urho3d-just-building-if-i-check-use-shared-libraries","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-02-22T20:02:48.835Z","last_posted_at":"2022-02-23T15:38:33.698Z","bumped":true,"bumped_at":"2022-02-23T15:54:07.879Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":165,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7112,"title":"What is the proper way to add more source files(.cpp and .h) to a project?","fancy_title":"What is the proper way to add more source files(.cpp and .h) to a project?","slug":"what-is-the-proper-way-to-add-more-source-files-cpp-and-h-to-a-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-27T18:18:21.946Z","last_posted_at":"2021-12-28T12:19:43.514Z","bumped":true,"bumped_at":"2021-12-28T12:19:43.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":195,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1498,"username":"Tryout","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/85f322/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":1713,"title":"File::Read() and error checking","fancy_title":"File::Read() and error checking","posts_count":4,"created_at":"2016-01-26T03:12:00.000Z","views":239,"reply_count":0,"like_count":0,"last_posted_at":"2016-01-26T14:51:53.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"file-read-and-error-checking","category_id":9,"word_count":523,"deleted_at":null,"user_id":37,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1713","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":4,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":384,"username":"valera_rozuvan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/46a35a/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":37,"username":"TheComet","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":37,"username":"TheComet","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png"},"last_poster":{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png"},"links":[{"url":"http://urho3d.github.io/documentation/1.5/_conventions.html","title":"Urho3D - Documentation","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":384,"domain":"urho3d.github.io","root_domain":"urho3d.github.io"},{"url":"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/IO/File.cpp#L251","title":"Urho3D/File.cpp at master · urho3d/Urho3D · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":37,"domain":"github.com","root_domain":"github.com"}]}}