{"post_stream":{"posts":[{"id":7671,"name":"","username":"Bart","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f19dbf/{size}.png","created_at":"2015-09-08T13:50:30.000Z","cooked":"\u003cp\u003eHi,\u003cbr\u003e\nI noticed (maybe a bug?) strange behaviour:\u003c/p\u003e\n\u003cp\u003e[ul]\u003cspan class=\"bbcode-b\"\u003eSteps to reproduce\u003c/span\u003e\u003cbr\u003e\n[\u003cem\u003e]I used main branch version 1.4.441[/\u003c/em\u003e]\u003cbr\u003e\n[\u003cem\u003e]Configure with 64bit, DX11 and Samples with “Visual Studio 12 2013” (happens also for 32bit)[/\u003c/em\u003e]\u003cbr\u003e\n[\u003cem\u003e]In sample 09_MultipleViewports, there is demonstration how to add and toggle shader effects for main viewport. If you try to apply the same renderpath to the secondary view (rearview mirror like) the secondary view goes black when an effect is enabled. Effect is correctly switched on for the main view[/\u003c/em\u003e][/ul]\u003c/p\u003e\n\u003cp\u003eThis works correctly for DX9. I tried adding a new RenderPath object for secondary viewport, still the same behaviour. With DX9, I could use single RenderPath object for 4 viewports, toggle efects on it and I affected all viewports without problems.\u003c/p\u003e\n\u003cp\u003eAm I missing something with DX11 or is this a bug?\u003c/p\u003e\n\u003cp\u003eBloom ON:\u003cbr\u003e\n\u003cimg src=\"http://imageshack.com/a/img910/1043/Qwf3cZ.png\" alt=\"\" width=\"\" height=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eBloom OFF:\u003cbr\u003e\n\u003cimg src=\"http://imageshack.com/a/img538/7049/snZ7YK.png\" alt=\"\" width=\"\" height=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eChanges in code (MultipleViewports.cpp):\u003c/p\u003e\n\u003cp\u003e[code]void MultipleViewports::SetupViewports()\u003cbr\u003e\n{\u003cbr\u003e\nGraphics* graphics = GetSubsystem();\u003cbr\u003e\nRenderer* renderer = GetSubsystem();\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003erenderer-\u0026gt;SetNumViewports(2);\n\n// Set up the front camera viewport\nSharedPtr\u0026lt;Viewport\u0026gt; viewport(new Viewport(context_, scene_, cameraNode_-\u0026gt;GetComponent\u0026lt;Camera\u0026gt;()));\nrenderer-\u0026gt;SetViewport(0, viewport);\n\n// Clone the default render path so that we do not interfere with the other viewport, then add\n// bloom and FXAA post process effects to the front viewport. Render path commands can be tagged\n// for example with the effect name to allow easy toggling on and off. We start with the effects\n// disabled.\nResourceCache* cache = GetSubsystem\u0026lt;ResourceCache\u0026gt;();\nSharedPtr\u0026lt;RenderPath\u0026gt; effectRenderPath = viewport-\u0026gt;GetRenderPath()-\u0026gt;Clone();\neffectRenderPath-\u0026gt;Append(cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"PostProcess/Bloom.xml\"));\neffectRenderPath-\u0026gt;Append(cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"PostProcess/FXAA2.xml\"));\n// Make the bloom mixing parameter more pronounced\neffectRenderPath-\u0026gt;SetShaderParameter(\"BloomMix\", Vector2(0.9f, 0.6f));\neffectRenderPath-\u0026gt;SetEnabled(\"Bloom\", false);\neffectRenderPath-\u0026gt;SetEnabled(\"FXAA2\", false);\nviewport-\u0026gt;SetRenderPath(effectRenderPath);\n\n// Set up the rear camera viewport on top of the front view (\"rear view mirror\")\n// The viewport index must be greater in that case, otherwise the view would be left behind\nSharedPtr\u0026lt;Viewport\u0026gt; rearViewport(new Viewport(context_, scene_, rearCameraNode_-\u0026gt;GetComponent\u0026lt;Camera\u0026gt;(),\n    IntRect(graphics-\u0026gt;GetWidth() * 2 / 3, 32, graphics-\u0026gt;GetWidth() - 32, graphics-\u0026gt;GetHeight() / 3)));\nrenderer-\u0026gt;SetViewport(1, rearViewport);\nrearViewport-\u0026gt;SetRenderPath(effectRenderPath);                  ////// ONLY ADD THIS LINE  ///////\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e}[/code]\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:07:02.673Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":491,"reads":11,"readers_count":10,"score":2447.2,"yours":false,"topic_id":1349,"topic_slug":"directx11-multiple-viewports-renderpaths","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":304,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7672,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-09-08T14:28:12.000Z","cooked":"\u003cp\u003eBug confirmed. I suspect this is related to the viewport being less than screen-sized, in which case viewport clear on D3D11 doesn’t happen in an usual way, but is emulated with shaders.\u003c/p\u003e\n\u003cp\u003eEDIT: problem is broken implementation of Graphics::ResolveToTexture() on D3D11. However D3D11 lacks StretchRect, so it must be worked around.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:07:02.741Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":11,"readers_count":10,"score":2.2,"yours":false,"topic_id":1349,"topic_slug":"directx11-multiple-viewports-renderpaths","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7675,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-09-08T15:15:49.000Z","cooked":"\u003cp\u003eShould be fixed in the master branch. Note that this is not a perfect fix, as an antialiased less-than-fullscreen viewport on D3D11 will lose its antialiasing when it has postprocessing effects. However it should no longer output black.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:07:02.967Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":11,"readers_count":10,"score":2.2,"yours":false,"topic_id":1349,"topic_slug":"directx11-multiple-viewports-renderpaths","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7698,"name":"","username":"Bart","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f19dbf/{size}.png","created_at":"2015-09-09T08:40:29.000Z","cooked":"\u003cp\u003eThank you for this super quick fix!\u003c/p\u003e\n\u003cp\u003eDoes this mean that FXAA2 and FXAA3 shaders will not produce antialiasing, or does your remark concerns some other (built-in) AA in D3D11? Will this probably be fixed for next official release? I would like to help, but I am afraid that my knowledge about this tricky area is basically zero…   \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/frowning.png?v=5\" title=\":frowning:\" class=\"emoji\" alt=\":frowning:\"\u003e\u003c/p\u003e\n\u003cp\u003eThumbs up for supporting D3D11, it gives me more than 4x higher FPS than D3D9 on my box (workstation with nVidia Quadro K2200).\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:07:04.642Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":1349,"topic_slug":"directx11-multiple-viewports-renderpaths","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":304,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7699,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-09-09T09:02:06.000Z","cooked":"\u003cp\u003eFXAA2/3 will always work. Hardware MSAA will not, unless the viewport covers the full window.\u003c/p\u003e\n\u003cp\u003eLikely this could be fixed with a copy (using shader + drawcall) to an intermediate texture, but this loses some performance.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:07:04.702Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":9,"readers_count":8,"score":6.8,"yours":false,"topic_id":1349,"topic_slug":"directx11-multiple-viewports-renderpaths","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7708,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-09-09T15:10:01.000Z","cooked":"\u003cp\u003eShould now be properly fixed in the master branch. Multisampled screenshots already required a similar intermediate texture (but it was being discarded), so I now create a permanent intermediate texture on demand, resolve the whole screen, and then copy the smaller rect from the intermediate texture to target. This performs some unnecessary work, which possibly could be eliminated by sampling only the necessary area in a drawcall + shader, but at least works correctly.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:07:05.282Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":9,"readers_count":8,"score":1.8,"yours":false,"topic_id":1349,"topic_slug":"directx11-multiple-viewports-renderpaths","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7808,"name":"","username":"Bart","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f19dbf/{size}.png","created_at":"2015-09-14T09:00:23.000Z","cooked":"\u003cp\u003eThank you very much for your work on this engine!!\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-01-02T01:07:12.367Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":9,"readers_count":8,"score":16.8,"yours":false,"topic_id":1349,"topic_slug":"directx11-multiple-viewports-renderpaths","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":304,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[7671,7672,7675,7698,7699,7708,7808]},"timeline_lookup":[[1,2633],[4,2632],[7,2627]],"suggested_topics":[{"id":7200,"title":"Urho3D just building if I check \"use SHARED libraries\"","fancy_title":"Urho3D just building if I check \u0026ldquo;use SHARED libraries\u0026rdquo;","slug":"urho3d-just-building-if-i-check-use-shared-libraries","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-02-22T20:02:48.835Z","last_posted_at":"2022-02-23T15:38:33.698Z","bumped":true,"bumped_at":"2022-02-23T15:54:07.879Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":165,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7098,"title":"Cartoon Fire Effect","fancy_title":"Cartoon Fire Effect","slug":"cartoon-fire-effect","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2021-12-10T04:08:49.887Z","last_posted_at":"2021-12-12T02:49:51.076Z","bumped":true,"bumped_at":"2021-12-12T02:49:51.076Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":274,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7104,"title":"Bug in my partial-model copying code","fancy_title":"Bug in my partial-model copying code","slug":"bug-in-my-partial-model-copying-code","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5367e370779d64989e5c3ff2c1ebfb0689908c87.png","created_at":"2021-12-17T03:50:19.405Z","last_posted_at":"2021-12-17T13:50:49.662Z","bumped":true,"bumped_at":"2021-12-17T13:50:49.662Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7074,"title":"First Person and 3rd person camera and water reflections","fancy_title":"First Person and 3rd person camera and water reflections","slug":"first-person-and-3rd-person-camera-and-water-reflections","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-01T18:37:28.669Z","last_posted_at":"2021-12-01T21:19:51.519Z","bumped":true,"bumped_at":"2021-12-01T21:19:51.519Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":158,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7212,"title":"Shadow Gap between Feet and Plane","fancy_title":"Shadow Gap between Feet and Plane","slug":"shadow-gap-between-feet-and-plane","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/8/897538cff25de49fafa7aa77574f822e99576b67_2_1024x686.jpeg","created_at":"2022-03-07T00:04:17.351Z","last_posted_at":"2022-03-07T00:17:57.413Z","bumped":true,"bumped_at":"2022-03-07T00:17:57.413Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}]}],"tags_descriptions":{},"id":1349,"title":"DirectX11 Multiple viewports renderpaths","fancy_title":"DirectX11 Multiple viewports renderpaths","posts_count":7,"created_at":"2015-09-08T13:50:30.000Z","views":998,"reply_count":0,"like_count":0,"last_posted_at":"2015-09-14T09:00:23.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"directx11-multiple-viewports-renderpaths","category_id":10,"word_count":669,"deleted_at":null,"user_id":304,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1349","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":7,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":304,"username":"Bart","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f19dbf/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":304,"username":"Bart","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f19dbf/{size}.png"},"last_poster":{"id":304,"username":"Bart","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f19dbf/{size}.png"}}}