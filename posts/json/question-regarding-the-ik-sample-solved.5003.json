{"post_stream":{"posts":[{"id":28799,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-03-07T03:30:43.455Z","cooked":"\u003cp\u003eI was staring at a piece of code in my foot ik solution, which was essentially copied verbatim from the IK Sample. The more I looked at it, the less I understood how it was even working:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e        float footOffset = leftFoot_-\u0026gt;GetWorldPosition().y_ - jackNode_-\u0026gt;GetWorldPosition().y_;\n        leftEffector_-\u0026gt;SetTargetPosition(result.position_ + result.normal_ * footOffset);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe measure the Y-Offset from the character root to the foot. When the character is standing straight on level ground, that is something like the length of the entire leg - agreed?\u003c/p\u003e\n\u003cp\u003e(lets pretend we‚Äôre on a 45 degree slope now)\u003cbr\u003e\nWe cast a ray in the direction of the surface normal, and note the point of intersection on the terrain.\u003cbr\u003e\nNext, we compute the new position for the foot ik target, by starting at the point of intersection, and casting back along the normal, by the Y-Offset, which puts our ik target somewhere near the pelvis!\u003cbr\u003e\nThe more I look at that code, the less I understand how the IK solver is not exploding!\u003c/p\u003e\n\u003cp\u003eIt seems to me, the best place to put that target, would be to start at the point of intersection, and cast back along the surfacenormal by a very small amount equivalent to the height of the ankle (which is where the foot bone begins) !! (I refer to the animated height of the foot,  of course).\u003c/p\u003e\n\u003cp\u003eWhat am I missing here?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2019-03-10T06:58:58.935Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":26,"readers_count":25,"score":20.2,"yours":false,"topic_id":5003,"topic_slug":"question-regarding-the-ik-sample-solved","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":28807,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2019-03-07T07:44:29.115Z","cooked":"\u003cp\u003eMaybe \u003ca class=\"mention\" href=\"/u/thecomet\"\u003e@TheComet\u003c/a\u003e could (best) answer this question?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2019-03-07T07:49:40.510Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":25,"readers_count":24,"score":5.0,"yours":false,"topic_id":5003,"topic_slug":"question-regarding-the-ik-sample-solved","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":28811,"name":"","username":"lezak","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/b38774/{size}.png","created_at":"2019-03-07T11:12:26.707Z","cooked":"\u003cp\u003eIK is unexplored part of of the engine for me so I won‚Äôt be able to help a lot with it, but from what I can see the thing that You are missing here is the fact that ‚ÄòjackNode_‚Äô is the node that model is attached to, so it‚Äôs position is same as the origin of the model. When character is standing on a level ground offset would be 0 or close to it (difference between ground level and foot bone height), to get length of the entire leg You would need to use pelvis bone. Obviously I‚Äôm assuming that model‚Äôs origin is set to 0,0,0 like it should be (and like jack model has).\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2019-03-08T06:01:20.218Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":24.8,"yours":false,"topic_id":5003,"topic_slug":"question-regarding-the-ik-sample-solved","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":688,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":28818,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-03-08T01:14:14.282Z","cooked":"\u003cp\u003eAh! You‚Äôre suggesting that the root node of the Jack model is not the pelvis, but rather a point on the groundplane and between the foot bones, is that correct? That would make a whole lot of sense!\u003cbr\u003e\nLike the sample, I‚Äôve been passing in the character root node - not the ‚Äúroot bone‚Äù per se - From what I‚Äôve seen in Blender, the origin of my models is indeed at ground level and between the feet, which would explain why the IK solver has not been exploding \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003cbr\u003e\nThank you for taking the time to explain and point out location of the model origin \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2019-03-08T01:14:49.855Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":18,"readers_count":17,"score":48.6,"yours":false,"topic_id":5003,"topic_slug":"question-regarding-the-ik-sample-solved","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"lezak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/b38774/{size}.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[28799,28807,28811,28818]},"timeline_lookup":[[1,1357],[4,1356]],"suggested_topics":[{"id":7304,"title":"Urho3D is crashing on Android 12","fancy_title":"Urho3D is crashing on Android 12","slug":"urho3d-is-crashing-on-android-12","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-28T10:03:51.280Z","last_posted_at":"2022-07-28T10:03:51.349Z","bumped":true,"bumped_at":"2022-07-28T10:38:06.014Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":126,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7344,"title":"Do we give up supporting dx11Ôºü","fancy_title":"Do we give up supporting dx11Ôºü","slug":"do-we-give-up-supporting-dx11","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-03T09:37:37.893Z","last_posted_at":"2022-11-03T13:09:15.153Z","bumped":true,"bumped_at":"2022-11-03T15:28:58.128Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":78,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7347,"title":"How does Urho handle script objects each frame?","fancy_title":"How does Urho handle script objects each frame?","slug":"how-does-urho-handle-script-objects-each-frame","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-08T02:33:56.461Z","last_posted_at":"2022-11-08T14:46:09.857Z","bumped":true,"bumped_at":"2022-11-08T14:46:09.857Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":64,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7216,"title":"Why occlusion culling rasterization is implemented by software?","fancy_title":"Why occlusion culling rasterization is implemented by software?","slug":"why-occlusion-culling-rasterization-is-implemented-by-software","posts_count":4,"reply_count":2,"highest_post_number":4,"image_url":null,"created_at":"2022-03-11T11:36:18.222Z","last_posted_at":"2022-03-13T02:39:16.613Z","bumped":true,"bumped_at":"2022-03-13T02:39:16.613Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":193,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]},{"id":7105,"title":"Multiple Application.UI Roots?","fancy_title":"Multiple Application.UI Roots?","slug":"multiple-application-ui-roots","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/7/74b10ce575f1b69fe43be4abcb07605d74a1d27c_2_1024x544.jpeg","created_at":"2021-12-20T08:55:14.707Z","last_posted_at":"2021-12-22T02:33:05.795Z","bumped":true,"bumped_at":"2021-12-22T02:33:05.795Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":243,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":5003,"title":"Question regarding the IK Sample [Solved]","fancy_title":"Question regarding the IK Sample [Solved]","posts_count":4,"created_at":"2019-03-07T03:30:43.342Z","views":406,"reply_count":1,"like_count":4,"last_posted_at":"2019-03-08T01:14:14.282Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"question-regarding-the-ik-sample-solved","category_id":9,"word_count":465,"deleted_at":null,"user_id":1098,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_5003","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":4,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":3,"username":"lezak","excerpt":"IK is unexplored part of of the engine for me so I won‚Äôt be able to help a lot with it, but from what I can see the thing that You are missing here is the fact that ‚ÄòjackNode_‚Äô is the node that model is attached to, so it‚Äôs position is same as the origin of the model. When character is standing on a\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":688,"username":"lezak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/b38774/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"},"last_poster":{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"}}}