{"post_stream":{"posts":[{"id":36649,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-08T17:11:15.093Z","cooked":"\u003cp\u003eI’m trying to implement Scene Replication into my project, using the Sample by the same name. The sample I’ve gotten to work (there was a syntax error which was just corrected), but I’m getting a Segmentation Fault when replicating the scene.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003efunction HandleClientConnected(eventType, eventData)\n   local newConnection = eventData[\"Connection\"]:GetPtr(\"Connection\")\n    newConnection.scene = scene_\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI’ve narrowed it down a bit to this section of code. Starting a server and all that works fine. When the client connects it immediately segfaults and the client’s application is closed. The server host application remains running and just says the client disconnected. If I take out this code it works, but obviously nothing happens.\u003c/p\u003e\n\u003cp\u003eI suppose this has something to do with my scene? At any rate, how can I figure out what exactly is causing this? Because I’ve got terrain, rocks, tanks, projectiles, sounds, etc. Is there a verbose output somewhere that will tell me why this is segfaulting? Or does anyone know what might be messing up the scene replication?\u003cbr\u003e\nThe sample is very simple, just a ball. So I \u003cem\u003eguess\u003c/em\u003e I could slowly move my project into that sample to narrow things down, but that’d be tedious.\u003c/p\u003e\n\u003cp\u003eAs always thanks for the help guys.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2020-03-12T01:50:56.949Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":29,"readers_count":28,"score":15.8,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36650,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2020-03-08T17:35:47.355Z","cooked":"\u003cp\u003eNever really used Lua, so I have no idea if this is actually the problem, but could it not know that newConnection is actually a Connection? Does it think it’s just a RefCounted object, for example? Alternatively, is newConnection null?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2020-03-08T17:35:47.355Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":5.4,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36652,"name":"Arnis Lielturks","username":"Miegamicis","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png","created_at":"2020-03-08T19:12:51.253Z","cooked":"\u003cp\u003eDid you subscribe to the correct event? Is the scene_ actually set at that point? Here’s the event description \u003ca href=\"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Network/NetworkEvents.h#L51\" rel=\"nofollow noopener\"\u003ehttps://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Network/NetworkEvents.h#L51\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eMu guess would be that this handler is subscribed to the wrong event which doesn’t have “Connection” parameter.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2020-03-08T19:42:36.989Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":26,"readers_count":25,"score":10.2,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"Arnis Lielturks","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Network/NetworkEvents.h#L51","internal":false,"reflection":false,"title":"Urho3D/NetworkEvents.h at master · urho3d/Urho3D · GitHub","clicks":0}],"read":true,"user_title":"Core Developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":444,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36669,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-10T00:06:46.673Z","cooked":"\u003cp\u003eEDIT: it wasn’t only this.\u003c/p\u003e\n\u003cp\u003eSo I started slowly adding parts of my project to the Sample to figure out what was the culprit. Turns out it was this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eSubscribeToEvent(physicsWorld, \"PhysicsCollisionStart\", \"Impact\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDoing this \u003cem\u003eat all\u003c/em\u003e is what crashes the client. That’s all it was. Here’s my other events:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e    SubscribeToEvent(\"PhysicsPreStep\", \"HandlePhysicsPreStep\")\n    SubscribeToEvent(\"PostUpdate\", \"HandlePostUpdate\")\n    SubscribeToEvent(connectButton, \"Released\", \"HandleConnect\")\n    SubscribeToEvent(disconnectButton, \"Released\", \"HandleDisconnect\")\n    SubscribeToEvent(startServerButton, \"Released\", \"HandleStartServer\")\n    SubscribeToEvent(\"ServerConnected\", \"HandleConnectionStatus\")\n    SubscribeToEvent(\"ServerDisconnected\", \"HandleConnectionStatus\")\n    SubscribeToEvent(\"ConnectFailed\", \"HandleConnectionStatus\")\n    SubscribeToEvent(\"ClientConnected\", \"HandleClientConnected\")\n    SubscribeToEvent(\"ClientDisconnected\", \"HandleClientDisconnected\")\n    SubscribeToEvent(\"ClientObjectID\", \"HandleClientObjectID\")\n    network:RegisterRemoteEvent(\"ClientObjectID\");\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIs this because physicsworld is set as LOCAL?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003ephysicsWorld=scene_:CreateComponent(\"PhysicsWorld\", LOCAL)\nphysicsWorld:SetGravity(Vector3(0,-9.8,0))\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI need to check for those collisions for the bullets and rocks and stuff. How can I use:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eSubscribeToEvent(physicsWorld, \"PhysicsCollisionStart\", \"Impact\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewithout the crash?\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2020-03-10T05:42:04.205Z","reply_count":1,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":26,"readers_count":25,"score":10.2,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":4,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Miegamicis","name":"Arnis Lielturks","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36671,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2020-03-10T05:34:21.473Z","cooked":"\u003cp\u003eHas \u003ccode\u003ephysicsWorld\u003c/code\u003e already been defined by the time you’re subscribing to it’s event? What is the code inside \u003ccode\u003eImpact\u003c/code\u003e?\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2020-03-10T05:34:21.473Z","reply_count":1,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":1,"reads":26,"readers_count":25,"score":15.2,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36672,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-10T05:41:49.010Z","cooked":"\u003cp\u003eMy problem is evolving lol.\u003cbr\u003e\nYeah it’s been defined prior. And even with nothing it was segfaulting…turns out it \u003cem\u003ewasnt\u003c/em\u003e just that.\u003c/p\u003e\n\u003cp\u003eIve used the raycast vehicle sample to merge with the scene replication sample. The Ninja Snow sample is nice but I can’t make much sense of it from AngelScript. The script object creation of the raycast vehicle is messing everything up. In the scene replication, a simple ball is created when a client connects, and is assigned to them. I can’t figure out how to take the vehicle script object and create it in place of the ball…\u003c/p\u003e\n\u003cp\u003eThe tank I made from the raycast demo isn’t bad though.\u003cbr\u003e\n\u003c/p\u003e\u003cdiv class=\"lazyYT\" data-youtube-id=\"b5Xncimgqm0\" data-youtube-title=\"Evol Tanks Bursting Promo\" data-width=\"480\" data-height=\"270\" data-parameters=\"feature=oembed\u0026amp;wmode=opaque\"\u003e\u003c/div\u003e","post_number":7,"post_type":1,"updated_at":"2020-03-10T05:41:49.010Z","reply_count":0,"reply_to_post_number":6,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":35.4,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.youtube.com/watch?v=b5Xncimgqm0","internal":false,"reflection":false,"title":"YouTube","clicks":0}],"read":true,"user_title":null,"reply_to_user":{"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36673,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2020-03-10T07:09:39.804Z","cooked":"\u003cp\u003eHave you tried running it in a debugger and/or building the engine with the SAFE_LUA flag? That might be quicker than trying to guess the cause.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2020-03-10T07:09:39.804Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":25,"readers_count":24,"score":20.0,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36676,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-10T17:35:44.269Z","cooked":"\u003cp\u003eSo I rebuilt following the instructions for SAFE_LUA flag. No difference.\u003cbr\u003e\nWhen I try to instantiate the vehicle (using the raycast vehicle script object) in place of the ball I get this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e[Tue Mar 10 13:32:35 2020] ERROR: RaycastVehicle: Incorrect node id = 117 index: 24\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand then a segmentation fault. It’s totally the script object, which I can’t figure out how to convert to just a regular child, since all the movements are not going to go through the script (like Vehicle:FixedUpdate) but instead via the client table (cycling through each client to apply controls).\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2020-03-10T17:35:44.269Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":4.4,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36677,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-11T02:40:50.735Z","cooked":"\u003cp\u003eI took a look \u003ca href=\"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Physics/RaycastVehicle.cpp#L228\" rel=\"nofollow noopener\"\u003ehere\u003c/a\u003e and it looks like it’s here:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eif (!wheelNode)\n{\n    URHO3D_LOGERROR(\"RaycastVehicle: Incorrect node id = \" + String(node_id) + \" index: \" + String(index));\n    continue;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo I’m wondering if this is because the network is duplicating the scene…maybe that’s throwing off the node_id increment somehow.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2020-03-11T11:47:42.751Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":9.4,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Physics/RaycastVehicle.cpp#L228","internal":false,"reflection":false,"title":"Urho3D/RaycastVehicle.cpp at master · urho3d/Urho3D · GitHub","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36678,"name":"Arnis Lielturks","username":"Miegamicis","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png","created_at":"2020-03-11T04:51:48.063Z","cooked":"\u003cp\u003eNow that I think of it I guess the Raycast vehicle is maybe not really ready for replication. Could you try creating that component as a local one?\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2020-03-11T04:51:48.063Z","reply_count":1,"reply_to_post_number":10,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":9.4,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"Arnis Lielturks","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core Developer","title_is_group":false,"reply_to_user":{"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":444,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36679,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-11T05:09:55.215Z","cooked":"\u003cp\u003eI was afraid that was the case. Well, if I do it as:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003elocal raycastVehicle = node:CreateComponent(\"RaycastVehicle\", LOCAL)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewhen creating the vehicle, replacing CreateControllableObject() with CreateVehicle(), the client stops crashing.\u003c/p\u003e\n\u003cp\u003eHowever, the client also doesn’t have a vehicle now.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2020-03-11T05:10:08.287Z","reply_count":1,"reply_to_post_number":11,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":9.4,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Miegamicis","name":"Arnis Lielturks","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36680,"name":"Arnis Lielturks","username":"Miegamicis","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png","created_at":"2020-03-11T05:14:54.527Z","cooked":"\u003cp\u003eI was doing Raycast vehicle network replication a while ago and my solution was to make the static model nodes for body and wheels replicated, but the component itself as local.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2020-03-11T05:15:59.970Z","reply_count":1,"reply_to_post_number":12,"quote_count":0,"incoming_link_count":0,"reads":21,"readers_count":20,"score":9.2,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"Arnis Lielturks","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core Developer","title_is_group":false,"reply_to_user":{"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":444,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36681,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-11T05:19:04.809Z","cooked":"\u003cp\u003eHm okay. The way the sample seems to do it is the host controls all of the clients after taking in their inputs. So would having the raycast vehicle local leave all control up to each client?\u003c/p\u003e\n\u003cp\u003eEDIT: yeah this really isn’t working. If I take the CreateControllableObject ball and create a raycast vehicle, it’ll crash just because of that component, local or not. I’d love to see how you set it up. Otherwise I think I might be doomed to recreate a vehicle manually.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2020-03-11T06:09:26.211Z","reply_count":1,"reply_to_post_number":13,"quote_count":0,"incoming_link_count":1,"reads":22,"readers_count":21,"score":14.4,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Miegamicis","name":"Arnis Lielturks","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36682,"name":"Arnis Lielturks","username":"Miegamicis","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png","created_at":"2020-03-11T07:23:25.511Z","cooked":"\u003cp\u003eI would say that raycast vehicle’s should be only created on the server, clients should only see the replicated scene. Could you show the function that sets up the raycastVehicle? I just checked my other project where I dealt with raycast vehicles and networking and I see that I did just as I said in my previous post, created all the vehicle nodes as replicated, but the raycast components itself - local. One thing to note though is that my implementation was done before the raycast components was introduced in the engine’s core, so the implementation my differ.\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2020-03-11T07:23:25.511Z","reply_count":1,"reply_to_post_number":14,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":24.4,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"Arnis Lielturks","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core Developer","title_is_group":false,"reply_to_user":{"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":444,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36697,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-11T23:00:06.909Z","cooked":"\u003cp\u003eI appreciate all the help. When you say make them as replicated, you just mean make them global, and for the others, appending LOCAL to the end, right?\u003c/p\u003e\n\u003cp\u003eTo make things simpler, I’m sticking as close to the Sample as possible to figure out the vehicle.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003efunction HandleClientConnected(eventType, eventData)\nPlaySound(fxConnect,1)\n    -- When a client connects, assign to scene to begin scene replication\n   local newConnection = eventData[\"Connection\"]:GetPtr(\"Connection\")\n    newConnection.scene = scene_\n\n    -- Then create a controllable object for that client\n    local newObject = CreateControllableObject()\n    local newClient = {}\n    newClient.connection = newConnection\n    newClient.object = newObject\n    table.insert(clients, newClient)\n\n    -- Finally send the object's node ID using a remote event\n  local remoteEventData = VariantMap()\n  remoteEventData[\"ID\"] = newObject.ID\n  newConnection:SendRemoteEvent(\"ClientObjectID\", true, remoteEventData)\nend\n\n\nfunction CreateControllableObject()\n    -- Create the scene node \u0026amp; visual representation. This will be a replicated object\n    local ballNode = scene_:CreateChild(\"Ball\")\n    ballNode.position = Vector3(Random(40.0) - 20.0, 5.0, Random(40.0) - 20.0)\n    ballNode:SetScale(0.5)\n    local ballObject = ballNode:CreateComponent(\"StaticModel\")\n    ballObject.model = cache:GetResource(\"Model\", \"Models/Sphere.mdl\")\n    ballObject.material = cache:GetResource(\"Material\", \"Materials/StoneSmall.xml\")\n\tlocal raycastVehicle=ballNode:CreateComponent(\"RaycastVehicle\", LOCAL)\n    -- Create the physics components\n    local body = ballNode:CreateComponent(\"RigidBody\")\n    body.mass = 1.0\n    body.friction = 1.0\n    -- In addition to friction, use motion damping so that the ball can not accelerate limitlessly\n    body.linearDamping = 0.5\n    body.angularDamping = 0.5\n    local shape = ballNode:CreateComponent(\"CollisionShape\")\n    shape:SetSphere(1.0)\n\n    return ballNode\nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo when a client connects, the server creates a controllable object for them. Clients send in controls and the server loops through these objects and applies those controls accordingly. As soon as I add the raycast vehicle component, whether local or not, I get client crashing.\u003c/p\u003e\n\u003cp\u003eUnless I need to do the raycast vehicle component creation elsewhere? I assume that the server is creating these controllable objects, and so they are all being replicated?\u003c/p\u003e\n\u003cp\u003eEDIT: As a test, I did the following under the connect function, which should only be used by each client…\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003efunction HandleConnect(eventType, eventData)\nPlaySound(fxConnect,1)\n    local address = textEdit.text\n    if address == \"\" then\n        address = \"localhost\" -- Use localhost to connect if nothing else specified\n    end\n\n    -- Connect to server, specify scene to use as a client for replication\n    clientObjectID = 0 -- Reset own object ID from possible previous connection\n    network:Connect(address, SERVER_PORT, scene_)\n\nUpdateButtons()\n\ntest = scene_:CreateChild(\"test\")\nlocal raycastVehicle = test:CreateComponent(\"RaycastVehicle\", LOCAL)\n    \nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSame thing.\u003c/p\u003e","post_number":16,"post_type":1,"updated_at":"2020-03-11T23:27:31.795Z","reply_count":1,"reply_to_post_number":15,"quote_count":0,"incoming_link_count":3,"reads":20,"readers_count":19,"score":24.0,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Miegamicis","name":"Arnis Lielturks","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36700,"name":"Arnis Lielturks","username":"Miegamicis","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png","created_at":"2020-03-12T07:16:45.255Z","cooked":"\u003cp\u003eWas able to quickly reproduce this by doing the same thing in C++. The issue that you are seeing is caused by the unitialized \u003ccode\u003eRaycastVehicle\u003c/code\u003e component. You must properly initialize raycast vehicle like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003elocal raycastVehicle = node:CreateComponent(\"RaycastVehicle\")\nraycastVehicle:Init()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCheck the \u003ca href=\"https://github.com/urho3d/Urho3D/blob/master/bin/Data/LuaScripts/46_RaycastVehicleDemo.lua#L294-L295\" rel=\"nofollow noopener\"\u003ehttps://github.com/urho3d/Urho3D/blob/master/bin/Data/LuaScripts/46_RaycastVehicleDemo.lua#L294-L295\u003c/a\u003e for more details\u003c/p\u003e","post_number":17,"post_type":1,"updated_at":"2020-03-13T00:26:54.965Z","reply_count":1,"reply_to_post_number":16,"quote_count":0,"incoming_link_count":0,"reads":20,"readers_count":19,"score":24.0,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"Arnis Lielturks","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/blob/master/bin/Data/LuaScripts/46_RaycastVehicleDemo.lua#L294-L295","internal":false,"reflection":false,"title":"Urho3D/46_RaycastVehicleDemo.lua at master · urho3d/Urho3D · GitHub","clicks":4}],"read":true,"user_title":"Core Developer","title_is_group":false,"reply_to_user":{"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":444,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":36705,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-13T00:29:48.520Z","cooked":"\u003cp\u003eThat was it!\u003cbr\u003e\nI didn’t realize it required initialization like that. I was getting that line confused with the following function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003efunction Vehicle:Init()\n    -- This function is called only from the main program when initially creating the vehicle, not on scene load\n    local node = self.node\n    local hullObject = node:CreateComponent(\"StaticModel\")\n    self.hullBody = node:CreateComponent(\"RigidBody\")\n    local hullShape = node:CreateComponent(\"CollisionShape\")\n...\nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand so in my consolidation I assumed I didn’t need to call it and forgot about it. I was just assuming creating the raycast vehicle component was all that was required. I get it now.\u003c/p\u003e\n\u003cp\u003eThanks so much for the help!\u003c/p\u003e","post_number":18,"post_type":1,"updated_at":"2020-03-13T00:29:48.520Z","reply_count":0,"reply_to_post_number":17,"quote_count":0,"incoming_link_count":0,"reads":16,"readers_count":15,"score":18.2,"yours":false,"topic_id":5977,"topic_slug":"segfault-on-scenereplication","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Miegamicis","name":"Arnis Lielturks","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[36649,36650,36652,36669,36671,36672,36673,36676,36677,36678,36679,36680,36681,36682,36697,36700,36705]},"timeline_lookup":[[1,989],[4,988],[8,987],[15,986],[17,985]],"suggested_topics":[{"id":7284,"title":"[Solved] Moving a Navigation Mesh","fancy_title":"[Solved] Moving a Navigation Mesh","slug":"solved-moving-a-navigation-mesh","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-06-20T20:10:14.786Z","last_posted_at":"2022-06-21T21:25:22.088Z","bumped":true,"bumped_at":"2022-06-21T21:25:22.088Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":138,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster, Accepted Answer","user":{"id":1228,"username":"PsychoCircuitry","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]},{"id":7296,"title":"What is the purpose of LitBase?","fancy_title":"What is the purpose of LitBase?","slug":"what-is-the-purpose-of-litbase","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-07-15T17:46:35.168Z","last_posted_at":"2022-07-15T18:00:02.695Z","bumped":true,"bumped_at":"2022-07-15T18:00:02.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":93,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":745,"username":"ChunFengTsin","name":"Chun Feng Tsin","avatar_template":"/user_avatar/discourse.urho3d.io/chunfengtsin/{size}/450_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7329,"title":"How to use shared entities","fancy_title":"How to use shared entities","slug":"how-to-use-shared-entities","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-09-19T19:56:34.594Z","last_posted_at":"2022-09-26T14:19:03.545Z","bumped":true,"bumped_at":"2022-09-26T14:19:03.545Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":163,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1205,"username":"Askhento","name":"Askhento","avatar_template":"/user_avatar/discourse.urho3d.io/askhento/{size}/3849_2.png"}},{"extras":"latest","description":"Most Recent Poster, Accepted Answer","user":{"id":1475,"username":"count0","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/count0/{size}/3563_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7250,"title":"CMake freezes with -D options","fancy_title":"CMake freezes with -D options","slug":"cmake-freezes-with-d-options","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-05-02T16:47:01.579Z","last_posted_at":"2022-05-06T08:26:07.285Z","bumped":true,"bumped_at":"2022-05-06T08:26:07.285Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":138,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]}],"tags_descriptions":{},"id":5977,"title":"SegFault on SceneReplication","fancy_title":"SegFault on SceneReplication","posts_count":17,"created_at":"2020-03-08T17:11:15.006Z","views":396,"reply_count":11,"like_count":6,"last_posted_at":"2020-03-13T00:29:48.520Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"segfault-on-scenereplication","category_id":10,"word_count":1635,"deleted_at":null,"user_id":1292,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_5977","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":18,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":17,"username":"Miegamicis","excerpt":"Was able to quickly reproduce this by doing the same thing in C++. The issue that you are seeing is caused by the unitialized RaycastVehicle component. You must properly initialize raycast vehicle like this: \nlocal raycastVehicle = node:CreateComponent(\u0026quot;RaycastVehicle\u0026quot;)\nraycastVehicle:Init()\n\nCheck \u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","post_count":9,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":444,"username":"Miegamicis","name":"Arnis Lielturks","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png","post_count":5,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"},"last_poster":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"},"links":[{"url":"https://github.com/urho3d/Urho3D/blob/master/bin/Data/LuaScripts/46_RaycastVehicleDemo.lua#L294-L295","title":"Urho3D/46_RaycastVehicleDemo.lua at master · urho3d/Urho3D · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":444,"domain":"github.com","root_domain":"github.com"}]}}