{"post_stream":{"posts":[{"id":9075,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2015-12-17T00:52:56.000Z","cooked":"\u003cp\u003eHi guys,\u003cbr\u003e\nI have a bit of a headache converting unsigned char* to float array from a vertex buffer in Urho3d. I cannot figure out the offsets if I have position, normal and uvs coming from vertex data: \u003ccode\u003eunsigned char* vertexData = (unsigned char*)vertexBuffer-\u0026gt;Lock(0, vertexCount);\u003c/code\u003e\u003cbr\u003e\nAt the moment I can only get the positions offset like this: \u003ccode\u003econst Urho3D::Vector3\u0026amp; p = *reinterpret_cast\u0026lt;const Urho3D::Vector3*\u0026gt;(vertexData + i * vertexSize);\u003c/code\u003e\u003cbr\u003e\nIs there any neat way to convert the vertex data to array of floats?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:08:42.727Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":22,"reads":6,"readers_count":5,"score":111.2,"yours":false,"topic_id":1589,"topic_slug":"vertex-data-unsigned-char-to-float-array","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9081,"name":"","username":"Kyle00","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/e47774/{size}.png","created_at":"2015-12-17T05:46:50.000Z","cooked":"\u003cp\u003eSomething like this for other elements?\u003c/p\u003e\n\u003cp\u003e[spoiler][code]\u003cbr\u003e\nm_vGeomData.Clear();\u003cbr\u003e\nconst unsigned char \u003cem\u003epVertexData = (const unsigned char\u003c/em\u003e)pVbuffer-\u0026gt;Lock(0, pVbuffer-\u0026gt;GetVertexCount());\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e// copy geom data\nif ( pVertexData )\n{\n    unsigned uElementMask = pVbuffer-\u0026gt;GetElementMask();\n    unsigned numVertices = pVbuffer-\u0026gt;GetVertexCount();\n    unsigned vertexSize = pVbuffer-\u0026gt;GetVertexSize();\n\n    m_vGeomData.Resize( numVertices );\n\n    for ( unsigned i = 0; i \u0026lt; numVertices; ++i )\n    {\n        unsigned char *pDataAlign = (unsigned char *)(pVertexData + i * vertexSize);\n        GeomData geom;\n\n        if ( uElementMask \u0026amp; MASK_POSITION )\n        {\n            Vector3 \u0026amp;vPos = *reinterpret_cast\u0026lt;Vector3*\u0026gt;( pDataAlign );\n            pDataAlign += sizeof( Vector3 );\n            geom.m_vPosition = vPos;\n        }\n        if ( uElementMask \u0026amp; MASK_NORMAL )\n        {\n            Vector3 \u0026amp;vNorm = *reinterpret_cast\u0026lt;Vector3*\u0026gt;( pDataAlign );\n            pDataAlign += sizeof( Vector3 );\n            geom.m_vNormal = vNorm;\n        }\n        if ( uElementMask \u0026amp; MASK_COLOR )\n        {\n            pDataAlign += sizeof( unsigned );\n        }\n        if ( uElementMask \u0026amp; MASK_TEXCOORD1 )\n        {\n            Vector2 \u0026amp;vUV = *reinterpret_cast\u0026lt;Vector2*\u0026gt;( pDataAlign );\n            pDataAlign += sizeof( Vector2 );\n            geom.m_vUV = vUV;\n        }\n        if ( uElementMask \u0026amp; MASK_TEXCOORD2 )\n        {\n            pDataAlign += sizeof( Vector2 );\n        }\n        if ( uElementMask \u0026amp; MASK_CUBETEXCOORD1 )\n        {\n            pDataAlign += sizeof( Vector2 );\n        }\n        if ( uElementMask \u0026amp; MASK_CUBETEXCOORD2 )\n        {\n            pDataAlign += sizeof( Vector2 );\n        }\n        if ( uElementMask \u0026amp; MASK_TANGENT )\n        {\n            Vector4 \u0026amp;tangent = *reinterpret_cast\u0026lt;Vector4*\u0026gt;( pDataAlign );\n            geom.m_vTangent = tangent;\n        }\n\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e[/code][/spoiler]\u003c/p\u003e\n\u003cp\u003eFor (float*), just reinterpret_cast to \u0026lt;float*\u0026gt;\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:08:43.178Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":6,"readers_count":5,"score":1.2,"yours":false,"topic_id":1589,"topic_slug":"vertex-data-unsigned-char-to-float-array","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":352,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9083,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-12-17T08:12:26.000Z","cooked":"\u003cp\u003eI believe the code is going to be ugly in any case, and you’ll just need to try to come up with the least ugly casting. Certainly I don’t recommend any copying to a float array, because that would cost performance. Also note that not all elements are floats, for example colors and blend indices. You can look for existing code e.g. in AnimatedModel.cpp where it applies morphs to a vertex buffer.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:08:43.336Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":7,"readers_count":6,"score":1.4,"yours":false,"topic_id":1589,"topic_slug":"vertex-data-unsigned-char-to-float-array","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9088,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2015-12-17T11:28:50.000Z","cooked":"\u003cp\u003eThanks a lot guys. Kyle00 your solution works well I couldn’t figure it out on my own. The confusing bit is that the VertexBuffer Lock method gives us the vertex data as unsigned char*  the same as the GetRawData method in the Geometry class, but when we need to set the data back using the SetData method we need a float array. Can we just have a new method GetData that returns a float array it will make code a lot neater or just an overload of GetRawData method of the Geometry class? Please correct me if I am missing something.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:08:43.887Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":6,"readers_count":5,"score":1.2,"yours":false,"topic_id":1589,"topic_slug":"vertex-data-unsigned-char-to-float-array","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9094,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-12-17T14:00:07.000Z","cooked":"\u003cp\u003eVertexBuffer::SetData() accepts a void pointer, meaning any type is fine. Are you thinking of setting shader uniforms?\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:08:44.304Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":7,"readers_count":6,"score":1.4,"yours":false,"topic_id":1589,"topic_slug":"vertex-data-unsigned-char-to-float-array","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[9075,9081,9083,9088,9094]},"timeline_lookup":[[1,2533]],"suggested_topics":[{"id":7183,"title":"Automating Lua Bindings","fancy_title":"Automating Lua Bindings","slug":"automating-lua-bindings","posts_count":15,"reply_count":4,"highest_post_number":16,"image_url":null,"created_at":"2022-02-03T17:02:43.829Z","last_posted_at":"2022-08-17T18:54:38.644Z","bumped":true,"bumped_at":"2022-08-17T18:54:38.644Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":16,"views":700,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1447,"username":"Batch","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f17d59/{size}.png"}}]},{"id":7218,"title":"Jolt Physics: physics engine from Horizon Forbidden West open-sourced","fancy_title":"Jolt Physics: physics engine from Horizon Forbidden West open-sourced","slug":"jolt-physics-physics-engine-from-horizon-forbidden-west-open-sourced","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-03-14T15:23:58.296Z","last_posted_at":"2022-03-21T03:18:16.555Z","bumped":true,"bumped_at":"2022-03-21T03:18:16.555Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":10,"views":439,"category_id":16,"featured_link":"https://github.com/jrouwe/JoltPhysics","featured_link_root_domain":"github.com","has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]},{"id":7196,"title":"Windows Urho3D build with -DURHO3D_OPENGL=1 using rake","fancy_title":"Windows Urho3D build with -DURHO3D_OPENGL=1 using rake","slug":"windows-urho3d-build-with-durho3d-opengl-1-using-rake","posts_count":18,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-02-20T12:49:25.777Z","last_posted_at":"2022-02-24T18:24:11.679Z","bumped":true,"bumped_at":"2022-02-24T18:24:11.679Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":254,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":421,"username":"Lunarovich","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/lunarovich/{size}/2097_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7211,"title":"Particle is low","fancy_title":"Particle is low","slug":"particle-is-low","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-03-03T13:52:14.991Z","last_posted_at":"2022-04-20T05:18:36.122Z","bumped":true,"bumped_at":"2022-04-20T05:18:36.122Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":232,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1503,"username":"tianlv777","name":"zerrrrr","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/a4c791/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]},{"id":7309,"title":"Example of custom model format loader?","fancy_title":"Example of custom model format loader?","slug":"example-of-custom-model-format-loader","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2022-08-10T13:34:32.831Z","last_posted_at":"2022-08-12T13:54:56.766Z","bumped":true,"bumped_at":"2022-08-12T13:54:56.766Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":129,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1529,"username":"hunkalloc","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/hunkalloc/{size}/3817_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":1589,"title":"Vertex data unsigned char* to float array","fancy_title":"Vertex data unsigned char* to float array","posts_count":5,"created_at":"2015-12-17T00:52:56.000Z","views":554,"reply_count":0,"like_count":0,"last_posted_at":"2015-12-17T14:00:07.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"vertex-data-unsigned-char-to-float-array","category_id":16,"word_count":428,"deleted_at":null,"user_id":151,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1589","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":151,"username":"sabotage3d","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":352,"username":"Kyle00","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/e47774/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":151,"username":"sabotage3d","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png"},"last_poster":{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png"}}}