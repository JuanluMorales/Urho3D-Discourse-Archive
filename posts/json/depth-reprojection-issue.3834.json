{"post_stream":{"posts":[{"id":22348,"name":"","username":"Don","avatar_template":"/user_avatar/discourse.urho3d.io/don/{size}/755_2.png","created_at":"2017-12-11T02:54:20.705Z","cooked":"\u003cp\u003eGood evening,\u003c/p\u003e\n\u003cp\u003eRecently Iâ€™ve been working on an SSAO implementation. One of the most integral parts of this shader is the ability to convert from screen space to world space and back. Finding screen space is simple since there is already a function in place. For the opposite conversion, I copied the code used to find position in the deferred shaders. To test this, I set up a post-process that takes the point of a fragment, converts it to world space, and then reprojects it back to the screen. It seems to work perfectly, except for the depth.\u003c/p\u003e\n\u003cp\u003eWhen comparing the raw depth buffer value and the depth after both conversions, they are slightly different. Both are [0, 1], but the reprojected one is always lower.\u003c/p\u003e\n\u003cp\u003e            \u003cdiv class=\"onebox imgur-album\"\u003e\n              \u003ca href=\"https://imgur.com/a/3cdEi\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\n                \u003cspan class=\"outer-box\" style=\"width:600px\"\u003e\n                  \u003cspan class=\"inner-box\"\u003e\n                    \u003cspan class=\"album-title\"\u003e[Album] Depth Inconsistency\u003c/span\u003e\n                  \u003c/span\u003e\n                \u003c/span\u003e\n                \u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/a/a44d8439f8f52efaf5ba5c46a586cc3d2a69e7ad.jpg\" title=\"Depth Inconsistency\" height=\"315\" width=\"600\"\u003e\n              \u003c/a\u003e\n            \u003c/div\u003e\n\u003c/p\u003e\n\u003cp\u003eWhy are these values different? What function can I use to map these values to the ones in the depth buffer? (I am already using ReconstructDepth) Thanks in advance to anyone who knows about the underlying processes here. I can post code if it would be helpful.\u003c/p\u003e\n\u003cp\u003e-Don\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-12-11T02:54:20.705Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":23,"reads":44,"readers_count":43,"score":183.8,"yours":false,"topic_id":3834,"topic_slug":"depth-reprojection-issue","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://imgur.com/a/3cdEi","internal":false,"reflection":false,"title":"Depth Inconsistency - Album on Imgur","clicks":6}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":723,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22520,"name":"","username":"Don","avatar_template":"/user_avatar/discourse.urho3d.io/don/{size}/755_2.png","created_at":"2017-12-19T03:23:05.073Z","cooked":"\u003cp\u003eI figured out that the way to do this is to use ToScreenPos instead of ToScreenPosPreDiv in order to convert back. However, you have to look at the w component divided by the far clip instead of the z component.\u003c/p\u003e\n\u003cp\u003eSSAO is almost working now!\u003cbr\u003e\n\u003cimg src=\"//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/6/6eb09d65d2bd6822c35d19744162f3ded23b0d5c.jpg\" alt=\"Screenshot from 2017-12-18 18-38-47\" width=\"690\" height=\"366\"\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-12-19T03:23:54.762Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":28,"readers_count":27,"score":80.6,"yours":false,"topic_id":3834,"topic_slug":"depth-reprojection-issue","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":723,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true}],"stream":[22348,22520]},"timeline_lookup":[[1,1808],[2,1800]],"suggested_topics":[{"id":7107,"title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u003cSDL/SDL_gamecontroller.h\u003e","fancy_title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u0026lt;SDL/SDL_gamecontroller.h\u0026gt;","slug":"error-sdl-sdl-gamecontroller-h-no-such-file-or-directory-include-sdl-sdl-gamecontroller-h","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2021-12-21T15:29:52.810Z","last_posted_at":"2021-12-22T15:32:44.818Z","bumped":true,"bumped_at":"2021-12-22T15:32:44.818Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":271,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7146,"title":"How create affordable comfortable and modern terrain?","fancy_title":"How create affordable comfortable and modern terrain?","slug":"how-create-affordable-comfortable-and-modern-terrain","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-01-21T15:20:08.910Z","last_posted_at":"2022-01-21T21:51:58.799Z","bumped":true,"bumped_at":"2022-01-21T22:03:14.896Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7156,"title":"Manual Mesh Part Animation (e.g. Rotate a propeller)","fancy_title":"Manual Mesh Part Animation (e.g. Rotate a propeller)","slug":"manual-mesh-part-animation-e-g-rotate-a-propeller","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-01-26T23:50:29.343Z","last_posted_at":"2022-01-27T05:31:02.766Z","bumped":true,"bumped_at":"2022-01-27T05:31:02.766Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":155,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7074,"title":"First Person and 3rd person camera and water reflections","fancy_title":"First Person and 3rd person camera and water reflections","slug":"first-person-and-3rd-person-camera-and-water-reflections","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-01T18:37:28.669Z","last_posted_at":"2021-12-01T21:19:51.519Z","bumped":true,"bumped_at":"2021-12-01T21:19:51.519Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":158,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]}],"tags_descriptions":{},"id":3834,"title":"Depth Reprojection Issue","fancy_title":"Depth Reprojection Issue","posts_count":2,"created_at":"2017-12-11T02:54:20.582Z","views":517,"reply_count":0,"like_count":5,"last_posted_at":"2017-12-19T03:23:05.073Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"depth-reprojection-issue","category_id":10,"word_count":238,"deleted_at":null,"user_id":723,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/a/a44d8439f8f52efaf5ba5c46a586cc3d2a69e7ad.jpg","slow_mode_seconds":0,"draft":null,"draft_key":"topic_3834","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":[{"max_width":null,"max_height":null,"width":600,"height":315,"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/a/a44d8439f8f52efaf5ba5c46a586cc3d2a69e7ad.jpg"}],"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":2,"username":"Don","excerpt":"I figured out that the way to do this is to use ToScreenPos instead of ToScreenPosPreDiv in order to convert back. However, you have to look at the w component divided by the far clip instead of the z component. \nSSAO is almost working now! \n[Screenshot from 2017-12-18 18-38-47]"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":723,"username":"Don","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/don/{size}/755_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":723,"username":"Don","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/don/{size}/755_2.png"},"last_poster":{"id":723,"username":"Don","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/don/{size}/755_2.png"},"links":[{"url":"https://imgur.com/a/3cdEi","title":"Depth Inconsistency - Album on Imgur","internal":false,"attachment":false,"reflection":false,"clicks":6,"user_id":723,"domain":"imgur.com","root_domain":"imgur.com"}]}}