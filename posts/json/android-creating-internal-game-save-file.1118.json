{"post_stream":{"posts":[{"id":6459,"name":"","username":"Lumak","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png","created_at":"2015-06-14T03:19:07.000Z","cooked":"\u003cp\u003eAndroid how-to create internal game save file.\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"bbcode-b\"\u003ePart 1 - modifying \\Android\\src\\org\\libsdl\\app\\SDLActivity.java\u003c/span\u003e\u003cbr\u003e\nCode:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003epublic class SDLActivity extends Activity {\n    \n    . . .\n\n    protected void onCreate(Bundle savedInstanceState) {\n        Log.v(\"SDL\", \"onCreate():\" + mSingleton);\n        super.onCreate(savedInstanceState);\n\n        SDLActivity.initialize();\n        // So we can call stuff from static callbacks\n        mSingleton = this;\n\n        // **called after SDLActivity.initialize()\n        if ( !hasInternalStoragePrivateFile() )\n        {\n            createInternalStoragePrivateFile();\n        }\n\n        . . .\n    }\n\n    protected void createInternalStoragePrivateFile() {\n        // Create a path where we will place our private file on external\n        // storage.\n        File file = new File(((Activity) SDLActivity.getContext()).getFilesDir().getAbsolutePath(), \"MyGameSave.dat\");\n\n\n        try {\n            // Very simple code to copy a picture from the application's\n            // resource into the external file.  Note that this code does\n            // no error checking, and assumes the picture is small (does not\n            // try to copy it in chunks).  Note that if external storage is\n            // not currently mounted this will silently fail.\n            OutputStream os = new FileOutputStream(file);\n            byte[] data =  \"some data\".getBytes();\n            os.write(data);\n            os.close();\n            Log.i(\"FileSystem\", \"MyGameSave.dat created\");\n\n        } catch (IOException e) {\n            // Unable to create file, likely because external storage is\n            // not currently mounted.\n            Log.w(\"FileSystem\", \"Error writing \" + file, e);\n        }\n\n    }\n    protected boolean hasInternalStoragePrivateFile() {\n        // Get path for the file on external storage.  If external\n        // storage is not currently mounted this will fail.\n        File file = new File(((Activity) SDLActivity.getContext()).getFilesDir().getAbsolutePath(), \"MyGameSave.dat\");\n        if (file != null) {\n            return file.exists();\n        }\n        return false;\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cspan class=\"bbcode-b\"\u003ePart 2 - modifying your App\u003c/span\u003e\u003cbr\u003e\nCode:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e#include \u0026lt;Urho3D/IO/FileSystem.h\u0026gt; \n\nvoid MyApp::Start()\n{\n    // Execute base class startup\n    Sample::Start();\n\n    // file i/o test\n    FileSystem *pFileSystem = new FileSystem( context_ );\n\n    if ( pFileSystem )\n    {\n        String filename = pFileSystem-\u0026gt;GetUserDocumentsDir() + \"MyGameSave.dat\";\n\n        char buff[100];\n        SDL_RWops *pFD = SDL_RWFromFile( filename.CString(), \"r+\" );\n        \n        // test 1 - read original data\n        if ( pFD )\n        {\n            SDL_Log( \"FileSys() SUCCESSFULLY Opened = %s\\n\", filename.CString() );\n\n            int isizeRead = (int)SDL_RWread( pFD, buff, 1, 100 );\n            int iclosed = SDL_RWclose( pFD );\n\n             SDL_Log( \"FileSys() data read = %d, closed=%d\\n\", isizeRead, iclosed  );\n\n             if ( isizeRead \u0026gt; 0 )\n             {\n                 buff[isizeRead] = '\\0';\n                 SDL_Log( \"FileSys() data = {%s}\\n\", buff  );\n             }\n             SDL_FreeRW( pFD );\n        }\n        else\n        {\n            SDL_Log( \"FileSys() FAILED to open=%s\\n\", filename.CString() );\n        }\n\n        // test 2 - write to file\n        pFD = SDL_RWFromFile( filename.CString(), \"r+\" );\n\n        if ( pFD )\n        {\n            strcpy( buff, \"some data changed and added this\" );\n\n            //Sint64 i64Val = SDL_RWseek( pFD, 0, RW_SEEK_SET );\n            int iwritelen = SDL_RWwrite( pFD, buff, 1, strlen( buff ) );\n            if ( iwritelen \u0026lt;= 0 )\n            {\n                SDL_Log( \"FileSys() RWrite() ERROR = %s\\n\", SDL_GetError() );\n            }\n            int iclosed = SDL_RWclose( pFD );\n\n            SDL_Log( \"FileSys() wrote data = %d, closed = %d\\n\", iwritelen, iclosed );\n\n            SDL_FreeRW( pFD );\n        }\n\n        // test 3 - re-read what was written\n        pFD = SDL_RWFromFile( filename.CString(), \"r+\" );\n\n        if ( pFD )\n        {\n            int isizeRead = (int)SDL_RWread( pFD, buff, 1, 100 );\n            SDL_Log( \"FileSys() re-reading wrote data =%d\\n\", isizeRead  );\n\n            if ( isizeRead \u0026gt; 0 )\n            {\n                buff[isizeRead] = '\\0';\n                SDL_Log( \"FileSys() data ={ %s }\\n\", buff  );\n            }\n\n            SDL_RWclose( pFD );\n            SDL_FreeRW( pFD );\n        }\n    }\n   . . .\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOutput\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e06-13 19:59:24.351    4388-4388/? I/FileSystem? MyGameSave.dat created\n06-13 19:59:31.285    4388-4457/? I/SDL/APP? FileSys() SUCCESSFULLY Opened = /data/data/com.github.urho3d/files/MyGameSave.dat\n06-13 19:59:31.285    4388-4457/? I/SDL/APP? FileSys() data read = 9, closed=0\n06-13 19:59:31.285    4388-4457/? I/SDL/APP? FileSys() data = {some data}\n06-13 19:59:31.285    4388-4457/? I/SDL/APP? FileSys() wrote data = 32, closed = 0\n06-13 19:59:31.285    4388-4457/? I/SDL/APP? FileSys() re-reading wrote data =32\n06-13 19:59:31.285    4388-4457/? I/SDL/APP? FileSys() data ={ some data changed and added this }\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:05:33.464Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":27,"reads":11,"readers_count":10,"score":152.2,"yours":false,"topic_id":1118,"topic_slug":"android-creating-internal-game-save-file","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":256,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":6467,"name":"","username":"GoogleBot42","avatar_template":"/user_avatar/discourse.urho3d.io/googlebot42/{size}/62_2.png","created_at":"2015-06-15T21:05:06.000Z","cooked":"\u003cp\u003eNeat! Thanks this could be very useful for me.  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:05:34.091Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":10,"readers_count":9,"score":7.0,"yours":false,"topic_id":1118,"topic_slug":"android-creating-internal-game-save-file","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":197,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[6459,6467]},"timeline_lookup":[[1,2719],[2,2717]],"suggested_topics":[{"id":7103,"title":":test_tube: DebugRenderer as GUI","fancy_title":":test_tube: DebugRenderer as GUI","slug":"debugrenderer-as-gui","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-17T02:25:06.606Z","last_posted_at":"2021-12-18T01:09:27.738Z","bumped":true,"bumped_at":"2021-12-18T01:09:27.738Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"üß™ DebugRenderer as GUI","tags_descriptions":{},"like_count":4,"views":267,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7110,"title":"Resource fetch define","fancy_title":"Resource fetch define","slug":"resource-fetch-define","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-27T12:28:55.126Z","last_posted_at":"2021-12-27T17:00:37.699Z","bumped":true,"bumped_at":"2021-12-27T17:00:37.699Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":7,"views":184,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7120,"title":"Log Error Once Macro","fancy_title":"Log Error Once Macro","slug":"log-error-once-macro","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-01-04T02:24:37.857Z","last_posted_at":"2022-01-04T02:24:37.925Z","bumped":true,"bumped_at":"2022-01-04T02:24:37.925Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":143,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7099,"title":":fallen_leaf: Polynomials \u0026 Harmonics","fancy_title":":fallen_leaf: Polynomials \u0026amp; Harmonics","slug":"polynomials-harmonics","posts_count":6,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2021-12-13T05:06:04.641Z","last_posted_at":"2021-12-27T23:27:39.489Z","bumped":true,"bumped_at":"2021-12-27T23:27:39.489Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"üçÇ Polynomials \u0026 Harmonics","tags_descriptions":{},"like_count":6,"views":392,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7220,"title":"[Full Time or Contract] 3D Engine Developer","fancy_title":"[Full Time or Contract] 3D Engine Developer","slug":"full-time-or-contract-3d-engine-developer","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-03-14T16:53:36.321Z","last_posted_at":"2022-03-14T16:53:36.399Z","bumped":true,"bumped_at":"2022-03-14T16:53:36.399Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":241,"category_id":15,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1511,"username":"KognitivSpark","name":"Ryan Groom","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/bb73d2/{size}.png"}}]}],"tags_descriptions":{},"id":1118,"title":"Android creating internal game save file","fancy_title":"Android creating internal game save file","posts_count":2,"created_at":"2015-06-14T03:19:07.000Z","views":521,"reply_count":0,"like_count":1,"last_posted_at":"2015-06-15T21:05:06.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"android-creating-internal-game-save-file","category_id":13,"word_count":574,"deleted_at":null,"user_id":256,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1118","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":197,"username":"GoogleBot42","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/googlebot42/{size}/62_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":256,"username":"Lumak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":256,"username":"Lumak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png"},"last_poster":{"id":197,"username":"GoogleBot42","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/googlebot42/{size}/62_2.png"}}}