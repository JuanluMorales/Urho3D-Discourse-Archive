{"post_stream":{"posts":[{"id":45772,"name":"","username":"Jens","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","created_at":"2022-10-27T17:25:15.320Z","cooked":"\u003cp\u003eHi,\u003c/p\u003e\n\u003cp\u003eI’m a bit confused by Zones, specifically how the AmbientColor LightMask is supposed to work. The code is UrhoSharp, but I think the principles should be the same as Urho3D. According to the Urho documentation it is just the object’s and zone’s lightmasks that matter. According to the metadata it is the scene light’s and zone’s lightmask. From a day’s experimenting it seems to me the scene light’s + object’s lightmasks work as expected. As soon as a Zone is added nothing seems to work as expected.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUrho Doc - Zones\u003cbr\u003e\nLike lights, zones also define a lightmask (with all bits set by default.) An object’s final lightmask for light culling is determined by ANDing the object lightmask and the zone lightmask.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDrawable MetaData:\u003cbr\u003e\n//     Return light mask. Or Set light mask. Is and’ed with light’s and zone’s light\u003cbr\u003e\n//     mask to see if the object should be lit.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAnother thing I found strange is that the scene with no lights and no Zone is close to black. If a Zone is added, yet the lightmask set to zero, the scene is a grey colour. I would expect it to still be black. No doubt I’ve misunderstood something here.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2022-10-27T17:25:15.320Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":3.8,"yours":false,"topic_id":7343,"topic_slug":"zones-ambientcolor-lightmask","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1456,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45775,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2022-10-28T09:51:20.867Z","cooked":"\u003cp\u003eOkay, so we have a lot of masks going on.\u003c/p\u003e\n\u003cp\u003eIgnore \u003ccode\u003eViewMask\u003c/code\u003e for now, it’s irrelevant.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eLightMask\u003c/code\u003e and \u003ccode\u003eShadowMask\u003c/code\u003e affect \u003cstrong\u003eonly\u003c/strong\u003e \u003ccode\u003eLight\u003c/code\u003e components and how they shade geometry.\u003cbr\u003e\nThese masks are checked like \u003ccode\u003eobject_geometry.LightOrShadowMask \u0026amp; ligth_source.LightOrShadowMask \u0026amp; zone_of_the_object.LightOrShadowMask\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eSo, basically, mask of the \u003ccode\u003eLight\u003c/code\u003e component is used as is, and mask of the geometry is modulated by the \u003ccode\u003eZone\u003c/code\u003e containing the geometry. The common use case is to e.g. disable sun for indoor zone and all objects that belong to it, without manually setting mask for every single object.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eZoneMask\u003c/code\u003e is used only to determine whether the object belongs to \u003ccode\u003eZone\u003c/code\u003e or not.\u003cbr\u003e\n\u003ccode\u003eAmbientColor\u003c/code\u003e and all other properties of \u003ccode\u003eZone\u003c/code\u003e are applied based on the containing Zone only. So, only object position and ZoneMask intersection between object and Zone matters here.\u003cbr\u003e\n\u003ccode\u003eLightMask\u003c/code\u003e and \u003ccode\u003eShadowMask\u003c/code\u003e are irrelevant there.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2022-10-28T09:52:55.670Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":14,"readers_count":13,"score":17.8,"yours":false,"topic_id":7343,"topic_slug":"zones-ambientcolor-lightmask","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":45776,"name":"","username":"Jens","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","created_at":"2022-10-28T17:16:58.872Z","cooked":"\u003cp\u003eThanks for the detailed reply.\u003cbr\u003e\nI’ve come to realise this is going to take some time to get it right. Bit of a shock, up until now I’ve used diffuse materials, and the scene lighting was perfect with a single directional light and Zone set at 0.5 ambient colour. So, I thought lighting, at least, is not gonna be a problem. Now I’m using diffuse + normals (procedural plaster material), and it’s got a whole lot more difficult.\u003cbr\u003e\nThanks again.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2022-10-28T17:16:58.872Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":13,"readers_count":12,"score":2.6,"yours":false,"topic_id":7343,"topic_slug":"zones-ambientcolor-lightmask","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1456,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[45772,45775,45776]},"timeline_lookup":[[1,26],[3,25]],"suggested_topics":[{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7104,"title":"Bug in my partial-model copying code","fancy_title":"Bug in my partial-model copying code","slug":"bug-in-my-partial-model-copying-code","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5367e370779d64989e5c3ff2c1ebfb0689908c87.png","created_at":"2021-12-17T03:50:19.405Z","last_posted_at":"2021-12-17T13:50:49.662Z","bumped":true,"bumped_at":"2021-12-17T13:50:49.662Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7176,"title":"Orthographic scene slowing down when zooming out","fancy_title":"Orthographic scene slowing down when zooming out","slug":"orthographic-scene-slowing-down-when-zooming-out","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-01-30T10:05:50.218Z","last_posted_at":"2022-01-30T10:05:50.294Z","bumped":true,"bumped_at":"2022-01-30T10:05:50.294Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":127,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1351,"username":"Haukinger","name":"Haukinger","avatar_template":"/user_avatar/discourse.urho3d.io/haukinger/{size}/3670_2.png"}}]},{"id":7179,"title":"Need help with cusomized PBR renderpath","fancy_title":"Need help with cusomized PBR renderpath","slug":"need-help-with-cusomized-pbr-renderpath","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-02-01T09:04:58.692Z","last_posted_at":"2022-02-03T17:35:34.174Z","bumped":true,"bumped_at":"2022-02-03T17:35:34.174Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":13,"views":205,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster, Accepted Answer","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7081,"title":"Install Urho3D Library - Windows 10 - rake build - \"project does not exist\"","fancy_title":"Install Urho3D Library - Windows 10 - rake build - \u0026ldquo;project does not exist\u0026rdquo;","slug":"install-urho3d-library-windows-10-rake-build-project-does-not-exist","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-03T03:06:40.974Z","last_posted_at":"2021-12-03T17:53:10.844Z","bumped":true,"bumped_at":"2021-12-03T17:53:10.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":190,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]}],"tags_descriptions":{},"id":7343,"title":"Zone's AmbientColor LightMask","fancy_title":"Zone\u0026rsquo;s AmbientColor LightMask","posts_count":3,"created_at":"2022-10-27T17:25:15.253Z","views":72,"reply_count":0,"like_count":1,"last_posted_at":"2022-10-28T17:16:58.872Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"zones-ambientcolor-lightmask","category_id":10,"word_count":433,"deleted_at":null,"user_id":1456,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_7343","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":2,"username":"Eugene","excerpt":"Okay, so we have a lot of masks going on. \nIgnore ViewMask for now, it’s irrelevant. \nLightMask and ShadowMask affect only Light components and how they shade geometry. \nThese masks are checked like object_geometry.LightOrShadowMask \u0026amp; ligth_source.LightOrShadowMask \u0026amp; zone_of_the_object.LightOrShadow\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"},"last_poster":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}}}