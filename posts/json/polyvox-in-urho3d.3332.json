{"post_stream":{"posts":[{"id":19332,"name":"Tahri Turner","username":"Tahri","avatar_template":"/user_avatar/discourse.urho3d.io/tahri/{size}/560_2.png","created_at":"2017-07-09T01:21:08.966Z","cooked":"\u003cp\u003eHello Urho3D Community! First post here been but I’ve been lurking for a while. Also wanted to say thanks to the Urho3D Team for fantastic work!\u003c/p\u003e\n\u003cp\u003eI’m working on an application that uses voxels for a research project. Naturally I drifted towards polyvox as a good library to start from. I’ve gotten all the basic framework together from the latest tutorial here: \u003ca href=\"https://bitbucket.org/volumesoffun/polyvox/src/c986c9f0b1189737a182fbc8d4f4696436f972c1/documentation/tutorial1.rst?at=develop\u0026amp;fileviewer=file-view-default\" rel=\"nofollow noopener\"\u003ePV Tutorial\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eSince the tutorial caters to OpenGL I’m trying to fill in the blanks as best I can. I’m not native to 3D programming or voxels so I’m really just trying to get something to work in the simplest form.\u003c/p\u003e\n\u003cp\u003eWhat I have to get my mesh data into urho3D is below but i can’t imagine the process is so straight forward.\u003c/p\u003e\n\u003cp\u003eCurrently I’m getting an pointer error with my vertex buffer.\u003c/p\u003e\n\u003cp\u003eThanks, any help is much appreciated! \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e\n\u003cdetails\u003e\n\u003csummary\u003e\nworld.h\u003c/summary\u003e\n\u003cblockquote\u003e\u003c/blockquote\u003e\n\u003cp\u003eclass WorldGen\u003cbr\u003e\n{\u003cbr\u003e\npublic:\u003cbr\u003e\nSharedPtr ib_;\u003cbr\u003e\nSharedPtr vb_;\u003cbr\u003e\nSharedPtr geom_;\u003cbr\u003e\nSharedPtr testModel;\u003cbr\u003e\nWorldGen(void);\u003cbr\u003e\n~WorldGen(void);\u003cbr\u003e\nbool worldLoaded;\u003cbr\u003e\n// Convert a PolyVox mesh to OpenGL index/vertex buffers. Inlined because it’s templatised.\u003cbr\u003e\nvoid createSphereInVolume(PolyVox::RawVolume\u0026lt;uint8_t\u0026gt;\u0026amp; volData, float fRadius);\u003cbr\u003e\nvoid render(Urho3D::Context* c, Urho3D::Scene* s);\u003cbr\u003e\ntemplate typename MeshType\u003cbr\u003e\nvoid addMesh(const MeshType\u0026amp; surfaceMesh,Urho3D::Context Context_, const PolyVox::Vector3DInt32\u0026amp; translation = PolyVox::Vector3DInt32(0, 0, 0), float scale = 1.0f)\u003cbr\u003e\n{\u003cbr\u003e\n//Handle Buffers\u003cbr\u003e\nvb_ = (new VertexBuffer(context_));\u003cbr\u003e\nvb_-\u0026gt;SetShadowed(true);\u003cbr\u003e\nvb_-\u0026gt;SetSize(surfaceMesh.getNoOfIndices(), MASK_POSITION);\u003cbr\u003e\nvb_-\u0026gt;SetData(surfaceMesh.getRawVertexData());\u003cbr\u003e\n//context_-\u0026gt;vb_ = vb;\u003cbr\u003e\nib_ = (new IndexBuffer(context_));\u003cbr\u003e\nib_-\u0026gt;SetShadowed(true);\u003cbr\u003e\nib_-\u0026gt;SetSize(surfaceMesh.getNoOfVertices(), false);\u003cbr\u003e\nib_-\u0026gt;SetData(surfaceMesh.getRawIndexData());\u003cbr\u003e\n//context_-\u0026gt;ib_ = ib\u003cbr\u003e\nworldLoaded = true;\u003cbr\u003e\n}\u003cbr\u003e\n};\u003c/p\u003e\n\u003c/details\u003e\n\u003cdetails\u003e\n\u003csummary\u003e\nworld.cpp\u003c/summary\u003e\n\u003cblockquote\u003e\u003c/blockquote\u003e\n\u003cp\u003eWorldGen::WorldGen(void) : \tworldLoaded(false)\u003cbr\u003e\n{\u003cbr\u003e\n}\u003cbr\u003e\nWorldGen::~WorldGen(void)\u003cbr\u003e\n{\u003cbr\u003e\n}\u003cbr\u003e\nvoid WorldGen::createSphereInVolume(PolyVox::RawVolume\u0026lt;uint8_t\u0026gt;\u0026amp; volData, float fRadius)\u003cbr\u003e\n{\u003cbr\u003e\n//This vector hold the position of the center of the volume\u003cbr\u003e\nPolyVox::Vector3DFloat v3dVolCenter(volData.getWidth() / 2, volData.getHeight() / 2, volData.getDepth() / 2);\u003cbr\u003e\n//This three-level for loop iterates over every voxel in the volume\u003cbr\u003e\nfor (int z = 0; z \u0026lt; volData.getDepth(); z++)\u003cbr\u003e\n{\u003cbr\u003e\nfor (int y = 0; y \u0026lt; volData.getHeight(); y++)\u003cbr\u003e\n{\u003cbr\u003e\nfor (int x = 0; x \u0026lt; volData.getWidth(); x++)\u003cbr\u003e\n{\u003cbr\u003e\n//Store our current position as a vector…\u003cbr\u003e\nPolyVox::Vector3DFloat v3dCurrentPos(x, y, z);\u003cbr\u003e\n//And compute how far the current position is from the center of the volume\u003cbr\u003e\nfloat fDistToCenter = (v3dCurrentPos - v3dVolCenter).length();\u003cbr\u003e\nuint8_t uVoxelValue = 0;\u003cbr\u003e\n//If the current voxel is less than ‘radius’ units from the center then we make it solid.\u003cbr\u003e\nif (fDistToCenter \u0026lt;= fRadius)\u003cbr\u003e\n{\u003cbr\u003e\n//Our new voxel value\u003cbr\u003e\nuVoxelValue = 255;\u003cbr\u003e\n}\u003cbr\u003e\n//Wrte the voxel value into the volume\t\u003cbr\u003e\nvolData.setVoxel(x, y, z, uVoxelValue);\u003cbr\u003e\n}\u003cbr\u003e\n}\u003cbr\u003e\n}\u003cbr\u003e\n}\u003cbr\u003e\n//\u003cbr\u003e\nvoid WorldGen::render(Urho3D::Context* context_, Urho3D::Scene* scene_)\u003cbr\u003e\n{\u003cbr\u003e\ngeom_-\u0026gt;SetVertexBuffer(0, vb_);\u003cbr\u003e\ngeom_-\u0026gt;SetIndexBuffer(ib_);\u003cbr\u003e\ngeom_-\u0026gt;SetDrawRange(TRIANGLE_LIST, 0, ib_-\u0026gt;GetIndexCount());\u003cbr\u003e\ntestModel-\u0026gt;SetNumGeometries(1);\u003cbr\u003e\ntestModel-\u0026gt;SetNumGeometryLodLevels(0, 1);\u003cbr\u003e\ntestModel-\u0026gt;SetGeometry(0, 0, geom_);\u003cbr\u003e\n// Define the model buffers and bounding box\u003cbr\u003e\nPODVector emptyMorphRange;\u003cbr\u003e\n//testModel-\u0026gt;SetVertexBuffers(dlvbVector, emptyMorphRange, emptyMorphRange);\u003cbr\u003e\n//testModel-\u0026gt;SetIndexBuffers(dlibVector);\u003cbr\u003e\ntestModel-\u0026gt;SetBoundingBox(BoundingBox(Vector3(-1.0f, -1.0f, 0.0f), Vector3(1.0f, 1.0f, 0.0f)));\u003cbr\u003e\nNode* testnodea = scene_-\u0026gt;CreateChild(“testsModel”);\u003cbr\u003e\ntestnodea-\u0026gt;SetScale(Vector3(1.0f, 1.0f, 1.0f));\u003cbr\u003e\nStaticModel* testObjecta = testnodea-\u0026gt;CreateComponent();\u003cbr\u003e\ntestObjecta-\u0026gt;SetModel(testModel);\u003cbr\u003e\n//testObjecta-\u0026gt;SetMaterial(cache-\u0026gt;GetResource(“Materials/Stone.xml”));\u003cbr\u003e\ntestnodea-\u0026gt;SetPosition(Vector3(-1.0f, 5.0f, 2.0f));\u003c/p\u003e\n\u003cp\u003e}\u003c/p\u003e\n\u003c/details\u003e\n\u003cdetails\u003e\n\u003csummary\u003e\nmain.cpp\u003c/summary\u003e\n\u003cblockquote\u003e\u003c/blockquote\u003e\n\u003cp\u003evoid CharacterDemo::TestArea()\u003cbr\u003e\n{\u003cbr\u003e\nResourceCache* cache = GetSubsystem();\u003cbr\u003e\nPolyVox::RawVolume\u0026lt;uint8_t\u0026gt; volData(PolyVox::Region(PolyVox::Vector3DInt32(0, 0, 0), PolyVox::Vector3DInt32(63, 63, 63)));\u003cbr\u003e\nworld_-\u0026gt;createSphereInVolume(volData, 30);\u003cbr\u003e\nauto mesh = PolyVox::extractCubicMesh(\u0026amp;volData, volData.getEnclosingRegion());\u003cbr\u003e\n//auto mesh = extractMarchingCubesMesh(\u0026amp;volData, volData.getEnclosingRegion());\u003cbr\u003e\nauto decodedMesh = PolyVox::decodeMesh(mesh);\u003cbr\u003e\nworld_-\u0026gt;addMesh(decodedMesh, context_);\u003cbr\u003e\n//Let us know that the world mesh has been decoded\u003cbr\u003e\n//world_-\u0026gt;worldLoaded = true; \t\u003cbr\u003e\n}\u003c/p\u003e\n\u003c/details\u003e","post_number":1,"post_type":1,"updated_at":"2017-07-09T18:25:03.267Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":73,"reads":69,"readers_count":68,"score":378.8,"yours":false,"topic_id":3332,"topic_slug":"polyvox-in-urho3d","display_username":"Tahri Turner","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":4,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://bitbucket.org/volumesoffun/polyvox/src/c986c9f0b1189737a182fbc8d4f4696436f972c1/documentation/tutorial1.rst?at=develop\u0026fileviewer=file-view-default","internal":false,"reflection":false,"title":"volumesoffun / PolyVox / source / documentation / tutorial1.rst — Bitbucket","clicks":42}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":768,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26719,"name":"","username":"bloop","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/ecccb3/{size}.png","created_at":"2018-11-28T16:22:54.546Z","cooked":"\u003cp\u003eHello!\u003c/p\u003e\n\u003cp\u003eI am no specialist and I might well be completely wrong, but it seems that you are using the wrong size for setting up the vertex and index buffer\u003cbr\u003e\nit should be\u003cbr\u003e\nvb_-\u0026gt;SetSize(surfaceMesh.getNoOfVertices(), MASK_POSITION);\u003cbr\u003e\nand\u003cbr\u003e\nib_-\u0026gt;SetSize(surfaceMesh.getNoOfIndices(), false);\u003cbr\u003e\nlet me know if that works, I am also looking at polyvox and Urho\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-11-28T16:22:54.546Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":36,"readers_count":35,"score":7.2,"yours":false,"topic_id":3332,"topic_slug":"polyvox-in-urho3d","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1082,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[19332,26719]},"timeline_lookup":[[1,1963],[2,1456]],"suggested_topics":[{"id":7186,"title":"Best way to do Blob Shadows in Urho","fancy_title":"Best way to do Blob Shadows in Urho","slug":"best-way-to-do-blob-shadows-in-urho","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/2/22e3dc1892512375cae09bf84fd92071a1ae27d8.png","created_at":"2022-02-05T04:59:31.388Z","last_posted_at":"2022-02-05T13:29:22.054Z","bumped":true,"bumped_at":"2022-02-05T13:31:44.299Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":179,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7112,"title":"What is the proper way to add more source files(.cpp and .h) to a project?","fancy_title":"What is the proper way to add more source files(.cpp and .h) to a project?","slug":"what-is-the-proper-way-to-add-more-source-files-cpp-and-h-to-a-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-27T18:18:21.946Z","last_posted_at":"2021-12-28T12:19:43.514Z","bumped":true,"bumped_at":"2021-12-28T12:19:43.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":195,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1498,"username":"Tryout","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/85f322/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7200,"title":"Urho3D just building if I check \"use SHARED libraries\"","fancy_title":"Urho3D just building if I check \u0026ldquo;use SHARED libraries\u0026rdquo;","slug":"urho3d-just-building-if-i-check-use-shared-libraries","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-02-22T20:02:48.835Z","last_posted_at":"2022-02-23T15:38:33.698Z","bumped":true,"bumped_at":"2022-02-23T15:54:07.879Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":165,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7209,"title":"Need Compute Shader for Heightmap Normals Calculation","fancy_title":"Need Compute Shader for Heightmap Normals Calculation","slug":"need-compute-shader-for-heightmap-normals-calculation","posts_count":14,"reply_count":5,"highest_post_number":14,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f3699392311fc006b02311f4ac539017ce2ba760.jpeg","created_at":"2022-02-26T04:46:13.776Z","last_posted_at":"2022-03-10T00:07:52.127Z","bumped":true,"bumped_at":"2022-03-10T00:07:52.127Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":410,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7243,"title":"Android compile fails","fancy_title":"Android compile fails","slug":"android-compile-fails","posts_count":5,"reply_count":2,"highest_post_number":5,"image_url":null,"created_at":"2022-04-25T08:46:07.947Z","last_posted_at":"2022-05-06T08:22:51.592Z","bumped":true,"bumped_at":"2022-05-06T08:22:51.592Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":181,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":3332,"title":"Polyvox in Urho3D","fancy_title":"Polyvox in Urho3D","posts_count":2,"created_at":"2017-07-09T01:21:08.858Z","views":663,"reply_count":0,"like_count":0,"last_posted_at":"2018-11-28T16:22:54.546Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"polyvox-in-urho3d","category_id":10,"word_count":672,"deleted_at":null,"user_id":768,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_3332","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":768,"username":"Tahri","name":"Tahri Turner","avatar_template":"/user_avatar/discourse.urho3d.io/tahri/{size}/560_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":1082,"username":"bloop","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/ecccb3/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":768,"username":"Tahri","name":"Tahri Turner","avatar_template":"/user_avatar/discourse.urho3d.io/tahri/{size}/560_2.png"},"last_poster":{"id":1082,"username":"bloop","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/ecccb3/{size}.png"},"links":[{"url":"https://bitbucket.org/volumesoffun/polyvox/src/c986c9f0b1189737a182fbc8d4f4696436f972c1/documentation/tutorial1.rst?at=develop\u0026fileviewer=file-view-default","title":"volumesoffun / PolyVox / source / documentation / tutorial1.rst — Bitbucket","internal":false,"attachment":false,"reflection":false,"clicks":42,"user_id":768,"domain":"bitbucket.org","root_domain":"bitbucket.org"}]}}