{"post_stream":{"posts":[{"id":5222,"name":"","username":"vivienneanthony","avatar_template":"/user_avatar/discourse.urho3d.io/vivienneanthony/{size}/942_2.png","created_at":"2015-03-06T14:34:57.000Z","cooked":"\u003cp\u003eHello,\u003c/p\u003e\n\u003cp\u003eI am able to do animation but the problem I have is switching. If I use PlayExclusive. It tends to lose the animation and if I use Play the animation doesn’t repeat I thought maybe it is the weight but it’s not the case. I seems maybe I have the animations on the same layer and Urho3D might be getting confused.\u003c/p\u003e\n\u003cp\u003eI’m not sure.\u003c/p\u003e\n\u003cp\u003eVivienne\u003c/p\u003e\n\u003cp\u003e[code]\u003cbr\u003e\nAnimatedModel* objectNodemodel=objectNode-\u0026gt;CreateComponent();\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e/// Add Animation Controller\nobjectNode-\u0026gt;CreateComponent\u0026lt;AnimationController\u0026gt;();\n\n/// Setup mesh and mesh details nodes and stactic models\nif(gender\u0026lt;51)\n{\n       ///       Code for character \n\n\n    /// Add animation state\n    Animation * IdleAnimation = new Animation(context_);\n    IdleAnimation = cache-\u0026gt;GetResource\u0026lt;Animation\u0026gt;(\"Resources/Models/standardbipedolianfemaleIdleAction.ani\");\n\n    objectNodemodel -\u0026gt; AddAnimationState(IdleAnimation);\n    IdleAnimation -\u0026gt; SetAnimationName (\"IdleAnimation\");\n\n    /// Add Walking Animation\n    Animation * AddAnimation = new Animation(context_);\n    AddAnimation = cache-\u0026gt;GetResource\u0026lt;Animation\u0026gt;(\"Resources/Models/standardbipedolianFemaleWalkAction.ani\");\n\n    objectNodemodel -\u0026gt; AddAnimationState(AddAnimation);\n    AddAnimation -\u0026gt; SetAnimationName (\"WalkAnimation\");\n\n    /// Get Controller\n    AnimationController * playermeshAnimationController1 = objectNode -\u0026gt; GetComponent\u0026lt;AnimationController\u0026gt;();\n\n    /// Set Morph Weight\n    playermeshAnimationController1-\u0026gt; SetWeight(\"IdleAnimation\",1);\n    playermeshAnimationController1-\u0026gt; SetTime(\"IdleAnimation\",1.89753);\n\n    playermeshAnimationController1-\u0026gt; SetWeight(\"WalkAnimation\",1);\n    playermeshAnimationController1-\u0026gt; SetTime(\"WalkAnimation\",2.45833);\n\n    playermeshAnimationController1-\u0026gt;Play(\"IdleAnimation\",0,1,0);[/code]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCode in FixedUpdate\u003c/p\u003e\n\u003cp\u003e[code]    // Movement in four directions\u003cbr\u003e\nif (controls_.IsDown(CTRL_FORWARD|CTRL_BACK|CTRL_LEFT|CTRL_RIGHT))\u003cbr\u003e\n{\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e  /// code for controls\n\n    /// If in air, allow control, but slower than when on ground\n    body-\u0026gt;ApplyImpulse(rot * moveDir * (softGrounded ? MOVE_FORCE : INAIR_MOVE_FORCE));\n\n    animCtrl -\u0026gt; StopAll();\n\n    animCtrl -\u0026gt; PlayExclusive(\"WalkAnimation\", 0, true, 0);\n}\nelse\n{\n\n    if(softGrounded)\n    {\n        if(!animCtrl-\u0026gt;IsPlaying(\"IdleAnimation\"))\n        {\n            animCtrl -\u0026gt; PlayExclusive(\"IdleAnimation\", 0, true, 0);\n        }\n    }\n}[/code]\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:04:00.934Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":200,"reads":31,"readers_count":30,"score":1008.2,"yours":false,"topic_id":906,"topic_slug":"how-does-animation-switching-work","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":88,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":5225,"name":"","username":"codingmonkey","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","created_at":"2015-03-06T17:59:50.000Z","cooked":"\u003cp\u003ei’m do not use the AnimationController yet\u003cbr\u003e\nbut i guess that the play function need full path to ani file \u003ca href=\"http://urho3d.github.io/documentation/1.32/class_urho3_d_1_1_animation_controller.html\"\u003eurho3d.github.io/documentation/1 … oller.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003ePlayExclusive\u003c/p\u003e\n\u003caside class=\"quote\"\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePlay an animation, set full target weight and fade out all other animations on the same layer. Name must be the full resource name. Return true on success. \u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003efor anim states (i usually use they with own FSM construction):\u003cbr\u003e\nset to IdleAnimation state lower priority layer (0). SetWeight(1.0f) - always. prevState = CharacterState and now CharacterState = IDLE\u003cbr\u003e\nset to walkAnimation state high priority layer(1)  0+1. SetWeight(1.0f) - only then you press WASD buttons(or you also may add fadeWeight for few sec).  prevState =  CharacterState and now CharacterState  = WALK\u003c/p\u003e\n\u003cp\u003ein update (timeStep)\u003cbr\u003e\n{\u003cbr\u003e\n//STAGE1. clear prev states\u003cbr\u003e\nif (preState == WALK)\u003cbr\u003e\n{\u003cbr\u003e\nwalkAnimation. SetWeight(0);\u003cbr\u003e\nwalkAnimation.SetTime(0.0f);\u003cbr\u003e\n}\u003cbr\u003e\nelse if (preState == IDLE)\u003cbr\u003e\n{\u003cbr\u003e\n// do not needed to reset anything this state are default for play\u003cbr\u003e\n}\u003cbr\u003e\nelse if (…)\u003cbr\u003e\n{\u003c/p\u003e\n\u003cp\u003e}\u003cbr\u003e\n…\u003c/p\u003e\n\u003cp\u003e//STAGE2. anim current selected state\u003cbr\u003e\nif ( CharacterState == IDLE)\u003cbr\u003e\n{\u003cbr\u003e\nIdleAnimation. SetWeight(1.0f);\u003cbr\u003e\nIdleAnimation.AddTime(timeStep);\u003cbr\u003e\n}\u003cbr\u003e\nelse if (CharacterState == WALK)\u003cbr\u003e\n{\u003cbr\u003e\nwalkAnimation. SetWeight(1.0f);\u003cbr\u003e\nwalkAnimation.AddTime(timeStep);\u003cbr\u003e\n}\u003cbr\u003e\n…\u003cbr\u003e\nmore complex example how i switch animStates\u003cbr\u003e\n\u003ca href=\"https://github.com/MonkeyFirst/FH/blob/master/Featheredhat/BigBot.cpp\"\u003egithub.com/MonkeyFirst/FH/blob/ … BigBot.cpp\u003c/a\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:04:01.136Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":28,"readers_count":27,"score":35.6,"yours":false,"topic_id":906,"topic_slug":"how-does-animation-switching-work","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/MonkeyFirst/FH/blob/master/Featheredhat/BigBot.cpp","internal":false,"reflection":false,"title":"FH/BigBot.cpp at master · MonkeyFirst/FH · GitHub","clicks":9},{"url":"http://urho3d.github.io/documentation/1.32/class_urho3_d_1_1_animation_controller.html","internal":false,"reflection":false,"title":"Urho3D - Documentation","clicks":7}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":148,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":5227,"name":"","username":"Mike","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png","created_at":"2015-03-06T20:37:18.000Z","cooked":"\u003cp\u003eMaybe you should use a fadeTime different than zero and not use weights.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:04:01.301Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":23,"readers_count":22,"score":9.6,"yours":false,"topic_id":906,"topic_slug":"how-does-animation-switching-work","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Contributor","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":9,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":5288,"name":"","username":"vivienneanthony","avatar_template":"/user_avatar/discourse.urho3d.io/vivienneanthony/{size}/942_2.png","created_at":"2015-03-11T14:29:57.000Z","cooked":"\u003cp\u003e[quote=“codingmonkey”]i’m do not use the AnimationController yet\u003cbr\u003e\nbut i guess that the play function need full path to ani file \u003ca href=\"http://urho3d.github.io/documentation/1.32/class_urho3_d_1_1_animation_controller.html\" rel=\"nofollow noopener\"\u003eurho3d.github.io/documentation/1 … oller.html\u003c/a\u003e\u003cbr\u003e\n[/quote]\u003c/p\u003e\n\u003cp\u003eI went to the state changing method directly. I tried AnimationController but once that I read that it deletes animations. It couldn’t be used because I preload the animations with the character.\u003c/p\u003e\n\u003cp\u003eUnless there was a flag or function to tell AnimationController not to delete I’ll do the animation switching directly. Maybe copy AnimationController and modify so it was it doesn’t delete preloaded animations to make life easier.\u003c/p\u003e\n\u003cp\u003eI updated Git with the rough animations added.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:04:05.521Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":1,"reads":22,"readers_count":21,"score":9.4,"yours":false,"topic_id":906,"topic_slug":"how-does-animation-switching-work","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://urho3d.github.io/documentation/1.32/class_urho3_d_1_1_animation_controller.html","internal":false,"reflection":false,"clicks":5}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":88,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[5222,5225,5227,5288]},"timeline_lookup":[[1,2819],[2,2818],[4,2814]],"suggested_topics":[{"id":7107,"title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u003cSDL/SDL_gamecontroller.h\u003e","fancy_title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u0026lt;SDL/SDL_gamecontroller.h\u0026gt;","slug":"error-sdl-sdl-gamecontroller-h-no-such-file-or-directory-include-sdl-sdl-gamecontroller-h","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2021-12-21T15:29:52.810Z","last_posted_at":"2021-12-22T15:32:44.818Z","bumped":true,"bumped_at":"2021-12-22T15:32:44.818Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":271,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7112,"title":"What is the proper way to add more source files(.cpp and .h) to a project?","fancy_title":"What is the proper way to add more source files(.cpp and .h) to a project?","slug":"what-is-the-proper-way-to-add-more-source-files-cpp-and-h-to-a-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-27T18:18:21.946Z","last_posted_at":"2021-12-28T12:19:43.514Z","bumped":true,"bumped_at":"2021-12-28T12:19:43.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":195,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1498,"username":"Tryout","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/85f322/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7146,"title":"How create affordable comfortable and modern terrain?","fancy_title":"How create affordable comfortable and modern terrain?","slug":"how-create-affordable-comfortable-and-modern-terrain","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-01-21T15:20:08.910Z","last_posted_at":"2022-01-21T21:51:58.799Z","bumped":true,"bumped_at":"2022-01-21T22:03:14.896Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]}],"tags_descriptions":{},"id":906,"title":"How does animation switching work?","fancy_title":"How does animation switching work?","posts_count":4,"created_at":"2015-03-06T14:34:57.000Z","views":807,"reply_count":0,"like_count":0,"last_posted_at":"2015-03-11T14:29:57.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"how-does-animation-switching-work","category_id":10,"word_count":581,"deleted_at":null,"user_id":88,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_906","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":4,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":88,"username":"vivienneanthony","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/vivienneanthony/{size}/942_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":9,"username":"Mike","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"moderator":true,"trust_level":2},{"id":148,"username":"codingmonkey","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":88,"username":"vivienneanthony","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/vivienneanthony/{size}/942_2.png"},"last_poster":{"id":88,"username":"vivienneanthony","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/vivienneanthony/{size}/942_2.png"},"links":[{"url":"https://github.com/MonkeyFirst/FH/blob/master/Featheredhat/BigBot.cpp","title":"FH/BigBot.cpp at master · MonkeyFirst/FH · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":9,"user_id":148,"domain":"github.com","root_domain":"github.com"},{"url":"http://urho3d.github.io/documentation/1.32/class_urho3_d_1_1_animation_controller.html","title":"Urho3D - Documentation","internal":false,"attachment":false,"reflection":false,"clicks":7,"user_id":148,"domain":"urho3d.github.io","root_domain":"urho3d.github.io"},{"url":"http://urho3d.github.io/documentation/1.32/class_urho3_d_1_1_animation_controller.html","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":88,"domain":"urho3d.github.io","root_domain":"urho3d.github.io"}]}}