{"post_stream":{"posts":[{"id":4161,"name":"","username":"setzer22","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","created_at":"2015-01-16T22:29:10.000Z","cooked":"\u003cp\u003eHello everyone!\u003c/p\u003e\n\u003cp\u003eI‚Äôve got problems with registering integer class variables into the script API. I have this class:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eclass UnitStats : public LogicComponent { \n\tOBJECT(UnitStats)  \nprivate:\n        ...\npublic:\n        ...\n    String unitName;\n\tint HP;\n\tint moveRange;\n\tint attackRange;\n\tint minAttackRange;\n        ...\n\n   void BindScriptMethods(asIScriptEngine *engine) {\n       ...\n       r = engine-\u0026gt;RegisterObjectProperty(\"String\", \"String unitName\", asOFFSET(UnitStats,unitName)); \n       assert(r \u0026gt;= 0) ;\n       r = engine-\u0026gt;RegisterObjectProperty(\"int\", \"int HP\", asOFFSET(UnitStats,HP)); \n       assert(r \u0026gt;= 0) ;\n       ...\n   }\n};\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see I‚Äôm registering an int  and a String variables, the String object property is properly defined and works, but somehow the int one is giving me trouble.\u003c/p\u003e\n\u003cp\u003eThe code compiles just fine but crashes on execution. The RegisterObjectProperty method makes some kind of invalid memory access.\u003c/p\u003e\n\u003cp\u003eThis is the gdb‚Äôs backtrace:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eProgram received signal SIGSEGV, Segmentation fault.\n0x0000000000ef93a0 in asCString::AddressOf (this=0x8)\n    at URHO3D_HOME/Source/ThirdParty/AngelScript/source/as_string.cpp:114\n114\t\tif( length \u0026lt;= 11 )\n(gdb) backtrace\n#0  0x0000000000ef93a0 in asCString::AddressOf (this=0x8)\n    at URHO3D_HOME/Source/ThirdParty/AngelScript/source/as_string.cpp:114\n#1  0x0000000000c169fb in asCScriptEngine::RegisterObjectProperty (this=0x18e1fb0, obj=0x10ce793 \"int\", declaration=0x10ccd0b \"int HP\", \n    byteOffset=168) at URHO3D_HOME/Source/ThirdParty/AngelScript/source/as_scriptengine.cpp:1452\n#2  0x00000000007f37cf in UnitStats::BindScriptMethods (engine=0x18e1fb0)\n    at PROJECT_HOME/Source/Components/Unit/Stats/UnitStats.cpp:49\n#3  0x00000000008087a3 in CustomComponents::BindScriptMethods (engine=0x18e1fb0)\n    at PROJECT_HOME/Source/CustomPlayer/CustomComponents.cpp:39\n#4  0x00000000008076da in MainApplication::Start (this=0x16ab4a0)\n    at PROJECT_HOME/Source/CustomPlayer/MainApplication.cpp:67\n#5  0x0000000000b4be3f in Urho3D::Application::Run (this=0x16ab4a0)\n    at URHO3D_HOME/Source/Engine/Engine/Application.cpp:77\n#6  0x000000000080730c in RunApplication () at PROJECT_HOMESource/CustomPlayer/MainApplication.cpp:42\n#7  0x00007ffff696c040 in __libc_start_main () from /usr/lib/libc.so.6\n#8  0x00000000007ee0bf in _start ()\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI‚Äôve omitted paths for your convenience, don‚Äôt mind those URHO3D_HOME/PROJECT_HOME lines.\u003c/p\u003e\n\u003cp\u003eThere‚Äôs not much more I can say about it, note that I‚Äôve just copied the example from AngelScript‚Äôs documentation: \u003ca href=\"http://www.angelcode.com/angelscript/sdk/docs/manual/doc_reg_objprop.html\" data-bbcode=\"true\" rel=\"nofollow noopener\"\u003ehttp://www.angelcode.com/angelscript/sdk/docs/manual/doc_reg_objprop.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe obvious workaround is define getter/setter functions and register those. I‚Äôm pretty sure that would work as I‚Äôve, at least used the ‚Äúint‚Äù data type before while registering methods. Nevertheless I‚Äôd like to avoid doing that so the interface is the same on AS and C++.\u003c/p\u003e\n\u003cp\u003eI don‚Äôt get why this isn‚Äôt working. Any clues?\u003c/p\u003e\n\u003cp\u003eThanks!\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"bbcode-b\"\u003eEDIT\u003c/span\u003e Also, as another (remotely-possible-)relevant fact all those class fields are being registered as component attributes as well.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:02:42.677Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":21,"reads":5,"readers_count":4,"score":106.0,"yours":false,"topic_id":756,"topic_slug":"registering-an-int-as-an-object-property","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://www.angelcode.com/angelscript/sdk/docs/manual/doc_reg_objprop.html","internal":false,"reflection":false,"title":"AngelScript: Registering object properties","clicks":2}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":125,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[4161]},"timeline_lookup":[[1,2867]],"suggested_topics":[{"id":7098,"title":"Cartoon Fire Effect","fancy_title":"Cartoon Fire Effect","slug":"cartoon-fire-effect","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2021-12-10T04:08:49.887Z","last_posted_at":"2021-12-12T02:49:51.076Z","bumped":true,"bumped_at":"2021-12-12T02:49:51.076Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":274,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7185,"title":"Update Ray ray direction","fancy_title":"Update Ray ray direction","slug":"update-ray-ray-direction","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-02-05T00:28:45.414Z","last_posted_at":"2022-02-05T20:19:51.238Z","bumped":true,"bumped_at":"2022-02-05T20:19:51.238Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7200,"title":"Urho3D just building if I check \"use SHARED libraries\"","fancy_title":"Urho3D just building if I check \u0026ldquo;use SHARED libraries\u0026rdquo;","slug":"urho3d-just-building-if-i-check-use-shared-libraries","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-02-22T20:02:48.835Z","last_posted_at":"2022-02-23T15:38:33.698Z","bumped":true,"bumped_at":"2022-02-23T15:54:07.879Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":165,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]}],"tags_descriptions":{},"id":756,"title":"Registering an int as an object property","fancy_title":"Registering an int as an object property","posts_count":1,"created_at":"2015-01-16T22:29:10.000Z","views":245,"reply_count":0,"like_count":0,"last_posted_at":"2015-01-16T22:29:10.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"registering-an-int-as-an-object-property","category_id":10,"word_count":409,"deleted_at":null,"user_id":125,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_756","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":1,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png"},"last_poster":{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png"},"links":[{"url":"http://www.angelcode.com/angelscript/sdk/docs/manual/doc_reg_objprop.html","title":"AngelScript: Registering object properties","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":125,"domain":"www.angelcode.com","root_domain":"angelcode.com"}]}}