{"post_stream":{"posts":[{"id":41482,"name":"","username":"CE184","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","created_at":"2021-01-09T01:47:31.502Z","cooked":"\u003cp\u003e\u003cstrong\u003eI found the component Update() function is still executed one time after the component/node is removed. And the override base class function is not executed at that place.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eI have a base component class for character control:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eclass CharacterControllerBase : public LogicComponent {\n URHO3D_OBJECT(CharacterControllerBase, LogicComponent)\n ...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd another derived class\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eclass CharacterControllerPlayer : public CharacterControllerBase {\n URHO3D_OBJECT(CharacterControllerPlayer, CharacterControllerBase)\n ...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the base class, Update() function is:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid CharacterControllerBase::Update(float timestep) {\n  LogicComponent::Update(timestep);\n  // ...\n  spdlog::debug(\"base charcter_control_input_ type: {}\",\n                magic_enum::enum_name(character_control_input_-\u0026gt;GetInputType()));\n  if (character_control_input_-\u0026gt;GetInputType() == kPlayer) {\n    spdlog::debug(\"base charcter_control_input_: {}\", character_control_input_);\n    // ...\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd in the derived class, Update() function is:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid CharacterControllerPlayer::Update(float timestep) {\n  CharacterControllerBase::Update(timestep);  // not called?\n  spdlog::debug(\"charcter_control_input_: {}\", character_control_input_);\n  // ...\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDuring the program, I created this derived component \u003ccode\u003eCharacterControllerPlayer\u003c/code\u003e to attached to the character node, and then remove the whole node when character dies:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e  spdlog::debug(\"{}: Character died.\", node_-\u0026gt;GetName().CString());\n  node-\u0026gt;Remove();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI am confused by the log dump\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e// Before node is removed, Update() execution seems normal.\n[2021-01-06 10:26:42.531] [debug] base charcter_control_input_ type: kPlayer\n[2021-01-06 10:26:42.531] [debug] base charcter_control_input_: 0x7fc0dd9a7c60\n[2021-01-06 10:26:42.531] [debug] charcter_control_input_: 0x7fc0dd9a7c60\n...\n[2021-01-06 10:26:42.584] [debug] Player: Character died.\n[2021-01-06 10:26:42.586] [debug] charcter_control_input_: 0x0\n// Notice character_control_input_ is another component attached to the node and is nullptr after node is removed.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter player dies and the node is removed. The \u003ccode\u003eCharacterControllerPlayer::Update()\u003c/code\u003e \u003cstrong\u003eis still called!\u003c/strong\u003e However, the base class function \u003ccode\u003eCharacterControllerBase::Update(timestep);\u003c/code\u003e \u003cstrong\u003eis in the override function but is not called?!\u003c/strong\u003e\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2021-01-09T01:47:54.627Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":29,"readers_count":28,"score":10.8,"yours":false,"topic_id":6655,"topic_slug":"weird-update-execution-after-node-being-removed","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1384,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41484,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2021-01-09T03:50:02.311Z","cooked":"\u003cp\u003eIn the \u003ccode\u003e// ...\u003c/code\u003e in the base class do you return early at some point? Maybe on some null pointer check or something?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2021-01-09T03:56:53.110Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":25.8,"yours":false,"topic_id":6655,"topic_slug":"weird-update-execution-after-node-being-removed","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":41485,"name":"","username":"CE184","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","created_at":"2021-01-09T03:56:47.799Z","cooked":"\u003cp\u003eYou are right! the check death logic is there and \u003ccode\u003enode-\u0026gt;Remove()\u003c/code\u003e is called during that time. Stupid me.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2021-01-09T03:56:47.799Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":5.8,"yours":false,"topic_id":6655,"topic_slug":"weird-update-execution-after-node-being-removed","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1384,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[41482,41484,41485]},"timeline_lookup":[[1,683]],"suggested_topics":[{"id":7112,"title":"What is the proper way to add more source files(.cpp and .h) to a project?","fancy_title":"What is the proper way to add more source files(.cpp and .h) to a project?","slug":"what-is-the-proper-way-to-add-more-source-files-cpp-and-h-to-a-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-27T18:18:21.946Z","last_posted_at":"2021-12-28T12:19:43.514Z","bumped":true,"bumped_at":"2021-12-28T12:19:43.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":195,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1498,"username":"Tryout","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/85f322/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7181,"title":"StaticModelGroup - Are ShaderParameters Shared?","fancy_title":"StaticModelGroup - Are ShaderParameters Shared?","slug":"staticmodelgroup-are-shaderparameters-shared","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-02-02T09:31:19.658Z","last_posted_at":"2022-02-02T17:06:24.059Z","bumped":true,"bumped_at":"2022-02-02T17:06:24.059Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":120,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7086,"title":"Handling CrowdAgents that get stuck","fancy_title":"Handling CrowdAgents that get stuck","slug":"handling-crowdagents-that-get-stuck","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-04T01:26:23.062Z","last_posted_at":"2021-12-05T04:37:54.143Z","bumped":true,"bumped_at":"2021-12-05T04:37:54.143Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]}],"tags_descriptions":{},"id":6655,"title":"Weird Update() execution after node being removed","fancy_title":"Weird Update() execution after node being removed","posts_count":3,"created_at":"2021-01-09T01:47:31.393Z","views":168,"reply_count":1,"like_count":1,"last_posted_at":"2021-01-09T03:56:47.799Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"weird-update-execution-after-node-being-removed","category_id":10,"word_count":300,"deleted_at":null,"user_id":1384,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6655","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":2,"username":"SirNate0","excerpt":"In the // ... in the base class do you return early at some point? Maybe on some null pointer check or something?"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1384,"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1384,"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png"},"last_poster":{"id":1384,"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png"}}}