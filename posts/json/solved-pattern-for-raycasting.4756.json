{"post_stream":{"posts":[{"id":26957,"name":"","username":"I3DB","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","created_at":"2018-12-17T19:43:38.713Z","cooked":"\u003cp\u003eIs there a good pattern for raycast, so a node only gets raycasted once per some time period, say for 3 or 5 seconds?\u003c/p\u003e\n\u003cp\u003eIn particular a pattern using only Urho library calls?\u003c/p\u003e\n\u003cp\u003eWhat I’ve been doing is using a background task to throw away repeated raycasts to the same node, but the code is tightly bound to the underlying operating system, and have been calling Octree.RaycastSingle in the Update method.\u003c/p\u003e\n\u003cp\u003eSo just wondering if there is an Urho way to do it without going to the underlying OS for coding up raycasts.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-12-19T23:31:06.674Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":123,"reads":56,"readers_count":55,"score":626.2,"yours":false,"topic_id":4756,"topic_slug":"solved-pattern-for-raycasting","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1086,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26982,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-12-19T09:05:40.643Z","cooked":"\u003cp\u003eSubscribe to \u003ccode\u003eE_UPDATE\u003c/code\u003e and do work there. Make a \u003ccode\u003eTimer\u003c/code\u003e object and check elapsed milliseconds on each call. When more than 5s have passed - do raycast and reset timer.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-12-19T09:05:40.643Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":50,"readers_count":49,"score":10.0,"yours":false,"topic_id":4756,"topic_slug":"solved-pattern-for-raycasting","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26994,"name":"","username":"I3DB","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","created_at":"2018-12-19T15:56:24.528Z","cooked":"\u003cp\u003eYes, that will limit the raycasting to once every 5 seconds.\u003c/p\u003e\n\u003cp\u003eBut I’d like to be able to raycast different objects, sometimes several objects per second. But don’t want any object to be raycasted twice within the five seconds. When I code up the detection on each new object/node, the code is not so clean.\u003c/p\u003e\n\u003cp\u003eCurrently just holding onto a list of raycasted objects and verifying the list.\u003c/p\u003e\n\u003cp\u003eBut what I was hoping for is some flag on the nodes (like a dirty flag) that the Update routine can quickly check to know the object is already raycasted.\u003c/p\u003e\n\u003cp\u003eBeing rather new to Urho and not really a game developer, some of the gaming concepts embedded into Urho’s objects are still unfamiliar. So thought I’d throw out this question to find if there is some specific mechanism built into the engine that can be used, much like a dirty flag, say an IsRaycasted flag on the Node, a threadsafe IsRaycasted.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-12-19T15:56:24.528Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":47,"readers_count":46,"score":14.4,"yours":false,"topic_id":4756,"topic_slug":"solved-pattern-for-raycasting","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1086,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26996,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2018-12-19T18:29:54.975Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"I3DB\" data-post=\"3\" data-topic=\"4756\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/40.png\" class=\"avatar\"\u003e I3DB:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBut I’d like to be able to raycast different objects, sometimes several objects per second. But don’t want any object to be raycasted twice within the five seconds\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhy not just set viewMask or collisionMask ?\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-12-19T18:29:54.975Z","reply_count":1,"reply_to_post_number":3,"quote_count":1,"incoming_link_count":0,"reads":44,"readers_count":43,"score":28.8,"yours":false,"topic_id":4756,"topic_slug":"solved-pattern-for-raycasting","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26999,"name":"","username":"I3DB","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","created_at":"2018-12-19T19:12:41.296Z","cooked":"\u003cp\u003eFound this sample code:\u003cbr\u003e\n\u003caside class=\"onebox githubblob\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/HoloLens/05_Physics/Progam.cs#L53\" target=\"_blank\" rel=\"nofollow noopener\"\u003egithub.com\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ch4\u003e\u003ca href=\"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/HoloLens/05_Physics/Progam.cs#L53\" target=\"_blank\" rel=\"nofollow noopener\"\u003examarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/HoloLens/05_Physics/Progam.cs#L53\u003c/a\u003e\u003c/h4\u003e\n\u003cpre class=\"onebox\"\u003e\u003ccode class=\"lang-cs\"\u003e\u003col class=\"start lines\" start=\"43\" style=\"counter-reset: li-counter 42 ;\"\u003e\n\u003cli\u003e\n\u003c/li\u003e\n\u003cli\u003e\t\t\t// Create a bucket\u003c/li\u003e\n\u003cli\u003e\t\t\tbucketNode = Scene.CreateChild();\u003c/li\u003e\n\u003cli\u003e\t\t\tbucketNode.SetScale(0.1f);\u003c/li\u003e\n\u003cli\u003e\n\u003c/li\u003e\n\u003cli\u003e\t\t\t// Create instructions\u003c/li\u003e\n\u003cli\u003e\t\t\ttextNode = bucketNode.CreateChild();\u003c/li\u003e\n\u003cli\u003e\t\t\tvar text3D = textNode.CreateComponent\u0026lt;Text3D\u0026gt;();\u003c/li\u003e\n\u003cli\u003e\t\t\ttext3D.HorizontalAlignment = HorizontalAlignment.Center;\u003c/li\u003e\n\u003cli\u003e\t\t\ttext3D.VerticalAlignment = VerticalAlignment.Top;\u003c/li\u003e\n\u003cli class=\"selected\"\u003e\t\t\ttext3D.ViewMask = 0x80000000; //hide from raycasts\u003c/li\u003e\n\u003cli\u003e\t\t\ttext3D.Text = \"Place on a horizontal\\n  surface and click\";\u003c/li\u003e\n\u003cli\u003e\t\t\ttext3D.SetFont(CoreAssets.Fonts.AnonymousPro, 26);\u003c/li\u003e\n\u003cli\u003e\t\t\ttext3D.SetColor(Color.White);\u003c/li\u003e\n\u003cli\u003e\t\t\ttextNode.Translate(new Vector3(0, 3f, -0.5f));\u003c/li\u003e\n\u003cli\u003e\n\u003c/li\u003e\n\u003cli\u003e\t\t\t// Model and Physics for the bucket\u003c/li\u003e\n\u003cli\u003e\t\t\tvar bucketModel = bucketNode.CreateComponent\u0026lt;StaticModel\u0026gt;();\u003c/li\u003e\n\u003cli\u003e\t\t\tbucketMaterial = Material.FromColor(validPositionColor);\u003c/li\u003e\n\u003cli\u003e\t\t\tbucketModel.Model = ResourceCache.GetModel(\"Models/bucket.mdl\");\u003c/li\u003e\n\u003cli\u003e\t\t\tbucketModel.SetMaterial(bucketMaterial);\u003c/li\u003e\n\u003c/ol\u003e\u003c/code\u003e\u003c/pre\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\u003c/p\u003e\n\u003cp\u003eSo it does look like it will work, but haven’t tried dynamically changing it on an existing node. W\u003c/p\u003e\n\u003cp\u003eSo the approach is …\u003c/p\u003e\n\u003cp\u003eWhen the node is raycasted originallyt, dynamically change it’s ViewMask, then when the object is again eligible for raycasts, revert it’s viewmask.\u003c/p\u003e\n\u003cp\u003eWill experiment and see how it goes. The only issue with this approach is when/how to set the ViewMask back to a value allowing Raycasting to it. And wondering if there is some already built in mechanism that does both, the hiding/masking and the unhiding/unmasking once the Raycast is handled. But likely that is best done in the Raycast event handler on that object.\u003c/p\u003e\n\u003cp\u003eHere are a couple other samples showing uses, one in Samply game and one in Featured Samples …\u003c/p\u003e\n\u003caside class=\"onebox githubblob\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/SamplyGame/Core/Aircrafts/Aircraft.cs#L52\" target=\"_blank\" rel=\"nofollow noopener\"\u003egithub.com\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ch4\u003e\u003ca href=\"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/SamplyGame/Core/Aircrafts/Aircraft.cs#L52\" target=\"_blank\" rel=\"nofollow noopener\"\u003examarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/SamplyGame/Core/Aircrafts/Aircraft.cs#L52\u003c/a\u003e\u003c/h4\u003e\n\u003cpre class=\"onebox\"\u003e\u003ccode class=\"lang-cs\"\u003e\u003col class=\"start lines\" start=\"42\" style=\"counter-reset: li-counter 41 ;\"\u003e\n\u003cli\u003e\t\tpublic Task Play()\u003c/li\u003e\n\u003cli\u003e\t\t{\u003c/li\u003e\n\u003cli\u003e\t\t\tliveTask = new TaskCompletionSource\u0026lt;bool\u0026gt;();\u003c/li\u003e\n\u003cli\u003e\t\t\tHealth = MaxHealth;\u003c/li\u003e\n\u003cli\u003e\t\t\tvar node = Node;\u003c/li\u003e\n\u003cli\u003e\n\u003c/li\u003e\n\u003cli\u003e\t\t\t// Define physics for handling collisions\u003c/li\u003e\n\u003cli\u003e\t\t\tvar body = node.CreateComponent\u0026lt;RigidBody\u0026gt;();\u003c/li\u003e\n\u003cli\u003e\t\t\tbody.Mass = 1;\u003c/li\u003e\n\u003cli\u003e\t\t\tbody.Kinematic = true;\u003c/li\u003e\n\u003cli class=\"selected\"\u003e\t\t\tbody.CollisionMask = (uint)CollisionLayer;\u003c/li\u003e\n\u003cli\u003e\t\t\tCollisionShape shape = node.CreateComponent\u0026lt;CollisionShape\u0026gt;();\u003c/li\u003e\n\u003cli\u003e\t\t\tshape.SetBox(CollisionShapeSize, Vector3.Zero, Quaternion.Identity);\u003c/li\u003e\n\u003cli\u003e\n\u003c/li\u003e\n\u003cli\u003e\t\t\tInit();\u003c/li\u003e\n\u003cli\u003e\t\t\tnode.SubscribeToNodeCollisionStart(OnCollided);\u003c/li\u003e\n\u003cli\u003e\t\t\treturn liveTask.Task;\u003c/li\u003e\n\u003cli\u003e\t\t}\u003c/li\u003e\n\u003cli\u003e\n\u003c/li\u003e\n\u003cli\u003e\t\t/// \u0026lt;summary\u0026gt;\u003c/li\u003e\n\u003cli\u003e\t\t/// Explode the aircraft with animation\u003c/li\u003e\n\u003c/ol\u003e\u003c/code\u003e\u003c/pre\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\n\u003caside class=\"onebox githubblob\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/FeatureSamples/Core/23_Water/Water.cs#L172-L173\" target=\"_blank\" rel=\"nofollow noopener\"\u003egithub.com\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ch4\u003e\u003ca href=\"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/FeatureSamples/Core/23_Water/Water.cs#L172-L173\" target=\"_blank\" rel=\"nofollow noopener\"\u003examarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/FeatureSamples/Core/23_Water/Water.cs#L172-L173\u003c/a\u003e\u003c/h4\u003e\n\u003cpre class=\"onebox\"\u003e\u003ccode class=\"lang-cs\"\u003e\u003col class=\"start lines\" start=\"172\" style=\"counter-reset: li-counter 171 ;\"\u003e\n\u003cli\u003e\t\t\t// Set a different viewmask on the water plane to be able to hide it from the reflection camera\u003c/li\u003e\n\u003cli\u003e\t\t\twater.ViewMask = 0x80000000;\u003c/li\u003e\n\u003c/ol\u003e\u003c/code\u003e\u003c/pre\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":5,"post_type":1,"updated_at":"2018-12-19T19:12:41.296Z","reply_count":1,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":22,"reads":44,"readers_count":43,"score":123.8,"yours":false,"topic_id":4756,"topic_slug":"solved-pattern-for-raycasting","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/SamplyGame/Core/Aircrafts/Aircraft.cs#L52","internal":false,"reflection":false,"title":"urho-samples/Aircraft.cs at b72d055a424d0e6be825c0239683c225d29ee723 · xamarin/urho-samples · GitHub","clicks":2},{"url":"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/FeatureSamples/Core/23_Water/Water.cs#L172-L173","internal":false,"reflection":false,"title":"urho-samples/Water.cs at b72d055a424d0e6be825c0239683c225d29ee723 · xamarin/urho-samples · GitHub","clicks":1},{"url":"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/HoloLens/05_Physics/Progam.cs#L53","internal":false,"reflection":false,"title":"urho-samples/Progam.cs at b72d055a424d0e6be825c0239683c225d29ee723 · xamarin/urho-samples · GitHub","clicks":0},{"url":"https://discourse.urho3d.io/t/3d-intersection-and-hud-functionality-urho3d-beginner/4562/45","internal":true,"reflection":true,"title":"3D Intersection and HUD functionality? (Urho3D Beginner)","clicks":0}],"read":true,"user_title":null,"reply_to_user":{"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1086,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27007,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2018-12-19T22:11:25.107Z","cooked":"\u003cp\u003eChanging the mask constantly per frame isn’t the best idea.AFAIK the function is quite expensive.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-12-19T22:11:25.107Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":40,"readers_count":39,"score":8.0,"yours":false,"topic_id":4756,"topic_slug":"solved-pattern-for-raycasting","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27008,"name":"","username":"I3DB","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","created_at":"2018-12-19T22:13:25.371Z","cooked":"\u003cp\u003eSetting ViewMask works well in the case where a node only has a single component. If multiple components, then it must be set on all components of that node in order to not again raycast the node.\u003c/p\u003e\n\u003cp\u003eThis helps reduce the code complexity.\u003c/p\u003e\n\u003cp\u003eCurrently setting the ViewMask once raycasted, and then resetting to original after the processing of the raycast event for that node is finished. So it’s not very frequently set per raycasted node.\u003c/p\u003e\n\u003cp\u003eIt also seems like it would work well when a node’s components are only infrequently available to be raycasted, so they’d be dynamically set as needed.\u003c/p\u003e\n\u003cp\u003eAlso, once raycasted, the pattern currently in use only starts raycasting again in 1.5 seconds in my code.\u003c/p\u003e\n\u003cp\u003eSo there aren’t that many ViewMask changes overall, not per Update frame anyway.\u003c/p\u003e\n\u003cp\u003eBut if there are other ideas for less expense actions … please do tell.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-12-19T22:20:22.393Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":42,"readers_count":41,"score":13.4,"yours":false,"topic_id":4756,"topic_slug":"solved-pattern-for-raycasting","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":4,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1086,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27020,"name":"","username":"I3DB","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","created_at":"2018-12-19T23:19:25.028Z","cooked":"\u003cp\u003eHere’s the pattern in use now:\u003c/p\u003e\n\u003cp\u003eThe raycasting code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003ebool NoRaycasts = false;\n        protected override void OnUpdate(float timeStep)\n        {\n            if(!NoRaycasts) Raycast();\n        }\n        bool IsRaycasting = true;\n        DateTime lastRaycast = DateTime.Now;\n        void Raycast()\n        {\n            if (IsRaycasting)\n            {\n                var result = Scene.GetComponent\u0026lt;Octree\u0026gt;().RaycastSingle(RightCamera.GetScreenRay(0.5f, 0.5f), RayQueryLevel.Triangle, 100, DrawableFlags.Geometry, 0x70000000);\n                if (result.HasValue)\n                {\n                    IsRaycasting = false;\n                    lastRaycast = DateTime.Now;\n                    nodeQ.Add(result.Value);\n                }\n            }\n            else if (DateTime.Now - lastRaycast \u0026gt; TimeSpan.FromSeconds(.1)) {  IsRaycasting = true; }\n        }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe raycast processing code …\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eTask.Run(() =\u0026gt; {\n                while (!nodeQ.IsCompleted)\n                {\n                    var result = nodeQ.Take(); \n                    var OriginalMask = result.Drawable.ViewMask;\n                    result.Drawable.ViewMask = 0x80000000;\n                    var currentScale = result.Node.Scale.X;\n                    InvokeOnMainAsync(() =\u0026gt; result.Node.RunActions(new ScaleTo(0.1f, currentScale * 2 / 3f), new Blink(1f, 6), new ScaleTo(0.1f, currentScale), new CallFunc(()=\u0026gt; result.Drawable.ViewMask = OriginalMask)));\n                }\n            });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt’s still tightly bound to the OS, as using DateTime, BlockingCollection, Task classes.\u003c/p\u003e\n\u003cp\u003eAllows multiple items to be in raycasted state at once, only blocks raycasts for .1 seconds at a time, and leaves the object to reset in the raycast processing code. It’s not quite done, as every now and then an object disappears, and not sure why yet. Might be something else unrelated to this.\u003c/p\u003e\n\u003cp\u003eThe disappearing object is because the Task to process the nodeQ delay starts and the queue would get multiple occurrences of the same object. So simply started raycasting only after the task started, and everything works perfectly now.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2019-01-15T20:18:24.496Z","reply_count":0,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":3,"reads":42,"readers_count":41,"score":23.4,"yours":false,"topic_id":4756,"topic_slug":"solved-pattern-for-raycasting","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":4,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1086,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[26957,26982,26994,26996,26999,27007,27008,27020]},"timeline_lookup":[[1,1436],[2,1435],[4,1434]],"suggested_topics":[{"id":7062,"title":"Is WebGL2.0 \u0026 GLES3.0 being supported in the near future?","fancy_title":"Is WebGL2.0 \u0026amp; GLES3.0 being supported in the near future?","slug":"is-webgl2-0-gles3-0-being-supported-in-the-near-future","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-11-23T09:04:28.802Z","last_posted_at":"2021-11-23T21:44:08.088Z","bumped":true,"bumped_at":"2021-11-23T21:44:08.088Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":199,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7122,"title":"Faster allocations with PMR","fancy_title":"Faster allocations with PMR","slug":"faster-allocations-with-pmr","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-01-10T16:23:15.053Z","last_posted_at":"2022-01-10T16:42:29.752Z","bumped":true,"bumped_at":"2022-01-10T17:55:02.117Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":209,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1363,"username":"vmost","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/5f9b8f/{size}.png"}}]},{"id":7073,"title":"A plan to support static batching","fancy_title":"A plan to support static batching","slug":"a-plan-to-support-static-batching","posts_count":5,"reply_count":2,"highest_post_number":5,"image_url":null,"created_at":"2021-12-01T03:43:48.579Z","last_posted_at":"2021-12-02T23:30:07.199Z","bumped":true,"bumped_at":"2021-12-02T23:30:07.199Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":180,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7158,"title":"Xamarin android urhosharp has no octree.getdrawables","fancy_title":"Xamarin android urhosharp has no octree.getdrawables","slug":"xamarin-android-urhosharp-has-no-octree-getdrawables","posts_count":11,"reply_count":9,"highest_post_number":11,"image_url":null,"created_at":"2022-01-27T15:03:52.636Z","last_posted_at":"2022-02-02T07:17:04.722Z","bumped":true,"bumped_at":"2022-02-02T07:17:04.722Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":256,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1503,"username":"tianlv777","name":"zerrrrr","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/a4c791/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7183,"title":"Automating Lua Bindings","fancy_title":"Automating Lua Bindings","slug":"automating-lua-bindings","posts_count":15,"reply_count":4,"highest_post_number":16,"image_url":null,"created_at":"2022-02-03T17:02:43.829Z","last_posted_at":"2022-08-17T18:54:38.644Z","bumped":true,"bumped_at":"2022-08-17T18:54:38.644Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":16,"views":700,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1447,"username":"Batch","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f17d59/{size}.png"}}]}],"tags_descriptions":{},"id":4756,"title":"[Solved] Pattern for raycasting","fancy_title":"[Solved] Pattern for raycasting","posts_count":8,"created_at":"2018-12-17T19:43:38.616Z","views":988,"reply_count":4,"like_count":1,"last_posted_at":"2018-12-19T23:19:25.028Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"solved-pattern-for-raycasting","category_id":16,"word_count":911,"deleted_at":null,"user_id":1086,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4756","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":8,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1086,"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","post_count":5,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1086,"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png"},"last_poster":{"id":1086,"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png"},"links":[{"url":"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/SamplyGame/Core/Aircrafts/Aircraft.cs#L52","title":"urho-samples/Aircraft.cs at b72d055a424d0e6be825c0239683c225d29ee723 · xamarin/urho-samples · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":1086,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/xamarin/urho-samples/blob/b72d055a424d0e6be825c0239683c225d29ee723/FeatureSamples/Core/23_Water/Water.cs#L172-L173","title":"urho-samples/Water.cs at b72d055a424d0e6be825c0239683c225d29ee723 · xamarin/urho-samples · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":1086,"domain":"github.com","root_domain":"github.com"}]}}