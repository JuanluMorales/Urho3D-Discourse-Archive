{"post_stream":{"posts":[{"id":257,"name":"","username":"Mike","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png","created_at":"2014-02-01T19:56:16.000Z","cooked":"\u003cp\u003eWhat are the steps required to fully remove a scene/level and to init a new one?\u003c/p\u003e\n\u003cp\u003eI’ve checked functions like Clear(), SetUpdateEnabled(), ReleaseAllResources() and the Scene destructor ~Scene() but not sure if they are required and don’t know how to use the scene destructor.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T00:57:46.781Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":291,"reads":44,"readers_count":43,"score":1463.8,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://discourse.urho3d.io/t/solved-scenes/1748","internal":true,"reflection":true,"title":"[SOLVED] Scenes","clicks":1}],"read":true,"user_title":"Contributor","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":9,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":258,"name":"","username":"NemesisFS","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/d2c977/{size}.png","created_at":"2014-02-01T20:33:52.000Z","cooked":"\u003cp\u003eI think you just need to delete the old viewport and scene and create new ones.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T00:57:46.838Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":44,"readers_count":43,"score":28.8,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":19,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":259,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-02-01T20:38:12.000Z","cooked":"\u003cp\u003eWhen you Load() or LoadXML() content into a scene object, all previous content is cleared first.\u003c/p\u003e\n\u003cp\u003eThe alternative is to create a new scene object, but it actually shouldn’t be necessary, unless you want to retain multiple scenes and return to the previous one quickly. When you have multiple scenes in memory and don’t want all of them to update, in that case you can call SetUpdateEnabled(false) to the one that shouldn’t be updated.\u003c/p\u003e\n\u003cp\u003eAfter a scene change ReleaseAllResources(false) will clear out everything from the cache that is not currently being used, and that’s a good practice. ReleaseAllResources(true) forces release of also used resources (but SharedPtr’s keeping them alive elsewhere will not be cleared, so it’s kind of useless) and is not recommended.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T00:57:46.941Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":45,"readers_count":44,"score":19.0,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":260,"name":"","username":"Mike","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png","created_at":"2014-02-01T21:42:43.000Z","cooked":"\u003cp\u003eMany thanks for detailed explanations,\u003c/p\u003e\n\u003cp\u003eNow the question is how to call the main script file after loading?\u003cbr\u003e\nI’ve tried require\"myScript\" just after scene_:LoadXML(\"…EmptyScene.xml\") but it produces a segmentation fault.\u003c/p\u003e\n\u003cp\u003eFor example, let’s say I want to “load” 06_SkeletalAnimation.lua when pressing a button in Example#2 (02_HelloGui.lua). And once pressed, I don’t want to keep Example#2 alive (fully remove it).\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T00:57:47.008Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":41,"readers_count":40,"score":13.2,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Contributor","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":9,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":262,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-02-02T13:16:41.000Z","cooked":"\u003cp\u003eLua scripts are a bit different than scenes. They are all loaded into the same Lua state but cannot be unloaded.\u003c/p\u003e\n\u003cp\u003eI would recommend structuring the Lua application so that the main program script is always present and only object scripts are loaded when necessary (these btw. work in the same way, they cannot be unloaded)\u003c/p\u003e\n\u003cp\u003eAster (author of Lua script system) will know better what’s possible to change/improve in this respect.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T00:57:47.135Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":37,"readers_count":36,"score":7.4,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":267,"name":"","username":"Mike","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png","created_at":"2014-02-02T18:29:55.000Z","cooked":"\u003cp\u003eThanks, hope that will be easily fixed.\u003cbr\u003e\nLooking forward for Aster tips, I’ve seen that he recently pushed some new commits regarding Load and Save.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T00:57:47.464Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":34,"readers_count":33,"score":6.8,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Contributor","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":9,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":274,"name":"","username":"aster2013","avatar_template":"/user_avatar/discourse.urho3d.io/aster2013/{size}/828_2.png","created_at":"2014-02-04T07:04:38.000Z","cooked":"\u003cp\u003eHi, mike.\u003cbr\u003e\nI have made a Lua sample for you.  Please get it here \u003ccode\u003ehttps://dl.dropboxusercontent.com/u/56770481/SwitchScene.lua\u003c/code\u003e\u003cbr\u003e\nPlease attention to that in the sample, We create scene with Scene:new() not Scene(), and it is need to destroy scene manual by call scene:delete() at the Stop function.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-01-02T00:57:47.971Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":35,"readers_count":34,"score":12.0,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":11,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":315,"name":"","username":"Mike","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png","created_at":"2014-02-06T16:32:05.000Z","cooked":"\u003cp\u003eReally nice, Aster. Thanks a lot  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=5\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"\u003e\u003c/p\u003e\n\u003cp\u003eI’ve managed to integrate this technique with my file structure/splitting and it seems to work fine. I can build my levels as independant levels and “merge” them with only few modifications. That’s great!\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2017-01-02T00:57:50.813Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":34,"readers_count":33,"score":11.8,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Contributor","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":9,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13799,"name":"","username":"adekto","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/96bed5/{size}.png","created_at":"2016-09-28T12:06:23.000Z","cooked":"\u003cp\u003e[quote=“aster2013”]Hi, mike.\u003cbr\u003e\nI have made a Lua sample for you.  Please get it here \u003ccode\u003ehttps://dl.dropboxusercontent.com/u/56770481/SwitchScene.lua\u003c/code\u003e\u003cbr\u003e\nPlease attention to that in the sample, We create scene with Scene:new() not Scene(), and it is need to destroy scene manual by call scene:delete() at the Stop function.[/quote]\u003c/p\u003e\n\u003cp\u003eanyone still has that script?\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2017-01-02T01:14:26.428Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":1,"reads":34,"readers_count":33,"score":11.8,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":341,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13801,"name":"","username":"Mike","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png","created_at":"2016-09-28T16:02:45.000Z","cooked":"\u003cp\u003eYes, I 'll be able to access it saturday if no one can supply it in the meantime.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2017-01-02T01:14:26.656Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":36,"readers_count":35,"score":7.2,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Contributor","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":9,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13802,"name":"","username":"adekto","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/96bed5/{size}.png","created_at":"2016-09-28T16:41:52.000Z","cooked":"\u003cp\u003egreat, thank you in advance\u003cbr\u003e\ntrying to find all the lua code right now, but seems not allot of people use that side of the engine  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/confused.png?v=5\" title=\":confused:\" class=\"emoji\" alt=\":confused:\"\u003e\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2017-01-02T01:14:26.714Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":40,"readers_count":39,"score":13.0,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":341,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13838,"name":"","username":"Mike","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png","created_at":"2016-10-01T09:24:24.000Z","cooked":"\u003cp\u003eHere is the SwitchScene.lua script:\u003c/p\u003e\n\u003cp\u003e[spoiler][code]\u003cbr\u003e\n– Switch scene.\u003cbr\u003e\nrequire “LuaScripts/Utilities/Sample”\u003c/p\u003e\n\u003cp\u003elocal window = nil\u003cbr\u003e\nlocal windowTitle = nil\u003c/p\u003e\n\u003cp\u003elocal scene_ = nil\u003cbr\u003e\nlocal sceneIndex_ = -1\u003cbr\u003e\nlocal cameraNode = nil\u003cbr\u003e\nlocal yaw = 0.0\u003cbr\u003e\nlocal pitch = 0.0\u003c/p\u003e\n\u003cp\u003efunction Start()\u003cbr\u003e\n– Execute the common startup for samples\u003cbr\u003e\nSampleStart()\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-- Enable OS cursor\ninput.mouseVisible = true\n\n-- Load XML file containing default UI style sheet\nlocal style = cache:GetResource(\"XMLFile\", \"UI/DefaultStyle.xml\")\n\n-- Set the loaded style as default style\nui.root.defaultStyle = style\n\n-- Initialize Window\nInitWindow()\n\n-- Create and add some controls to the Window\nInitControls()\n\nSubscribeToEvents()\n\nSwitchScene(0)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eend\u003c/p\u003e\n\u003cp\u003efunction Stop()\u003cbr\u003e\nif scene_ ~= nil then\u003cbr\u003e\nscene_:delete()\u003cbr\u003e\nend\u003cbr\u003e\nend\u003c/p\u003e\n\u003cp\u003efunction InitControls()\u003cbr\u003e\n– Create a Button\u003cbr\u003e\nlocal button = Button:new()\u003cbr\u003e\nbutton:SetName(“Button”)\u003cbr\u003e\nbutton.minHeight = 24\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-- Add controls to Window\nwindow:AddChild(button)\n\nbutton:SetStyleAuto()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eend\u003c/p\u003e\n\u003cp\u003efunction InitWindow()\u003cbr\u003e\n– Create the Window and add it to the UI’s root node\u003cbr\u003e\nwindow = Window:new()\u003cbr\u003e\nui.root:AddChild(window)\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-- Set Window size and layout settings\nwindow.minWidth = 384;\nwindow:SetLayout(LM_VERTICAL, 6, IntRect(6, 6, 6, 6))\nwindow:SetAlignment(HA_CENTER, VA_CENTER)\nwindow:SetName(\"Window\")\n\n-- Create Window 'titlebar' container\nlocal titleBar = UIElement:new()\ntitleBar:SetMinSize(0, 24)\ntitleBar.verticalAlignment = VA_TOP\ntitleBar.layoutMode = LM_HORIZONTAL\n\n-- Create the Window title Text\nwindowTitle = Text:new()\nwindowTitle.name = \"WindowTitle\"\n\n-- Create the Window's close button\nlocal buttonClose = Button:new()\nbuttonClose:SetName(\"CloseButton\")\n\n-- Add the controls to the title bar\ntitleBar:AddChild(windowTitle)\ntitleBar:AddChild(buttonClose)\n\n-- Add the title bar to the Window\nwindow:AddChild(titleBar)    \n\n-- Apply styles\nwindow:SetStyleAuto()\nwindowTitle:SetStyleAuto()\nbuttonClose:SetStyle(\"CloseButton\")\n\n-- Lastly, subscribe to buttonClose release (following a 'press') events\nSubscribeToEvent(buttonClose, \"Released\", \"HandleClosePressed\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eend\u003c/p\u003e\n\u003cp\u003efunction SubscribeToEvents()\u003cbr\u003e\n– Subscribe handler invoked whenever a mouse click event is dispatched\u003cbr\u003e\nSubscribeToEvent(“UIMouseClick”, “HandleControlClicked”)\u003cbr\u003e\n– Subscribe HandleUpdate() function for processing update events\u003cbr\u003e\nSubscribeToEvent(“Update”, “HandleUpdate”)\u003cbr\u003e\nend\u003c/p\u003e\n\u003cp\u003efunction HandleClosePressed(eventType, eventData)\u003cbr\u003e\nengine:Exit()\u003cbr\u003e\nend\u003c/p\u003e\n\u003cp\u003efunction HandleControlClicked(eventType, eventData)\u003cbr\u003e\nlocal clicked = eventData[“Element”]:GetPtr(“UIElement”)\u003cbr\u003e\nif clicked ~= nil and \u003ca href=\"http://clicked.name\"\u003eclicked.name\u003c/a\u003e == “Button” then\u003cbr\u003e\nSwitchScene(1 - sceneIndex_)\u003cbr\u003e\nend\u003cbr\u003e\nend\u003c/p\u003e\n\u003cp\u003efunction SwitchScene(index)\u003cbr\u003e\nif sceneIndex_ == index then\u003cbr\u003e\nreturn\u003cbr\u003e\nend\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-- Delete current scene\nif scene_ ~= nil then\n    scene_:delete()\nend\n\n-- Reset camera parameter\ncameraNode = nil\nyaw = 0.0\npitch = 0.0\n\nsceneIndex_ = index\n\nif sceneIndex_ == 0 then\n    CreateStaticScene()\n    windowTitle.text = \"Click Button to Switch to Animating Scene\"\nelse        \n    CreateAnimatingScene()\n    windowTitle.text = \"Click Button to Switch to Static Scene\"\nend\n\nif scene_ ~= nil then\n    SetupViewport()\nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eend\u003c/p\u003e\n\u003cp\u003e– Copy from 04_StaticScene.lua\u003cbr\u003e\nfunction CreateStaticScene()\u003cbr\u003e\nscene_ = Scene:new()\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-- Create the Octree component to the scene. This is required before adding any drawable components, or else nothing will\n-- show up. The default octree volume will be from (-1000, -1000, -1000) to (1000, 1000, 1000) in world coordinates it\n-- is also legal to place objects outside the volume but their visibility can then not be checked in a hierarchically\n-- optimizing manner\nscene_:CreateComponent(\"Octree\")\n\n-- Create a child scene node (at world origin) and a StaticModel component into it. Set the StaticModel to show a simple\n-- plane mesh with a \"stone\" material. Note that naming the scene nodes is optional. Scale the scene node larger\n-- (100 x 100 world units)\nlocal planeNode = scene_:CreateChild(\"Plane\")\nplaneNode.scale = Vector3(100.0, 1.0, 100.0)\nlocal planeObject = planeNode:CreateComponent(\"StaticModel\")\nplaneObject.model = cache:GetResource(\"Model\", \"Models/Plane.mdl\")\nplaneObject.material = cache:GetResource(\"Material\", \"Materials/StoneTiled.xml\")\n\n-- Create a directional light to the world so that we can see something. The light scene node's orientation controls the\n-- light direction we will use the SetDirection() function which calculates the orientation from a forward direction vector.\n-- The light will use default settings (white light, no shadows)\nlocal lightNode = scene_:CreateChild(\"DirectionalLight\")\nlightNode.direction = Vector3(0.6, -1.0, 0.8) -- The direction vector does not need to be normalized\nlocal light = lightNode:CreateComponent(\"Light\")\nlight.lightType = LIGHT_DIRECTIONAL\nlight.castShadows = true\n\n-- Create more StaticModel objects to the scene, randomly positioned, rotated and scaled. For rotation, we construct a\n-- quaternion from Euler angles where the Y angle (rotation about the Y axis) is randomized. The mushroom model contains\n-- LOD levels, so the StaticModel component will automatically select the LOD level according to the view distance (you'll\n-- see the model get simpler as it moves further away). Finally, rendering a large number of the same object with the\n-- same material allows instancing to be used, if the GPU supports it. This reduces the amount of CPU work in rendering the\n-- scene.\nlocal NUM_OBJECTS = 200\nfor i = 1, NUM_OBJECTS do\n    local mushroomNode = scene_:CreateChild(\"Mushroom\")\n    mushroomNode.position = Vector3(Random(90.0) - 45.0, 0.0, Random(90.0) - 45.0)\n    mushroomNode.rotation = Quaternion(0.0, Random(360.0), 0.0)\n    mushroomNode:SetScale(0.5 + Random(2.0))\n    local mushroomObject = mushroomNode:CreateComponent(\"StaticModel\")\n    mushroomObject.model = cache:GetResource(\"Model\", \"Models/Mushroom.mdl\")\n    mushroomObject.material = cache:GetResource(\"Material\", \"Materials/Mushroom.xml\")\n    mushroomObject.castShadows = true\nend\n\n-- Create a scene node for the camera, which we will move around\n-- The camera will use default settings (1000 far clip distance, 45 degrees FOV, set aspect ratio automatically)\ncameraNode = scene_:CreateChild(\"Camera\")\ncameraNode:CreateComponent(\"Camera\")\n\n-- Set an initial position for the camera scene node above the plane\ncameraNode.position = Vector3(0.0, 5.0, 0.0)\n\n-------------------\n-- ANIMATED SPRITE\n-------------------\nspriteNode = scene_:CreateChild(\"SpriterAnimation\")\nspriteNode.position = Vector3(-1.4, 2, -10)\n\t\tlocal animatedSprite = spriteNode:CreateComponent(\"AnimatedSprite2D\")\n\t\tanimatedSprite.animationSet = cache:GetResource(\"AnimationSet2D\", \"Urho2D/imp/imp.scml\") -- Get scml file\n\t\tanimatedSprite.animation = \"idle\" -- Play \"idle\" anim\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eend\u003c/p\u003e\n\u003cp\u003e– Copy from 05_AnimatingScene.lua\u003cbr\u003e\nfunction CreateAnimatingScene()\u003cbr\u003e\nscene_ = Scene:new()\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-- Create the Octree component to the scene so that drawable objects can be rendered. Use default volume\n-- (-1000, -1000, -1000) to (1000, 1000, 1000)\nscene_:CreateComponent(\"Octree\")\n\n-- Create a Zone component into a child scene node. The Zone controls ambient lighting and fog settings. Like the Octree,\n-- it also defines its volume with a bounding box, but can be rotated (so it does not need to be aligned to the world X, Y\n-- and Z axes.) Drawable objects \"pick up\" the zone they belong to and use it when rendering several zones can exist\nlocal zoneNode = scene_:CreateChild(\"Zone\")\nlocal zone = zoneNode:CreateComponent(\"Zone\")\n-- Set same volume as the Octree, set a close bluish fog and some ambient light\nzone.boundingBox = BoundingBox(-1000.0, 1000.0)\nzone.ambientColor = Color(0.05, 0.1, 0.15)\nzone.fogColor = Color(0.1, 0.2, 0.3)\nzone.fogStart = 10.0\nzone.fogEnd = 100.0\n\n-- Create randomly positioned and oriented box StaticModels in the scene\nlocal NUM_OBJECTS = 2000\nfor i = 1, NUM_OBJECTS do\n    local boxNode = scene_:CreateChild(\"Box\")\n    boxNode.position = Vector3(Random(200.0) - 100.0, Random(200.0) - 100.0, Random(200.0) - 100.0)\n    -- Orient using random pitch, yaw and roll Euler angles\n    boxNode.rotation = Quaternion(Random(360.0), Random(360.0), Random(360.0))\n    local boxObject = boxNode:CreateComponent(\"StaticModel\")\n    boxObject.model = cache:GetResource(\"Model\", \"Models/Box.mdl\")\n    boxObject.material = cache:GetResource(\"Material\", \"Materials/Stone.xml\")\n\tboxObject.castShadows = true\n\n    -- Add the Rotator script object which will rotate the scene node each frame, when the scene sends its update event.\n    -- This requires the C++ component LuaScriptInstance in the scene node, which acts as a container. We need to tell the \n    -- class name to instantiate the object\n    local object = boxNode:CreateScriptObject(\"Rotator\")\n    object.rotationSpeed = {10.0, 20.0, 30.0}\nend\n\n-- Create the camera. Let the starting position be at the world origin. As the fog limits maximum visible distance, we can\n-- bring the far clip plane closer for more effective culling of distant objects\ncameraNode = scene_:CreateChild(\"Camera\")\nlocal camera = cameraNode:CreateComponent(\"Camera\")\ncamera.farClip = 100.0\n\n-- Create a point light to the camera scene node\nlight = cameraNode:CreateComponent(\"Light\")\nlight.lightType = LIGHT_POINT\nlight.range = 30.0\nlight.castShadows = true\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eend\u003c/p\u003e\n\u003cp\u003e– Copy from 04_StaticScene.lua\u003cbr\u003e\nfunction SetupViewport()\u003cbr\u003e\n– Set up a viewport to the Renderer subsystem so that the 3D scene can be seen. We need to define the scene and the camera\u003cbr\u003e\n– at minimum. Additionally we could configure the viewport screen size and the rendering path (eg. forward / deferred) to\u003cbr\u003e\n– use, but now we just use full screen and default render path configured in the engine command line options\u003cbr\u003e\nlocal viewport = Viewport:new(scene_, cameraNode:GetComponent(“Camera”))\u003cbr\u003e\nrenderer:SetViewport(0, viewport)\u003cbr\u003e\nend\u003c/p\u003e\n\u003cp\u003e– Copy from 04_StaticScene.lua\u003cbr\u003e\nfunction MoveCamera(timeStep)\u003cbr\u003e\n– Do not move if the UI has a focused element (the console)\u003cbr\u003e\nif ui.focusElement ~= nil then\u003cbr\u003e\nreturn\u003cbr\u003e\nend\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-- Movement speed as world units per second\nlocal MOVE_SPEED = 20.0\n-- Mouse sensitivity as degrees per pixel\nlocal MOUSE_SENSITIVITY = 0.1\n\n-- Use this frame's mouse motion to adjust camera node yaw and pitch. Clamp the pitch between -90 and 90 degrees\nlocal mouseMove = input.mouseMove\nyaw = yaw +MOUSE_SENSITIVITY * mouseMove.x\npitch = pitch + MOUSE_SENSITIVITY * mouseMove.y\npitch = Clamp(pitch, -90.0, 90.0)\n\n-- Construct new orientation for the camera scene node from yaw and pitch. Roll is fixed to zero\ncameraNode.rotation = Quaternion(pitch, yaw, 0.0)\n\n-- Read WASD keys and move the camera scene node to the corresponding direction if they are pressed\n-- Use the TranslateRelative() function to move relative to the node's orientation. Alternatively we could\n-- multiply the desired direction with the node's orientation quaternion, and use just Translate()\nif input:GetKeyDown(KEY_W) then\n    cameraNode:Translate(Vector3(0.0, 0.0, 1.0) * MOVE_SPEED * timeStep)\nend\nif input:GetKeyDown(KEY_S) then\n    cameraNode:Translate(Vector3(0.0, 0.0, -1.0) * MOVE_SPEED * timeStep)\nend\nif input:GetKeyDown(KEY_A) then\n    cameraNode:Translate(Vector3(-1.0, 0.0, 0.0) * MOVE_SPEED * timeStep)\nend\nif input:GetKeyDown(KEY_D) then\n    cameraNode:Translate(Vector3(1.0, 0.0, 0.0) * MOVE_SPEED * timeStep)\nend\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eend\u003c/p\u003e\n\u003cp\u003e– Copy from 04_StaticScene.lua\u003cbr\u003e\nfunction HandleUpdate(eventType, eventData)\u003cbr\u003e\n– Take the frame time step, which is stored as a float\u003cbr\u003e\nlocal timeStep = eventData[“TimeStep”]:GetFloat()\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e-- Move the camera, scale movement with time step\nif cameraNode then MoveCamera(timeStep) end\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eend\u003c/p\u003e\n\u003cp\u003e– Copy from 05_AnimatingScene.lua\u003cbr\u003e\n– Rotator script object class. Script objects to be added to a scene node must implement the empty ScriptObject interface\u003cbr\u003e\nRotator = ScriptObject()\u003c/p\u003e\n\u003cp\u003efunction Rotator:Start()\u003cbr\u003e\nself.rotationSpeed = {0.0, 0.0, 0.0}\u003cbr\u003e\nend\u003c/p\u003e\n\u003cp\u003efunction Rotator:Update(timeStep)\u003cbr\u003e\nlocal x = self.rotationSpeed[1] * timeStep\u003cbr\u003e\nlocal y = self.rotationSpeed[2] * timeStep\u003cbr\u003e\nlocal z = self.rotationSpeed[3] * timeStep\u003cbr\u003e\nself.node:Rotate(Quaternion(x, y, z))\u003cbr\u003e\nend\u003cbr\u003e\n[/code][/spoiler]\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2017-01-02T01:14:29.325Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":7,"reads":41,"readers_count":40,"score":43.2,"yours":false,"topic_id":72,"topic_slug":"solved-changing-level-scene","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://clicked.name","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":"Contributor","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":9,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[257,258,259,260,262,267,274,315,13799,13801,13802,13838]},"timeline_lookup":[[1,3216],[6,3215],[7,3214],[8,3212],[9,2247],[12,2244]],"suggested_topics":[{"id":7086,"title":"Handling CrowdAgents that get stuck","fancy_title":"Handling CrowdAgents that get stuck","slug":"handling-crowdagents-that-get-stuck","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-04T01:26:23.062Z","last_posted_at":"2021-12-05T04:37:54.143Z","bumped":true,"bumped_at":"2021-12-05T04:37:54.143Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7098,"title":"Cartoon Fire Effect","fancy_title":"Cartoon Fire Effect","slug":"cartoon-fire-effect","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2021-12-10T04:08:49.887Z","last_posted_at":"2021-12-12T02:49:51.076Z","bumped":true,"bumped_at":"2021-12-12T02:49:51.076Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":274,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]}],"tags_descriptions":{},"id":72,"title":"[SOLVED] Changing level/scene","fancy_title":"[SOLVED] Changing level/scene","posts_count":12,"created_at":"2014-02-01T19:56:16.000Z","views":1057,"reply_count":0,"like_count":0,"last_posted_at":"2016-10-01T09:24:24.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"solved-changing-level-scene","category_id":10,"word_count":2249,"deleted_at":null,"user_id":9,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_72","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":12,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":5,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":9,"username":"Mike","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png","post_count":6,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"moderator":true,"trust_level":2},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":341,"username":"adekto","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/96bed5/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":11,"username":"aster2013","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/aster2013/{size}/828_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":19,"username":"NemesisFS","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/d2c977/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":9,"username":"Mike","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png"},"last_poster":{"id":9,"username":"Mike","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/58f4c7/{size}.png"},"links":[{"url":"http://discourse.urho3d.io/t/solved-scenes/1748","title":"[SOLVED] Scenes","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":380,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"}]}}