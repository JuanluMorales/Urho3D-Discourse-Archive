{"post_stream":{"posts":[{"id":28877,"name":"QB'k Games","username":"QBkGames","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png","created_at":"2019-03-11T00:27:00.717Z","cooked":"\u003cp\u003eThis is more of a Bullet physics internal question rather than Urho, but if anyone knows the answer I appreciate it. I’ve already posted it on the Bullet support forum, but I haven’t got any answers yet.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eWhat do you pass to the btCollisionWorld::convexSweepTest to get the “any hit” query?\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eI just want a fast and efficient way of determining if there is something there, I don’t care about what or where or any collision data, just if there are any physics bodies being overlapped by the sweep. I’m guessing you have to override the ConvexResultCallback somehow to get this result, but I cannot figure out how (the documentation on this topic is non existent). I was hoping an appropriate override would be included with the Bullet library (just like ClosestConvexResultCallback is), but no such luck.\u003c/p\u003e\n\u003cp\u003eAnd I don’t want to use the ClosestConvexResultCallback because it would be horribly inefficient for my purpose, as the query would have to get all overlapping bodies and order them by distance to the sweep origin and return the closest one. I just want the sweep algorithm to stop as soon as it finds something, anything.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2019-03-13T07:34:20.401Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":195,"reads":29,"readers_count":28,"score":980.8,"yours":false,"topic_id":5018,"topic_slug":"solved-convexsweeptest-any-hit","display_username":"QB'k Games","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":780,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":28881,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-03-11T03:08:01.085Z","cooked":"\u003cp\u003eLet’s review the arguments for this method:\u003c/p\u003e\n\u003caside class=\"quote no-group\"\u003e\n\u003cblockquote\u003e\n\u003cp\u003evoid btCollisionWorld::convexSweepTest (|const btConvexShape *  castShape,\u003cbr\u003e\nconst btTransform \u0026amp;  from,\u003cbr\u003e\nconst btTransform \u0026amp;  to,\u003cbr\u003e\nConvexResultCallback \u0026amp;  resultCallback,\u003cbr\u003e\nbtScalar  allowedCcdPenetration = btScalar(0)\u003cbr\u003e\n) const\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThe ConvexResultCallback has two members you need to set up in order to perform a proper collision query:  m_collisionFilterGroup, and m_collisionFilterMask. By default, I expect both to be -1, which means “Everything”.\u003c/p\u003e\n\u003cp\u003eWithout lecturing you on how Bullet Collision Filtering works, if we check the Bullet docs for ConvexResultCallback, we can see that it derives from ClosestConvexResultCallback. Essentially, this method is only equipped to return the first, closest object that was hit (and which passed the filtering test).\u003cbr\u003e\n\u003ca href=\"https://pybullet.org/Bullet/BulletFull/structbtCollisionWorld_1_1ConvexResultCallback.html\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\"\u003ehttps://pybullet.org/Bullet/BulletFull/structbtCollisionWorld_1_1ConvexResultCallback.html\u003c/a\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2019-03-11T03:35:19.078Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":14,"reads":28,"readers_count":27,"score":80.6,"yours":false,"topic_id":5018,"topic_slug":"solved-convexsweeptest-any-hit","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://pybullet.org/Bullet/BulletFull/structbtCollisionWorld_1_1ConvexResultCallback.html","internal":false,"reflection":false,"title":"Bullet Collision Detection \u0026 Physics Library: btCollisionWorld::ConvexResultCallback Struct Reference","clicks":15}],"read":true,"user_title":"suspended user","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":28906,"name":"QB'k Games","username":"QBkGames","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png","created_at":"2019-03-12T02:41:00.080Z","cooked":"\u003cp\u003eFrom I could gather from the code, ConvexResultCallback is an abstract base class that has the pure virtual function addSingleResult. My guess (without looking much deeper into the Bullet code) is that the algorithm used in the implementation of this function determines whether the result is: “first hit, all hits or any hit” (quote from comment above the convexSweepTest function).\u003cbr\u003e\nClosestConvexResultCallback implements the “first hit” algorithm, but nothing implements “all hits” or “any hit” and it’s not clear how you would go about implementing it yourself (short of looking deep into the Bullet code and trying to understand it under the hood, which is not what a library user should be expected to have to do).\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2019-03-12T02:41:00.080Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":2,"reads":20,"readers_count":19,"score":19.0,"yours":false,"topic_id":5018,"topic_slug":"solved-convexsweeptest-any-hit","display_username":"QB'k Games","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":780,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":28909,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-03-12T07:28:54.379Z","cooked":"\u003cp\u003eOh, I can explain this! This works for most situations in Bullet, but not a universal solution…\u003c/p\u003e\n\u003cp\u003eFor collision filtering:\u003cbr\u003e\nYou need to derive a new class from ClosestConvexResultCallback (or whatever the query uses) - lets call it MyClosestConvexResultCallback - and override a virtual method called “needsCollision”. If you wish to also support the usual bullet groups (layers) and masks, just call the base class method (of the same name) and use its result in your logic as you see fit.\u003c/p\u003e\n\u003cp\u003eFor collecting multiple results:\u003cbr\u003e\nAdd a container (vector, array, list, whatever) to your derived class.\u003cbr\u003e\nOverride the virtual addSingleResult to collect the results (which passed already your filter, if you did that too).\u003c/p\u003e\n\u003cp\u003eWhen performing a query, hand in an instance of your derived result container, instead of the default bullet result container. After the query, your container instance holds the results.\u003cbr\u003e\nOh, and I forgot to mention, the result order will usually seem arbitrary, you might want to sort the results.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2019-03-12T07:50:41.600Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":1,"reads":18,"readers_count":17,"score":8.6,"yours":false,"topic_id":5018,"topic_slug":"solved-convexsweeptest-any-hit","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"QBkGames","name":"QB'k Games","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":28936,"name":"QB'k Games","username":"QBkGames","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png","created_at":"2019-03-13T07:34:04.246Z","cooked":"\u003cp\u003eThanks Leith, that clarifies things a bit.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2019-03-13T07:34:04.246Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":16,"readers_count":15,"score":23.2,"yours":false,"topic_id":5018,"topic_slug":"solved-convexsweeptest-any-hit","display_username":"QB'k Games","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":780,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":28937,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-03-13T07:39:10.463Z","cooked":"\u003cp\u003eIt’s not a perfect question, given that Bullet queries use a variety of result container types - so the answer was generalized to deal with more than one use-case… hope it was helpful \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2019-03-13T07:39:10.463Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":1,"reads":17,"readers_count":16,"score":8.4,"yours":false,"topic_id":5018,"topic_slug":"solved-convexsweeptest-any-hit","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"QBkGames","name":"QB'k Games","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[28877,28881,28906,28909,28936,28937]},"timeline_lookup":[[1,1353],[3,1352],[5,1351]],"suggested_topics":[{"id":7065,"title":"Angelscript: Loading a char file into a 2D array: how?","fancy_title":"Angelscript: Loading a char file into a 2D array: how?","slug":"angelscript-loading-a-char-file-into-a-2d-array-how","posts_count":7,"reply_count":4,"highest_post_number":7,"image_url":null,"created_at":"2021-11-24T09:20:05.420Z","last_posted_at":"2021-11-28T11:19:39.689Z","bumped":true,"bumped_at":"2021-11-28T11:26:00.375Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":239,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":983,"username":"tarzeron","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ecae2f/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7081,"title":"Install Urho3D Library - Windows 10 - rake build - \"project does not exist\"","fancy_title":"Install Urho3D Library - Windows 10 - rake build - \u0026ldquo;project does not exist\u0026rdquo;","slug":"install-urho3d-library-windows-10-rake-build-project-does-not-exist","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-03T03:06:40.974Z","last_posted_at":"2021-12-03T17:53:10.844Z","bumped":true,"bumped_at":"2021-12-03T17:53:10.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":190,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]},{"id":7083,"title":"Using custom models in Xamarin.Forms shared project","fancy_title":"Using custom models in Xamarin.Forms shared project","slug":"using-custom-models-in-xamarin-forms-shared-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-03T08:34:21.895Z","last_posted_at":"2021-12-03T11:40:30.983Z","bumped":true,"bumped_at":"2021-12-03T11:40:30.983Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":198,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1493,"username":"Nikolai","name":"Nikolai Miroshnichenko","avatar_template":"/user_avatar/discourse.urho3d.io/nikolai/{size}/3632_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7080,"title":"Build urho3d source on windows 10 - cmake - \"Error in configuration process, project files may be invalid\"","fancy_title":"Build urho3d source on windows 10 - cmake - \u0026ldquo;Error in configuration process, project files may be invalid\u0026rdquo;","slug":"build-urho3d-source-on-windows-10-cmake-error-in-configuration-process-project-files-may-be-invalid","posts_count":8,"reply_count":4,"highest_post_number":8,"image_url":null,"created_at":"2021-12-03T01:55:53.267Z","last_posted_at":"2021-12-06T22:46:59.584Z","bumped":true,"bumped_at":"2021-12-06T22:46:59.584Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":324,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":5018,"title":"[SOLVED] convexSweepTest 'any hit'","fancy_title":"[SOLVED] convexSweepTest \u0026lsquo;any hit\u0026rsquo;","posts_count":6,"created_at":"2019-03-11T00:27:00.644Z","views":789,"reply_count":3,"like_count":1,"last_posted_at":"2019-03-13T07:39:10.463Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"solved-convexsweeptest-any-hit","category_id":10,"word_count":631,"deleted_at":null,"user_id":780,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_5018","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":780,"username":"QBkGames","name":"QB'k Games","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":780,"username":"QBkGames","name":"QB'k Games","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png"},"last_poster":{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"},"links":[{"url":"https://pybullet.org/Bullet/BulletFull/structbtCollisionWorld_1_1ConvexResultCallback.html","title":"Bullet Collision Detection \u0026 Physics Library: btCollisionWorld::ConvexResultCallback Struct Reference","internal":false,"attachment":false,"reflection":false,"clicks":15,"user_id":1098,"domain":"pybullet.org","root_domain":"pybullet.org"}]}}