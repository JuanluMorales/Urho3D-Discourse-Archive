{"post_stream":{"posts":[{"id":13939,"name":"","username":"vudugun","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/d07c76/{size}.png","created_at":"2016-10-07T10:15:27.000Z","cooked":"\u003cp\u003eHello,\u003cbr\u003e\nI know subclassing Node is not recommended, but I can’t find a good way to store/link custom objects in a node:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eusing components:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eadding component is ok\u003c/li\u003e\n\u003cli\u003eaccessing components is slow (linear search, GetComponent() is in fact a “FindFirstComponent”)\u003c/li\u003e\n\u003cli\u003eaccessing derived components is slower (linear search + dynamic_cast)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eusing node vars: feels like javascript\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ecreating a custom component system: HashSet\u0026lt;Node*, MyCustomObject*\u0026gt;: please no\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eIs full support for Node subclassing anywhere on the roadmap or even possible?\u003c/p\u003e\n\u003cp\u003eThanks!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:14:36.691Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":29,"reads":22,"readers_count":21,"score":151.4,"yours":false,"topic_id":2306,"topic_slug":"alternatives-to-node-subclassing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://discourse.urho3d.io/t/assertion-failure-when-adding-a-staticsprite2d-on-a-extension-of-node-class/2731/2","internal":true,"reflection":true,"title":"Assertion failure when adding a StaticSprite2D on a extension of Node class","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":557,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13940,"name":"","username":"TheComet","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","created_at":"2016-10-07T10:25:47.000Z","cooked":"\u003cp\u003eMaybe I don’t understand the problem, but subclassing Node doesn’t improve performance of GetComponent().\u003c/p\u003e\n\u003cp\u003eIf it really turns out that GetComponent() is your bottleneck (which I doubt), then an option could be to just cache them. Listen to E_COMPONENTADDED and E_COMPONENTREMOVED and maintain your own data structure of components.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:14:36.763Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":4.4,"yours":false,"topic_id":2306,"topic_slug":"alternatives-to-node-subclassing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Community repository maintainer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":37,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13941,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-10-07T10:33:32.000Z","cooked":"\u003cp\u003eSubclassing nodes is not planned to be supported.\u003c/p\u003e\n\u003cp\u003eI would recommend holding cached links to your objects near to the place where you need them. If you use WeakPtr for this it should be safe against deletion happening at arbitrary time. For example a targeting script or logic component having the last assigned target node as a member variable.\u003c/p\u003e\n\u003cp\u003eFor a generic storage solution 2) is valid.\u003c/p\u003e\n\u003cp\u003eFor maximum performance, if you want to mass-process a high amount of objects and handle links between them then you could have a “subsystem-like” component that has its own data structures.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:14:36.834Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":21,"readers_count":20,"score":14.2,"yours":false,"topic_id":2306,"topic_slug":"alternatives-to-node-subclassing","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13942,"name":"","username":"vudugun","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/d07c76/{size}.png","created_at":"2016-10-07T12:51:06.000Z","cooked":"\u003cp\u003eThanks for the replies!\u003c/p\u003e\n\u003cp\u003e\u003ca class=\"mention\" href=\"/u/thecomet\"\u003e@TheComet\u003c/a\u003e:\u003cbr\u003e\nGetComponent() is not my bottleneck yet, but calling it from a LogicComponent::Update() function shared by many nodes \u003cem\u003emight\u003c/em\u003e become a problem. If I could derive from Node, the component would be a simple data member, with minimal access time.\u003c/p\u003e\n\u003cp\u003e\u003ca class=\"mention\" href=\"/u/cadaver\"\u003e@Cadaver\u003c/a\u003e\u003cbr\u003e\nToo bad to hear subclassing nodes is not planned. I think I’ll go for the WeakPtrs option, I am already caching from inside LogicComponent::Start() functions, but I could be more aggressive than that.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:14:36.916Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":21,"readers_count":20,"score":4.2,"yours":false,"topic_id":2306,"topic_slug":"alternatives-to-node-subclassing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":557,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13943,"name":"","username":"TheComet","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","created_at":"2016-10-07T13:58:00.000Z","cooked":"\u003cp\u003eYou say it’s a linear search - which is true - however considering that in a typical game you won’t ever have more than maybe 10 components on a node, it’s not going to be “slow” like you say. It will be \u003cspan class=\"bbcode-i\"\u003eslower\u003c/span\u003e than accessing a data member but it’s still very, very fast.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:14:36.984Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":20,"readers_count":19,"score":4.0,"yours":false,"topic_id":2306,"topic_slug":"alternatives-to-node-subclassing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Community repository maintainer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":37,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13945,"name":"","username":"vudugun","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/d07c76/{size}.png","created_at":"2016-10-07T17:10:32.000Z","cooked":"\u003cp\u003eI wouldn’t bother for a rarely used function, but GetComponent() looks like a frequently used function in client code. After all, we are told to use components for custom logic, and its innocent-looking name is a bit misleading.\u003c/p\u003e\n\u003cp\u003eAnyway, I have come up with a solution for my problem (storing per-node custom objects in a fast-accessible way). It is actually pretty simple: by ensuring my custom component is always the last one, I can quickly access it via Node::GetComponents().Back().\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:14:37.109Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":3.8,"yours":false,"topic_id":2306,"topic_slug":"alternatives-to-node-subclassing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":557,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[13939,13940,13941,13942,13943,13945]},"timeline_lookup":[[1,2238],[6,2237]],"suggested_topics":[{"id":7344,"title":"Do we give up supporting dx11？","fancy_title":"Do we give up supporting dx11？","slug":"do-we-give-up-supporting-dx11","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-03T09:37:37.893Z","last_posted_at":"2022-11-03T13:09:15.153Z","bumped":true,"bumped_at":"2022-11-03T15:28:58.128Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":78,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7347,"title":"How does Urho handle script objects each frame?","fancy_title":"How does Urho handle script objects each frame?","slug":"how-does-urho-handle-script-objects-each-frame","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-08T02:33:56.461Z","last_posted_at":"2022-11-08T14:46:09.857Z","bumped":true,"bumped_at":"2022-11-08T14:46:09.857Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":64,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7304,"title":"Urho3D is crashing on Android 12","fancy_title":"Urho3D is crashing on Android 12","slug":"urho3d-is-crashing-on-android-12","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-28T10:03:51.280Z","last_posted_at":"2022-07-28T10:03:51.349Z","bumped":true,"bumped_at":"2022-07-28T10:38:06.014Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":126,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7208,"title":"ScreenSpace Y - Inverted for View3D and RTT","fancy_title":"ScreenSpace Y - Inverted for View3D and RTT","slug":"screenspace-y-inverted-for-view3d-and-rtt","posts_count":14,"reply_count":11,"highest_post_number":15,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/506273b200a2f3337a69438a7989218d599e587b_2_823x1024.png","created_at":"2022-02-24T23:11:35.590Z","last_posted_at":"2022-03-09T12:27:07.577Z","bumped":true,"bumped_at":"2022-03-09T12:27:07.577Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":268,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1004,"username":"GoldenThumbs","name":"Golden Thumbs","avatar_template":"/user_avatar/discourse.urho3d.io/goldenthumbs/{size}/1669_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1335,"username":"justanotherdev","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/e8c25b/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7262,"title":"iOS build cannot be installed on sim or device","fancy_title":"iOS build cannot be installed on sim or device","slug":"ios-build-cannot-be-installed-on-sim-or-device","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d889ae74b8b75bfe705a15b4cee71e82faea0f4d.png","created_at":"2022-05-12T15:33:33.531Z","last_posted_at":"2022-05-12T16:13:22.078Z","bumped":true,"bumped_at":"2022-05-12T16:13:22.078Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":95,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1340,"username":"KatekovAnton","name":"KatekovAnton","avatar_template":"/user_avatar/discourse.urho3d.io/katekovanton/{size}/2988_2.png"}}]}],"tags_descriptions":{},"id":2306,"title":"Alternatives to node subclassing?","fancy_title":"Alternatives to node subclassing?","posts_count":6,"created_at":"2016-10-07T10:15:27.000Z","views":681,"reply_count":0,"like_count":0,"last_posted_at":"2016-10-07T17:10:32.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"alternatives-to-node-subclassing","category_id":9,"word_count":458,"deleted_at":null,"user_id":557,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_2306","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":557,"username":"vudugun","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/d07c76/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":37,"username":"TheComet","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2}],"created_by":{"id":557,"username":"vudugun","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/d07c76/{size}.png"},"last_poster":{"id":557,"username":"vudugun","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/d07c76/{size}.png"}}}