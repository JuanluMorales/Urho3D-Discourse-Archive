{"post_stream":{"posts":[{"id":42901,"name":"Limin Fu","username":"daokoder","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/898d66/{size}.png","created_at":"2021-06-10T13:22:04.886Z","cooked":"\u003cp\u003eI am adding procedurally generated caves to my game. But I found it tricky to render them properly. By default, they are only as dark as the ambient color and shadow color when the sun light is on outside the caves.\u003c/p\u003e\n\u003cp\u003eI read from the documentation that negative lights could be used to make caves dark. But in arbitrarily generated caves, I don’t know if it is possible to place negative lights properly to achieve a reasonable effect. Does anyone know how to do this properly with negative lights?\u003c/p\u003e\n\u003cp\u003eAlternatively, I am considering to use zones inside caves, such that zones near the cave entrances will have lighter ambient color, and zones away from the entrances will have darker ambient color. Then I will also modify the shaders such that shadow colors are properly darkened according to the zone ambient colors. This way I am more or less sure it can produce acceptable results.\u003c/p\u003e\n\u003cp\u003eBut I am curious if there is a better way. Does anyone know how other games (such as Minecraft) handle such problem? Thanks!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2021-06-10T13:22:04.886Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":32,"readers_count":31,"score":11.4,"yours":false,"topic_id":6886,"topic_slug":"how-to-properly-render-dark-caves","display_username":"Limin Fu","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1424,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42902,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2021-06-10T14:00:00.890Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"daokoder\" data-post=\"1\" data-topic=\"6886\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/898d66/40.png\" class=\"avatar\"\u003e daokoder:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDoes anyone know how to do this properly with negative lights?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI don’t consider “negative lights” as sane tool due to the enormous cost and inferior result. May be ok-ish tool to make a couple of blob shadows at the floor or some fancy color-bleeding visual effect, nothing more.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"daokoder\" data-post=\"1\" data-topic=\"6886\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/898d66/40.png\" class=\"avatar\"\u003e daokoder:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAlternatively, I am considering to use zones inside caves, such that zones near the cave entrances will have lighter ambient color, and zones away from the entrances will have darker ambient color\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIt will work and will give you ok-ish results. There are “gradient zones” which support automatic linear blending between \u003cem\u003etwo\u003c/em\u003e zones. The disadvantage is light popping due to discrete zone transitions. Also, zones are boxes, and you may need a lot of padding between interior and exterior. I.e. you cannot make round interior with thin walls: you will have zone bleeding either in or out.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"daokoder\" data-post=\"1\" data-topic=\"6886\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/898d66/40.png\" class=\"avatar\"\u003e daokoder:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDoes anyone know how other games (such as Minecraft) handle such problem?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eMinecraft does simplified raytracing and volume tracing on CPU and just bakes lighting into voxel geometry. If you are okay with Minecraft quality of lighting (lack of actual sharp shadows, minor updates only), you can implement it on your own. Basically, flood fill light into your level and keep it in voxels and geometry. Update lighting for dynamic objects on CPU as well.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"daokoder\" data-post=\"1\" data-topic=\"6886\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/898d66/40.png\" class=\"avatar\"\u003e daokoder:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBut I am curious if there is a better way\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGlobal Illumination is tricky. You can try to implement realtime GI, if you target high-end PC only. I think I saw Urho sample with realtime voxel GI somewhere on this forum.\u003c/p\u003e\n\u003cp\u003eI really like terrahedral interpolation for GI (like Unity does for static ligthing), but it is semi-static: you need to rebuild lookup structure every time you update light probes positions. It would be okay if you generate map only once or change it rarely.\u003c/p\u003e\n\u003cp\u003eTerrahedral interpolation allows you to smoothly interpolate in almost* arbitrary point cloud of sample points, which can be used for ambient lighting, fog intensity, and whatever else.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2021-06-10T14:03:30.691Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":32,"readers_count":31,"score":41.4,"yours":false,"topic_id":6886,"topic_slug":"how-to-properly-render-dark-caves","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42905,"name":"Limin Fu","username":"daokoder","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/898d66/{size}.png","created_at":"2021-06-10T15:41:44.992Z","cooked":"\u003cp\u003eThank you very much! This is a really good and informative reply.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"2\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI don’t consider “negative lights” as sane tool due to the enormous cost and inferior result. May be ok-ish tool to make a couple of blob shadows at the floor or some fancy color-bleeding visual effect, nothing more.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eOK, I will forget about using “negative lights” for this.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"2\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt will work and will give you ok-ish results. There are “gradient zones” which support automatic linear blending between \u003cem\u003etwo\u003c/em\u003e zones. The disadvantage is light popping due to discrete zone transitions. Also, zones are boxes, and you may need a lot of padding between interior and exterior. I.e. you cannot make round interior with thin walls: you will have zone bleeding either in or out.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eZone bleeding won’t be a problem, thin walls can be avoided in my game. I don’t know how visible light popping will be, if it can be reduced to a not-very-obvious level, I consider it acceptable.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"2\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMinecraft does simplified raytracing and volume tracing on CPU and just bakes lighting into voxel geometry. If you are okay with Minecraft quality of lighting (lack of actual sharp shadows, minor updates only), you can implement it on your own. Basically, flood fill light into your level and keep it in voxels and geometry. Update lighting for dynamic objects on CPU as well.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think my game is a lot more sophisticated than Minecraft, I not sure doing all this on CPU would be a good idea in my game. But it’s nice to know how Minecraft does it.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"2\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eGlobal Illumination is tricky. You can try to implement realtime GI, if you target high-end PC only. I think I saw Urho sample with realtime voxel GI somewhere on this forum.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI guess GI is the standard way to this. But I am afraid I don’t enough time to implement an advanced technique such as realtime GI now. My game update has been long overdue, I am actually trying to find a quick solution, otherwise, I will have to postpone the cave feature to future updates.\u003c/p\u003e\n\u003cp\u003eHowever, I am very interested to support realtime GI in my game when time permits in the future. For the realtime voxel GI, are you referring to this one:\u003cbr\u003e\n\u003ca href=\"https://discourse.urho3d.io/t/voxel-cone-tracing-university-project/2457\"\u003ehttps://discourse.urho3d.io/t/voxel-cone-tracing-university-project/2457\u003c/a\u003e?\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"2\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI really like terrahedral interpolation for GI (like Unity does for static ligthing), but it is semi-static: you need to rebuild lookup structure every time you update light probes positions. It would be okay if you generate map only once or change it rarely.\u003c/p\u003e\n\u003cp\u003eTerrahedral interpolation allows you to smoothly interpolate in almost* arbitrary point cloud of sample points, which can be used for ambient lighting, fog intensity, and whatever else.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIt sounds like a very interesting technique, I will keep it in mind for future reference.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2021-06-10T15:41:44.992Z","reply_count":1,"reply_to_post_number":2,"quote_count":1,"incoming_link_count":0,"reads":27,"readers_count":26,"score":10.4,"yours":false,"topic_id":6886,"topic_slug":"how-to-properly-render-dark-caves","display_username":"Limin Fu","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://discourse.urho3d.io/t/voxel-cone-tracing-university-project/2457","internal":true,"reflection":false,"title":"Voxel Cone Tracing University Project","clicks":2}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1424,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42913,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2021-06-10T20:59:54.815Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"daokoder\" data-post=\"3\" data-topic=\"6886\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/898d66/40.png\" class=\"avatar\"\u003e daokoder:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI don’t know how visible light popping will be, if it can be reduced to a not-very-obvious level, I consider it acceptable.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAs long as you have at most 2 adjacent zones, you can easily (almost) avoid light popping via gradient zones. It may be not trivial how to achieve this in arbitrary generated worlds. You will have to have clear separation between outdoor, indoor, and transition regions.\u003c/p\u003e\n\u003cp\u003eOr you can forget about transitions and leave light popping as is, some games got away with it.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"daokoder\" data-post=\"3\" data-topic=\"6886\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/898d66/40.png\" class=\"avatar\"\u003e daokoder:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eHowever, I am very interested to support realtime GI in my game when time permits in the future. For the realtime voxel GI, are you referring to this one:\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ca href=\"https://discourse.urho3d.io/t/rasterized-voxel-based-global-illumination/2115\"\u003eThis topic\u003c/a\u003e, but I didn’t find it really useful. This is just a prototype, 10% of work done.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"daokoder\" data-post=\"3\" data-topic=\"6886\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/898d66/40.png\" class=\"avatar\"\u003e daokoder:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt sounds like a very interesting technique, I will keep it in mind for future reference.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ca href=\"https://ubm-twvideo01.s3.amazonaws.com/o1/vault/gdc2012/slides/Programming%20Track/Cupisz_Robert_Light_Probe_Interpolation.pdf\" rel=\"noopener nofollow ugc\"\u003eThis is the article\u003c/a\u003e. \u003ca href=\"https://github.com/rokups/rbfx/blob/master/Source/Urho3D/Math/TetrahedralMesh.cpp\" rel=\"noopener nofollow ugc\"\u003eThis is my implementation\u003c/a\u003e.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2021-06-10T20:59:54.815Z","reply_count":1,"reply_to_post_number":3,"quote_count":1,"incoming_link_count":0,"reads":23,"readers_count":22,"score":24.6,"yours":false,"topic_id":6886,"topic_slug":"how-to-properly-render-dark-caves","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/rokups/rbfx/blob/master/Source/Urho3D/Math/TetrahedralMesh.cpp","internal":false,"reflection":false,"title":"rbfx/TetrahedralMesh.cpp at master · rokups/rbfx · GitHub","clicks":2},{"url":"https://discourse.urho3d.io/t/rasterized-voxel-based-global-illumination/2115","internal":true,"reflection":false,"title":"Rasterized Voxel-based Global Illumination","clicks":2},{"url":"https://ubm-twvideo01.s3.amazonaws.com/o1/vault/gdc2012/slides/Programming%20Track/Cupisz_Robert_Light_Probe_Interpolation.pdf","internal":false,"reflection":false,"clicks":2}],"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42925,"name":"Limin Fu","username":"daokoder","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/898d66/{size}.png","created_at":"2021-06-11T15:33:23.754Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"4\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAs long as you have at most 2 adjacent zones, you can easily (almost) avoid light popping via gradient zones. It may be not trivial how to achieve this in arbitrary generated worlds. You will have to have clear separation between outdoor, indoor, and transition regions.\u003c/p\u003e\n\u003cp\u003eOr you can forget about transitions and leave light popping as is, some games got away with it.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eRight, such issues should not be much a problem for certain games. Now I am also considering the option of baking similar information into the geometry, it could be simpler and less problematic.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"4\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://discourse.urho3d.io/t/rasterized-voxel-based-global-illumination/2115\"\u003eThis topic\u003c/a\u003e, but I didn’t find it really useful. This is just a prototype, 10% of work done.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eOK, this looks more like it. When I searched for it on the forum yesterday, I didn’t notice I was searching only in this category and could only find something marginally matching to what you were referring to. It does look very interesting, could very well suit my game, but unfortunately it is still incomplete and no longer in active development.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"4\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://ubm-twvideo01.s3.amazonaws.com/o1/vault/gdc2012/slides/Programming%20Track/Cupisz_Robert_Light_Probe_Interpolation.pdf\" rel=\"noopener nofollow ugc\"\u003eThis is the article\u003c/a\u003e. \u003ca href=\"https://github.com/rokups/rbfx/blob/master/Source/Urho3D/Math/TetrahedralMesh.cpp\" rel=\"noopener nofollow ugc\"\u003eThis is my implementation\u003c/a\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eCool, you already implemented this \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/+1.png?v=9\" title=\":+1:\" class=\"emoji\" alt=\":+1:\"\u003e. Curious, I couldn’t find out how light probe data is computed in your implementation. I could be looking at the wrong places since I am quite new to the technique. I would be very interested to use it my game if it is easy enough to adapt \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/grinning.png?v=9\" title=\":grinning:\" class=\"emoji\" alt=\":grinning:\"\u003e\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2021-06-11T15:37:24.373Z","reply_count":1,"reply_to_post_number":4,"quote_count":1,"incoming_link_count":0,"reads":21,"readers_count":20,"score":9.2,"yours":false,"topic_id":6886,"topic_slug":"how-to-properly-render-dark-caves","display_username":"Limin Fu","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1424,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42927,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2021-06-11T16:58:06.663Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"daokoder\" data-post=\"5\" data-topic=\"6886\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/898d66/40.png\" class=\"avatar\"\u003e daokoder:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI couldn’t find out how light probe data is computed in your implementation.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eFile that I referenced is just a generic data structure for interpolation in point cloud.\u003cbr\u003e\nHow do you make this point cloud is up to you.\u003c/p\u003e\n\u003cp\u003eI have implemented raytracer for baking light probes from scene geometry and lights using Embree SDK, but it won’t be easy to adapt in your project, \u003cem\u003eespecially\u003c/em\u003e if you want it in post-deployment time (=on player’s machine instead of developer’s one).\u003c/p\u003e\n\u003cp\u003eYou may want to implement/take interpolation structure and fill light probes in less accurate and more robust way, i.e. by some heuristic algo in the code that generates your game world.\u003c/p\u003e\n\u003cp\u003eNote that tetrahedral interpolation can work in real-time only on “small” objects. Cave walls itself cannot use it for lighting. You will have more luck with baking cave walls ambient into vertex data (coarse but simple) or into lightmap textures (more details, may not worth the trouble).\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2021-06-11T17:02:22.754Z","reply_count":1,"reply_to_post_number":5,"quote_count":1,"incoming_link_count":0,"reads":19,"readers_count":18,"score":23.8,"yours":false,"topic_id":6886,"topic_slug":"how-to-properly-render-dark-caves","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":42929,"name":"Limin Fu","username":"daokoder","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/898d66/{size}.png","created_at":"2021-06-11T18:04:11.955Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"6\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFile that I referenced is just a generic data structure for interpolation in point cloud.\u003cbr\u003e\nHow do you make this point cloud is up to you.\u003c/p\u003e\n\u003cp\u003eI have implemented raytracer for baking light probes from scene geometry and lights using Embree SDK, but it won’t be easy to adapt in your project, \u003cem\u003eespecially\u003c/em\u003e if you want it in post-deployment time (=on player’s machine instead of developer’s one).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI also briefly looked into the project that contains that file, I noticed it included some other source files related to the feature, so I began to wonder if your implementation covered everything I need. Good to know that is not the case.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"6\" data-topic=\"6886\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"\u003e Eugene:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eYou may want to implement/take interpolation structure and fill light probes in less accurate and more robust way, i.e. by some heuristic algo in the code that generates your game world.\u003c/p\u003e\n\u003cp\u003eNote that tetrahedral interpolation can work in real-time only on “small” objects. Cave walls itself cannot use it for lighting. You will have more luck with baking cave walls ambient into vertex data (coarse but simple) or into lightmap textures (more details, may not worth the trouble).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eOK, I will try to figure out how to do these in my game. It seems every approach will take quite a while to implement, so I think I will postpone the cave feature at the moment, and focus on finishing other parts of the current update.\u003c/p\u003e\n\u003cp\u003eI will resume the cave feature for another big update. Thank you very much for all your advices, they are very helpful.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2021-06-11T18:04:11.955Z","reply_count":0,"reply_to_post_number":6,"quote_count":1,"incoming_link_count":0,"reads":19,"readers_count":18,"score":3.8,"yours":false,"topic_id":6886,"topic_slug":"how-to-properly-render-dark-caves","display_username":"Limin Fu","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1424,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[42901,42902,42905,42913,42925,42927,42929]},"timeline_lookup":[[1,531],[4,530],[6,529]],"suggested_topics":[{"id":7075,"title":"How pre-calculate tangents on vertices - model built in code?","fancy_title":"How pre-calculate tangents on vertices - model built in code?","slug":"how-pre-calculate-tangents-on-vertices-model-built-in-code","posts_count":4,"reply_count":2,"highest_post_number":4,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/0/0e9c502d8d186f6e73e694514a63271e59fe1909.jpeg","created_at":"2021-12-01T18:50:44.369Z","last_posted_at":"2021-12-02T04:50:34.440Z","bumped":true,"bumped_at":"2021-12-02T04:50:34.440Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":130,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7071,"title":"Is there a Technique that supports surface displacement?","fancy_title":"Is there a Technique that supports surface displacement?","slug":"is-there-a-technique-that-supports-surface-displacement","posts_count":8,"reply_count":5,"highest_post_number":8,"image_url":null,"created_at":"2021-11-30T07:14:21.455Z","last_posted_at":"2021-12-05T01:20:34.514Z","bumped":true,"bumped_at":"2021-12-05T01:20:34.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":326,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7160,"title":"RayCast trouble","fancy_title":"RayCast trouble","slug":"raycast-trouble","posts_count":17,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-01-29T00:06:00.367Z","last_posted_at":"2022-01-30T00:29:39.356Z","bumped":true,"bumped_at":"2022-01-30T00:29:39.356Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":260,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]},{"id":7119,"title":"How to programmatically access Morph Target in FBX file?","fancy_title":"How to programmatically access Morph Target in FBX file?","slug":"how-to-programmatically-access-morph-target-in-fbx-file","posts_count":13,"reply_count":8,"highest_post_number":13,"image_url":null,"created_at":"2022-01-03T23:01:43.070Z","last_posted_at":"2022-01-05T11:55:31.130Z","bumped":true,"bumped_at":"2022-01-05T11:55:31.130Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":214,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1499,"username":"csteaderman","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/b487fb/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]}],"tags_descriptions":{},"id":6886,"title":"How to properly render dark caves?","fancy_title":"How to properly render dark caves?","posts_count":7,"created_at":"2021-06-10T13:22:04.751Z","views":358,"reply_count":5,"like_count":4,"last_posted_at":"2021-06-11T18:04:11.955Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"how-to-properly-render-dark-caves","category_id":7,"word_count":2067,"deleted_at":null,"user_id":1424,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6886","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":7,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1424,"username":"daokoder","name":"Limin Fu","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/898d66/{size}.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1424,"username":"daokoder","name":"Limin Fu","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/898d66/{size}.png"},"last_poster":{"id":1424,"username":"daokoder","name":"Limin Fu","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/898d66/{size}.png"},"links":[{"url":"https://discourse.urho3d.io/t/rasterized-voxel-based-global-illumination/2115","title":"Rasterized Voxel-based Global Illumination","internal":true,"attachment":false,"reflection":false,"clicks":2,"user_id":484,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"},{"url":"https://discourse.urho3d.io/t/voxel-cone-tracing-university-project/2457","title":"Voxel Cone Tracing University Project","internal":true,"attachment":false,"reflection":false,"clicks":2,"user_id":1424,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"},{"url":"https://github.com/rokups/rbfx/blob/master/Source/Urho3D/Math/TetrahedralMesh.cpp","title":"rbfx/TetrahedralMesh.cpp at master · rokups/rbfx · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":484,"domain":"github.com","root_domain":"github.com"},{"url":"https://ubm-twvideo01.s3.amazonaws.com/o1/vault/gdc2012/slides/Programming%20Track/Cupisz_Robert_Light_Probe_Interpolation.pdf","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":484,"domain":"ubm-twvideo01.s3.amazonaws.com","root_domain":"ubm-twvideo01.s3.amazonaws.com"}]}}