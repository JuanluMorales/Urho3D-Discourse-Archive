{"post_stream": {"posts": [{"id": 35848, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-02-09T20:21:31.454Z", "cooked": "<p>This thread is meant to discuss the addition of relative path support to the engine, specifically regarding resource loading (and to keep the EASTL thread from getting off topic). The proposed change allows the grouping of resources more easily by map section or character, so that within, for example, \u201cMap/World1/Level1/node.xml\u201d resources can be identified as \u201c./tree1.mdl\u201d, \u201c./tree1leaves.png\u201d without having to write out the full path for every resource. It also makes some situations of getting resources from the code simpler (I want the clothes.png file from the same directory as this character specification file, for example). Present behavior would be preserved for the most part (technically it would change, as relative path directories <code>../</code> and <code>./</code> are just stripped from the requested paths, but that I hope is not a feature anyone is relying on or using) \u2013 requesting \u2018Models/Box.mdl\u2019 would still give exactly the same result, but now we could use \u2018./normal.png\u2019 from a material rather than having to specify a different directory (which I feel is a much better resource layout for an actual game where textures will largely not be re-used between characters and such, though not so much the samples where the resources are rather heavily re-used so dividing by the type of resource is makes more reasonable).</p>\n<p>Existing resource loading will be changed (all of the GetResource type functions), requiring an additional parameter (a base path) or switching the String resourceName (i.e. path) parameters to a separate Path class so that the relative paths can be resolved. The extra parameter will be inserted before the bool argument as it should be grouped with the actual resource path requested rather than whether an event is sent on failure. It will have a default empty string parameter, so only the case of specifically requesting an event not be sent on failure will existing user code need to be changed (and possibly also custom resources will need to be modified).</p>\n<p>In terms of a cost-benefit, we gain support for relative paths at the cost of a  <em>slight</em>  increase in complexity in searching for a resource, which is likely not a bottleneck in anyone\u2019s programs, so this should be fine.</p>\n<p>I submitted a Pull Request for this addition two and a half years ago that is still open, so with this thread we can hopefully update and merge that shortly (since then I have let it grow out of date with master, but since there seems to be some interest I\u2019ll go ahead and bring it up to date over the next couple of</p>\n<aside class=\"onebox githubpullrequest\">\n  <header class=\"source\">\n      <a href=\"https://github.com/urho3d/Urho3D/pull/2070\" target=\"_blank\">github.com/urho3d/Urho3D</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Pull Request\">\n    <svg width=\"60\" height=\"60\" class=\"github-icon\" viewbox=\"0 0 12 16\" aria-hidden=\"true\"><path d=\"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/urho3d/Urho3D/pull/2070\" target=\"_blank\">Relative paths</a>\n    </h4>\n\n    <div class=\"branches\">\n      <code>urho3d:master</code> \u2190 <code>SirNate0:relative-paths</code>\n    </div>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2017-08-15\" data-time=\"02:50:13\" data-timezone=\"UTC\">02:50AM - 15 Aug 17 UTC</span>\n      </div>\n\n      <div class=\"user\">\n        <a href=\"https://github.com/SirNate0\" target=\"_blank\">\n          <img alt=\"SirNate0\" src=\"https://avatars0.githubusercontent.com/u/10181610?v=4\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\">\n          SirNate0\n        </a>\n      </div>\n\n      <div class=\"lines\" title=\"10 commits changed 69 files with 323 additions and 163 deletions\">\n        <a href=\"https://github.com/urho3d/Urho3D/pull/2070/files\" target=\"_blank\">\n          <span class=\"added\">+323</span>\n          <span class=\"removed\">-163</span>\n        </a>\n      </div>\n    </div>\n\n  </div>\n</div>\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n\n<hr>\n<p>There are a few implementation details to discuss, you can see a couple mentioned in the PR comments. One major one that might not have been mentioned is how we should add the base path parameter. I went with just adding a second string, as you may have noticed, but I also favor the addition of an actual Path class in place of just using strings. This Path would either store both the relative and base path itself, or it would just store the final resolved path (not truly an absolute one since we\u2019re still using it to search the resource directories) when constructed from a relative and base path strings. If it were implicitly constructable from a String, I believe it should not require any changes to the code to switch to such a class.</p>\n<p>If we went with that, we might want to opt for including this in Urho\u2019s 2.0 release, and we could also go and move a lot of path-related features into the class (see the resource loading code for some of what I mean).</p>\n<p>That said, a separate path class seems rather unnecessary to me since strings work perfectly fine for it, and then you have to decide implementation details like do we store the path as a String with the full path or as a StringVector of every component.</p>", "post_number": 1, "post_type": 1, "updated_at": "2020-02-09T20:21:31.454Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 26, "reads": 45, "readers_count": 44, "score": 171.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://github.com/urho3d/Urho3D/pull/2070", "internal": false, "reflection": false, "title": "Relative paths by SirNate0 \u00b7 Pull Request #2070 \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 1}, {"url": "https://github.com/SirNate0", "internal": false, "reflection": false, "title": "SirNate0 \u00b7 GitHub", "clicks": 0}, {"url": "https://github.com/urho3d/Urho3D/pull/2070/files", "internal": false, "reflection": false, "title": "Relative paths by SirNate0 \u00b7 Pull Request #2070 \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 0}, {"url": "https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/63", "internal": true, "reflection": true, "title": "Migration from custom container library to augmented EASTL", "clicks": 1}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "count": 2}], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35849, "name": "", "username": "1vanK", "avatar_template": "/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png", "created_at": "2020-02-09T21:38:40.734Z", "cooked": "<p>We can go another way. The paths to loaded files (base path) user can store in SetVar(). We need only allow users to specify a proxy function (callback), which will modify path before loading.</p>", "post_number": 2, "post_type": 1, "updated_at": "2020-02-09T21:38:40.734Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 40, "readers_count": 39, "score": 8.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": true, "admin": false, "staff": true, "user_id": 263, "hidden": false, "trust_level": 4, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35850, "name": "", "username": "1vanK", "avatar_template": "/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png", "created_at": "2020-02-09T21:42:24.678Z", "cooked": "<p>actually we have AddResourceRouter() I haven\u2019t watched yet if this is suitable</p>", "post_number": 3, "post_type": 1, "updated_at": "2020-02-09T21:42:24.678Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 40, "readers_count": 39, "score": 13.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": true, "admin": false, "staff": true, "user_id": 263, "hidden": false, "trust_level": 4, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35851, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-02-09T21:45:48.861Z", "cooked": "<p>Thanks for the link, I checked it.<br>\nI remember now why this PR was not merged back then.</p>\n<p>I see the following issues with this approach:</p>\n<ol>\n<li>\n<p>The only way Urho support \u201cprefabs\u201d now is via <code>Scene::Instantiate*</code>.<br>\nHowever, if you don\u2019t have any mechanism to set base path for node in this case, you will be unable to load prefabs with relative paths. And this is one of important use cases \u2013 to instantiate prefabs.</p>\n</li>\n<li>\n<p>However, if you fix (1) by changing signatures and setting base path, redundant realtime memory consumption will be introduced. It is a lot of wasted strings to keep file name for each node. Nodes in Urho are already fat and there were attempts to make them thinner, not fatter. <a href=\"https://www.boost.org/doc/libs/1_72_0/libs/flyweight/doc/index.html\" rel=\"nofollow noopener\">There are solutions for this type of problem</a>, but I\u2019m not sure if this approach will help here.</p>\n</li>\n<li>\n<p>Relative paths are very fragile. The only way you can <em>create</em> them is to manually edit text files.<br>\nThe moment you save anything via Urho facilities, relative paths are gone. It is especially painful for e.g. materials \u2013 the moment you use editor relative paths are ruined.</p>\n</li>\n</ol>\n<p>So far, it doesn\u2019t look as self-consistent feature. It will start falling apart the moment you touch it wrong way.</p>\n<p>I don\u2019t have any <em>non-radical</em> ideas now, but I will post here if I come up with anything.</p>", "post_number": 4, "post_type": 1, "updated_at": "2020-02-09T21:51:32.242Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 40, "readers_count": 39, "score": 13.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://www.boost.org/doc/libs/1_72_0/libs/flyweight/doc/index.html", "internal": false, "reflection": false, "title": "Boost.Flyweight Documentation - Index - 1.72.0", "clicks": 2}], "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35852, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-02-09T21:49:23.023Z", "cooked": "<p>If I remember correctly, Resource Routers are not sufficient at present since it is impossible to determine who is requesting the resource, and beyond that the \u2026/ portions of the path have also been sanitized. This sort of approach doesn\u2019t sound too bad - we add a third parameter to the Resource Cache along the lines of an Object*</p>", "post_number": 5, "post_type": 1, "updated_at": "2020-02-09T21:49:23.023Z", "reply_count": 0, "reply_to_post_number": 3, "quote_count": 0, "incoming_link_count": 0, "reads": 39, "readers_count": 38, "score": 7.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "1vanK", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35834, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-02-09T17:32:45.973Z", "cooked": "<aside class=\"quote no-group\" data-username=\"George1\" data-post=\"65\" data-topic=\"5872\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"><a href=\"https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/65\">Migration from custom container library to augmented EASTL</a>\n</div>\n<blockquote>\n<p>What are your plan to execute it? What are the expected timeline\u2026 What are the priority?</p>\n</blockquote>\n</aside>\n<p>For relative paths I have already done it (see point 6). Updating it to work with master is an afternoon\u2019s work probably, but I\u2019m pretty busy with other stuff at the moment so it might take a few weeks to get to.</p>\n<aside class=\"quote no-group\" data-username=\"George1\" data-post=\"65\" data-topic=\"5872\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"><a href=\"https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/65\">Migration from custom container library to augmented EASTL</a>\n</div>\n<blockquote>\n<p>Is relative path hard to do? Can\u2019t you manually support it? Some game uses package pk2 etc.</p>\n</blockquote>\n</aside>\n<p>No, it wasn\u2019t that hard to do. I\u2019m not sure what you mean by manually? I don\u2019t use an external library if that\u2019s what you mean. It\u2019s a pretty simple algorithm - if the path starts with ./ or \u2026/ you add it to the base path directory and then split by /, read from outer to inner directories removing all . and removing the top directory whenever there is a \u2026</p>\n<p>For adding spans I\u2019d estimate tentatively a month. How I intend to do it remains to be seen, but since I\u2019m not asking anyone to help with that the method doesn\u2019t matter as only the result will affect anyone else.</p>\n<aside class=\"quote no-group\" data-username=\"George1\" data-post=\"65\" data-topic=\"5872\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"><a href=\"https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/65\">Migration from custom container library to augmented EASTL</a>\n</div>\n<blockquote>\n<p>package pk2</p>\n</blockquote>\n</aside>\n<p>No idea what this is, and I couldn\u2019t find it with a quick Google search. It sounds more like an alternate package file, which is not what my proposal was about (but is what a different pull request of mine is about).</p>\n<aside class=\"quote no-group\" data-username=\"George1\" data-post=\"65\" data-topic=\"5872\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"><a href=\"https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/65\">Migration from custom container library to augmented EASTL</a>\n</div>\n<blockquote>\n<p>My concern is putting too many things up without a clear plan, schedule and task allocation is not how things should be operated.</p>\n</blockquote>\n</aside>\n<p>This would apply to very large changes, but I would argue that learning if the changes would be welcome should still be done before this step. In any case, I\u2019m not being paid for this, it\u2019s literally just because I want these features and I\u2019m willing to share since others might too. Sometimes it\u2019s less than that, more of I kind of want this feature, and I\u2019m pretty sure others do as well, and I like programming, so I\u2019ll try this, particularly if others do actually want the feature. Also, I don\u2019t really think task allocation fits with a volunteer-based open source project. Who exactly are you allocating tasks to? (To further illustrate my point, and not because I think it will happen: Are you going to tell my that I should work on some other feature like improving networking or PBR because those are considered a \u2018higher priority\u2019?)</p>\n<aside class=\"quote no-group\" data-username=\"George1\" data-post=\"65\" data-topic=\"5872\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"><a href=\"https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/65\">Migration from custom container library to augmented EASTL</a>\n</div>\n<blockquote>\n<p>I can come up with 20 things, but that won\u2019t help much.</p>\n</blockquote>\n</aside>\n<p>None of the things I\u2019ve suggested are a wishlist - I wish someone would do the work to make Urho have this feature. They are either things that I intend to do, or they are things that someone else has already done 90% of the work for and has volunteered to finish up if the community is interested.</p>", "post_number": 6, "post_type": 1, "updated_at": "2020-02-09T22:16:49.843Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 1, "incoming_link_count": 2, "reads": 44, "readers_count": 43, "score": 38.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/65", "internal": true, "reflection": false, "title": "Migration from custom container library to augmented EASTL", "clicks": 0}, {"url": "https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/75", "internal": true, "reflection": true, "title": "Migration from custom container library to augmented EASTL", "clicks": 0}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35835, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-02-09T17:36:04.437Z", "cooked": "<p>Are relative paths supported in the Scene in your implementation? If so, where do you take the paths from?</p>", "post_number": 7, "post_type": 1, "updated_at": "2020-02-09T22:16:49.855Z", "reply_count": 1, "reply_to_post_number": 6, "quote_count": 0, "incoming_link_count": 0, "reads": 40, "readers_count": 39, "score": 13.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "reply_to_user": {"username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35838, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-02-09T17:44:58.261Z", "cooked": "<p>Each node stores it\u2019s own file\u2019s path (and one or two other things deriving from Serializable), and when loading resources they pass their own path if they request another resource. I don\u2019t load scenes, I load lots of nodes (for map sections, for characters, etc.) so I believe it would still work perfectly fine with listing scenes but I\u2019ve also not rigorously tested that aspect.</p>\n<p>If we want to continue discussing this it may be best to start a new thread or continue in the comments on the PR so we don\u2019t get too off the topic of EASTL (though I understand this is also basically my fault).</p>", "post_number": 8, "post_type": 1, "updated_at": "2020-02-09T22:16:49.863Z", "reply_count": 1, "reply_to_post_number": 7, "quote_count": 0, "incoming_link_count": 0, "reads": 38, "readers_count": 37, "score": 27.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "Eugene", "name": "Eugene Kozlov", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35839, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-02-09T17:48:16.412Z", "cooked": "<p>Do you maybe have prototype code online? I don\u2019t completely understand how it is implemented just from your words and I\u2019m curious  about certain aspects of implementation.</p>", "post_number": 9, "post_type": 1, "updated_at": "2020-02-09T22:16:49.871Z", "reply_count": 0, "reply_to_post_number": 8, "quote_count": 0, "incoming_link_count": 0, "reads": 36, "readers_count": 35, "score": 7.2, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "reply_to_user": {"username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35854, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-02-09T22:31:16.445Z", "cooked": "<p>I\u2019m not sure what you mean by not a self-consistent feature, and I do think you will always have relative paths fall apart the moment you touch it the <em>wrong</em> way (as soon as you move a file to a different folder it falls apart, for example). The only reason it doesn\u2019t fall apart like that as we have things now is because there is no such feature.</p>\n<p>To try to address your issues:</p>\n<ol>\n<li>Yes, nodes will have to store paths. This could be done in the User variables or in the NodeImpl class (I went with the latter since it is not a User variable but a library one and this should be slightly more memory efficient than storing it in the HashMap).</li>\n<li>This could be addressed by only having the parent node of the prefab store the path, but at the cost of a significantly increased lookup time, or by storing the paths in a global HashMap (HashSet?) and only storing the key in the Node, which adds a global variable but saves memory while not being that great an increase in lookup time.</li>\n<li>Firstly, so what if they are fragile. MDL files are also very fragile, once the model has been imported the only way to get it out to a usable format is to export the Drawable to an OBJ. The point is not to make the filenames of the resources shorter when they are referenced (they\u2019re compressed anyways in package files so the difference should be pretty negligible), but to make creating the files referencing the resources easier. While the present architecture prevents us from keeping any sort of \u2018this was a relative resource loaded from X\u2019 information with the resource (as that would render the cache less useful since you\u2019d have to keep a new copy of each resource for every possible relative name, as opposed to just every possible full name as it is now), it is possible to generate relative paths just as much as it is to load them (but then you run into issues of should it be <code>../../LevelResources/Tree.png</code> or just <code>Maps/LevelResources/Tree.png</code> when saving). To the best of my knowledge, any comments in the XML file are also not preserved when saving from the editor, or which values were just left as the default, so I don\u2019t have any problem with this fragility: Use the editor, lose the commented out old diffuse texture. Likewise, use the editor, lose that it was \u2018./Skin.png\u2019 as opposed to \u2018Characters/Warrior/Skin.png\u2019.</li>\n</ol>", "post_number": 10, "post_type": 1, "updated_at": "2020-02-09T22:33:45.256Z", "reply_count": 1, "reply_to_post_number": 4, "quote_count": 0, "incoming_link_count": 0, "reads": 38, "readers_count": 37, "score": 12.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "Eugene", "name": "Eugene Kozlov", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35855, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-02-09T23:43:14.370Z", "cooked": "<aside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"10\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<p>MDL files are also very fragile, once the model has been imported the only way to get it out to a usable format is to export the Drawable to an OBJ</p>\n</blockquote>\n</aside>\n<p>Bad example. MDLs (as <code>Model</code>) does not support save at all.<br>\nHowever, <code>Material</code> does support save. Moreover, it is <em>guaranteed</em> that if you load material you can save it and it will be functionally the same. This guarantee is critical for proper work of tools like material editor and so on.</p>\n<blockquote>\n<p>Firstly, so what if they are fragile</p>\n</blockquote>\n<p>When user try to use material editor on the material from their prefab, save it with or without changes, and get relative paths corrupted, they will report a bug and I wouldn\u2019t argue with them.<br>\nWhy \u201ccorrupted\u201d? Because user will think that everthing is ok until they try to move their folder with relative (as they think) paths. Then things will explode.</p>\n<aside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"10\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<p>\u2019m not sure what you mean by not a self-consistent feature</p>\n</blockquote>\n</aside>\n<p>I mean amount of places marked as TODO or \u201cdoesn\u2019t work\u201d, and general complexity in API changes.<br>\nThis is a sign that currently this feature doesn\u2019t work together with the rest of the code, but against it.<br>\nDo you know this feeling? When you are trying to solve some problem, but every fixed issue greatly increase complexity of changes and you feel like you are sinking deeper and deeper?</p>\n<p>I think I just found a chunk of code that is probably screwed due to changed meaning of \u201cname\u201d, and there may be more<br>\n<a href=\"https://github.com/urho3d/Urho3D/pull/2070/files#diff-7b9673cfc396212ff55f1c1bee79ab6eR1342\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Relative paths by SirNate0 \u00b7 Pull Request #2070 \u00b7 urho3d/Urho3D \u00b7 GitHub</a></p>\n<p>If we claim that relative paths are supported, we need to support them as well as absolute paths.<br>\nI.e. if I load scene from file in any way and then instantiate prefab (in any way), I expect relative paths be resolved, if their support is declared.</p>\n<hr>\n<p>This part is just a speculation</p>\n<p>I believe that most of the complexity here are caused by the fact that relative paths are handled by scene hierarchy, while said hierarchy should not care about relative/absolute paths at all. Paths are responsibility of Resource subsystem.</p>\n<p>Generally speaking, <code>Node</code> does not have a file name. Only special types of nodes have it.<br>\nAnd I don\u2019t mean there should be empty strings for the rest of the nodes. There should be no string at all.</p>\n<p>In perfect world <code>Scene</code> and <code>Prefab</code> should be <code>Resource</code>s and handle all relative-path stuff on their own, leaving <code>Node</code> and <code>Serializable</code> untouched. All paths coming to scene hierarchy should be already converted to absolute.</p>\n<hr>\n<p>PS. I\u2019m sorry beforehand if you consider my replies nitpicking for some reason. I\u2019m just reviewing your code with the exactly same attention to details as I review with my own code I merge into master of Urho (or now rbfx), or as I review the code of my colleagues. I just cannot do it in any other way and ignore issues I consider important. Maybe others will find this solution appropriate.</p>", "post_number": 11, "post_type": 1, "updated_at": "2020-02-09T23:51:20.589Z", "reply_count": 2, "reply_to_post_number": 10, "quote_count": 1, "incoming_link_count": 0, "reads": 37, "readers_count": 36, "score": 62.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://github.com/urho3d/Urho3D/pull/2070/files#diff-7b9673cfc396212ff55f1c1bee79ab6eR1342", "internal": false, "reflection": false, "title": "Relative paths by SirNate0 \u00b7 Pull Request #2070 \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 2}], "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [{"id": 2, "count": 3}], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35857, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-02-10T02:19:57.905Z", "cooked": "<p>Supporting relative paths for resource dependencies should be possible <em>without</em> modifying function signatures in a way that breaks backwards compatibility. Maybe the <code>ResourceCache</code> and <code>FileSystem</code> could work together to achieve this by keeping track of the master resource location, which would then be used to supplement relative paths. When saving a resource I imagine the option to save relative paths could be passed as a <code>bool</code> which defaults to <code>false</code>. The resource itself would not have to be aware of its path\u2019s relativity.</p>", "post_number": 12, "post_type": 1, "updated_at": "2020-02-10T02:21:46.176Z", "reply_count": 0, "reply_to_post_number": 11, "quote_count": 0, "incoming_link_count": 0, "reads": 35, "readers_count": 34, "score": 22.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "", "reply_to_user": {"username": "Eugene", "name": "Eugene Kozlov", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35861, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-02-10T05:22:06.330Z", "cooked": "<p><a class=\"mention\" href=\"/u/eugene\">@Eugene</a> you\u2019re probably right about the mdl\u2019s, saving them is not something I\u2019ve ever wanted to do. However, I disagree with your critique regarding the editor, if the resource is simply loaded and saved it will behave exactly the same. It is only if the file is then moved that there would be a difference in behavior, which I don\u2019t see as an issue. (I also don\u2019t really like or use the editor, and wish we would just make the blender exporter slightly better to use it as the default editor, so feel free to take that as you will). If I\u2019m not mistaken (I also haven\u2019t tried it in the editor to see), the texture paths displayed for the material will be the full paths, so there should be no confusion.</p>\n<p>Thank you for the clarification about what you meant by self-consistent feature. I see your point, and I mostly agree - at present the feature is half-baked (maybe a bit more than that, but certainly not polished and complete). I don\u2019t see the broken thing in the diff, but I also didn\u2019t scroll all the way through it so you\u2019ll have to be a little more detailed. If it\u2019s using the resource name as a path I disagree, as the name is set when it is loaded based on the path, but I have no idea if that was what you were meaning. If it\u2019s about the JSON support, I\u2019m fine with fixing it, but we have to add a WeakPtr to the JSONFile to every JSONValue just like we can access the XMLFile from an XMLElement (or you may propose an alternate solution).</p>\n<aside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"11\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"> Eugene:</div>\n<blockquote>\n<p>I believe that most of the complexity here are caused by the fact that relative paths are handled by scene hierarchy, while said hierarchy should not care about relative/absolute paths at all. Paths are responsibility of Resource subsystem.</p>\n</blockquote>\n</aside>\n<p>I half agree, as generally paths are the domain of the resource cache. I half don\u2019t, because Nodes and Components are Serializable, and can thus be deserialized from some source, which generally implies a path (potentially a network update).</p>\n<aside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"11\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"> Eugene:</div>\n<blockquote>\n<p>In perfect world <code>Scene</code> and <code>Prefab</code> should be <code>Resource</code> s and handle all relative-path stuff on their own, leaving <code>Node</code> and <code>Serializable</code> untouched. All paths coming to scene hierarchy should be already converted to absolute.</p>\n</blockquote>\n</aside>\n<p>Sounds mostly doable to me, if we wanted to. We have a prefab resource that will load a node, we add an optional basePath parameter to Serializable\u2019s Load functions*, and it passes those on to the resource cache whenever is loads something. We add a Prefab component or variable to the node that keeps track of whether the node was created from a prefab so that on Serialization the node gets inserted into the file as a prefab instead of the full heirarchy for it. Saving the prefab is done through the prefab resource and not the node itself, just as the material xml does not get embedded in the scene xml (nor does saving the scene save changes to the material).</p>\n<p>*Yes, this does mean the paths aren\u2019t absolute before the node gets them, but it also makes it possible to load a node from an arbitrary base path from code, which seems better to me than forcing the user to create a prefab resource to support any relative paths in the node. But we may also have slightly different ideas of what a prefab is.</p>\n<p>Addressing your PS, no, I don\u2019t really consider them nit-picking, just detailed feedback. It\u2019s a good thing that everyone knows in more detail what is being proposed, and also good to work out how we want to address the details I haven\u2019t. I don\u2019t share your polish-then-share philosophy, I finish it until it does what I need it to and then the edges I haven\u2019t gotten to yet (like polishing the JSON aspect) I will finish with feedback from the community (then I don\u2019t have to write a second implementation if they didn\u2019t like the first.</p>\n<p><a class=\"mention\" href=\"/u/modanung\">@Modanung</a> it\u2019s entirely possible to do without breaking backwards compatibility, we just use multiple overloads of the functions (unless everyone else insists, I refuse to separate the name (path) and base path parameters in the arguments list since they are closely related. Alternatively, we go with making a separate Path class implicitly constructable from a String (with optional base path). As to \u201ckeeping track of the master resource location\u201d I assume you are envisioning some sort of stack that would be queried so resources that request other resources pick the right base path? If so, I don\u2019t think it would be a good idea because 1) that seems to result in Serializable\u2019s like Node not being able to use relative paths and 2) it would make it harder to load a resource from a base path from code.</p>\n<p>Also, I like the proposed saving solution.</p>\n<p>For the record, I favor the <code>class Path</code> approach, as it would be easier to add features to later, but it is also more work and a bigger change. I\u2019m willing to make those changes if you guys want, but I don\u2019t intend to unless you think it would be accepted, as what I have already meets my needs.</p>", "post_number": 13, "post_type": 1, "updated_at": "2020-02-10T05:24:27.010Z", "reply_count": 2, "reply_to_post_number": null, "quote_count": 1, "incoming_link_count": 0, "reads": 39, "readers_count": 38, "score": 32.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": "Addressed further point in reply.", "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35862, "name": "", "username": "1vanK", "avatar_template": "/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png", "created_at": "2020-02-10T05:51:33.424Z", "cooked": "<p>In fact, I see no problem in storing ABSOLUTE file path for a loaded resource. Just as a user can save a text document with Save button, the user may want to save the previously loaded scene / node / material. A pointer to a string does not greatly increase size of the class. At the same time, I do not see anything wrong with the fact that when loading a resource, is passed additional information about who requested this resource (pointer to an object as SirNate0 said earlier).</p>", "post_number": 14, "post_type": 1, "updated_at": "2020-02-10T05:52:30.921Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 37, "readers_count": 36, "score": 22.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": true, "admin": false, "staff": true, "user_id": 263, "hidden": false, "trust_level": 4, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35866, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-02-10T08:44:23.897Z", "cooked": "<aside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"13\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<p>I don\u2019t see the broken thing in the diff, but I also didn\u2019t scroll all the way through it so you\u2019ll have to be a little more detailed.</p>\n</blockquote>\n</aside>\n<p>Oh, sorry, I always forget that github diff links are wonky in big PRs.</p><aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Scene/Scene.cpp#L1337-L1343\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Scene/Scene.cpp#L1337-L1343\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Scene/Scene.cpp#L1337-L1343\" target=\"_blank\" rel=\"noopener nofollow ugc\">urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Scene/Scene.cpp#L1337-L1343</a></h4>\n\n\n\n  <pre class=\"onebox\">    <code class=\"lang-cpp\">\n      <ol class=\"start lines\" start=\"1337\" style=\"counter-reset: li-counter 1336 ;\">\n          <li>String name = cache-&gt;SanitateResourceName(ref.name_);\n</li>\n          <li>bool success = cache-&gt;BackgroundLoadResource(ref.type_, name, GetBasePath());\n</li>\n          <li>if (success)\n</li>\n          <li>{\n</li>\n          <li>    ++asyncProgress_.totalResources_;\n</li>\n          <li>    asyncProgress_.resources_.Insert(StringHash(name));\n</li>\n          <li>}\n</li>\n      </ol>\n    </code>\n  </pre>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n<p>\nYou see, this code assumes that if you pass sanitated resource name into ResourceCache and get back a resource, the name of said resource would be exactly the same as you passed.</p>\n<p>Moreover, sanitation kills relative paths, so this code just will not work.</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Resource/ResourceCache.cpp#L841-L846\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Resource/ResourceCache.cpp#L841-L846\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Resource/ResourceCache.cpp#L841-L846\" target=\"_blank\" rel=\"noopener nofollow ugc\">urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Resource/ResourceCache.cpp#L841-L846</a></h4>\n\n\n\n  <pre class=\"onebox\">    <code class=\"lang-cpp\">\n      <ol class=\"start lines\" start=\"841\" style=\"counter-reset: li-counter 840 ;\">\n          <li>String ResourceCache::SanitateResourceName(const String&amp; nameIn) const\n</li>\n          <li>{\n</li>\n          <li>    // Sanitate unsupported constructs from the resource name\n</li>\n          <li>    String name = GetInternalPath(nameIn);\n</li>\n          <li>    name.Replace(\"../\", \"\");\n</li>\n          <li>    name.Replace(\"./\", \"\");\n</li>\n      </ol>\n    </code>\n  </pre>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Actually, it may be a sign that you don\u2019t need basePath support in <em>all</em> functions of resource cache. You need it only in SanitateResourceName that will resolve relative paths into absolute. Then you just use this function to get absolute resource path every time you may have relative one.</p>", "post_number": 15, "post_type": 1, "updated_at": "2020-02-10T08:44:37.729Z", "reply_count": 1, "reply_to_post_number": 13, "quote_count": 1, "incoming_link_count": 0, "reads": 35, "readers_count": 34, "score": 12.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://github.com/urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Resource/ResourceCache.cpp#L841-L846", "internal": false, "reflection": false, "title": "Urho3D/ResourceCache.cpp at f764aca5b36eb68a1efbb21702115af89ffb0e2c \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 0}, {"url": "https://github.com/urho3d/Urho3D/blob/f764aca5b36eb68a1efbb21702115af89ffb0e2c/Source/Urho3D/Scene/Scene.cpp#L1337-L1343", "internal": false, "reflection": false, "title": "Urho3D/Scene.cpp at f764aca5b36eb68a1efbb21702115af89ffb0e2c \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 0}], "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35870, "name": "Thomas Trocha", "username": "dertom", "avatar_template": "/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png", "created_at": "2020-02-10T09:42:19.587Z", "cooked": "<p>I have to say that I didn\u2019t read this thread fully and I didn\u2019t realize the problems,yet. (I will take some time after work). But I have another suggestion.<br>\nWouldn\u2019t it be possible to let the resource-cache create sub-resourcecaches as needed. Every single one of them would again be a resource-cache pointing to the relative folder. They would be managed by the parent-resource-cache and would need to be connected in some way to the parent\u2026 (if that is needed at all)<br>\nAny resource accessing object would have an additional relative resource-cache poiting to folder it was loaded from. On any resource access we would need to check if a relative prefix is present or not  and choose between the relative or the global resourcecache.<br>\nI\u2019m not sure if that approach is possible at all,maybe there are some oppions and hints from the more experienced users before I start looking deeper into it.</p>", "post_number": 16, "post_type": 1, "updated_at": "2020-02-10T09:44:20.198Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 35, "readers_count": 34, "score": 7.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Thomas Trocha", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1038, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35892, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-02-10T11:58:12.766Z", "cooked": "<aside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"13\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<ol>\n<li>that seems to result in Serializable\u2019s like Node not being able to use relative paths and 2) it would make it harder to load a resource from a base path from code.</li>\n</ol>\n</blockquote>\n</aside>\n<p>Would (relative) paths not always reside in XML or JSON files? I think relative paths could be fixed as they are read. There is no need for a <code>Path</code> class in that case.</p>\n<p>For the sake of consistency, functions that refurbish paths should reside over at the <code>FileSystem</code>. Have a look at <a href=\"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/IO/FileSystem.h#L126-L152\" rel=\"noopener nofollow ugc\">these functions</a> in <code>FileSystem.h</code>. Maybe something like <code>String AppendRelativePath(const String&amp; relativePath, const String&amp; mainPath)</code> and <code>String GetRelativePath(const String&amp; path, const String&amp; from)</code> could be added to the list and used when saving and loading resources.</p>", "post_number": 17, "post_type": 1, "updated_at": "2020-02-10T14:01:24.084Z", "reply_count": 1, "reply_to_post_number": 13, "quote_count": 1, "incoming_link_count": 0, "reads": 32, "readers_count": 31, "score": 11.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 5, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/IO/FileSystem.h#L126-L152", "internal": false, "reflection": false, "title": "Urho3D/FileSystem.h at master \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 2}], "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35948, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-02-11T00:24:47.190Z", "cooked": "<p>I don\u2019t think adjusting the paths as they are read is a good solution, because that makes the XMLFile and JSONFile very specific to Urho \u2013 the code has to determine what is considered a path and what is not, and then selectively changes some of the content accordingly. If you are simply advocating we add another GetInt type method that is a GetPath, and patch it based on that I would be more comfortable, as then it is the code that is using the XML/JSON to save the file and read it and the XML/JSONFile doesn\u2019t have to be aware of what is a path and what is not.</p>\n<p>I do think adding such a function is the right idea \u2013 I believe I added what would be the AppendRelativePath with a different name already, though I don\u2019t think I did the reverse (creating a relative path from two absolute ones).</p>\n<p>TODO: Replies to other posts (I\u2019m too busy right now to get to the rest, sorry guys).</p>", "post_number": 18, "post_type": 1, "updated_at": "2020-02-11T00:24:47.190Z", "reply_count": 1, "reply_to_post_number": 17, "quote_count": 0, "incoming_link_count": 0, "reads": 31, "readers_count": 30, "score": 26.2, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "Modanung", "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35949, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-02-11T01:16:38.124Z", "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"SirNate0\" data-post=\"18\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<p>\u2026that makes the XMLFile and JSONFile very specific to Urho\u2026</p>\n</blockquote>\n</aside>\n<p>Well, they <em>are</em> Urho3D <code>Object</code>s.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"SirNate0\" data-post=\"18\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<p>\u2026the code has to determine what is considered a path and what is not\u2026</p>\n</blockquote>\n</aside>\n<p>I\u2019m not sure what you mean by that. Since the paths would point to resources from inside another resource - to which the path is relative - aren\u2019t the relevant values expected to be paths anyway?</p>", "post_number": 19, "post_type": 1, "updated_at": "2020-02-11T01:17:28.614Z", "reply_count": 1, "reply_to_post_number": 18, "quote_count": 1, "incoming_link_count": 0, "reads": 33, "readers_count": 32, "score": 11.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35952, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-02-11T06:19:45.581Z", "cooked": "<aside class=\"quote no-group\" data-username=\"Modanung\" data-post=\"19\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/2706_2.png\" class=\"avatar\"> Modanung:</div>\n<blockquote>\n<p>Since the paths would point to resources from inside another resource - to which the path is relative - aren\u2019t the relevant values expected to be paths anyway?</p>\n</blockquote>\n</aside>\n<p>How would you find relative paths in generic XML or JSON without known structure?<br>\nIt might be material, or node, or cube texture. Or something else, like custom resource.</p>", "post_number": 20, "post_type": 1, "updated_at": "2020-02-11T06:19:45.581Z", "reply_count": 0, "reply_to_post_number": 19, "quote_count": 1, "incoming_link_count": 0, "reads": 32, "readers_count": 31, "score": 36.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [{"id": 2, "count": 2}], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35956, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-02-11T13:14:55.875Z", "cooked": "<p>What if the <code>ResourceCache</code> would set the <code>FileSystem</code> working directory to that of the resource being loaded? It could be added to any relative paths for nested resources and restored when loading is completed or interrupted.</p>", "post_number": 21, "post_type": 1, "updated_at": "2020-02-11T13:18:55.366Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 29, "readers_count": 28, "score": 10.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35957, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-02-11T13:51:26.837Z", "cooked": "<aside class=\"quote no-group\" data-username=\"Modanung\" data-post=\"21\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/2706_2.png\" class=\"avatar\"> Modanung:</div>\n<blockquote>\n<p>It could be added to any relative paths for nested resources and restored when loading is completed or interrupted.</p>\n</blockquote>\n</aside>\n<p>Global state for such simple thing as reading a file is bad idea.<br>\nMultithreading will be broken for sure, and nested resource loading will require internal stack of working directories.<br>\nAnd other reasons I\u2019m too lazy to list\u2026</p>", "post_number": 22, "post_type": 1, "updated_at": "2020-02-11T13:51:26.837Z", "reply_count": 0, "reply_to_post_number": 21, "quote_count": 1, "incoming_link_count": 0, "reads": 29, "readers_count": 28, "score": 35.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [{"id": 2, "count": 2}], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35958, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-02-11T16:32:26.580Z", "cooked": "<p>Looking at the PR again, why not instead of:</p>\n<p><code>GetResource(name, basePath)</code></p>\n<p>do</p>\n<p><code>GetResource(CompletePath(name, basePath))</code></p>\n<p>String CompletePath(const String&amp; path, const String basePath = String())</p>\n<p>?</p>", "post_number": 23, "post_type": 1, "updated_at": "2020-02-11T16:41:51.162Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 28, "readers_count": 27, "score": 5.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35959, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-02-11T17:16:33.842Z", "cooked": "<aside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"15\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"> Eugene:</div>\n<blockquote>\n<p>Actually, it may be a sign that you don\u2019t need basePath support in <em>all</em> functions of resource cache. You need it only in SanitateResourceName that will resolve relative paths into absolute. Then you just use this function to get absolute resource path every time you may have relative one.</p>\n</blockquote>\n</aside>\n<p><a class=\"mention\" href=\"/u/modanung\">@Modanung</a> mostly agree</p>", "post_number": 24, "post_type": 1, "updated_at": "2020-02-11T17:16:33.842Z", "reply_count": 0, "reply_to_post_number": 15, "quote_count": 1, "incoming_link_count": 0, "reads": 28, "readers_count": 27, "score": 20.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35960, "name": "", "username": "1vanK", "avatar_template": "/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png", "created_at": "2020-02-11T17:20:52.066Z", "cooked": "<p>We need allow users register inherited ResourceCache subsystem instead default. It\u2019s also very useful when user wants add its own container for resources (zip file instead pak for example).</p>", "post_number": 25, "post_type": 1, "updated_at": "2020-02-11T17:21:10.150Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 28, "readers_count": 27, "score": 10.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": true, "admin": false, "staff": true, "user_id": 263, "hidden": false, "trust_level": 4, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35961, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-02-11T17:35:02.279Z", "cooked": "<p>I agree. I have another PR (probably a bit less complete than this one) that pursues that idea. The package file functionality is extracted to a separate class from the (system) file one and the package file has an added abstract FileSource users can inherit from. I believe I made an example with it supporting gzipped files.</p>\n<p>(Unless this is meant as a comment favoring fewer changes to the function signatures to maintain users existing implementations of such an idea, in which case I\u2019m ambivalent either way)</p>", "post_number": 26, "post_type": 1, "updated_at": "2020-02-11T17:35:02.279Z", "reply_count": 1, "reply_to_post_number": 25, "quote_count": 0, "incoming_link_count": 0, "reads": 29, "readers_count": 28, "score": 10.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "1vanK", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35962, "name": "", "username": "1vanK", "avatar_template": "/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png", "created_at": "2020-02-11T17:44:05.800Z", "cooked": "<p>I tend to favor maximum engine flexibility. Ideally, the engie should be a just collection of cool libraries. And a user can replace any subsystem with his own without changing the engine. For example, replace scene graph / renderer with your own implementation with support of BSP trees and use only the audio and the input subsystems from the engine</p>", "post_number": 27, "post_type": 1, "updated_at": "2020-02-11T17:44:05.800Z", "reply_count": 0, "reply_to_post_number": 26, "quote_count": 0, "incoming_link_count": 0, "reads": 28, "readers_count": 27, "score": 20.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": true, "admin": false, "staff": true, "user_id": 263, "hidden": false, "trust_level": 4, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35963, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-02-11T22:47:30.578Z", "cooked": "<p>What do you all think of the idea of adding a separate class to handle paths? It would be implicitly constructible from a String and a const char* so that existing code should work with few-to-no changes. This class can then handle resolving the relative paths, as well as forming relative paths from two absolute ones, and we can put all of <a href=\"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/IO/FileSystem.h#L126-L152\">these functions</a> in that class (with deprecated global functions to minimize immediate changes for the user).</p>\n<p>If you guys aren\u2019t opposed, I would like to change what I\u2019ve done to follow this route, as I think we\u2019re starting to approach (or perhaps are already are at) the point where we\u2019re treating paths as just strings with the result being more complicated and not less.</p>\n<p>Thoughts?</p>\n<hr>\n<p>As a tentative way to allow the JSONFile and XMLFile to handle paths, I also have this proposal (if we want to go down that road):<br>\nWe add a new attribute type and flag to go with it that is a \u201cPath\u201d. XML this is straightforward, since the elements already know about the file (if I remember correctly). JSON we support it by adding a WeakPtr to the file which will be set when we read JSON from a file. On reading, then, we know about the file and any relative paths found get resolved when the user calls GetPath(). On writing, absolute paths are stored and flagged as being paths when the JSONValue is created, then when the JSONFile saves it it goes through and creates the relative paths. Absolute paths can be stored just as strings and need no special treatment.</p>", "post_number": 28, "post_type": 1, "updated_at": "2020-02-11T22:47:30.578Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 30, "readers_count": 29, "score": 26.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/IO/FileSystem.h#L126-L152", "internal": false, "reflection": false, "title": "Urho3D/FileSystem.h at master \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 0}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 35968, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-02-12T09:30:30.125Z", "cooked": "<aside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"28\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<p>What do you all think of the idea of adding a separate class to handle paths?</p>\n</blockquote>\n</aside>\n<p>Before you go this way, you need to clearly determine <em>what</em> this path class is going to be. What guarantees it will give for user?</p>\n<p>Can I always pass said path into ResourceCache and resolve it into resource if resource exists?<br>\nCan I be sure that every Resource have only one path pointing to it?<br>\nCan I be sure this is the same as resource name?<br>\nIf no, what are conditions? Is is easy to check if said conditions are met when <em>reading</em> the code?</p>\n<p>Also, resource path is not the same thing as file path.<br>\nThey work differently and are used in different places, even if they are converted from/to each other.</p>\n<p>I do like the idea to stop using <code>String</code> in place of paths, but I have a feeling we may need <em>more than one</em> class for paths. Or we may not and one Path will suffice, I have no idea.</p>\n<aside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"28\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<p>As a tentative way to allow the JSONFile and XMLFile to handle paths, I also have this proposal (if we want to go down that road):</p>\n</blockquote>\n</aside>\n<p>Honestly, I cannot say how bad it will be just from the description.<br>\nMaybe it would be ok, maybe it will screw the whole idea of XML/JSONFile.</p>", "post_number": 29, "post_type": 1, "updated_at": "2020-02-12T09:30:30.125Z", "reply_count": 1, "reply_to_post_number": 28, "quote_count": 1, "incoming_link_count": 0, "reads": 27, "readers_count": 26, "score": 10.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37122, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-04-03T02:02:03.665Z", "cooked": "<aside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"29\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"> Eugene:</div>\n<blockquote>\n<ol>\n<li>Can I always pass said path into ResourceCache and resolve it into resource if resource exists?</li>\n<li>Can I be sure that every Resource have only one path pointing to it?</li>\n<li>Can I be sure this is the same as resource name?<br>\nIf no, what are conditions? Is is easy to check if said conditions are met when <em>reading</em> the code?</li>\n</ol>\n</blockquote>\n</aside>\n<ol>\n<li>That would be the goal, otherwise it\u2019s not of much use.</li>\n<li>No, nor can you at present as SanitateResourceName will already return different paths based on the presence of \u201c./\u201d and \u201c\u2026/\u201d. A modified version of this function will need to exist accepting a <code>Path</code>. There should only be one <code>Path</code> per resource after Sanitation.</li>\n<li>After Sanitation, yes, you can be sure that the sanitized <code>Path</code> will match the resource name.</li>\n</ol>\n<aside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"29\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"> Eugene:</div>\n<blockquote>\n<p>Also, resource path is not the same thing as file path.<br>\nThey work differently and are used in different places, even if they are converted from/to each other.</p>\n</blockquote>\n</aside>\n<p>I think I mostly disagree. A resource path is effectively a possible relative file path that may or may not refer to an actual file (with the possible exception of certain packed resources, possibly?). If your point is that resource paths are simpler (no drive letters/network locations) and use the internal forward slash representation then I agree that they are different, but I see it more as resource paths are a subset of possible filenames.</p>\n<p>I could be completely wrong about that, though, so if you have some points that would show me where I would gladly look into it more.</p>\n<hr>\n<p>That said, I have also created a first draft of a Path class. It is incomplete, and I did not check to see that it compiled, but if anyone wishes to look at it you can find it here:</p>\n<aside class=\"onebox githubblob\">\n  <header class=\"source\">\n      <a href=\"https://github.com/SirNate0/Urho3D/blob/path-class/Source/Urho3D/Core/Path.h\" target=\"_blank\">github.com</a>\n  </header>\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/SirNate0/Urho3D/blob/path-class/Source/Urho3D/Core/Path.h\" target=\"_blank\">SirNate0/Urho3D/blob/path-class/Source/Urho3D/Core/Path.h</a></h4>\n<pre><code class=\"lang-h\">#pragma once\n\n#include \"../Container/Str.h\"\n\nnamespace Urho3D {\n\n/// Class that represents a path to a file.\nclass URHO3D_API Path\n{\npublic:\n\t/// Construct empty path.\n\tPath()=default;\n\t/// Copy construct.\n\tPath(const Path&amp; other)=default;\n\t/// Copy.\n\tPath&amp; operator=(const Path&amp; other)=default;\n\t/// Move construct.\n\tPath(Path&amp;&amp; other): path_(std::move(other.path_)) {}\n\t/// Construct from the specified path string using the specified base path to resolve relative directories as needed.\n\tPath(const String&amp; path, const Path&amp; basePath = Path()): path_(MakePathStringInternal(path)) { ResolveRelativeTo(basePath); }\n</code></pre>\n\n  This file has been truncated. <a href=\"https://github.com/SirNate0/Urho3D/blob/path-class/Source/Urho3D/Core/Path.h\" target=\"_blank\">show original</a>\n\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Comments are welcome, including on things like \u201cwhich directory in Source/ should it be placed in?\u201d</p>", "post_number": 30, "post_type": 1, "updated_at": "2020-04-03T02:02:03.665Z", "reply_count": 1, "reply_to_post_number": 29, "quote_count": 1, "incoming_link_count": 0, "reads": 25, "readers_count": 24, "score": 10.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://github.com/SirNate0/Urho3D/blob/path-class/Source/Urho3D/Core/Path.h", "internal": false, "reflection": false, "title": "Urho3D/Path.h at path-class \u00b7 SirNate0/Urho3D \u00b7 GitHub", "clicks": 0}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37123, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-04-03T08:04:14.529Z", "cooked": "<aside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"30\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<p>A resource path is effectively a possible relative file path that may or may not refer to an actual file (with the possible exception of certain packed resources, possibly?). If your point is that resource paths are simpler (no drive letters/network locations) and use the internal forward slash representation then I agree that they are different, but I see it more as resource paths are a subset of possible filenames.</p>\n</blockquote>\n</aside>\n<p>What I mean is that some places in the engine accept file paths, and other places accept resource paths.<br>\nThese uses are not interchangeable. You cannot pass resource path where the engine expects file path, and vice versa. Therefore, file path and resource path are different abstractions. In the same way as Vector4 and Color are different things even tho they are both just 4 floats and Color is a subset of Vector4.</p>", "post_number": 31, "post_type": 1, "updated_at": "2020-04-03T08:51:27.762Z", "reply_count": 0, "reply_to_post_number": 30, "quote_count": 1, "incoming_link_count": 0, "reads": 22, "readers_count": 21, "score": 4.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 3, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37128, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-04-03T16:19:31.695Z", "cooked": "<p>I understand now. I don\u2019t think it will end up being a concern, as while it is true there is a bit of a difference, I don\u2019t think it will prove to be too significant. At present, the largest difference I can think of is that resource names are never absolute (I think) but are relative to the assigned resource paths, while tru file paths can be absolute or are relative to the current working directory.</p>\n<p>That said, aside from opening some files to save things, I haven\u2019t really messed with the real file side of things, so I may find out that\u2019s not the case when going through the rest of the code.</p>", "post_number": 32, "post_type": 1, "updated_at": "2020-04-03T16:19:31.695Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 21, "readers_count": 20, "score": 4.2, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37149, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-04-04T07:32:31.046Z", "cooked": "<p>Significant progress has been made in integrating the Path class into the engine. Script bindings still remain, and there are some API decisions that should be made in regards to the Path class. Comments are welcome now, but I\u2019ll issue a PR in a couple days once I\u2019m pretty confident things are working alright, at least on Linux (I may have the CI check the other platforms, I may do a cross compile build, we\u2019ll see).</p>", "post_number": 33, "post_type": 1, "updated_at": "2020-04-04T07:32:31.046Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 19, "readers_count": 18, "score": 23.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37152, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-04-04T08:46:29.810Z", "cooked": "<p>Can you remind me what\u2019s your end goal?<br>\nMy guess is that you need relative paths for (1) resource refs in prefabs and (2) for textures referenced by materials.<br>\nIs it correct?</p>\n<p>I feel very conflicted now. Relative paths are the feature that I want for a long time. On the other hand, I\u2019m still afraid that the second PR will not be too different from the first one, and I\u2019m concerned about code quality.</p>", "post_number": 34, "post_type": 1, "updated_at": "2020-04-04T09:02:43.933Z", "reply_count": 2, "reply_to_post_number": 33, "quote_count": 0, "incoming_link_count": 0, "reads": 18, "readers_count": 17, "score": 13.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "reply_to_user": {"username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37156, "name": "", "username": "George1", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png", "created_at": "2020-04-04T11:51:22.043Z", "cooked": "<p>I think code quality is subjective.</p>\n<p>If you have beautiful code but it contain bugs, then it is useless.<br>\nIf you have ugly code, but it run fast, always work and without bug, then why not add it.</p>", "post_number": 35, "post_type": 1, "updated_at": "2020-04-04T11:51:22.043Z", "reply_count": 1, "reply_to_post_number": 34, "quote_count": 0, "incoming_link_count": 0, "reads": 18, "readers_count": 17, "score": 8.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "Eugene", "name": "Eugene Kozlov", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 627, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37158, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-04-04T12:46:37.127Z", "cooked": "<aside class=\"quote no-group\" data-username=\"George1\" data-post=\"35\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/40.png\" class=\"avatar\"> George1:</div>\n<blockquote>\n<p>If you have ugly code, but it run fast, always work and without bug, then why not add it.</p>\n</blockquote>\n</aside>\n<p>Because current pitiful state of Urho codebase is the direct result of exactly this feature adding policy.<br>\nExcept we sometimes have ugly code with lots of bugs and w/o any performance profiling done.</p>\n<p>I\u2019m not really taking about the code itself. By \u201ccode quality\u201d I mean design aspects.<br>\nLike, classes shall have clear and separate responsibilites, and interfaces shall have expected behavior, and so on.</p>\n<p>If we ignore high-level design aspects, we will just end with code that is nearly impossible to extend or maintain. It has already happened with Networking, it has already happened with Renderer too. It\u2019s close to happening with Scene and Serialization. If things go this way, we will end up with the project that cannot be extended and/or fixed anymore. Or we are already in this state and we need to <em>cut features</em> instead of adding. I don\u2019t know.</p>\n<hr>\n<p>I don\u2019t really know anything about the current version of this PR, but the previous version from 2017 had a lot of design issues. I don\u2019t know if they are relevant now.</p>\n<p>Since I want this feature myself, I have spent some time looking for solution, but I didn\u2019t get any new bright ideas yet.</p>", "post_number": 36, "post_type": 1, "updated_at": "2020-04-04T13:14:55.866Z", "reply_count": 0, "reply_to_post_number": 35, "quote_count": 1, "incoming_link_count": 0, "reads": 18, "readers_count": 17, "score": 3.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37162, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-04-04T15:01:31.088Z", "cooked": "<aside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"34\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"> Eugene:</div>\n<blockquote>\n<p>My guess is that you need relative paths for (1) resource refs in prefabs and (2) for textures referenced by materials.<br>\nIs it correct?</p>\n</blockquote>\n</aside>\n<p>Yes, that\u2019s basically the goal. A couple other custom resources as well, but those are the main examples from Urho (as well as scripts referencing materials, I suppose).</p>\n<p>A secondary goal is to improve the quality of Urho\u2019s handling of paths, as they really are not ordinary strings, so we can remove the <code>.Replace(\"/./\",\"/\")</code> and such that are strewn around the Engine.</p>\n<p>In terms of high level design, this is not that much of a change with the exception of how we handle the Variant class. Pretty obviously, I added the class to Variant. However, in order to facilitate greater backwards compatibility, I want to make GetString also return the string when the Variant holds a Path. As that changes the making of GetString (though not that significantly since we do the same for Color and Vector4), I added a separate GetPathString instead. Unrelated to the goal of supporting relative paths, I think a separate Path class is the correct design decision, as right now a path is basically just a string that has been passed through one of the \u201cmagic\u201d path functions located in FileSystem.h (I say magic because the functions take a string and return a string, but the new string is now Urho\u2019s internal parth representation). I have mixed feelings about the global functions. I\u2019m tempted to include them and just have them call the functions in the Path class, maybe change them to a Path return type. That fixes most of the backwards comparability issues other than the API change to use Path (which is not too significant since Path can be constructed from String) and the more annoying one that logging a path, or any such conversation to a string, requires calling Path::ToString.</p>", "post_number": 37, "post_type": 1, "updated_at": "2020-04-04T15:01:31.088Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 1, "incoming_link_count": 0, "reads": 18, "readers_count": 17, "score": 8.6, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37164, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-04-04T15:24:17.334Z", "cooked": "<p>I just realized I don\u2019t entirelly understand the idea behind <code>Path</code>.</p>\n<p>What <em>is</em> the <code>Path</code> exactly in your current implementation?<br>\nI mean, what are the semantics of this class? What kind of path is represented by this class?<br>\nGiven the instance of <code>Path</code>, where I can use it? What API will accept it?</p>\n<p>Is it the most generic path possible, or something more specific?<br>\nIs resource name a <code>Path</code> too?</p>", "post_number": 38, "post_type": 1, "updated_at": "2020-04-04T15:24:17.334Z", "reply_count": 0, "reply_to_post_number": 37, "quote_count": 0, "incoming_link_count": 0, "reads": 16, "readers_count": 15, "score": 3.2, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "reply_to_user": {"username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37165, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-04-04T15:37:02.752Z", "cooked": "<p>Path is a class that holds a String contains the Urho internal representation of a path (i.e. forward slashes, and /./ And the like resolved to /). It implements the features of all of the functions found at the bottom of FileSystem.h, as well as a few functions like Length and Compare (basically borrowed from String). It is not the most generic path possible (it doesn\u2019t allow backslashes, for example), but should be generic enough to represent any possible file on the filesystem.</p>\n<p>I\u2019m actually deciding about <code>Resource::name_</code> right now. I\u2019m inclined to make it one, even though that would mean some resource names would be excluded, because at present such resources could not be obtained from the resource cache anyways (though it could be added to the cache, because of SanitateResourceName it could not be obtained with GetResource).</p>\n<p>I\u2019m also thinking about having it internally be stored as a path and have a GetName and SetName interface to the Path (as well as Get/SetPath with the Path class). Though that would mean that <code>r.SetName(\"../a.txt); r.GetName() == \"../a.txt\"</code> would be false.</p>\n<p>Thoughts?</p>", "post_number": 39, "post_type": 1, "updated_at": "2020-04-04T15:37:02.752Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 16, "readers_count": 15, "score": 8.2, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37168, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-04-04T17:53:47.953Z", "cooked": "<p>Since you name it \u201cPath\u201d, let\u2019s use it everywhere where path things are used, including resource names.<br>\nImplicit conversion from string is probably needed.<br>\nI cannot really say much without seeing diff in existing code.</p>\n<p>Since this change is going to have very wide scope, external code changes need to be minimized.<br>\nI hope it shall be enough to replace type name and fix actual uses of the path.</p>", "post_number": 40, "post_type": 1, "updated_at": "2020-04-04T17:53:47.953Z", "reply_count": 0, "reply_to_post_number": 39, "quote_count": 0, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 3.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "reply_to_user": {"username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37171, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-04-04T20:40:53.418Z", "cooked": "<p>Allowing relative paths in resource names does not make much sense to me: <em>What</em> would they be relative to? In my view relativity is most useful <em>inside</em> resources that refer to other resources, as the <code>TmxFile2D</code> already does for its tile sets: <code>TmxFile2D::LoadTSXFile</code> should be generalized so it can be used with <em>all</em> resources. I think <code>FileSystem::SetCurrentDir</code> could be utilized to elegantly achieve this generalization; by setting and restoring it, before and after loading a nested resource. As you can see, <code>LoadTSXFile</code> already assumes the <code>name_</code> of <code>TmxFile2D</code> to be an absolute foundation suitable for resolving relative paths. <code>ResourceCache::SanitateResourceDirName</code> applies a similar approach, and it would not require a specialized <code>Path</code> class.<br>\nConcerning prefabs, this seems to asks for a <em><code>Prefab</code></em> resource/component, <em>not</em> increasing all <code>Node</code>s\u2019 complexity. It understanding relative paths would follow naturally from the aforementioned implementation.</p>", "post_number": 41, "post_type": 1, "updated_at": "2020-04-04T21:09:24.037Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 8.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37178, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-04-04T23:05:45.191Z", "cooked": "<aside class=\"quote no-group\" data-username=\"Modanung\" data-post=\"41\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/2898_2.png\" class=\"avatar\"> Modanung:</div>\n<blockquote>\n<p>Concerning prefabs, this seems to asks for a <em><code>Prefab</code></em> resource/component, <em>not</em> increasing all <code>Node</code> s\u2019 complexity. It understanding relative paths would follow naturally from the aforementioned implementation</p>\n</blockquote>\n</aside>\n<p>I actually have very similar thoughts. Scene graph itself doesn\u2019t need to know about file paths if it\u2019s all moved into resources (like Prefab).</p>\n<aside class=\"quote no-group\" data-username=\"Modanung\" data-post=\"41\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/2898_2.png\" class=\"avatar\"> Modanung:</div>\n<blockquote>\n<p>Allowing relative paths in resource names does not make much sense to me: <em>What</em> would they be relative to?</p>\n</blockquote>\n</aside>\n<p>How about this pattern:<br>\nResource paths within Resource may be relative to this resource.<br>\nResource paths outside of Resource cannot be realtive.<br>\nSo\u2026 that\u2019s probably what you said, if I get it right.</p>\n<aside class=\"quote no-group\" data-username=\"Modanung\" data-post=\"41\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/2898_2.png\" class=\"avatar\"> Modanung:</div>\n<blockquote>\n<p>I think <code>FileSystem::SetCurrentDir</code> could be utilized to elegantly achieve this generalization; by setting and restoring it, before and after loading a nested resource</p>\n</blockquote>\n</aside>\n<p>This approach has major issue:<br>\nResource cache doesn\u2019t care about what you do with <code>SetCurrentDir</code>, it works relative to cache dirs from setup params.</p>", "post_number": 42, "post_type": 1, "updated_at": "2020-04-04T23:08:49.392Z", "reply_count": 1, "reply_to_post_number": 41, "quote_count": 1, "incoming_link_count": 5, "reads": 16, "readers_count": 15, "score": 33.2, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37179, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-04-04T23:12:25.003Z", "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"Eugene\" data-post=\"42\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"> Eugene:</div>\n<blockquote>\n<p>Resource paths withing Resource are relative to this resource.</p>\n</blockquote>\n</aside>\n<p>I see no reason to remove support for absolute paths in these cases.</p>\n<aside class=\"quote no-group\" data-username=\"Eugene\" data-post=\"42\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/eugene/40/902_2.png\" class=\"avatar\"> Eugene:</div>\n<blockquote>\n<p>Resource cache doesn\u2019t care about what you do with <code>SetCurrentDir</code> , it works relative to cache dirs from setup params.</p>\n</blockquote>\n</aside>\n<p>What kind of issues do you think this would introduce, and where?</p>", "post_number": 43, "post_type": 1, "updated_at": "2020-04-04T23:14:34.634Z", "reply_count": 1, "reply_to_post_number": 42, "quote_count": 1, "incoming_link_count": 0, "reads": 17, "readers_count": 16, "score": 8.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37180, "name": "SirNate0", "username": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "created_at": "2020-04-04T23:14:35.575Z", "cooked": "<p>First draft of a PR for a Path class has been created.</p>\n<aside class=\"onebox githubpullrequest\">\n  <header class=\"source\">\n      <a href=\"https://github.com/urho3d/Urho3D/pull/2619\" target=\"_blank\">github.com/urho3d/Urho3D</a>\n  </header>\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Pull Request\">\n    <svg width=\"60\" height=\"60\" class=\"github-icon\" viewbox=\"0 0 12 16\" aria-hidden=\"true\"><path d=\"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/urho3d/Urho3D/pull/2619\" target=\"_blank\">Path Class</a>\n    </h4>\n\n    <div class=\"branches\">\n      <code>urho3d:master</code> \u2190 <code>SirNate0:path-class</code>\n    </div>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2020-04-04\" data-time=\"23:12:43\" data-timezone=\"UTC\">11:12PM - 04 Apr 20 UTC</span>\n      </div>\n\n      <div class=\"user\">\n        <a href=\"https://github.com/SirNate0\" target=\"_blank\">\n          <img alt=\"SirNate0\" src=\"https://avatars0.githubusercontent.com/u/10181610?v=4\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\">\n          SirNate0\n        </a>\n      </div>\n\n      <div class=\"lines\" title=\"9 commits changed 101 files with 1621 additions and 677 deletions\">\n        <a href=\"https://github.com/urho3d/Urho3D/pull/2619/files\" target=\"_blank\">\n          <span class=\"added\">+1621</span>\n          <span class=\"removed\">-677</span>\n        </a>\n      </div>\n    </div>\n\n  </div>\n</div>\n  </article>\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n  <div style=\"clear: both\"></div>\n</aside>\n", "post_number": 44, "post_type": 1, "updated_at": "2020-04-04T23:14:35.575Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 17, "readers_count": 16, "score": 8.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "SirNate0", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://github.com/urho3d/Urho3D/pull/2619", "internal": false, "reflection": false, "title": "Path Class by SirNate0 \u00b7 Pull Request #2619 \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 2}, {"url": "https://github.com/urho3d/Urho3D/pull/2619/files", "internal": false, "reflection": false, "title": "Path Class by SirNate0 \u00b7 Pull Request #2619 \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 0}, {"url": "https://github.com/SirNate0", "internal": false, "reflection": false, "title": "SirNate0 \u00b7 GitHub", "clicks": 0}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 628, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37181, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-04-04T23:14:49.609Z", "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"Modanung\" data-post=\"43\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/2898_2.png\" class=\"avatar\"> Modanung:</div>\n<blockquote>\n<p>I see no reason to exclude absolute paths.</p>\n</blockquote>\n</aside>\n<p>Yeah, I realized that my wording was obscure and I edited my reply.</p>\n<aside class=\"quote no-group\" data-username=\"Modanung\" data-post=\"43\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/2898_2.png\" class=\"avatar\"> Modanung:</div>\n<blockquote>\n<p>What kind of issues do you think this would introduce, and where?</p>\n</blockquote>\n</aside>\n<p>Do you mean \u201cwhat kind of issues we will get it we use <code>SetCurrentDir</code> to get relative paths\u201d?</p>", "post_number": 45, "post_type": 1, "updated_at": "2020-04-04T23:14:49.609Z", "reply_count": 0, "reply_to_post_number": 43, "quote_count": 1, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 3.0, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37182, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-04-04T23:16:22.481Z", "cooked": "<p>Yes, I do mean that. The <code>ResourceCache</code> currently not caring, seems like good news as there would be no conflicts with existing operations.</p>", "post_number": 46, "post_type": 1, "updated_at": "2020-04-04T23:18:34.131Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 17, "readers_count": 16, "score": 8.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37183, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-04-04T23:19:25.680Z", "cooked": "<aside class=\"quote no-group\" data-username=\"Modanung\" data-post=\"46\" data-topic=\"5911\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/2898_2.png\" class=\"avatar\"> Modanung:</div>\n<blockquote>\n<p>Yes, I do mean that</p>\n</blockquote>\n</aside>\n<p><code>SetCurrentDir</code> will have no effect on the behavior of <code>cache-&gt;GetResource&lt;T&gt;(path)</code>.<br>\nTherefore, I don\u2019t see how it will help us with relative paths.</p>", "post_number": 47, "post_type": 1, "updated_at": "2020-04-04T23:19:36.211Z", "reply_count": 1, "reply_to_post_number": 46, "quote_count": 1, "incoming_link_count": 0, "reads": 17, "readers_count": 16, "score": 8.4, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37184, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-04-04T23:20:12.586Z", "cooked": "<p>Well, applying the suggested approach would then mean changing that. How is that an issue?</p>", "post_number": 48, "post_type": 1, "updated_at": "2020-04-04T23:20:51.264Z", "reply_count": 0, "reply_to_post_number": 47, "quote_count": 0, "incoming_link_count": 1, "reads": 19, "readers_count": 18, "score": 8.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "", "reply_to_user": {"username": "Eugene", "name": "Eugene Kozlov", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37186, "name": "Eugene Kozlov", "username": "Eugene", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "created_at": "2020-04-04T23:21:02.773Z", "cooked": "<aside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"44\" data-topic=\"5911\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"> SirNate0:</div>\n<blockquote>\n<p>First draft of a PR for a Path class has been created</p>\n</blockquote>\n</aside>\n<p>I\u2019m already terrified by its scope. But I\u2019ll check it\u2026 when I gather courage.</p>", "post_number": 49, "post_type": 1, "updated_at": "2020-04-04T23:21:02.773Z", "reply_count": 0, "reply_to_post_number": 44, "quote_count": 1, "incoming_link_count": 0, "reads": 19, "readers_count": 18, "score": 18.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "Eugene Kozlov", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Core developer", "title_is_group": false, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 484, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 37187, "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "username": "Modanung", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "created_at": "2020-04-04T23:24:13.556Z", "cooked": "<p>I\u2019ll see if I can put my words to code, on <a href=\"https://gitlab.com/luckeyproductions/dry\">Dry</a> land.</p>", "post_number": 50, "post_type": 1, "updated_at": "2020-04-04T23:26:05.509Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 19, "readers_count": 18, "score": 3.8, "yours": false, "topic_id": 5911, "topic_slug": "adding-relative-paths-to-resource-loading", "display_username": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://gitlab.com/luckeyproductions/dry", "internal": false, "reflection": false, "title": "LucKey Productions / Dry \u00b7 GitLab", "clicks": 6}], "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 192, "hidden": false, "trust_level": 0, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "user_suspended": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}], "stream": [35848, 35849, 35850, 35851, 35852, 35834, 35835, 35838, 35839, 35854, 35855, 35857, 35861, 35862, 35866, 35870, 35892, 35948, 35949, 35952, 35956, 35957, 35958, 35959, 35960, 35961, 35962, 35963, 35968, 37122, 37123, 37128, 37149, 37152, 37156, 37158, 37162, 37164, 37165, 37168, 37171, 37178, 37179, 37180, 37181, 37182, 37183, 37184, 37186, 37187]}, "timeline_lookup": [[1, 1017], [18, 1016], [24, 1015], [30, 964], [33, 963], [40, 962]], "tags_descriptions": {}, "id": 5911, "title": "Adding Relative Paths to Resource Loading", "fancy_title": "Adding Relative Paths to Resource Loading", "posts_count": 50, "created_at": "2020-02-09T20:21:31.379Z", "views": 987, "reply_count": 27, "like_count": 20, "last_posted_at": "2020-04-04T23:24:13.556Z", "visible": true, "closed": false, "archived": false, "has_summary": true, "archetype": "regular", "slug": "adding-relative-paths-to-resource-loading", "category_id": 16, "word_count": 7764, "deleted_at": null, "user_id": 628, "featured_link": null, "pinned_globally": false, "pinned_at": null, "pinned_until": null, "image_url": null, "slow_mode_seconds": 0, "draft": null, "draft_key": "topic_5911", "draft_sequence": null, "unpinned": null, "pinned": false, "current_post_number": 1, "highest_post_number": 50, "deleted_by": null, "actions_summary": [{"id": 4, "count": 0, "hidden": false, "can_act": false}, {"id": 8, "count": 0, "hidden": false, "can_act": false}, {"id": 7, "count": 0, "hidden": false, "can_act": false}], "chunk_size": 20, "bookmarked": false, "bookmarks": [], "topic_timer": null, "message_bus_last_id": 0, "participant_count": 6, "show_read_indicator": false, "thumbnails": null, "slow_mode_enabled_until": null, "tags_disable_ads": false, "details": {"can_edit": false, "notification_level": 1, "participants": [{"id": 484, "username": "Eugene", "name": "Eugene Kozlov", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png", "post_count": 18, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}, {"id": 628, "username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png", "post_count": 15, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}, {"id": 192, "username": "Modanung", "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png", "post_count": 10, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 0}, {"id": 263, "username": "1vanK", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png", "post_count": 5, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "moderator": true, "trust_level": 4}, {"id": 627, "username": "George1", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png", "post_count": 1, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}, {"id": 1038, "username": "dertom", "name": "Thomas Trocha", "avatar_template": "/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png", "post_count": 1, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}], "created_by": {"id": 628, "username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}, "last_poster": {"id": 192, "username": "Modanung", "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}, "links": [{"url": "https://gitlab.com/luckeyproductions/dry", "title": "LucKey Productions / Dry \u00b7 GitLab", "internal": false, "attachment": false, "reflection": false, "clicks": 6, "user_id": 192, "domain": "gitlab.com", "root_domain": "gitlab.com"}, {"url": "https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/IO/FileSystem.h#L126-L152", "title": "Urho3D/FileSystem.h at master \u00b7 urho3d/Urho3D \u00b7 GitHub", "internal": false, "attachment": false, "reflection": false, "clicks": 2, "user_id": 192, "domain": "github.com", "root_domain": "github.com"}, {"url": "https://github.com/urho3d/Urho3D/pull/2070/files#diff-7b9673cfc396212ff55f1c1bee79ab6eR1342", "title": "Relative paths by SirNate0 \u00b7 Pull Request #2070 \u00b7 urho3d/Urho3D \u00b7 GitHub", "internal": false, "attachment": false, "reflection": false, "clicks": 2, "user_id": 484, "domain": "github.com", "root_domain": "github.com"}, {"url": "https://github.com/urho3d/Urho3D/pull/2619", "title": "Path Class by SirNate0 \u00b7 Pull Request #2619 \u00b7 urho3d/Urho3D \u00b7 GitHub", "internal": false, "attachment": false, "reflection": false, "clicks": 2, "user_id": 628, "domain": "github.com", "root_domain": "github.com"}, {"url": "https://www.boost.org/doc/libs/1_72_0/libs/flyweight/doc/index.html", "title": "Boost.Flyweight Documentation - Index - 1.72.0", "internal": false, "attachment": false, "reflection": false, "clicks": 2, "user_id": 484, "domain": "www.boost.org", "root_domain": "boost.org"}, {"url": "https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/63", "title": "Migration from custom container library to augmented EASTL", "internal": true, "attachment": false, "reflection": true, "clicks": 1, "user_id": 628, "domain": "discourse.urho3d.io", "root_domain": "urho3d.io"}, {"url": "https://github.com/urho3d/Urho3D/pull/2070", "title": "Relative paths by SirNate0 \u00b7 Pull Request #2070 \u00b7 urho3d/Urho3D \u00b7 GitHub", "internal": false, "attachment": false, "reflection": false, "clicks": 1, "user_id": 628, "domain": "github.com", "root_domain": "github.com"}]}, "suggested_topics": [{"id": 7197, "title": "Does Urho3D support multithreaded rendering?", "fancy_title": "Does Urho3D support multithreaded rendering?", "slug": "does-urho3d-support-multithreaded-rendering", "posts_count": 2, "reply_count": 0, "highest_post_number": 2, "image_url": null, "created_at": "2022-02-21T08:07:57.726Z", "last_posted_at": "2022-02-21T08:42:15.358Z", "bumped": true, "bumped_at": "2022-02-21T08:42:15.358Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 0, "views": 156, "category_id": 16, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": null, "description": "Original Poster", "user": {"id": 1490, "username": "Sunc", "name": "DoubleSuper", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}}, {"extras": "latest", "description": "Most Recent Poster", "user": {"id": 484, "username": "Eugene", "name": "Eugene Kozlov", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]}, {"id": 7136, "title": "Open-source ocean shader system", "fancy_title": "Open-source ocean shader system", "slug": "open-source-ocean-shader-system", "posts_count": 1, "reply_count": 0, "highest_post_number": 1, "image_url": null, "created_at": "2022-01-19T23:11:15.784Z", "last_posted_at": "2022-01-19T23:11:15.858Z", "bumped": true, "bumped_at": "2022-01-19T23:11:15.858Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 1, "views": 177, "category_id": 16, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": "latest single", "description": "Original Poster, Most Recent Poster", "user": {"id": 1304, "username": "lebrewer", "name": "lebrewer", "avatar_template": "/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]}, {"id": 7122, "title": "Faster allocations with PMR", "fancy_title": "Faster allocations with PMR", "slug": "faster-allocations-with-pmr", "posts_count": 2, "reply_count": 0, "highest_post_number": 2, "image_url": null, "created_at": "2022-01-10T16:23:15.053Z", "last_posted_at": "2022-01-10T16:42:29.752Z", "bumped": true, "bumped_at": "2022-01-10T17:55:02.117Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 1, "views": 209, "category_id": 16, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": "latest single", "description": "Original Poster, Most Recent Poster", "user": {"id": 1363, "username": "vmost", "name": null, "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/v/5f9b8f/{size}.png"}}]}, {"id": 7196, "title": "Windows Urho3D build with -DURHO3D_OPENGL=1 using rake", "fancy_title": "Windows Urho3D build with -DURHO3D_OPENGL=1 using rake", "slug": "windows-urho3d-build-with-durho3d-opengl-1-using-rake", "posts_count": 18, "reply_count": 9, "highest_post_number": 19, "image_url": null, "created_at": "2022-02-20T12:49:25.777Z", "last_posted_at": "2022-02-24T18:24:11.679Z", "bumped": true, "bumped_at": "2022-02-24T18:24:11.679Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 3, "views": 254, "category_id": 16, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": null, "description": "Original Poster", "user": {"id": 421, "username": "Lunarovich", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/lunarovich/{size}/2097_2.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 628, "username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 263, "username": "1vanK", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 631, "username": "JTippetts1", "name": "J Tippetts", "avatar_template": "/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}, {"extras": "latest", "description": "Most Recent Poster", "user": {"id": 4, "username": "weitjong", "name": "Yao Wei Tjong", "avatar_template": "/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]}, {"id": 7211, "title": "Particle is low", "fancy_title": "Particle is low", "slug": "particle-is-low", "posts_count": 2, "reply_count": 0, "highest_post_number": 2, "image_url": null, "created_at": "2022-03-03T13:52:14.991Z", "last_posted_at": "2022-04-20T05:18:36.122Z", "bumped": true, "bumped_at": "2022-04-20T05:18:36.122Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 0, "views": 232, "category_id": 16, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": null, "description": "Original Poster", "user": {"id": 1503, "username": "tianlv777", "name": "zerrrrr", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/a4c791/{size}.png"}}, {"extras": "latest", "description": "Most Recent Poster", "user": {"id": 1491, "username": "xlat", "name": "Alex Kuch", "avatar_template": "/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]}]}