{"post_stream":{"posts":[{"id":41935,"name":"Townforge","username":"townforge","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/edb3f5/{size}.png","created_at":"2021-02-23T23:34:24.991Z","cooked":"\u003cp\u003eIn my game (\u003ca href=\"https://discourse.urho3d.io/t/townforge-a-blockchain-multiplayer-economic-game-with-voxel-world/6722\" class=\"inline-onebox\"\u003eTownforge: a blockchain multiplayer economic game with voxel world\u003c/a\u003e), building geometry is made up of voxels, so grid aligned squres. Each vertex is made of 32 bytes (3 floats for position, 2 floats for textures coordinates, 3 floats for normal). My understanding is that the size of the data itself is a major consideration for performance, so I was looking at how much this could do down, and in theory I could have:\u003c/p\u003e\n\u003cp\u003eposition: 3 coordinates, for 4096 range and grid aligned, 13 bits each\u003cbr\u003e\nuv: 3 bits each\u003cbr\u003e\nnormal: 6 vectors to choose from, so 3 bits\u003c/p\u003e\n\u003cp\u003eSo I was thinking of making the vertex data be 3 half floats, so 6 bytes, more than 5 times better. The contents would be:\u003cbr\u003e\ndata[0]: x on the top bits, u on the bottom 3 bits\u003cbr\u003e\ndata[1]: y on the top bits, v on the bottom 3 bits\u003cbr\u003e\ndata[2]: z on the top bits, normal on the bottom 3 bits\u003c/p\u003e\n\u003cp\u003eNow that‚Äôd require  custom a vertex program to mask and regenerate the data. It would also requite adding support for half float for position, since it seems Urho3D does not support it (this is really not my area of expertise so I might be wrong though).\u003c/p\u003e\n\u003cp\u003eIs this possible in theory, or is there a showstopper here ?\u003c/p\u003e\n\u003cp\u003eFor reference, using the half conversion code from Urho3D, this gets me the range I need (it‚Äôd limit view distance, but to an acceptable maximum):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eint main()\n{\n  for (float x = -2048; x \u0026lt;= 2048 + 1; x += 1.0f)\n  {\n    unsigned short y = FloatToHalf(x * 8);\n    float z = HalfToFloat(y) / 8;\n    if (x != z) printf(\"oops at %f: %f\\n\", x, z);\n  }\n  return 0;\n}\n\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2021-02-23T23:39:16.806Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":25,"readers_count":24,"score":25.0,"yours":false,"topic_id":6727,"topic_slug":"packing-vertex-data-in-half-floats","display_username":"Townforge","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://discourse.urho3d.io/t/townforge-a-blockchain-multiplayer-economic-game-with-voxel-world/6722","internal":true,"reflection":false,"title":"Townforge: a blockchain multiplayer economic game with voxel world","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1429,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41936,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2021-02-24T00:01:24.293Z","cooked":"\u003cp\u003eThe vertex data fetch is still in multiples of 32 bytes AFAIK.\u003c/p\u003e\n\u003cp\u003eThere shouldn‚Äôt be anything preventing you from adding half support to the vertex-declarations. However, it will make different functions that work with vertex-buffers (like WriteDrawablesToOBJ, mesh triangle raycasts, etc) unusable (will crash) unless modified to support the added half types as they all assume we can safely access float types from the shadow copies of those buffers.\u003c/p\u003e\n\u003cp\u003eThe generated patching that handles mapping a vertex-declaration/input-layout to a vertex-shader will include the costs to convert those halfs into floats (let‚Äôs just pretend mobiles with half support don‚Äôt exist to avoid muddiness).\u003c/p\u003e\n\u003cp\u003eSo really the question you‚Äôre going to have to find the answer to is if saving on VBO size is going to cost you less than the conversion to float.\u003c/p\u003e\n\u003cp\u003eSituations like ‚Äú\u003cem\u003eI‚Äôm constantly updating these buffers as I stream\u003c/em\u003e‚Äù change that value.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2021-02-24T00:01:24.293Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":4.8,"yours":false,"topic_id":6727,"topic_slug":"packing-vertex-data-in-half-floats","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[41935,41936]},"timeline_lookup":[[1,637]],"suggested_topics":[{"id":7088,"title":"What Compiler is recommended for building Urho3D under Windows 7 32 bit?","fancy_title":"What Compiler is recommended for building Urho3D under Windows 7 32 bit?","slug":"what-compiler-is-recommended-for-building-urho3d-under-windows-7-32-bit","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-06T07:50:47.867Z","last_posted_at":"2021-12-06T13:55:20.901Z","bumped":true,"bumped_at":"2021-12-06T13:55:20.901Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":152,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7092,"title":"Finding the World Space Coordinates of the Screen Edges","fancy_title":"Finding the World Space Coordinates of the Screen Edges","slug":"finding-the-world-space-coordinates-of-the-screen-edges","posts_count":6,"reply_count":2,"highest_post_number":6,"image_url":null,"created_at":"2021-12-07T20:53:49.453Z","last_posted_at":"2021-12-08T12:33:52.510Z","bumped":true,"bumped_at":"2021-12-08T12:33:52.510Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":210,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7099,"title":":fallen_leaf: Polynomials \u0026 Harmonics","fancy_title":":fallen_leaf: Polynomials \u0026amp; Harmonics","slug":"polynomials-harmonics","posts_count":6,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2021-12-13T05:06:04.641Z","last_posted_at":"2021-12-27T23:27:39.489Z","bumped":true,"bumped_at":"2021-12-27T23:27:39.489Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"üçÇ Polynomials \u0026 Harmonics","tags_descriptions":{},"like_count":6,"views":392,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7119,"title":"How to programmatically access Morph Target in FBX file?","fancy_title":"How to programmatically access Morph Target in FBX file?","slug":"how-to-programmatically-access-morph-target-in-fbx-file","posts_count":13,"reply_count":8,"highest_post_number":13,"image_url":null,"created_at":"2022-01-03T23:01:43.070Z","last_posted_at":"2022-01-05T11:55:31.130Z","bumped":true,"bumped_at":"2022-01-05T11:55:31.130Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":214,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1499,"username":"csteaderman","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/b487fb/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]}],"tags_descriptions":{},"id":6727,"title":"Packing vertex data in half floats","fancy_title":"Packing vertex data in half floats","posts_count":2,"created_at":"2021-02-23T23:34:24.913Z","views":181,"reply_count":0,"like_count":0,"last_posted_at":"2021-02-24T00:01:24.293Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"packing-vertex-data-in-half-floats","category_id":7,"word_count":447,"deleted_at":null,"user_id":1429,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6727","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":1429,"username":"townforge","name":"Townforge","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/edb3f5/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0}],"created_by":{"id":1429,"username":"townforge","name":"Townforge","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/edb3f5/{size}.png"},"last_poster":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}}