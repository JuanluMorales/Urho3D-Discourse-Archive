{"post_stream":{"posts":[{"id":8153,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2015-10-11T20:38:13.000Z","cooked":"\u003cp\u003eHi guys,\u003cbr\u003e\nWhat is the recommended way of loading prefabs? I have a simple prefab containing AnimatedModel, RigidBody and AnimationController. I am trying to assign it to a player class. Ideally I would like to access the prefab inside the player class by initiating it inside the init function and using the update function to move it around. At the moment I am loading it like this:\u003c/p\u003e\n\u003cp\u003e[code] Urho3D::WeakPtr\u003ca\u003eUrho3D::Node\u003c/a\u003e playerNode = _scene-\u0026gt;CreateChild(“Player”);\u003cbr\u003e\nPlayer* player = playerNode-\u0026gt;CreateComponent();\u003cbr\u003e\nplayer-\u0026gt;Init();\u003cbr\u003e\nplayer-\u0026gt;SubscribeToEvents();\u003c/p\u003e\n\u003cp\u003eXMLFile *sceneFile = cache-\u0026gt;GetResource(“Prefabs/player.xml”);\u003cbr\u003e\nplayerNode-\u0026gt;LoadXML(sceneFile-\u0026gt;GetRoot());[/code]\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:07:37.068Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":540,"reads":74,"readers_count":73,"score":2729.8,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8154,"name":"","username":"codingmonkey","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","created_at":"2015-10-11T21:16:25.000Z","cooked":"\u003cp\u003ealso you may try - Instantiate() preloaded prefabs (XMLfiles)\u003c/p\u003e\n\u003cp\u003e// on app starting load prefabs\u003c/p\u003e\n\u003cp\u003e[code]\tstruct\u003cbr\u003e\n{\u003cbr\u003e\nHashMap\u0026lt;StringHash, SharedPtr\u0026gt; objectsMap;\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\tSharedPtr\u0026lt;XMLFile\u0026gt; prefabHitFx1_;\n\tSharedPtr\u0026lt;XMLFile\u0026gt; prefabSmokeFx_;\n\tSharedPtr\u0026lt;XMLFile\u0026gt; prefabBlackSmokeFx_;\n\tSharedPtr\u0026lt;XMLFile\u0026gt; prefabFireFx_;\n\tSharedPtr\u0026lt;XMLFile\u0026gt; prefabBoomFx_;\n\tSharedPtr\u0026lt;XMLFile\u0026gt; prefabAutogunBullet_;\n\n\n} prefabs;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003evoid GameMain::LoadPrefabs()\u003cbr\u003e\n{\u003cbr\u003e\nResourceCache* cache = GetSubsystem();\u003cbr\u003e\nworld.prefabs.prefabHitFx1_ = cache-\u0026gt;GetResource(“Objects/hitfx1.xml”);\u003cbr\u003e\nworld.prefabs.prefabSmokeFx_ = cache-\u0026gt;GetResource(“Objects/SmokeFx.xml”);\u003cbr\u003e\nworld.prefabs.prefabBlackSmokeFx_ = cache-\u0026gt;GetResource(“Objects/BlackSmokeFx.xml”);\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eworld.prefabs.prefabFireFx_ = cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"Objects/prefabFireFx.xml\");\nworld.prefabs.prefabBoomFx_ = cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"Objects/boom.xml\");\nworld.prefabs.prefabAutogunBullet_ = cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"Objects/AutogunBullet.xml\");\n\n/*world.prefabs.objectsMap[\"HIT\"] = cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"Objects/hitfx1.xml\");\nworld.prefabs.objectsMap[\"SMOKE\"] = cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"Objects/SmokeFx.xml\");\nworld.prefabs.objectsMap[\"FIRE\"] = cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"Objects/prefabFireFx.xml\");\nworld.prefabs.objectsMap[\"BOOM\"] = cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"Objects/boom.xml\");*/\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e}[/code]\u003c/p\u003e\n\u003cp\u003e// and then is needed create instance and components for it\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\t\tNode* gilza_ = GetScene()-\u0026gt;InstantiateXML(gameworld_-\u0026gt;prefabs.prefabAutogunBullet_-\u0026gt;GetRoot(), pos, quat, LOCAL);\n\t\tgilza_-\u0026gt;SetWorldScale(Vector3(0.11f, 0.11f, 0.11f));\n\t\tLifeTime* lt = gilza_-\u0026gt;CreateComponent\u0026lt;LifeTime\u0026gt;();\n\t\tlt-\u0026gt;SetLifeTime(5.0f)\u003c/code\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:07:37.121Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":13,"reads":74,"readers_count":73,"score":79.8,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":148,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8156,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2015-10-11T23:08:26.000Z","cooked":"\u003cp\u003eGetScene() gives me null inside my Player class.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:07:37.252Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":64,"readers_count":63,"score":17.8,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8157,"name":"Justin Miller","username":"jmiller","avatar_template":"/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png","created_at":"2015-10-12T00:39:58.000Z","cooked":"\u003cp\u003eI have code that goes something like this. In app init:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e  String charTemplateName(\"Objects/Robot.xml\");\n  charNode_-\u0026gt;LoadXML(cache_-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(charTemplateName)-\u0026gt;GetRoot());\n  // Set template name on node.\n  charNode_-\u0026gt;SetVar(\"template\", charTemplateName);\n  character_ = charNode_-\u0026gt;CreateComponent\u0026lt;Character\u0026gt;();\n  charNode_-\u0026gt;CreateComponent\u0026lt;CharacterController\u0026gt;();\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid Character::OnNodeSet(Node* node) {\n  if (!node) return;\n\n  // Template-specific setup can use this.\n  const String templateName(node_-\u0026gt;GetVar(\"template\").ToString());\n\n  ResourceCache* cache(GetSubsystem\u0026lt;ResourceCache\u0026gt;());\n  PhysicsWorld* physicsWorld(GetScene()-\u0026gt;GetComponent\u0026lt;PhysicsWorld\u0026gt;()); // GetScene() works at this point\n  // ....\n}\u003c/code\u003e\u003c/pre\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:07:37.319Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":60,"readers_count":59,"score":22.0,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"Justin Miller","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":21,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8161,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2015-10-12T12:08:06.000Z","cooked":"\u003cp\u003eOk so I need to set my Init() to accept reference for the player node in order to use GetScene()? That is the only more apparent difference I can see from my code.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:07:37.588Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":55,"readers_count":54,"score":11.0,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8163,"name":"Justin Miller","username":"jmiller","avatar_template":"/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png","created_at":"2015-10-12T14:52:31.000Z","cooked":"\u003cp\u003eI’m using OnNodeSet(), an overridden virtual method of Component base, called automatically when a component is added to a node.\u003cbr\u003e\nAt that point, node_ is already stored, and Component::GetScene() is just { return node_ ? node_-\u0026gt;GetScene() : 0; }\u003cbr\u003e\nIn that method one can create other components, subscribe to events, etc., though whether it’s an appropriate time for you depends…\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:07:37.726Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":52,"readers_count":51,"score":15.4,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"Justin Miller","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":21,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8167,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2015-10-12T19:49:26.000Z","cooked":"\u003cp\u003eThanks a lot man I was missing the OnNodeSet(Node* node) it works like a charm now.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-01-02T01:07:38.008Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":51,"readers_count":50,"score":10.2,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8219,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2015-10-17T11:02:22.000Z","cooked":"\u003cp\u003eI am getting one weird problem after loading the prefab I can’t move the node directly:\u003c/p\u003e\n\u003cp\u003eI load the prefab inside the OnNodeSet\u003c/p\u003e\n\u003cp\u003e[code]Urho3D::WeakPtr\u003ca\u003eUrho3D::Node\u003c/a\u003e _playerNode;\u003cbr\u003e\nXMLFile *sceneFile = cache-\u0026gt;GetResource(“Prefabs/player.xml”);\u003cbr\u003e\n_playerNode = GetScene()-\u0026gt;InstantiateXML(sceneFile-\u0026gt;GetRoot(), Vector3(0,0,0), Quaternion(0, 0, 0), LOCAL);\u003c/p\u003e\n\u003cp\u003e[/code]\u003cbr\u003e\nI can’t set the position of the node like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ebut I can set it like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e","post_number":8,"post_type":1,"updated_at":"2017-01-02T01:07:41.668Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":49,"readers_count":48,"score":9.8,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8220,"name":"","username":"TikariSakari","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f4b2a3/{size}.png","created_at":"2015-10-17T13:24:21.000Z","cooked":"\u003cp\u003eI am not sure if this is prefab, since it is whole scene but I have loaded the scene like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\tUrho3D::ResourceCache* cache = GetSubsystem\u0026lt;Urho3D::ResourceCache\u0026gt;();\n\tUrho3D::XMLFile* file = cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(mapName);\n\n\tSharedPtr\u0026lt;Node\u0026gt; nod = SharedPtr\u0026lt;Node\u0026gt;(scene_-\u0026gt;InstantiateXML(file-\u0026gt;GetRoot(\"scene\"), Urho3D::Vector3::ZERO, Quaternion()));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen my xml-file is like this\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u0026lt;?xml version=\"1.0\"?\u0026gt;\n\u0026lt;scene id=\"1\"\u0026gt;\n\t\u0026lt;attribute name=\"Name\" value=\"\" /\u0026gt;\n\t\u0026lt;attribute name=\"Time Scale\" value=\"1\" /\u0026gt;\n\t\u0026lt;attribute name=\"Smoothing Constant\" value=\"50\" /\u0026gt;\n\t\u0026lt;attribute name=\"Snap Threshold\" value=\"5\" /\u0026gt;\n\t\u0026lt;attribute name=\"Elapsed Time\" value=\"0\" /\u0026gt;\n\t\u0026lt;attribute name=\"Next Replicated Node ID\" value=\"2\" /\u0026gt;\n\t\u0026lt;attribute name=\"Next Replicated Component ID\" value=\"4\" /\u0026gt;\n\t\u0026lt;attribute name=\"Next Local Node ID\" value=\"16777266\" /\u0026gt;\n\t\u0026lt;attribute name=\"Next Local Component ID\" value=\"16777265\" /\u0026gt;\n\t\u0026lt;attribute name=\"Variables\" /\u0026gt;\n\t\u0026lt;attribute name=\"Variable Names\" value=\"\" /\u0026gt;\n\t\u0026lt;component type=\"PhysicsWorld\" id=\"1\" /\u0026gt;\n\t\u0026lt;component type=\"Octree\" id=\"2\" /\u0026gt;\n\t\u0026lt;component type=\"DebugRenderer\" id=\"3\" /\u0026gt;\n\t\u0026lt;node id=\"16777216\"\u0026gt;\n\t\t\u0026lt;attribute name=\"Is Enabled\" value=\"true\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Name\" value=\"Scene\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Position\" value=\"0 0 -0\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Rotation\" value=\"0.707107 0.707107 0 0\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Scale\" value=\"1 1 1\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Variables\" /\u0026gt;\n          ...\n   \u0026lt;/node\u0026gt;\n\u0026lt;/scene\u0026gt;\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo I am only loading the node information from the xml-file. I am not sure if this would be same for the prefab though. Sadly though the rotation becomes wrong, so I need to manually rotate the object. Edit: after removing the getchild(“node”), the rotation also gets loaded from the xml-file.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2017-01-02T01:07:41.735Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":7,"reads":51,"readers_count":50,"score":45.2,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":205,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8221,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2015-10-17T15:00:31.000Z","cooked":"\u003cp\u003eLoading the prefab is not a problem anymore the problem is modifying the node position inside a player class.\u003cbr\u003e\nCurrently I have to use it like this as a temp solution: \u003ccode\u003e_player = GetScene()-\u0026gt;GetChild(\"player\");\u003c/code\u003e\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2017-01-02T01:07:41.810Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":43,"readers_count":42,"score":8.6,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8222,"name":"","username":"TikariSakari","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f4b2a3/{size}.png","created_at":"2015-10-17T15:25:52.000Z","cooked":"\u003cp\u003eIs the Node that you get from the initialize valid as in is it non-null value, because if I remember correctly, unless I gave specificly the Node that I wanted to initialize from the xml, it returned some weird stuff from the initialize.\u003c/p\u003e\n\u003cp\u003eSince you can get the node from the scene with getchild, it is highly likely that the node you get from the initialize is not the same.\u003c/p\u003e\n\u003cp\u003eAnother thing, well since I am not sure how C++ handles, but there would be implicit conversion from raw pointer to weakptr, which I honestly myself have no idea what it does? Basically you have:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eUrho3D::WeakPtr\u0026lt;Urho3D::Node\u0026gt; playerNode = Urho3D::Node*\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003evs what you want to have is to initialize the weakpointer with the raw pointer:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eUrho3D::WeakPtr\u0026lt;Urho3D::Node\u0026gt; playerNode =  Urho3D::WeakPtr\u0026lt;Urho3D::Node\u0026gt;( Urho3D::Node* )\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI am not sure does these 2 lines evaluate the same way.\u003c/p\u003e\n\u003cp\u003eSo you could try using raw pointer as the playerNode and see how it works if the life expectation allows it + this way you could actually make sure that the Node* returned is not null. And even if it is null, does the Node have a child that is named player, because for me unless I told the xml-file to initialize the correct node-tag from the xml-file.\u003c/p\u003e\n\u003cp\u003eEdit2: I think it would help a bit for trying to find what is wrong if you could paste the xml-file or at least some contents from the xml-file to figure out what/where things go wrong. For me, it took me a while to not realize that I actually had another octree from the initialize until I only gave the node-part of my xml to the initialize-function.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2017-01-02T01:07:41.885Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":45,"readers_count":44,"score":29.0,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":205,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8224,"name":"","username":"sabotage3d","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","created_at":"2015-10-17T20:18:42.000Z","cooked":"\u003cp\u003eOk this seems to work now is that the best pactice?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eSharedPtr\u0026lt;XMLFile\u0026gt; sceneFile;\nsceneFile = cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"Prefabs/player.xml\");\n_playerNode  = GetScene()-\u0026gt;InstantiateXML(sceneFile-\u0026gt;GetRoot(), Vector3(0,0,0), Quaternion(0, 0, 0), LOCAL);\n_playerNode-\u0026gt;SetParent(GetNode());\n_player = GetNode();\u003c/code\u003e\u003c/pre\u003e","post_number":12,"post_type":1,"updated_at":"2017-01-02T01:07:42.018Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":44,"readers_count":43,"score":23.8,"yours":false,"topic_id":1418,"topic_slug":"loading-prefabs","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":151,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[8153,8154,8156,8157,8161,8163,8167,8219,8220,8221,8222,8224]},"timeline_lookup":[[1,2599],[7,2598],[8,2594],[12,2593]],"suggested_topics":[{"id":7348,"title":"PBR Shaders in Android give Unhandled Exception","fancy_title":"PBR Shaders in Android give Unhandled Exception","slug":"pbr-shaders-in-android-give-unhandled-exception","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-11-10T09:25:50.581Z","last_posted_at":"2022-11-12T09:39:35.616Z","bumped":true,"bumped_at":"2022-11-12T09:39:35.616Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":93,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":"latest","description":"Most Recent Poster, Accepted Answer","user":{"id":584,"username":"orefkov","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/orefkov/{size}/1164_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7112,"title":"What is the proper way to add more source files(.cpp and .h) to a project?","fancy_title":"What is the proper way to add more source files(.cpp and .h) to a project?","slug":"what-is-the-proper-way-to-add-more-source-files-cpp-and-h-to-a-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-27T18:18:21.946Z","last_posted_at":"2021-12-28T12:19:43.514Z","bumped":true,"bumped_at":"2021-12-28T12:19:43.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":195,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1498,"username":"Tryout","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/85f322/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7182,"title":"How install landscape in the format (.tor or .obj)?","fancy_title":"How install landscape in the format (.tor or .obj)?","slug":"how-install-landscape-in-the-format-tor-or-obj","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-02-03T16:58:20.976Z","last_posted_at":"2022-02-04T16:34:09.663Z","bumped":true,"bumped_at":"2022-02-04T16:34:09.663Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":151,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":"latest","description":"Most Recent Poster, Accepted Answer","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7212,"title":"Shadow Gap between Feet and Plane","fancy_title":"Shadow Gap between Feet and Plane","slug":"shadow-gap-between-feet-and-plane","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/8/897538cff25de49fafa7aa77574f822e99576b67_2_1024x686.jpeg","created_at":"2022-03-07T00:04:17.351Z","last_posted_at":"2022-03-07T00:17:57.413Z","bumped":true,"bumped_at":"2022-03-07T00:17:57.413Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}]},{"id":7281,"title":"Cannot launch + Converting .fbx to .ani","fancy_title":"Cannot launch + Converting .fbx to .ani","slug":"cannot-launch-converting-fbx-to-ani","posts_count":14,"reply_count":10,"highest_post_number":14,"image_url":null,"created_at":"2022-06-17T04:59:42.992Z","last_posted_at":"2022-06-20T16:21:59.555Z","bumped":true,"bumped_at":"2022-06-20T16:21:59.555Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":258,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1526,"username":"NoobBeggar","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/e68b1a/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":1418,"title":"Loading prefabs","fancy_title":"Loading prefabs","posts_count":12,"created_at":"2015-10-11T20:38:13.000Z","views":2498,"reply_count":0,"like_count":2,"last_posted_at":"2015-10-17T20:18:42.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"loading-prefabs","category_id":10,"word_count":1187,"deleted_at":null,"user_id":151,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1418","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":12,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":151,"username":"sabotage3d","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png","post_count":7,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":21,"username":"jmiller","name":"Justin Miller","avatar_template":"/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"moderator":true,"trust_level":3},{"id":205,"username":"TikariSakari","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f4b2a3/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":148,"username":"codingmonkey","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":151,"username":"sabotage3d","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png"},"last_poster":{"id":151,"username":"sabotage3d","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png"}}}