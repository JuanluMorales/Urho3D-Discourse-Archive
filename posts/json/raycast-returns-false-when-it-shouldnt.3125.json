{"post_stream":{"posts":[{"id":17813,"name":"","username":"Pihozamo","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/848f3c/{size}.png","created_at":"2017-05-13T20:49:59.817Z","cooked":"\u003cp\u003eHello, I’m trying to create a sort of grid navmesh using raycasts, however, for some reason the raycast return false when it shouldn’t. Here is the code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003evoid Game::CreateNavigationGraph(const IntVector3\u0026amp; startPos)\n{\n\tconst Vector3 downVec(0, -1, 0);\n\tconst IntVector3 dirVecs[] = { IntVector3(1, 0, 0), IntVector3(-1, 0, 0), IntVector3(0, 0, 1), IntVector3(0, 0, -1) };\n\tDrawable* hitDrawable;\n\n\tHashSet\u0026lt;IntVector3\u0026gt; visited;\n\tHashSet\u0026lt;IntVector3\u0026gt; onStack;\n\tVector\u0026lt;IntVector3\u0026gt; ar;\n\tVector\u0026lt;Vector3\u0026gt; hitPoints;\n\tar.Push(startPos);\n\n\twhile (!ar.Empty()) {\n\t\tVector3 hitPos;\n\t\tconst IntVector3 v = ar.Back();\n\t\tar.Pop();\n\t\tonStack.Erase(v);\n\n\t\tif (Raycast(100.0f, hitPos, hitDrawable, Ray(Vector3(v), downVec))) {\n\t\t\tfor (int i = 0; i \u0026lt; 4; i++) {\n\t\t\t\tconst IntVector3 v2 = v + dirVecs[i];\n\n\t\t\t\tif (!visited.Contains(v2) \u0026amp;\u0026amp; !onStack.Contains(v2)) {\n\t\t\t\t\tar.Push(v2);\n\t\t\t\t\tonStack.Insert(v2);\n\t\t\t\t\t//Log::Write(LOG_INFO, String(v2));\n\t\t\t\t}\n\t\t\t}\n\t\t\thitPoints.Push(hitPos);\n\t\t}\n\t\tvisited.Insert(v);\n\t}\n\n\t//Log::Write(LOG_INFO, String(hitPoints.Size()));\n\tfor (int i = 0; i \u0026lt; hitPoints.Size(); i++) {\n\t\tResourceCache* cache = GetSubsystem\u0026lt;ResourceCache\u0026gt;();\n\t\tNode* n = scene_-\u0026gt;CreateChild(\"Cube\");\n\t\tn-\u0026gt;SetPosition(hitPoints[i]);\n\t\tn-\u0026gt;SetScale(Vector3(0.2f, 0.2f, 0.2f));\n\t\tStaticModel* model = n-\u0026gt;CreateComponent\u0026lt;StaticModel\u0026gt;();\n\t\tmodel-\u0026gt;SetModel(cache-\u0026gt;GetResource\u0026lt;Model\u0026gt;(\"Models/Cube.mdl\"));\n\t\tmodel-\u0026gt;SetCastShadows(true);\n\t\t//Log::Write(LOG_INFO, String(hitPoints[i]));\n\t}\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFor the Raycast function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ebool Gourmet::Raycast(const float\u0026amp; maxDistance, Vector3\u0026amp; hitPos, Drawable*\u0026amp; hitDrawable, const Ray\u0026amp; ray)\n{\n\thitDrawable = 0;\n\n\t// Pick only geometry objects, not eg. zones or lights, only get the first (closest) hit\n\tPODVector\u0026lt;RayQueryResult\u0026gt; results;\n\tRayOctreeQuery query(results, ray, RAY_TRIANGLE, maxDistance, DRAWABLE_GEOMETRY);\n\tscene_-\u0026gt;GetComponent\u0026lt;Octree\u0026gt;()-\u0026gt;RaycastSingle(query);\n\tif (results.Size())\n\t{\n\t\tRayQueryResult\u0026amp; result = results[0];\n\t\thitPos = result.position_;\n\t\thitDrawable = result.drawable_;\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI’ve made sure I applied the scale, position and location of my plane model on Blender, and I’m not sure why it doesn’t work. It seems to me that it maybe some type of optimization made by the Octree, because it seems that it stops working after a certain distance.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-05-14T15:41:19.682Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":35,"reads":34,"readers_count":33,"score":186.8,"yours":false,"topic_id":3125,"topic_slug":"raycast-returns-false-when-it-shouldnt","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":639,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":17816,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2017-05-14T01:26:41.764Z","cooked":"\u003cp\u003eWhen I had problems like this, moving such code into FixedUpdate and waiting a few seconds before starting of raycast did the trick.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-05-14T01:26:41.764Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":20.8,"yours":false,"topic_id":3125,"topic_slug":"raycast-returns-false-when-it-shouldnt","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":17817,"name":"","username":"lezak","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/b38774/{size}.png","created_at":"2017-05-14T01:34:42.296Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Pihozamo\" data-post=\"1\" data-topic=\"3125\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/p/848f3c/40.png\" class=\"avatar\"\u003e Pihozamo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt seems to me that it maybe some type of optimization made by the Octree, because it seems that it stops working after a certain distance.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eInstead of using octree raycast try to use Drawable::ProcessRayQuery on your model\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-05-14T15:40:43.741Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":1,"reads":29,"readers_count":28,"score":25.8,"yours":false,"topic_id":3125,"topic_slug":"raycast-returns-false-when-it-shouldnt","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":688,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":17825,"name":"","username":"Pihozamo","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/848f3c/{size}.png","created_at":"2017-05-14T12:35:24.709Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/lezak\"\u003e@lezak\u003c/a\u003e That solved the problem! But do you know why the Octree doesn’t apply raycasts after a certain block distance?\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-05-14T12:35:24.709Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":28,"readers_count":27,"score":5.6,"yours":false,"topic_id":3125,"topic_slug":"raycast-returns-false-when-it-shouldnt","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":639,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":17836,"name":"","username":"lezak","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/b38774/{size}.png","created_at":"2017-05-14T22:35:02.822Z","cooked":"\u003cp\u003eI came across same issue just few days ago and since then I havn’t had time to look into it closers. I think that it is caused, at least in my case, by model being bigger then octant in which it is placed and octree raycast takes into account only geometries that fit this octant. For example after decreasing number of subdivisions in octree raycast will also give expected results.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-05-14T22:35:02.822Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":4.4,"yours":false,"topic_id":3125,"topic_slug":"raycast-returns-false-when-it-shouldnt","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":688,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[17813,17816,17817,17825,17836]},"timeline_lookup":[[1,2019],[5,2018]],"suggested_topics":[{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7181,"title":"StaticModelGroup - Are ShaderParameters Shared?","fancy_title":"StaticModelGroup - Are ShaderParameters Shared?","slug":"staticmodelgroup-are-shaderparameters-shared","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-02-02T09:31:19.658Z","last_posted_at":"2022-02-02T17:06:24.059Z","bumped":true,"bumped_at":"2022-02-02T17:06:24.059Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":120,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7185,"title":"Update Ray ray direction","fancy_title":"Update Ray ray direction","slug":"update-ray-ray-direction","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-02-05T00:28:45.414Z","last_posted_at":"2022-02-05T20:19:51.238Z","bumped":true,"bumped_at":"2022-02-05T20:19:51.238Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7080,"title":"Build urho3d source on windows 10 - cmake - \"Error in configuration process, project files may be invalid\"","fancy_title":"Build urho3d source on windows 10 - cmake - \u0026ldquo;Error in configuration process, project files may be invalid\u0026rdquo;","slug":"build-urho3d-source-on-windows-10-cmake-error-in-configuration-process-project-files-may-be-invalid","posts_count":8,"reply_count":4,"highest_post_number":8,"image_url":null,"created_at":"2021-12-03T01:55:53.267Z","last_posted_at":"2021-12-06T22:46:59.584Z","bumped":true,"bumped_at":"2021-12-06T22:46:59.584Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":324,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]}],"tags_descriptions":{},"id":3125,"title":"Raycast returns false when it shouldn't","fancy_title":"Raycast returns false when it shouldn\u0026rsquo;t","posts_count":5,"created_at":"2017-05-13T20:49:59.756Z","views":504,"reply_count":0,"like_count":2,"last_posted_at":"2017-05-14T22:35:02.822Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"raycast-returns-false-when-it-shouldnt","category_id":10,"word_count":477,"deleted_at":null,"user_id":639,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_3125","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":3,"username":"lezak","excerpt":"Instead of using octree raycast try to use Drawable::ProcessRayQuery on your model"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":639,"username":"Pihozamo","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/848f3c/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":688,"username":"lezak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/b38774/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":639,"username":"Pihozamo","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/848f3c/{size}.png"},"last_poster":{"id":688,"username":"lezak","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/b38774/{size}.png"}}}