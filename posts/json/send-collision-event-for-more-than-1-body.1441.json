{"post_stream":{"posts":[{"id":8252,"name":"","username":"Enhex","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","created_at":"2015-10-22T00:17:15.000Z","cooked":"\u003cp\u003eHopefully I’m not doing something wrong, but what I noticed is that NodeCollision event only fires once for each node, even if it collides with more than 1 other node.\u003c/p\u003e\n\u003cp\u003eIn my case I’m shooting a projectile which is a trigger body.\u003cbr\u003e\nOn NodeCollision if the other node is the shooter of the projectile the collision is skipped, so collision with the shooter is avoided.\u003cbr\u003e\nI noticed that if the player shoots a projectile straight down, it won’t collide with the floor until it’s no longer in contact with the player.\u003cbr\u003e\nThat causes bugs for example with explosive projectiles that need to make sure they have line of sight with damageable objects because it will penetrate into the ground.\u003c/p\u003e\n\u003cp\u003eRight now my workaround is doing GetRigidBodies(projectile_body) when colliding with the shooter, to check if there’s any collision with other bodies, which is re-testing for collisions.\u003cbr\u003e\nAn elegant solution would be to have all the collisions available, either via multiple NodeCollision events, or an event that lists all the nodes.\u003cbr\u003e\nThe most elegant solution is to completely ignore collision between the shooter and the projectile (layers aren’t suitable because there could be many different shooters \u0026amp; projectiles).\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:07:44.128Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":10,"reads":8,"readers_count":7,"score":51.6,"yours":false,"topic_id":1441,"topic_slug":"send-collision-event-for-more-than-1-body","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":184,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8255,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-10-22T07:38:20.000Z","cooked":"\u003cp\u003eCollision pairs should be treated as separate, so this sounds like a logic bug in PhysicsWorld::SendCollisionEvents(). I recommend stepping through it and seeing if it early-outs in a wrong place. Alternatively, Bullet is just being stupid.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:07:44.300Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":8,"readers_count":7,"score":6.6,"yours":false,"topic_id":1441,"topic_slug":"send-collision-event-for-more-than-1-body","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8267,"name":"","username":"Enhex","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","created_at":"2015-10-22T14:42:57.000Z","cooked":"\u003cp\u003eI didn’t debug because I’m using Urho as external library.\u003cbr\u003e\nLooking at PhysicsWorld::SendCollisionEvents() it seems like it should work fine - creating unique pairs and only skipping if the nodes/bodies are removed.\u003c/p\u003e\n\u003cp\u003eI looked at Bullet’s wiki and found this:\u003cbr\u003e\n\u003ca href=\"http://bulletphysics.org/mediawiki-1.5.8/index.php/Collision_Callbacks_and_Triggers#Contact_Information\" rel=\"nofollow noopener\"\u003ebulletphysics.org/mediawiki-1.5. … nformation\u003c/a\u003e\u003cbr\u003e\n\"The best way to determine if collisions happened between existing objects in the world, is to iterate over all contact manifolds. This should be done during a simulation tick (substep) callback, because contacts might be added and removed during several substeps of a single stepSimulation call.\"\u003c/p\u003e\n\u003cp\u003ePhysicsWorld::SendCollisionEvents() is called in the PostStep(), so maybe the collision gets removed in the substeps?\u003cbr\u003e\nA possible solution could be to populate the pairs hashmap in the substeps, and send the events in the PostStep().\u003c/p\u003e\n\u003cp\u003eThough a simple test case is required to verify that missing substep contacts is real.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:07:45.076Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":8,"readers_count":7,"score":1.6,"yours":false,"topic_id":1441,"topic_slug":"send-collision-event-for-more-than-1-body","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://bulletphysics.org/mediawiki-1.5.8/index.php/Collision_Callbacks_and_Triggers#Contact_Information","internal":false,"reflection":false,"title":"Collision Callbacks and Triggers - Physics Simulation Wiki","clicks":2}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":184,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8269,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-10-22T15:48:46.000Z","cooked":"\u003cp\u003ePostStep is called for each substep.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:07:45.207Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":8,"readers_count":7,"score":1.6,"yours":false,"topic_id":1441,"topic_slug":"send-collision-event-for-more-than-1-body","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8270,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-10-22T18:20:42.000Z","cooked":"\u003cp\u003eI’m not able to replicate your problem in CharacterDemo. I make the character drop “bullets” and log the collided nodes in the bullet script’s FixedPostUpdate.\u003c/p\u003e\n\u003cp\u003eThis was inserted to somewhere in the camera/controls per-frame code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e        if (input.mouseButtonPress[MOUSEB_LEFT])\n            SpawnObject();\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd the new code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid SpawnObject()\n{\n    Node@ boxNode = scene_.CreateChild(\"SmallBox\");\n    boxNode.position = characterNode.position + Vector3(0,1,0);\n    boxNode.rotation = characterNode.rotation;\n    boxNode.SetScale(0.25f);\n    StaticModel@ boxObject = boxNode.CreateComponent(\"StaticModel\");\n    boxObject.model = cache.GetResource(\"Model\", \"Models/Box.mdl\");\n    boxObject.material = cache.GetResource(\"Material\", \"Materials/StoneEnvMapSmall.xml\");\n    boxObject.castShadows = true;\n\n    RigidBody@ body = boxNode.CreateComponent(\"RigidBody\");\n    body.mass = 0.25f;\n    body.friction = 0.75f;\n    body.trigger = true;\n    CollisionShape@ shape = boxNode.CreateComponent(\"CollisionShape\");\n    shape.SetBox(Vector3(1.0f, 1.0f, 1.0f));\n\n    boxNode.CreateScriptObject(scriptFile, \"Bullet\");\n}\n\nclass Bullet : ScriptObject\n{\n    Array\u0026lt;String\u0026gt; collidingObjects;\n\n    void Start()\n    {\n        SubscribeToEvent(node, \"NodeCollision\", \"HandleNodeCollision\");\n    }\n\n    void HandleNodeCollision(StringHash type, VariantMap\u0026amp; data)\n    {\n        Node@ otherNode = data[\"OtherNode\"].GetPtr();\n        collidingObjects.Push(otherNode.name);\n    }\n\n    void FixedUpdate(float dt)\n    {\n        collidingObjects.Clear();\n    }\n\n    void FixedPostUpdate(float dt)\n    {\n        if (collidingObjects.length \u0026gt; 0)\n        {\n            String objectNames;\n            for (uint i = 0; i \u0026lt; collidingObjects.length; ++i)\n                objectNames += collidingObjects[i] + \" \";\n            Print(\"Collisions \" + collidingObjects.length + \": \" + objectNames);\n        }\n    }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe log output would look like expected, when the bullet intersects momentarily both the Jack and the floor:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eCollisions 1: Jack \nCollisions 1: Jack \nCollisions 1: Jack \nCollisions 1: Jack \nCollisions 2: Jack Floor \nCollisions 2: Jack Floor \nCollisions 2: Jack Floor \nCollisions 2: Jack Floor \nCollisions 1: Floor \nCollisions 1: Floor \nCollisions 1: Floor\u003c/code\u003e\u003c/pre\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:07:45.262Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":8,"readers_count":7,"score":1.6,"yours":false,"topic_id":1441,"topic_slug":"send-collision-event-for-more-than-1-body","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":8271,"name":"","username":"Enhex","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","created_at":"2015-10-22T19:19:43.000Z","cooked":"\u003cp\u003eI replicated your test and it works fine.\u003cbr\u003e\nWhen I was tweaking to fix it I did add both “body.collisionEventMode = COLLISION_ALWAYS;”, use CCD, and check line of sight to center of mass instead of node position (which in my case is the very bottom of the body, which caused problems).\u003cbr\u003e\nmaybe one of them fixed it.\u003c/p\u003e\n\u003cp\u003eMy bad.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:07:45.331Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":7,"readers_count":6,"score":6.4,"yours":false,"topic_id":1441,"topic_slug":"send-collision-event-for-more-than-1-body","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":184,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[8252,8255,8267,8269,8270,8271]},"timeline_lookup":[[1,2589],[5,2588]],"suggested_topics":[{"id":7083,"title":"Using custom models in Xamarin.Forms shared project","fancy_title":"Using custom models in Xamarin.Forms shared project","slug":"using-custom-models-in-xamarin-forms-shared-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-03T08:34:21.895Z","last_posted_at":"2021-12-03T11:40:30.983Z","bumped":true,"bumped_at":"2021-12-03T11:40:30.983Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":198,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1493,"username":"Nikolai","name":"Nikolai Miroshnichenko","avatar_template":"/user_avatar/discourse.urho3d.io/nikolai/{size}/3632_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7105,"title":"Multiple Application.UI Roots?","fancy_title":"Multiple Application.UI Roots?","slug":"multiple-application-ui-roots","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/7/74b10ce575f1b69fe43be4abcb07605d74a1d27c_2_1024x544.jpeg","created_at":"2021-12-20T08:55:14.707Z","last_posted_at":"2021-12-22T02:33:05.795Z","bumped":true,"bumped_at":"2021-12-22T02:33:05.795Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":243,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7215,"title":"How to build rbfx?","fancy_title":"How to build rbfx?","slug":"how-to-build-rbfx","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-03-11T01:28:40.314Z","last_posted_at":"2022-03-12T19:16:39.360Z","bumped":true,"bumped_at":"2022-03-12T19:16:39.360Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":268,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1447,"username":"Batch","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f17d59/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7263,"title":"Is Steam integration like this possible?","fancy_title":"Is Steam integration like this possible?","slug":"is-steam-integration-like-this-possible","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-05-12T22:06:15.739Z","last_posted_at":"2022-05-14T22:02:38.197Z","bumped":true,"bumped_at":"2022-05-14T22:02:38.197Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":202,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png"}}]},{"id":7324,"title":"3D Particle Emitter Liquid Effects","fancy_title":"3D Particle Emitter Liquid Effects","slug":"3d-particle-emitter-liquid-effects","posts_count":5,"reply_count":2,"highest_post_number":5,"image_url":null,"created_at":"2022-09-08T13:59:16.260Z","last_posted_at":"2022-09-14T08:38:38.762Z","bumped":true,"bumped_at":"2022-09-14T08:38:38.762Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":185,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]}],"tags_descriptions":{},"id":1441,"title":"Send collision event for more than 1 body","fancy_title":"Send collision event for more than 1 body","posts_count":6,"created_at":"2015-10-22T00:17:15.000Z","views":436,"reply_count":0,"like_count":0,"last_posted_at":"2015-10-22T19:19:43.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"send-collision-event-for-more-than-1-body","category_id":11,"word_count":713,"deleted_at":null,"user_id":184,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1441","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png"},"last_poster":{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png"},"links":[{"url":"http://bulletphysics.org/mediawiki-1.5.8/index.php/Collision_Callbacks_and_Triggers#Contact_Information","title":"Collision Callbacks and Triggers - Physics Simulation Wiki","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":184,"domain":"bulletphysics.org","root_domain":"bulletphysics.org"}]}}