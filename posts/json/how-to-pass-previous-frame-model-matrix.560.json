{"post_stream":{"posts":[{"id":3124,"name":"","username":"ucupumar","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/u/ccd318/{size}.png","created_at":"2014-11-16T16:41:24.000Z","cooked":"\u003cp\u003eI‚Äôm trying to implement per object motion blur on Urho based on this \u003ca href=\"http://john-chapman-graphics.blogspot.co.uk/2013/01/per-object-motion-blur.html\" data-bbcode=\"true\" rel=\"nofollow noopener\"\u003eblog post\u003c/a\u003e. but I don‚Äôt find easy way to pass previous frame model matrix to shader. It‚Äôs seems it need to be done by edit the engine source code itself.\u003cbr\u003e\nI already tried to do it myself but ended up failed. I can‚Äôt pass the previous frame model matrix to shader.\u003c/p\u003e\n\u003cp\u003eLong story short, my implementation is basically adding previous frame matrix properties to node object and pass them on Batch.cpp by this code (on around line 233 until 255):\u003c/p\u003e\n\u003cp\u003e[code]    // Set model or skinning transforms\u003cbr\u003e\nif (setModelTransform \u0026amp;\u0026amp; graphics-\u0026gt;NeedParameterUpdate(SP_OBJECTTRANSFORM, worldTransform_))\u003cbr\u003e\n{\u003cbr\u003e\nif (geometryType_ == GEOM_SKINNED)\u003cbr\u003e\n{\u003cbr\u003e\ngraphics-\u0026gt;SetShaderParameter(VSP_SKINMATRICES, reinterpret_cast\u0026lt;const float*\u0026gt;(worldTransform_),\u003cbr\u003e\n12 * numWorldTransforms_);\u003cbr\u003e\n}\u003cbr\u003e\nelse\u003cbr\u003e\n{\u003cbr\u003e\ngraphics-\u0026gt;SetShaderParameter(VSP_MODEL, *worldTransform_);\u003cbr\u003e\n/////////////// this is my addition ////////////////\u003cbr\u003e\ngraphics-\u0026gt;SetShaderParameter(VSP_PREVMODEL, *prevWorldTransform_);\u003cbr\u003e\n////////////////////////////////////////////////////\u003cbr\u003e\n}\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e    // Set the orientation for billboards, either from the object itself or from the camera\n    if (geometryType_ == GEOM_BILLBOARD)\n    {\n        if (numWorldTransforms_ \u0026gt; 1)\n            graphics-\u0026gt;SetShaderParameter(VSP_BILLBOARDROT, worldTransform_[1].RotationMatrix());\n        else\n            graphics-\u0026gt;SetShaderParameter(VSP_BILLBOARDROT, cameraNode-\u0026gt;GetWorldRotation().RotationMatrix());\n    }\n}[/code]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI don‚Äôt what happens, but it doesn‚Äôt work. I already set prevWorldTransform_ on Batch object.\u003cbr\u003e\nDo anyone can help me?  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/unamused.png?v=5\" title=\":unamused:\" class=\"emoji\" alt=\":unamused:\"\u003e\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:01:22.496Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":9,"reads":9,"readers_count":8,"score":46.8,"yours":false,"topic_id":560,"topic_slug":"how-to-pass-previous-frame-model-matrix","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://john-chapman-graphics.blogspot.co.uk/2013/01/per-object-motion-blur.html","internal":false,"reflection":false,"title":"john-chapman-graphics: Per-Object Motion Blur","clicks":4}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":83,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":3147,"name":"","username":"ucupumar","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/u/ccd318/{size}.png","created_at":"2014-11-17T18:12:58.000Z","cooked":"\u003cp\u003eAh, nevermind, I found it.\u003c/p\u003e\n\u003cp\u003eThe shader only get identity matrix because I never set them in the first place.\u003cbr\u003e\nPrevious model matrix had to sent to batch object on UpdateBatches() function. At first, I thought I only need on set them on drawable‚Äôs UpdateBatches(), but then I found out static model has it‚Äôs own UpdateBatches() function.  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/unamused.png?v=5\" title=\":unamused:\" class=\"emoji\" alt=\":unamused:\"\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:01:24.153Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":8,"readers_count":7,"score":1.6,"yours":false,"topic_id":560,"topic_slug":"how-to-pass-previous-frame-model-matrix","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":83,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[3124,3147]},"timeline_lookup":[[1,2929],[2,2927]],"suggested_topics":[{"id":7132,"title":"How to Draw Anti-Aliased Outlined Line on the UI layer?","fancy_title":"How to Draw Anti-Aliased Outlined Line on the UI layer?","slug":"how-to-draw-anti-aliased-outlined-line-on-the-ui-layer","posts_count":8,"reply_count":5,"highest_post_number":8,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/c/c040fdbc2f1856c238ba6328fd7f5ff80b15858f_2_782x1024.jpeg","created_at":"2022-01-17T22:08:06.874Z","last_posted_at":"2022-01-20T20:13:30.614Z","bumped":true,"bumped_at":"2022-01-20T20:13:30.614Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":173,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7185,"title":"Update Ray ray direction","fancy_title":"Update Ray ray direction","slug":"update-ray-ray-direction","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-02-05T00:28:45.414Z","last_posted_at":"2022-02-05T20:19:51.238Z","bumped":true,"bumped_at":"2022-02-05T20:19:51.238Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7200,"title":"Urho3D just building if I check \"use SHARED libraries\"","fancy_title":"Urho3D just building if I check \u0026ldquo;use SHARED libraries\u0026rdquo;","slug":"urho3d-just-building-if-i-check-use-shared-libraries","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-02-22T20:02:48.835Z","last_posted_at":"2022-02-23T15:38:33.698Z","bumped":true,"bumped_at":"2022-02-23T15:54:07.879Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":165,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7204,"title":"How handle with multiple scenes?","fancy_title":"How handle with multiple scenes?","slug":"how-handle-with-multiple-scenes","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-02-23T16:15:02.697Z","last_posted_at":"2022-02-23T16:15:02.762Z","bumped":true,"bumped_at":"2022-02-23T16:15:02.762Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":131,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}}]},{"id":7266,"title":"Compile Urho3D 1.8 failed with the default MinGW of Clion2022.1","fancy_title":"Compile Urho3D 1.8 failed with the default MinGW of Clion2022.1","slug":"compile-urho3d-1-8-failed-with-the-default-mingw-of-clion2022-1","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/fcbe1a1f0cd74c5cc158c8c790c6c472f3b96011_2_1024x359.png","created_at":"2022-05-14T06:22:45.469Z","last_posted_at":"2022-05-16T06:45:54.546Z","bumped":true,"bumped_at":"2022-05-16T06:45:54.546Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":124,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":745,"username":"ChunFengTsin","name":"Chun Feng Tsin","avatar_template":"/user_avatar/discourse.urho3d.io/chunfengtsin/{size}/450_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":560,"title":"How to pass previous frame model matrix?","fancy_title":"How to pass previous frame model matrix?","posts_count":2,"created_at":"2014-11-16T16:41:24.000Z","views":171,"reply_count":0,"like_count":0,"last_posted_at":"2014-11-17T18:12:58.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"how-to-pass-previous-frame-model-matrix","category_id":10,"word_count":268,"deleted_at":null,"user_id":83,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_560","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":83,"username":"ucupumar","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/u/ccd318/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":83,"username":"ucupumar","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/u/ccd318/{size}.png"},"last_poster":{"id":83,"username":"ucupumar","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/u/ccd318/{size}.png"},"links":[{"url":"http://john-chapman-graphics.blogspot.co.uk/2013/01/per-object-motion-blur.html","title":"john-chapman-graphics: Per-Object Motion Blur","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":83,"domain":"john-chapman-graphics.blogspot.co.uk","root_domain":"john-chapman-graphics.blogspot.co.uk"}]}}