{"post_stream":{"posts":[{"id":26617,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-11-13T14:30:25.814Z","cooked":"\u003cp\u003eI just cant wrap my head around anchors. I know how they work. \u003ccode\u003emin anchor-pivot\u003c/code\u003e is coordinate of top-left corner of \u003ccode\u003eUIElement\u003c/code\u003e and \u003ccode\u003emax anchor+pivot\u003c/code\u003e is coordinate of bottom-right corner. However that is now how we think about UI elements and that is whats extremely confusing. Natural way of thinking is position and size and we already have that when setting absolute coordinates. Is there any advantage to having anchors as opposed to ‚Äúnormalized size‚Äù and ‚Äúnormalized position‚Äù? They both achieve exactly same thing, except dealing with one is way more intuitive than with the other.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-11-13T14:30:25.814Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":87,"reads":48,"readers_count":47,"score":444.6,"yours":false,"topic_id":4671,"topic_slug":"normalized-ui-positioning-anchors-vs-normalized-pos-size","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26619,"name":"Jonathan","username":"Sinoid","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","created_at":"2018-11-14T02:23:28.034Z","cooked":"\u003cp\u003eI feel like that stuff needs a bit of a rework.\u003c/p\u003e\n\u003cp\u003eAs soon as I started adding rotation to more UI elements than just sprite, the pivot/anchor stuff just fell apart into not making any sense - it really doesn‚Äôt help that the pivot has nothing in common with the pivots in other software (at least that I‚Äôve used).\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/7/7331d72e8fbc57bf6c8443e679ba8e74d266c0a3.png\" alt=\"Blocks_2018-11-11_14-59-54\" width=\"165\" height=\"61\"\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-11-14T02:23:28.034Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":44,"readers_count":43,"score":8.8,"yours":false,"topic_id":4671,"topic_slug":"normalized-ui-positioning-anchors-vs-normalized-pos-size","display_username":"Jonathan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":669,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26621,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-11-14T10:00:19.580Z","cooked":"\u003cp\u003eMy understanding of pivot is that its a center point in normalized widget coordinates. That made sense to me. \u003ccode\u003e0.5, 0.5\u003c/code\u003e pivot should be great for rotations, no?\u003c/p\u003e\n\u003cp\u003eWhat kind of rework do you have in mind? Replacing anchors with normalized pos/size or something better?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-11-14T10:00:19.580Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":44,"readers_count":43,"score":38.8,"yours":false,"topic_id":4671,"topic_slug":"normalized-ui-positioning-anchors-vs-normalized-pos-size","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26629,"name":"Jonathan","username":"Sinoid","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","created_at":"2018-11-15T01:26:45.476Z","cooked":"\u003cp\u003eIn Free mode the pivots certainly work exactly as one would expect, however when horizontal/vertical get involved the pivots + anchors start to behave weirdly enough that it‚Äôs a pain to setup UI elements such that they align nicely under changing circumstances.\u003c/p\u003e\n\u003cp\u003eThough I think some of the severity there is just the absence of rich-text requiring \u003ccode\u003eText\u003c/code\u003e gymnastics to get the desired results.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhat kind of rework do you have in mind? Replacing anchors with normalized pos/size or something better?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI still don‚Äôt know, I‚Äôve been trying to articulate it myself just so I understand what/why before I do much of anything in the UI.\u003c/p\u003e\n\u003cp\u003eThe only thing I‚Äôve really managed to pin down about how I feel about the UI, is that it‚Äôs far too unwilling to resize an element smaller (such as when a Text element changes from ‚Äú500‚Äù to ‚Äú5‚Äù), though again - that‚Äôs really only severe because there‚Äôs no rich-text.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-11-15T01:26:45.476Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":41,"readers_count":40,"score":8.2,"yours":false,"topic_id":4671,"topic_slug":"normalized-ui-positioning-anchors-vs-normalized-pos-size","display_username":"Jonathan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":669,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26672,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-11-21T13:56:33.589Z","cooked":"\u003cp\u003eIm thinking this:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eKeep pivot as it is - a modification of UIElement‚Äôs origin, 0;0 = top-left corner, 0.5;0.5 = center, 1;1 - bottom-left corner.\u003c/li\u003e\n\u003cli\u003eReplace \u003ccode\u003eminAnchor_\u003c/code\u003e with \u003ccode\u003eanchorPosition_\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eReplace \u003ccode\u003emaxAnchor_\u003c/code\u003e with \u003ccode\u003eanchorSize_\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eReplace \u003ccode\u003eminOffset_\u003c/code\u003e and \u003ccode\u003emaxOffset_\u003c/code\u003e with just \u003ccode\u003eIntVector2 anchorOffset_\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWhen anchoring enabled do following:\u003c/p\u003e\n\u003cp\u003eElement size would be \u003ccode\u003eanchorSize_ * parentSize\u003c/code\u003e and clamped to min/max size.\u003c/p\u003e\n\u003cp\u003eElement position would be \u003ccode\u003eanchorPosition_ * parentSize - pivot * elementSize + anchorOffset\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e‚ÄúSize‚Äù and ‚ÄúPosition‚Äù attribute becomes auto-managed, layouting would adjust it based on anchoring parameters. Modifying them should be prevented when anchoring is enabled. At the moment it is actually possible to use ‚ÄúPosition‚Äù attribute as sort of offset when anchoring is enabled, but that probably is not intended and should not be used.\u003c/p\u003e\n\u003cp\u003eMost notable change is loosing ability to specify anchor offset from the bottom-right corner. I have no idea when it would be needed though. We still can use offsets to tweak positioning, moving UIElement to all directions anyway. It is actually an offset, where in current system it seems to affect size as well.\u003c/p\u003e\n\u003cp\u003eHow does this sound? Did i miss anything important?\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2018-11-21T13:56:33.589Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":37,"readers_count":36,"score":12.4,"yours":false,"topic_id":4671,"topic_slug":"normalized-ui-positioning-anchors-vs-normalized-pos-size","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26674,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2018-11-21T15:42:23.061Z","cooked":"\u003cp\u003eI‚Äôm thinking maybe anchors that use pixel coordinates allow for easier aligning of elements and avoid blurring the elements (on 90 degree rotations and flips)? But I have no experience in their use.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-11-21T15:49:56.042Z","reply_count":1,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":34,"readers_count":33,"score":11.8,"yours":false,"topic_id":4671,"topic_slug":"normalized-ui-positioning-anchors-vs-normalized-pos-size","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26683,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-11-23T08:14:59.292Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/modanung\"\u003e@Modanung\u003c/a\u003e point of anchors is to not use pixel coordinates. Position/Size already use pixel coordinates. It is fine, element sizes are still rounded to pixel size so there should be no blur.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-11-23T08:14:59.292Z","reply_count":0,"reply_to_post_number":6,"quote_count":0,"incoming_link_count":0,"reads":35,"readers_count":34,"score":22.0,"yours":false,"topic_id":4671,"topic_slug":"normalized-ui-positioning-anchors-vs-normalized-pos-size","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":26708,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-11-27T14:28:50.348Z","cooked":"\u003cp\u003eI have a preliminary patch implementing my ideas. It does appear to work with \u003ccode\u003eLM_FREE\u003c/code\u003e, but cant say i trust it very much just yet. My understanding is that anchors are not supposed to be honored with other layout modes.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003ediff --git a/Source/Urho3D/UI/UIElement.cpp b/Source/Urho3D/UI/UIElement.cpp\nindex 94e4dbda5..76317e704 100644\n--- a/Source/Urho3D/UI/UIElement.cpp\n+++ b/Source/Urho3D/UI/UIElement.cpp\n@@ -93,8 +93,7 @@ static bool CompareUIElements(const UIElement* lhs, const UIElement* rhs)\n XPathQuery UIElement::styleXPathQuery_(\"/elements/element[@type=$typeName]\", \"typeName:String\");\n \n UIElement::UIElement(Context* context) :\n-    Animatable(context),\n-    pivot_(std::numeric_limits\u0026lt;float\u0026gt;::max(), std::numeric_limits\u0026lt;float\u0026gt;::max())\n+    Animatable(context)\n {\n     SetEnabled(false);\n }\n@@ -122,11 +121,11 @@ void UIElement::RegisterObject(Context* context)\n         horizontalAlignments, HA_LEFT, AM_FILEREADONLY);\n     URHO3D_ENUM_ACCESSOR_ATTRIBUTE(\"Vert Alignment\", GetVerticalAlignment, SetVerticalAlignment, VerticalAlignment, verticalAlignments,\n         VA_TOP, AM_FILEREADONLY);\n-    URHO3D_ACCESSOR_ATTRIBUTE(\"Min Anchor\", GetMinAnchor, SetMinAnchor, Vector2, Vector2::ZERO, AM_FILE);\n-    URHO3D_ACCESSOR_ATTRIBUTE(\"Max Anchor\", GetMaxAnchor, SetMaxAnchor, Vector2, Vector2::ZERO, AM_FILE);\n-    URHO3D_ACCESSOR_ATTRIBUTE(\"Min Offset\", GetMinOffset, SetMinOffset, IntVector2, IntVector2::ZERO, AM_FILE);\n-    URHO3D_ACCESSOR_ATTRIBUTE(\"Max Offset\", GetMaxOffset, SetMaxOffset, IntVector2, IntVector2::ZERO, AM_FILE);\n-    URHO3D_ACCESSOR_ATTRIBUTE(\"Pivot\", GetPivot, SetPivot, Vector2, Vector2(std::numeric_limits\u0026lt;float\u0026gt;::max(), std::numeric_limits\u0026lt;float\u0026gt;::max()), AM_FILE);\n+    URHO3D_ACCESSOR_ATTRIBUTE(\"Anchor Position\", GetAnchorPosition, SetAnchorPosition, Vector2, Vector2::ZERO, AM_FILE);\n+    URHO3D_ACCESSOR_ATTRIBUTE(\"Anchor Size\", GetAnchorSize, SetAnchorSize, Vector2, Vector2::ZERO, AM_FILE);\n+    URHO3D_ACCESSOR_ATTRIBUTE(\"Anchor Position Offset\", GetAnchorPositionOffset, SetAnchorPositionOffset, IntVector2, IntVector2::ZERO, AM_FILE);\n+    URHO3D_ACCESSOR_ATTRIBUTE(\"Anchor Size Offset\", GetAnchorSizeOffset, SetAnchorSizeOffset, IntVector2, IntVector2::ZERO, AM_FILE);\n+    URHO3D_ACCESSOR_ATTRIBUTE(\"Pivot\", GetPivot, SetPivot, Vector2, Vector2(0, 0), AM_FILE);\n     URHO3D_ACCESSOR_ATTRIBUTE(\"Enable Anchor\", GetEnableAnchor, SetEnableAnchor, bool, false, AM_FILE);\n     URHO3D_ACCESSOR_ATTRIBUTE(\"Clip Border\", GetClipBorder, SetClipBorder, IntRect, IntRect::ZERO, AM_FILE);\n     URHO3D_ACCESSOR_ATTRIBUTE(\"Priority\", GetPriority, SetPriority, int, 0, AM_FILE);\n@@ -428,8 +427,8 @@ const IntVector2\u0026amp; UIElement::GetScreenPosition() const\n         {\n             const IntVector2\u0026amp; parentScreenPos = parent-\u0026gt;GetScreenPosition();\n \n-            pos.x_ += parentScreenPos.x_ + (int)Lerp(0.0f, (float)parent-\u0026gt;size_.x_, anchorMin_.x_);\n-            pos.y_ += parentScreenPos.y_ + (int)Lerp(0.0f, (float)parent-\u0026gt;size_.y_, anchorMin_.y_);\n+            pos.x_ += parentScreenPos.x_ + (int)Lerp(0.0f, (float)parent-\u0026gt;size_.x_, anchorPosition_.x_);\n+            pos.y_ += parentScreenPos.y_ + (int)Lerp(0.0f, (float)parent-\u0026gt;size_.y_, anchorPosition_.y_);\n             pos.x_ -= (int)(size_.x_ * pivot_.x_);\n             pos.y_ -= (int)(size_.y_ * pivot_.y_);\n \n@@ -706,24 +705,19 @@ void UIElement::SetHorizontalAlignment(HorizontalAlignment align)\n         align = HA_LEFT;\n     }\n \n-    Vector2 min = anchorMin_;\n-    Vector2 max = anchorMax_;\n+    Vector2 pos = anchorPosition_;\n     float pivot = pivot_.x_;\n-    float anchorSize = max.x_ - min.x_;\n \n     if (align == HA_CENTER)\n-        min.x_ = pivot = 0.5f;\n+        pos.x_ = pivot = 0.5f;\n     else if (align == HA_LEFT)\n-        min.x_ = pivot = 0.0f;\n+        pos.x_ = pivot = 0.0f;\n     else if (align == HA_RIGHT)\n-        min.x_ = pivot = 1.0f;\n+        pos.x_ = pivot = 1.0f;\n \n-    max.x_ = enableAnchor_ ? (min.x_ + anchorSize) : min.x_;\n-\n-    if (min.x_ != anchorMin_.x_ || max.x_ != anchorMax_.x_ || pivot != pivot_.x_)\n+    if (pos.x_ != anchorPosition_.x_ || pivot != pivot_.x_)\n     {\n-        anchorMin_.x_ = min.x_;\n-        anchorMax_.x_ = max.x_;\n+        anchorPosition_.x_ = pos.x_;\n         pivot_.x_ = pivot;\n         if (enableAnchor_)\n             UpdateAnchoring();\n@@ -739,24 +733,19 @@ void UIElement::SetVerticalAlignment(VerticalAlignment align)\n         align = VA_TOP;\n     }\n \n-    Vector2 min = anchorMin_;\n-    Vector2 max = anchorMax_;\n+    Vector2 pos = anchorPosition_;\n     float pivot = pivot_.y_;\n-    float anchorSize = max.y_ - min.y_;\n \n     if (align == VA_CENTER)\n-        min.y_ = pivot = 0.5f;\n+        pos.y_ = pivot = 0.5f;\n     else if (align == VA_TOP)\n-        min.y_ = pivot = 0.0f;\n+        pos.y_ = pivot = 0.0f;\n     else if (align == VA_BOTTOM)\n-        min.y_ = pivot = 1.0f;\n-\n-    max.y_ = enableAnchor_ ? (min.y_ + anchorSize) : min.y_;\n+        pos.y_ = pivot = 1.0f;\n \n-    if (min.y_ != anchorMin_.y_ || max.y_ != anchorMax_.y_ || pivot != pivot_.y_)\n+    if (pos.y_ != anchorPosition_.y_ || pivot != pivot_.y_)\n     {\n-        anchorMin_.y_ = min.y_;\n-        anchorMax_.y_ = max.y_;\n+        anchorPosition_.y_ = pos.y_;\n         pivot_.y_ = pivot;\n         if (enableAnchor_)\n             UpdateAnchoring();\n@@ -771,54 +760,54 @@ void UIElement::SetEnableAnchor(bool enable)\n         UpdateAnchoring();\n }\n \n-void UIElement::SetMinOffset(const IntVector2\u0026amp; offset)\n+void UIElement::SetAnchorPositionOffset(const IntVector2\u0026amp; offset)\n {\n-    if (offset != minOffset_)\n+    if (offset != anchorPosOffset_)\n     {\n-        minOffset_ = offset;\n+        anchorPosOffset_ = offset;\n         if (enableAnchor_)\n             UpdateAnchoring();\n     }\n }\n \n-void UIElement::SetMaxOffset(const IntVector2\u0026amp; offset)\n+void UIElement::SetAnchorSizeOffset(const IntVector2\u0026amp; offset)\n {\n-    if (offset != maxOffset_)\n+    if (offset != anchorSizeOffset_)\n     {\n-        maxOffset_ = offset;\n+        anchorSizeOffset_ = offset;\n         if (enableAnchor_)\n             UpdateAnchoring();\n     }\n }\n \n-void UIElement::SetMinAnchor(const Vector2\u0026amp; anchor)\n+void UIElement::SetAnchorPosition(const Vector2\u0026amp; position)\n {\n-    if (anchor != anchorMin_)\n+    if (position != anchorPosition_)\n     {\n-        anchorMin_ = anchor;\n+        anchorPosition_ = position;\n         if (enableAnchor_)\n             UpdateAnchoring();\n     }\n }\n \n-void UIElement::SetMinAnchor(float x, float y)\n+void UIElement::SetAnchorPosition(float x, float y)\n {\n-    SetMinAnchor(Vector2(x, y));\n+    SetAnchorPosition(Vector2(x, y));\n }\n \n-void UIElement::SetMaxAnchor(const Vector2\u0026amp; anchor)\n+void UIElement::SetAnchorSize(const Vector2\u0026amp; size)\n {\n-    if (anchor != anchorMax_)\n+    if (size != anchorSize_)\n     {\n-        anchorMax_ = anchor;\n+        anchorSize_ = size;\n         if (enableAnchor_)\n             UpdateAnchoring();\n     }\n }\n \n-void UIElement::SetMaxAnchor(float x, float y)\n+void UIElement::SetAnchorSize(float x, float y)\n {\n-    SetMaxAnchor(Vector2(x, y));\n+    SetAnchorSize(Vector2(x, y));\n }\n \n void UIElement::SetPivot(const Vector2\u0026amp; pivot)\n@@ -1519,11 +1508,11 @@ void UIElement::RemoveAllTags()\n \n HorizontalAlignment UIElement::GetHorizontalAlignment() const\n {\n-    if (anchorMin_.x_ == 0.0f \u0026amp;\u0026amp; anchorMax_.x_ == 0.0f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.x_ == 0.0f))\n+    if (anchorPosition_.x_ == 0.0f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.x_ == 0.0f))\n         return HA_LEFT;\n-    else if (anchorMin_.x_ == 0.5f \u0026amp;\u0026amp; anchorMax_.x_ == 0.5f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.x_ == 0.5f))\n+    else if (anchorPosition_.x_ == 0.5f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.x_ == 0.5f))\n         return HA_CENTER;\n-    else if (anchorMin_.x_ == 1.0f \u0026amp;\u0026amp; anchorMax_.x_ == 1.0f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.x_ == 1.0f))\n+    else if (anchorPosition_.x_ == 1.0f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.x_ == 1.0f))\n         return HA_RIGHT;\n \n     return HA_CUSTOM;\n@@ -1531,11 +1520,11 @@ HorizontalAlignment UIElement::GetHorizontalAlignment() const\n \n VerticalAlignment UIElement::GetVerticalAlignment() const\n {\n-    if (anchorMin_.y_ == 0.0f \u0026amp;\u0026amp; anchorMax_.y_ == 0.0f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.y_ == 0.0f))\n+    if (anchorPosition_.y_ == 0.0f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.y_ == 0.0f))\n         return VA_TOP;\n-    else if (anchorMin_.y_ == 0.5f \u0026amp;\u0026amp; anchorMax_.y_ == 0.5f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.y_ == 0.5f))\n+    else if (anchorPosition_.y_ == 0.5f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.y_ == 0.5f))\n         return VA_CENTER;\n-    else if (anchorMin_.y_ == 1.0f \u0026amp;\u0026amp; anchorMax_.y_ == 1.0f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.y_ == 1.0f))\n+    else if (anchorPosition_.y_ == 1.0f \u0026amp;\u0026amp; (!pivotSet_ || pivot_.y_ == 1.0f))\n         return VA_BOTTOM;\n \n     return VA_CUSTOM;\n@@ -2059,12 +2048,16 @@ void UIElement::UpdateAnchoring()\n {\n     if (parent_ \u0026amp;\u0026amp; enableAnchor_)\n     {\n+        IntVector2 newPosition;\n+        newPosition.x_ = (int)(parent_-\u0026gt;size_.x_ * Clamp(anchorPosition_.x_, 0.0f, 1.0f) - size_.x_ * (1.0f - pivot_.x_)) + anchorPosOffset_.x_;\n+        newPosition.y_ = (int)(parent_-\u0026gt;size_.y_ * Clamp(anchorPosition_.y_, 0.0f, 1.0f) - size_.y_ * (1.0f - pivot_.y_)) + anchorPosOffset_.y_;\n+\n         IntVector2 newSize;\n-        newSize.x_ = (int)(parent_-\u0026gt;size_.x_ * Clamp(anchorMax_.x_ - anchorMin_.x_, 0.0f, 1.0f)) + maxOffset_.x_ - minOffset_.x_;\n-        newSize.y_ = (int)(parent_-\u0026gt;size_.y_ * Clamp(anchorMax_.y_ - anchorMin_.y_, 0.0f, 1.0f)) + maxOffset_.y_ - minOffset_.y_;\n+        newSize.x_ = (int)(parent_-\u0026gt;size_.x_ * Clamp(anchorSize_.x_, 0.0f, 1.0f)) + anchorSizeOffset_.x_;\n+        newSize.y_ = (int)(parent_-\u0026gt;size_.y_ * Clamp(anchorSize_.y_, 0.0f, 1.0f)) + anchorSizeOffset_.y_;\n \n-        if (position_ != minOffset_)\n-            SetPosition(minOffset_);\n+        if (position_ != newPosition)\n+            SetPosition(newPosition);\n         if (size_ != newSize)\n             SetSize(newSize);\n     }\ndiff --git a/Source/Urho3D/UI/UIElement.h b/Source/Urho3D/UI/UIElement.h\nindex f004ac330..61b90654a 100644\n--- a/Source/Urho3D/UI/UIElement.h\n+++ b/Source/Urho3D/UI/UIElement.h\n@@ -259,18 +259,18 @@ public:\n     void SetVerticalAlignment(VerticalAlignment align);\n     /// Enable automatic positioning \u0026amp; sizing of the element relative to its parent using min/max anchor and min/max offset. Default false.\n     void SetEnableAnchor(bool enable);\n-    /// Set minimum (top left) anchor in relation to the parent element (from 0 to 1.) No effect when anchor is not enabled.\n-    void SetMinAnchor(const Vector2\u0026amp; anchor);\n-    /// Set minimum anchor.\n-    void SetMinAnchor(float x, float y);\n-    /// Set maximum (bottom right) anchor in relation to the parent element (from 0 to 1.) No effect when anchor is not enabled.\n-    void SetMaxAnchor(const Vector2\u0026amp; anchor);\n-    /// Set maximum anchor.\n-    void SetMaxAnchor(float x, float y);\n-    /// Set offset of element's top left from the minimum anchor in pixels. No effect when anchor is not enabled.\n-    void SetMinOffset(const IntVector2\u0026amp; offset);\n-    /// Set offset of element's bottom right from the maximum anchor in pixels. No effect when anchor is not enabled.\n-    void SetMaxOffset(const IntVector2\u0026amp; offset);\n+    /// Set normalized position relative to element's parent.\n+    void SetAnchorPosition(const Vector2\u0026amp; position);\n+    /// Set normalized position relative to element's parent.\n+    void SetAnchorPosition(float x, float y);\n+    /// Set normalized size relative to element's parent.\n+    void SetAnchorSize(const Vector2\u0026amp; size);\n+    /// Set normalized size relative to element's parent.\n+    void SetAnchorSize(float x, float y);\n+    /// Set position offset in pixels which is added to normalized position. Has no effect when anchoring is disabled.\n+    void SetAnchorPositionOffset(const IntVector2\u0026amp; offset);\n+    /// Set size offset in pixels which is added to normalized size. Has no effect when anchoring is disabled.\n+    void SetAnchorSizeOffset(const IntVector2\u0026amp; offset);\n     /// Set pivot relative to element's size (from 0 to 1, where 0.5 is center.) Overrides horizontal \u0026amp; vertical alignment.\n     void SetPivot(const Vector2\u0026amp; pivot);\n     /// Set pivot relative to element's size (from 0 to 1, where 0.5 is center.) Overrides horizontal \u0026amp; vertical alignment.\n@@ -454,17 +454,17 @@ public:\n     /// Return whether anchor positioning \u0026amp; sizing is enabled.\n     bool GetEnableAnchor() const { return enableAnchor_; }\n \n-    /// Return minimum anchor.\n-    const Vector2\u0026amp; GetMinAnchor() const { return anchorMin_; }\n+    /// Return anchor position.\n+    const Vector2\u0026amp; GetAnchorPosition() const { return anchorPosition_; }\n \n-    /// Return maximum anchor.\n-    const Vector2\u0026amp; GetMaxAnchor() const { return anchorMax_; }\n+    /// Return anchor size.\n+    const Vector2\u0026amp; GetAnchorSize() const { return anchorSize_; }\n \n-    // Return minimum offset.\n-    const IntVector2\u0026amp; GetMinOffset() const { return minOffset_; }\n+    // Return anchor position offset.\n+    const IntVector2\u0026amp; GetAnchorPositionOffset() const { return anchorPosOffset_; }\n \n-    // Return maximum offset.\n-    const IntVector2\u0026amp; GetMaxOffset() const { return maxOffset_; }\n+    // Return anchor size offset.\n+    const IntVector2\u0026amp; GetAnchorSizeOffset() const { return anchorSizeOffset_; }\n \n     /// Return pivot.\n     const Vector2\u0026amp; GetPivot() const { return pivot_; }\n@@ -771,20 +771,20 @@ private:\n     IntVector2 childOffset_;\n     /// Parent's minimum size calculated by layout. Used internally.\n     IntVector2 layoutMinSize_;\n-    /// Minimum offset.\n-    IntVector2 minOffset_;\n-    /// Maximum offset.\n-    IntVector2 maxOffset_;\n-    /// Use min/max anchor \u0026amp; min/max offset for position \u0026amp; size instead of setting explicitly.\n+    /// Anchor position offset.\n+    IntVector2 anchorPosOffset_;\n+    /// Anchor size offset.\n+    IntVector2 anchorSizeOffset_;\n+    /// Use position/size anchor \u0026amp; position/size offset for position \u0026amp; size instead of setting explicitly.\n     bool enableAnchor_{};\n     /// Has pivot changed manually.\n     bool pivotSet_{};\n-    /// Anchor minimum position.\n-    Vector2 anchorMin_;\n-    /// Anchor maximum position.\n-    Vector2 anchorMax_;\n+    /// Anchor position.\n+    Vector2 anchorPosition_;\n+    /// Anchor size.\n+    Vector2 anchorSize_;\n     /// Pivot Position\n-    Vector2 pivot_;\n+    Vector2 pivot_{0.0f, 0.0f};\n     /// Opacity.\n     float opacity_{1.0f};\n     /// Derived opacity.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eP.S. forum wont allow uploading \u003ccode\u003e*.patch\u003c/code\u003e files.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2018-11-27T14:28:50.348Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":32,"readers_count":31,"score":6.4,"yours":false,"topic_id":4671,"topic_slug":"normalized-ui-positioning-anchors-vs-normalized-pos-size","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[26617,26619,26621,26629,26672,26674,26683,26708]},"timeline_lookup":[[1,1471],[2,1470],[4,1469],[5,1463],[7,1461],[8,1457]],"suggested_topics":[{"id":7367,"title":"How to make a full dump of this forum?","fancy_title":"How to make a full dump of this forum?","slug":"how-to-make-a-full-dump-of-this-forum","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-11-22T12:29:46.411Z","last_posted_at":"2022-11-22T17:55:34.126Z","bumped":true,"bumped_at":"2022-11-22T17:55:34.126Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":54,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":983,"username":"tarzeron","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ecae2f/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}}]},{"id":7350,"title":"Animation issue since VS2022 17.4 update","fancy_title":"Animation issue since VS2022 17.4 update","slug":"animation-issue-since-vs2022-17-4-update","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-11-14T19:17:11.829Z","last_posted_at":"2022-11-14T19:17:11.898Z","bumped":true,"bumped_at":"2022-11-14T19:17:11.898Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":44,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":174,"username":"franck22000","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f4b2a3/{size}.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7132,"title":"How to Draw Anti-Aliased Outlined Line on the UI layer?","fancy_title":"How to Draw Anti-Aliased Outlined Line on the UI layer?","slug":"how-to-draw-anti-aliased-outlined-line-on-the-ui-layer","posts_count":8,"reply_count":5,"highest_post_number":8,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/c/c040fdbc2f1856c238ba6328fd7f5ff80b15858f_2_782x1024.jpeg","created_at":"2022-01-17T22:08:06.874Z","last_posted_at":"2022-01-20T20:13:30.614Z","bumped":true,"bumped_at":"2022-01-20T20:13:30.614Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":173,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7120,"title":"Log Error Once Macro","fancy_title":"Log Error Once Macro","slug":"log-error-once-macro","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-01-04T02:24:37.857Z","last_posted_at":"2022-01-04T02:24:37.925Z","bumped":true,"bumped_at":"2022-01-04T02:24:37.925Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":143,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":4671,"title":"Normalized UI positioning: anchors vs normalized pos/size","fancy_title":"Normalized UI positioning: anchors vs normalized pos/size","posts_count":8,"created_at":"2018-11-13T14:30:25.743Z","views":639,"reply_count":2,"like_count":3,"last_posted_at":"2018-11-27T14:28:50.348Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"normalized-ui-positioning-anchors-vs-normalized-pos-size","category_id":7,"word_count":2247,"deleted_at":null,"user_id":246,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4671","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":8,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","post_count":5,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":669,"username":"Sinoid","name":"Jonathan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0}],"created_by":{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png"},"last_poster":{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png"}}}