{"post_stream":{"posts":[{"id":34126,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-10-03T15:47:49.863Z","cooked":"\u003cp\u003eI’m trying to implement the SMAA post-process in Urho3D (D3D11); but it’s not working (at least not fully).\u003cbr\u003e\nThe shader itself is from here\u003cbr\u003e\n\u003ca href=\"https://github.com/iryoku/smaa/blob/master/SMAA.hlsl\" rel=\"nofollow noopener\"\u003ehttps://github.com/iryoku/smaa/blob/master/SMAA.hlsl\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eSo I created a PostProcess xml file:\u003cbr\u003e\n(PostProcess/SMAA.xml)\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026lt;renderpath\u0026gt;\n\t\u0026lt;rendertarget name=\"EdgesTex\" sizedivisor=\"1 1\" format=\"rgba\" filter=\"true\" /\u0026gt;\n\t\u0026lt;rendertarget name=\"BlendTex\" sizedivisor=\"1 1\" format=\"rgba\" filter=\"true\" /\u0026gt;\n\t\u0026lt;command type=\"clear\" color=\"0 0 0 0\" output=\"EdgesTex\" /\u0026gt;\n\t\u0026lt;command type=\"clear\" color=\"0 0 0 0\" output=\"BlendTex\" /\u0026gt;\n\t\u0026lt;command type=\"quad\" vs=\"SMAA\" ps=\"SMAA\" vsdefines=\"_EDGE_DETECTION\" psdefines=\"_EDGE_DETECTION\" output=\"EdgesTex\"\u0026gt;\n\t\t\u0026lt;parameter name=\"SMAAMetricSize\" value=\"1280.0 720.0\" /\u0026gt;\n\t\t\u0026lt;texture unit=\"diffuse\" name=\"viewport\" /\u0026gt;\n\t\u0026lt;/command\u0026gt;\n\t\u0026lt;command type=\"quad\" vs=\"SMAA\" ps=\"SMAA\" vsdefines=\"_BLEND_WEIGHT\" psdefines=\"_BLEND_WEIGHT\" output=\"BlendTex\"\u0026gt;\n\t\t\u0026lt;parameter name=\"SMAAMetricSize\" value=\"1280.0 720.0\" /\u0026gt;\n\t\t\u0026lt;texture unit=\"diffuse\" name=\"EdgesTex\" /\u0026gt;\n\t\t\u0026lt;texture unit=\"normal\" name=\"Textures/SMAA_Area.bmp\" /\u0026gt;\n\t\t\u0026lt;texture unit=\"specular\" name=\"Textures/SMAA_Search.bmp\" /\u0026gt;\n\t\u0026lt;/command\u0026gt;\n\t\u0026lt;command type=\"quad\" vs=\"SMAA\" ps=\"SMAA\" vsdefines=\"_NEIGHBORHOOD_BLEND\" psdefines=\"_NEIGHBORHOOD_BLEND\" output=\"viewport\"\u0026gt;\n\t\t\u0026lt;parameter name=\"SMAAMetricSize\" value=\"1280.0 720.0\" /\u0026gt;\n\t\t\u0026lt;texture unit=\"diffuse\" name=\"viewport\" /\u0026gt;\n\t\t\u0026lt;texture unit=\"normal\" name=\"BlendTex\" /\u0026gt;\n\t\u0026lt;/command\u0026gt;\n\t\u0026lt;command type=\"quad\" vs=\"CopyFramebuffer\" ps=\"CopyFramebuffer\" output=\"viewport\" \u0026gt;\n\t\t\u0026lt;texture unit=\"diffuse\" name=\"BlendTex\" /\u0026gt;\n\t\u0026lt;/command\u0026gt;\n\u0026lt;/renderpath\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThen the shader used by the Post Process:\u003cbr\u003e\n(Shaders/SMAA.hlsl)\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cpre\u003e\u003ccode\u003e#include \"Uniforms.hlsl\"\n#include \"Transform.hlsl\"\n#include \"Samplers.hlsl\"\n#include \"ScreenPos.hlsl\"\n#include \"PostProcess.hlsl\"\n\n\n// ====================================================\n// SMAA DEFINITIONS\n// ====================================================\n#ifdef COMPILEVS\n\ncbuffer CustomVS : register(b6)\n{\n\tfloat2 cSMAAMetricSize;\n}\n\n#endif\n\n#ifdef COMPILEPS\n\ncbuffer CustomPS : register(b6)\n{\n\tfloat2 cSMAAMetricSize;\n}\n\n#endif\n\n\n#define SMAA_RT_METRICS float4(1.0 / cSMAAMetricSize.x, 1.0 / cSMAAMetricSize.y, cSMAAMetricSize.x, cSMAAMetricSize.y)\n#define SMAA_HLSL_4 1\n#define SMAA_PRESET_HIGH\n\n// iryoku's SMAA implementation\n#include \"SMAA.inc.hlsl\"\n\n\n// ====================================================\n// VERTEX SHADER\n// ====================================================\nvoid VS(float4 iPos : POSITION,\n\tout float2 oScreenPos : TEXCOORD0,\n#if _EDGE_DETECTION\n\tout float4 oOffset[3] : TEXCOORD1,\n#endif\n#if _BLEND_WEIGHT\n\tout float2 oPixCoord : TEXCOORD1,\n\tout float4 oOffset[3] : TEXCOORD2,\n#endif\n#if _NEIGHBORHOOD_BLEND\n\tout float4 oOffset : TEXCOORD1,\n#endif\n\tout float4 oPos : OUTPOSITION)\n{\n\tfloat4x3 modelMatrix = iModelMatrix;\n\tfloat3 worldPos = GetWorldPos(modelMatrix);\n\toPos = GetClipPos(worldPos);\n\toScreenPos = GetScreenPosPreDiv(oPos);\n\n#if _EDGE_DETECTION\n\tSMAAEdgeDetectionVS(oScreenPos, oOffset);\n#endif\n\n#if _BLEND_WEIGHT\n\tSMAABlendingWeightCalculationVS(oScreenPos, oPixCoord, oOffset);\n#endif\n\n#if _NEIGHBORHOOD_BLEND\n\tSMAANeighborhoodBlendingVS(oScreenPos, oOffset);\n#endif\n}\n\n\n// ====================================================\n// PIXEL SHADER\n// ====================================================\nvoid PS(float4 iPos : SV_POSITION,\n\tfloat2 iScreenPos : TEXCOORD0,\n#if _EDGE_DETECTION\n\tfloat4 iOffset[3] : TEXCOORD1,\n#endif\n#if _BLEND_WEIGHT\n\tfloat2 iPixCoord : TEXCOORD1,\n\tfloat4 iOffset[3] : TEXCOORD2,\n#endif\n#if _NEIGHBORHOOD_BLEND\n\tfloat4 iOffset : TEXCOORD1,\n#endif\n\tout float4 oColor : OUTCOLOR0)\n{\n#if _EDGE_DETECTION\n\tfloat2 luma;\n\n\t// Generate the SMAA edgesTex\n\t//\n\t// tDiffMap = viewport\n\n\tluma = SMAALumaEdgeDetectionPS(iScreenPos, iOffset, tDiffMap);\n\n\toColor = float4(luma, float2(0.0, 0.0));\n#endif\n\n#if _BLEND_WEIGHT\n\t// Generate SMAA blendTex\n\t//\n\t// tDiffMap = edgesTex\n\t// tNormapMap = area texture\n\t// tSpecMap = search texture\n\n\toColor = SMAABlendingWeightCalculationPS(iScreenPos, iPixCoord, iOffset, tDiffMap, tNormalMap, tSpecMap, 0);\n#endif\n\n#if _NEIGHBORHOOD_BLEND\n\t// Generate final result\n\t//\n\t// tDiffMap = viewport\n\t// tEmissiveMap = BlendTex\n\n\toColor = SMAANeighborhoodBlendingPS(iScreenPos, iOffset, tDiffMap, tEmissiveMap);\n#endif\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThe edge detection is working:\u003cbr\u003e\n\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f2444e2207008ac8609fe5744bd5af31387a71ab.png\" data-download-href=\"/uploads/short-url/yzbTfj6FbeyHEhp3hv7NAL0Lrl1.png?dl=1\" title=\"edges_tex.png\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f2444e2207008ac8609fe5744bd5af31387a71ab.png\" alt=\"edges_tex\" data-base62-sha1=\"yzbTfj6FbeyHEhp3hv7NAL0Lrl1\" width=\"666\" height=\"500\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/f2444e2207008ac8609fe5744bd5af31387a71ab_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003eedges_tex.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e800×600 3.29 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003ebut the blending weight calculation and final blending is not.\u003cbr\u003e\nI’m not experienced with shaders so any help is greatly appreciated.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2019-10-04T21:50:30.602Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":179,"reads":54,"readers_count":53,"score":900.8,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/iryoku/smaa/blob/master/SMAA.hlsl","internal":false,"reflection":false,"title":"smaa/SMAA.hlsl at master · iryoku/smaa · GitHub","clicks":16},{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f2444e2207008ac8609fe5744bd5af31387a71ab.png","internal":false,"reflection":false,"title":"f2444e2207008ac8609fe5744bd5af31387a71ab.png","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34136,"name":null,"username":"PsychoCircuitry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png","created_at":"2019-10-03T20:29:32.656Z","cooked":"\u003cp\u003eSo just at a glance, i noticed that your AreaTex and SearchTex are being loaded as xml files. They will not load properly this way, no errors are generated either. But if you change those to your actual textures .dds or .png or whatever, that might fix your issue. I believe the accompanying xml file for the texture will be parsed when loading the texture thru the renderpath this way as well, hope this helps.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2019-10-03T20:29:32.656Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":47,"readers_count":46,"score":29.4,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":null,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1228,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34138,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-10-04T01:50:53.340Z","cooked":"\u003cp\u003eSpecifying the texture with it’s image extension helped (The weight blend pass outputs something), but still not working.\u003c/p\u003e\n\u003cp\u003eI’ve run this image in the SMAA demo application and the result is a properly anti-aliased image.\u003cbr\u003e\n\u003ca href=\"https://imgsli.com/NzI3Ng\" rel=\"nofollow noopener\"\u003ehttps://imgsli.com/NzI3Ng\u003c/a\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2019-10-04T01:50:53.340Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":42,"readers_count":41,"score":28.4,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://imgsli.com/NzI3Ng","internal":false,"reflection":false,"title":"SMAA Shader Output - Imgsli","clicks":24}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34150,"name":null,"username":"PsychoCircuitry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png","created_at":"2019-10-04T14:07:32.455Z","cooked":"\u003cp\u003eOk, I read through the shader. It relies on bilinear filtering for the weight calculation, so change the filter mode of your two render targets to true. That should get you closer to what you expect. Hope that helps.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2019-10-04T14:22:41.068Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":38,"readers_count":37,"score":7.6,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":null,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1228,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34156,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-10-04T21:56:23.830Z","cooked":"\u003cp\u003eEven after changing the filter mode of the render targets, the result of weight calculation is wrong;\u003cbr\u003e\nI tried using .dds, .bmp and .png textures, to no avail.\u003c/p\u003e\n\u003cp\u003eI’ve edited the first post to reflect the current PostProcess/Shader code I’m using.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2019-10-04T21:56:23.830Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":38,"readers_count":37,"score":7.6,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34157,"name":null,"username":"PsychoCircuitry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png","created_at":"2019-10-04T22:13:56.821Z","cooked":"\u003cp\u003eCan you post another comparison? I did a really quick implementation like yours this morning and the results looked ok on one of the examples. I didn’t compare with the smaa demo tho. Also I was on directx9 as that’s what I have compiled currently.\u003c/p\u003e\n\u003cp\u003eEdit: Also, what do your xml files look like for the area and search textures?\u003cbr\u003e\nThis is what I used for both\u003cbr\u003e\n\u003ccode\u003e\u0026lt;texture\u0026gt;\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003e\u0026lt;address coord=\"u\" mode=\"clamp\" /\u0026gt;\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003e\u0026lt;address coord=\"v\" mode=\"clamp\" /\u0026gt;\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003e\u0026lt;address coord=\"w\" mode=\"clamp\" /\u0026gt;\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003e\u0026lt;mipmap enable=\"false\" /\u0026gt;\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003e\u0026lt;quality low=\"0\" /\u0026gt;\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003e\u0026lt;/texture\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eEdit again: also make sure you’re using the right channels for the area texture. I converted the dx10 images to pngs and had to manually define use of the rg channels as the dx9(sm3) version defaults to ra channels, but if I remember correctly the sm4+ defaults to rg channels anyway, just a thought tho if you were maybe instead using the dx9 texture\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2019-10-04T22:54:52.768Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":39,"readers_count":38,"score":17.8,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":null,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1228,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34158,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-10-05T03:59:52.403Z","cooked":"\u003cp\u003eThe texture xmls are exactly like that (I also tried adding a filter=“nearest”). Setting the render targets as sRGB made no difference.\u003c/p\u003e\n\u003cp\u003eThese are the results from the DX10 demo:\u003cbr\u003e\n\u003ca href=\"https://imgur.com/a/IvqMo7y\" rel=\"nofollow noopener\"\u003ehttps://imgur.com/a/IvqMo7y\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThese are the results I’m getting:\u003cbr\u003e\n\u003ca href=\"https://imgur.com/a/FYfsFHc\" rel=\"nofollow noopener\"\u003ehttps://imgur.com/a/FYfsFHc\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThere’s a huge difference between them, although the settings are the same: SMAA_PRESET_ULTRA with LUMA edge detection.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2019-10-05T03:59:52.403Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":8,"reads":38,"readers_count":37,"score":47.6,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://imgur.com/a/IvqMo7y","internal":false,"reflection":false,"title":"Imgur: The magic of the Internet","clicks":5},{"url":"https://imgur.com/a/FYfsFHc","internal":false,"reflection":false,"title":"Imgur: The magic of the Internet","clicks":5}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34159,"name":null,"username":"PsychoCircuitry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png","created_at":"2019-10-05T09:07:59.111Z","cooked":"\u003cp\u003eWhat does the result of your AA look like? Is it missing edges?\u003c/p\u003e\n\u003cp\u003eHere’s what it looks like on my setup\u003c/p\u003e\n\u003cp\u003eSMAA\u003cbr\u003e\n\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5e07255f1520d2054611147b2a71db2983d8a1f1.jpeg\" data-download-href=\"/uploads/short-url/dpObVEExr2btMxNxGnJe240vhYt.jpeg?dl=1\" title=\"aa.jpg\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/5e07255f1520d2054611147b2a71db2983d8a1f1_2_580x500.jpeg\" alt=\"aa\" data-base62-sha1=\"dpObVEExr2btMxNxGnJe240vhYt\" width=\"580\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/5e07255f1520d2054611147b2a71db2983d8a1f1_2_580x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5e07255f1520d2054611147b2a71db2983d8a1f1.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5e07255f1520d2054611147b2a71db2983d8a1f1.jpeg 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/5e07255f1520d2054611147b2a71db2983d8a1f1_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003eaa.jpg\u003c/span\u003e\u003cspan class=\"informations\"\u003e832×717 378 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eNo AA\u003cbr\u003e\n\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/0/03ec403f0884b450ba8981bb9a55f47d0972b454.jpeg\" data-download-href=\"/uploads/short-url/yHB3NziFGoF6nP20zqUt1sS5gM.jpeg?dl=1\" title=\"noaa.jpg\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/0/03ec403f0884b450ba8981bb9a55f47d0972b454_2_580x500.jpeg\" alt=\"noaa\" data-base62-sha1=\"yHB3NziFGoF6nP20zqUt1sS5gM\" width=\"580\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/0/03ec403f0884b450ba8981bb9a55f47d0972b454_2_580x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/0/03ec403f0884b450ba8981bb9a55f47d0972b454.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/0/03ec403f0884b450ba8981bb9a55f47d0972b454.jpeg 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/0/03ec403f0884b450ba8981bb9a55f47d0972b454_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003enoaa.jpg\u003c/span\u003e\u003cspan class=\"informations\"\u003e832×717 387 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eEdit: Alright, so I compiled the dx10 demo to test my results. And it seems identical to me. Note the output from urho is in linear space, while the rendered images from the demo are sRGB. Here’s the comparisons:\u003c/p\u003e\n\u003cp\u003eUrho Edge Detect:\u003cbr\u003e\n\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f4901271a050b7120c4bd030fe1840bbd79904a3.jpeg\" data-download-href=\"/uploads/short-url/yTvaTueip8rUIttsAEiYGD604aD.jpeg?dl=1\" title=\"edge.jpg\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/f4901271a050b7120c4bd030fe1840bbd79904a3_2_580x500.jpeg\" alt=\"edge\" data-base62-sha1=\"yTvaTueip8rUIttsAEiYGD604aD\" width=\"580\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/f4901271a050b7120c4bd030fe1840bbd79904a3_2_580x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f4901271a050b7120c4bd030fe1840bbd79904a3.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f4901271a050b7120c4bd030fe1840bbd79904a3.jpeg 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/f4901271a050b7120c4bd030fe1840bbd79904a3_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003eedge.jpg\u003c/span\u003e\u003cspan class=\"informations\"\u003e832×717 383 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eDemo Edge Detect:\u003cbr\u003e\n\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b063d13ae9a0cacac14de586fa9e0c2b2fc52920.jpeg\" data-download-href=\"/uploads/short-url/papTklj3QJncamFHpTF6lMtPea4.jpeg?dl=1\" title=\"dx10demoedges.jpg\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/b063d13ae9a0cacac14de586fa9e0c2b2fc52920_2_580x500.jpeg\" alt=\"dx10demoedges\" data-base62-sha1=\"papTklj3QJncamFHpTF6lMtPea4\" width=\"580\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/b063d13ae9a0cacac14de586fa9e0c2b2fc52920_2_580x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b063d13ae9a0cacac14de586fa9e0c2b2fc52920.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b063d13ae9a0cacac14de586fa9e0c2b2fc52920.jpeg 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/b063d13ae9a0cacac14de586fa9e0c2b2fc52920_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003edx10demoedges.jpg\u003c/span\u003e\u003cspan class=\"informations\"\u003e832×717 415 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eUrho Weights (Gamma corrected):\u003cbr\u003e\n\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/1/1089d3943c8af943eaaf4725366a0afab2663b77.jpeg\" data-download-href=\"/uploads/short-url/2miVKiJdhYDZVUZEWuqve1JebgH.jpeg?dl=1\" title=\"weightGammacorrected.jpg\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/1/1089d3943c8af943eaaf4725366a0afab2663b77_2_580x500.jpeg\" alt=\"weightGammacorrected\" data-base62-sha1=\"2miVKiJdhYDZVUZEWuqve1JebgH\" width=\"580\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/1/1089d3943c8af943eaaf4725366a0afab2663b77_2_580x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/1/1089d3943c8af943eaaf4725366a0afab2663b77.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/1/1089d3943c8af943eaaf4725366a0afab2663b77.jpeg 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/1/1089d3943c8af943eaaf4725366a0afab2663b77_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003eweightGammacorrected.jpg\u003c/span\u003e\u003cspan class=\"informations\"\u003e832×717 200 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eDemo Weights:\u003cbr\u003e\n\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/2/26be0f8b858bce775e03f3718f786bc5dfa62b6f.jpeg\" data-download-href=\"/uploads/short-url/5wJlwf1VGtNizoxPd3LhnWcGMGj.jpeg?dl=1\" title=\"dx10weight.jpg\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/2/26be0f8b858bce775e03f3718f786bc5dfa62b6f_2_580x500.jpeg\" alt=\"dx10weight\" data-base62-sha1=\"5wJlwf1VGtNizoxPd3LhnWcGMGj\" width=\"580\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/2/26be0f8b858bce775e03f3718f786bc5dfa62b6f_2_580x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/2/26be0f8b858bce775e03f3718f786bc5dfa62b6f.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/2/26be0f8b858bce775e03f3718f786bc5dfa62b6f.jpeg 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/2/26be0f8b858bce775e03f3718f786bc5dfa62b6f_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003edx10weight.jpg\u003c/span\u003e\u003cspan class=\"informations\"\u003e832×717 223 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2019-10-05T09:52:52.389Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":35,"readers_count":34,"score":12.0,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":null,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f4901271a050b7120c4bd030fe1840bbd79904a3.jpeg","internal":false,"reflection":false,"title":"f4901271a050b7120c4bd030fe1840bbd79904a3.jpeg","clicks":0},{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b063d13ae9a0cacac14de586fa9e0c2b2fc52920.jpeg","internal":false,"reflection":false,"title":"b063d13ae9a0cacac14de586fa9e0c2b2fc52920.jpeg","clicks":0},{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/2/26be0f8b858bce775e03f3718f786bc5dfa62b6f.jpeg","internal":false,"reflection":false,"title":"26be0f8b858bce775e03f3718f786bc5dfa62b6f.jpeg","clicks":0},{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5e07255f1520d2054611147b2a71db2983d8a1f1.jpeg","internal":false,"reflection":false,"title":"5e07255f1520d2054611147b2a71db2983d8a1f1.jpeg","clicks":0},{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/0/03ec403f0884b450ba8981bb9a55f47d0972b454.jpeg","internal":false,"reflection":false,"title":"03ec403f0884b450ba8981bb9a55f47d0972b454.jpeg","clicks":0},{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/1/1089d3943c8af943eaaf4725366a0afab2663b77.jpeg","internal":false,"reflection":false,"title":"1089d3943c8af943eaaf4725366a0afab2663b77.jpeg","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1228,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34160,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-10-05T13:24:19.428Z","cooked":"\u003cp\u003eYeah it’s missing edges; it’s like I’m not using any kind of AA.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2019-10-05T13:24:19.428Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":6.0,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34161,"name":null,"username":"PsychoCircuitry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png","created_at":"2019-10-05T15:26:15.980Z","cooked":"\u003cp\u003eStrange, I guess I will build urho with dx11 then and see if I can pinpoint the issue. Guess I should have asked earlier but are you getting any errors on the shader compilation?\u003c/p\u003e\n\u003cp\u003eEdit: alright, I compiled a dx11 version and I can confirm that something is indeed off with that. The exact same setup I had working under dx9, looks very strange indeed. I’ll look into it more and see what’s going on.\u003c/p\u003e\n\u003cp\u003eEdit again: so I spent part of the afternoon rewriting the shader with some of urho’s legacy defined functions for directx11 to try and match the way the sm3 implementation behaves, but this was unsuccessful. The results exhibited the same issues as running the actual shader. The edge detection has a lot more overlapping red and green segments, and doesn’t detect some edges that the dx9 finds. So I’m not entirely sure what the issue is at this point. I’m not that familiar with dx11, most of my experience is with glsl and I just recently started experimenting with directx9. But it seems to me that urho isn’t handling the texture.SampleLevel command the same way it handles tex2Dlod on dx9\u003c/p\u003e\n\u003cp\u003eUpdate 10/06/19\u003cbr\u003e\nSo I’ve done some testing with texture.Sample and texture.SampleLevel and those seem to be behaving correctly. So I guess that’s not the culprit. I tried rewriting the shaders sampling macros to add an argument for SamplerState, bypassing the defined point and linear SamplerState. I was hoping that giving it the SamplerState for the texture being used would get closer to the DirectX9 results, but this was not the case. I’m really baffled because the sm3 version works right out of the box on dx9, and it appears that there’s really not much difference between the sm3 and sm4 implementations other than updating the functions, but they are just api differences, the way it works should be exactly the same. I also tried adjusting the offsets in the vertex shader, but this didn’t help the edge detection either.\u003c/p\u003e\n\u003cp\u003e10/06 part 2: I adapted the shader to use the opengl 3 implementation in an opengl build of urho. This works as expected. So either I’m not understanding something correctly in the dx11 side, or this is a bug of some kind with the dx11 renderer. So I guess to use this shader, you’ll need to use either dx9 or opengl3, I can provide you with the shaders I adapted from your original post with either implementation if you’d like. Sorry I couldn’t get it to work in dx11.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2019-10-06T14:30:14.071Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":5.8,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":null,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":5,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1228,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34163,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-10-06T14:54:20.795Z","cooked":"\u003cp\u003eNo need to apologize, graphics is complicated. Thanks anyways.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2019-10-06T14:54:20.795Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":25,"readers_count":24,"score":5.0,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34166,"name":null,"username":"PsychoCircuitry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png","created_at":"2019-10-06T19:00:57.811Z","cooked":"\u003cp\u003eI’m still gonna see if I can get to the root of the issue. No guarantees, but I’ll spend some time working on it.\u003c/p\u003e\n\u003cp\u003eEdit: started breaking it down step by step, starting with the edge detection. The first thing I’ve come across is that performing the dot product on 2 vectors yields different results between dx9 and dx11. I’ve simplified it to just reading the viewport texture and performing a dot product on the rgb channels at the screen position and a vector (0.5, 0.5, 0.5). The result is not a huge difference but noticeable, and the full edge detection algorithm has 7 dot product calculations I think, and I think all those inconsistencies stacking up results in an image that’s quite a bit different than what’s intended. And thats just the edge algorithm! Lol. The opengl version is identical to the dx9 version, so something is off with dx11. I updated the graphics drivers just to see, but that didn’t improve anything.\u003c/p\u003e\n\u003cp\u003eUpdate 10/07/19: getting closer to understanding the issue. Dot product is working correctly, the reason for the discrepancies is due to the sampling position. If I flip all the offsets and reduce the first offset to a quarter pixel the results are much closer to the dx9/opengl results. Not quite right yet, but much, much closer. Not sure why all the offsets need to be flipped, but I’m assuming part of the issue is with the sampler state again. I’ll keep digging into it and see what I come up with.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2019-10-07T13:10:51.443Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":25,"readers_count":24,"score":5.0,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":null,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1228,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34178,"name":null,"username":"PsychoCircuitry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png","created_at":"2019-10-07T13:58:34.941Z","cooked":"\u003cp\u003eMy last couple posts were getting lengthy. So I hope it’s ok that I’m making a new post.\u003c/p\u003e\n\u003cp\u003eI moved the offset calculation to the pixel shader and that fixed it! The coordinates still need flipped tho. I’ll start debugging the weight blend next. If you’re still interested in this, I’ll post an updated shader when I’m done.\u003c/p\u003e\n\u003cp\u003eEdit: scratch what I said about flipping the cords. The provided coords work correctly when the calculation is done in the pixel shader. Running into a few problems still, but I think I will be able to get it working at some point. Tho I do believe there is some kind of bug with dx11 renderer that is the root of the problem. Still looking into it.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2019-10-07T16:09:59.874Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":64.8,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":null,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":1228,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34184,"name":null,"username":"PsychoCircuitry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png","created_at":"2019-10-07T16:36:15.727Z","cooked":"\u003cp\u003eAlright after all this craziness, turns out it was something very simple lol. Again, I’m not that familiar with dx11 so that could be why it wasn’t obvious. But as I was running into issues with rendering during my tests of the adapted shader, there was a line from the original shader that started preventing me from rendering the scene. Anyway in the start of your pixel shader setup remove the line:\u003cbr\u003e\n\u003ccode\u003efloat4 iPos : SV_POSITION\u003c/code\u003e\u003cbr\u003e\nThen it works properly.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2019-10-07T17:25:46.079Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":24,"readers_count":23,"score":44.8,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":null,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":1228,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":34188,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-10-07T17:27:57.700Z","cooked":"\u003cp\u003eThat was it, it’s working now!\u003cbr\u003e\nThank you very much!\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2019-10-07T17:27:57.700Z","reply_count":0,"reply_to_post_number":14,"quote_count":0,"incoming_link_count":0,"reads":23,"readers_count":22,"score":4.6,"yours":false,"topic_id":5646,"topic_slug":"smaa-implementation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"PsychoCircuitry","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[34126,34136,34138,34150,34156,34157,34158,34159,34160,34161,34163,34166,34178,34184,34188]},"timeline_lookup":[[1,1147],[2,1146],[5,1145],[11,1144],[12,1143],[15,1142]],"suggested_topics":[{"id":7092,"title":"Finding the World Space Coordinates of the Screen Edges","fancy_title":"Finding the World Space Coordinates of the Screen Edges","slug":"finding-the-world-space-coordinates-of-the-screen-edges","posts_count":6,"reply_count":2,"highest_post_number":6,"image_url":null,"created_at":"2021-12-07T20:53:49.453Z","last_posted_at":"2021-12-08T12:33:52.510Z","bumped":true,"bumped_at":"2021-12-08T12:33:52.510Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":210,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7129,"title":"Best Model Import Pipeline as of Jan 2022?","fancy_title":"Best Model Import Pipeline as of Jan 2022?","slug":"best-model-import-pipeline-as-of-jan-2022","posts_count":7,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2022-01-17T09:27:23.432Z","last_posted_at":"2022-01-17T20:37:59.458Z","bumped":true,"bumped_at":"2022-01-17T20:37:59.458Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":170,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"}}]},{"id":7074,"title":"First Person and 3rd person camera and water reflections","fancy_title":"First Person and 3rd person camera and water reflections","slug":"first-person-and-3rd-person-camera-and-water-reflections","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-01T18:37:28.669Z","last_posted_at":"2021-12-01T21:19:51.519Z","bumped":true,"bumped_at":"2021-12-01T21:19:51.519Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":158,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]}],"tags_descriptions":{},"id":5646,"title":"SMAA Implementation","fancy_title":"SMAA Implementation","posts_count":15,"created_at":"2019-10-03T15:47:49.791Z","views":859,"reply_count":1,"like_count":4,"last_posted_at":"2019-10-07T17:27:57.700Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"smaa-implementation","category_id":10,"word_count":2000,"deleted_at":null,"user_id":1179,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f2444e2207008ac8609fe5744bd5af31387a71ab.png","slow_mode_seconds":0,"draft":null,"draft_key":"topic_5646","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":15,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":[{"max_width":null,"max_height":null,"width":800,"height":600,"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f2444e2207008ac8609fe5744bd5af31387a71ab.png"}],"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":14,"username":"PsychoCircuitry","excerpt":"Alright after all this craziness, turns out it was something very simple lol. Again, I’m not that familiar with dx11 so that could be why it wasn’t obvious. But as I was running into issues with rendering during my tests of the adapted shader, there was a line from the original shader that started p\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1228,"username":"PsychoCircuitry","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png","post_count":8,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":1179,"username":"Athos","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","post_count":7,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":1179,"username":"Athos","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png"},"last_poster":{"id":1179,"username":"Athos","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png"},"links":[{"url":"https://imgsli.com/NzI3Ng","title":"SMAA Shader Output - Imgsli","internal":false,"attachment":false,"reflection":false,"clicks":24,"user_id":1179,"domain":"imgsli.com","root_domain":"imgsli.com"},{"url":"https://github.com/iryoku/smaa/blob/master/SMAA.hlsl","title":"smaa/SMAA.hlsl at master · iryoku/smaa · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":16,"user_id":1179,"domain":"github.com","root_domain":"github.com"},{"url":"https://imgur.com/a/FYfsFHc","title":"Imgur: The magic of the Internet","internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":1179,"domain":"imgur.com","root_domain":"imgur.com"},{"url":"https://imgur.com/a/IvqMo7y","title":"Imgur: The magic of the Internet","internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":1179,"domain":"imgur.com","root_domain":"imgur.com"}]}}