{"post_stream":{"posts":[{"id":25368,"name":"David Murphy","username":"davemurphy","avatar_template":"/user_avatar/discourse.urho3d.io/davemurphy/{size}/1004_2.png","created_at":"2018-07-20T14:39:01.772Z","cooked":"\u003cp\u003eI’m trying to use raycast on models I’ve imported from the Blender mdl exporter. I’ve been having trouble with the Avocado model from the glTF 2.0 sample repository. The model is relatively small and I need to set it’s scale to 30 to make it the size I want. The problem is when I RaycastSingle with RAY_TRIANGLE it won’t hit the back of the avocado model, just the front part and the pit. When the model is scaled to 1 raycasts work fine.\u003c/p\u003e\n\u003cp\u003eHas anyone else had an issue with raycasts not working on their own models when scaled? And Is this a problem with the model or are there limitations to the triangle raycast algorithm that I don’t know about?\u003c/p\u003e\n\u003cp\u003eHere is the source model, you’ll also need a Blender glTF importer.\u003cbr\u003e\n\u003caside class=\"onebox whitelistedgeneric\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003cimg src=\"https://github.githubassets.com/favicon.ico\" class=\"site-icon\" width=\"32\" height=\"32\"\u003e\n      \u003ca href=\"https://github.com/KhronosGroup/glTF-Sample-Models/tree/master/2.0/Avocado\" target=\"_blank\" rel=\"nofollow noopener\"\u003eGitHub\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/3/35e7e1d2e1d013dec3070c656ae521b75f381900.png\" class=\"thumbnail onebox-avatar\" width=\"400\" height=\"400\"\u003e\n\n\u003ch3\u003e\u003ca href=\"https://github.com/KhronosGroup/glTF-Sample-Models/tree/master/2.0/Avocado\" target=\"_blank\" rel=\"nofollow noopener\"\u003eKhronosGroup/glTF-Sample-Models\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003eglTF Sample Models. Contribute to KhronosGroup/glTF-Sample-Models development by creating an account on GitHub.\u003c/p\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\u003cbr\u003e\n\u003caside class=\"onebox whitelistedgeneric\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003cimg src=\"https://github.githubassets.com/favicon.ico\" class=\"site-icon\" width=\"32\" height=\"32\"\u003e\n      \u003ca href=\"https://github.com/ksons/gltf-blender-importer\" target=\"_blank\" rel=\"nofollow noopener\"\u003eGitHub\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/e/e95cb64761590bf2d0aeec39231c70f50244e004.png\" class=\"thumbnail onebox-avatar\" width=\"400\" height=\"400\"\u003e\n\n\u003ch3\u003e\u003ca href=\"https://github.com/ksons/gltf-blender-importer\" target=\"_blank\" rel=\"nofollow noopener\"\u003eksons/gltf-blender-importer\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003eBlender glTF 2.0 Importer. Contribute to ksons/gltf-blender-importer development by creating an account on GitHub.\u003c/p\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-07-20T14:39:01.772Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":7,"reads":41,"readers_count":40,"score":45.2,"yours":false,"topic_id":4399,"topic_slug":"raycastsingle-failing-on-scaled-up-model","display_username":"David Murphy","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/KhronosGroup/glTF-Sample-Models/tree/master/2.0/Avocado","internal":false,"reflection":false,"title":"glTF-Sample-Models/2.0/Avocado at master · KhronosGroup/glTF-Sample-Models · GitHub","clicks":6},{"url":"https://github.com/ksons/gltf-blender-importer","internal":false,"reflection":false,"title":"GitHub - ksons/gltf-blender-importer: Blender glTF 2.0 Importer","clicks":2}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":790,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25377,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-07-23T21:35:26.674Z","cooked":"\u003cp\u003eIf you add \u003ccode\u003eret.direction_.Normalize();\u003c/code\u003e just before \u003ccode\u003ereturn ret;\u003c/code\u003e in function \u003ccode\u003eRay::Transformed\u003c/code\u003e in \u003ccode\u003eRay.cpp\u003c/code\u003e, would it fix your problem?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-07-24T14:32:07.760Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":34,"readers_count":33,"score":26.8,"yours":false,"topic_id":4399,"topic_slug":"raycastsingle-failing-on-scaled-up-model","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25387,"name":"David Murphy","username":"davemurphy","avatar_template":"/user_avatar/discourse.urho3d.io/davemurphy/{size}/1004_2.png","created_at":"2018-07-24T14:31:21.270Z","cooked":"\u003cp\u003eThanks!\u003c/p\u003e\n\u003cp\u003eNormalizing the ray direction does fix the problem of the ray not hitting the mesh. However, it changes the position returned by the raycast to be in model space. In my case, I’m using uniform scaling, so the hit distance can be scaled by any component of the model’s world scale.\u003c/p\u003e\n\u003cp\u003eAccording to the comment by Nathan Reed on \u003ca href=\"https://gamedev.stackexchange.com/questions/72440/the-correct-way-to-transform-a-ray-with-a-matrix\" rel=\"nofollow noopener\"\u003ethis StackOverflow answer\u003c/a\u003e, if you used non-uniform scales, the point returned by the raycast should be transformed back to world space.\u003c/p\u003e\n\u003cp\u003eDMGregory in comment to Nathan’s answer also states that you can store the scale factor used to normalize the direction vector (invLen in Vector3::Normalize). Although I’m not sure the best way to propagate invLen up to StaticModel::ProcessRayQuery.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-07-24T14:32:15.372Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":31,"readers_count":30,"score":6.2,"yours":false,"topic_id":4399,"topic_slug":"raycastsingle-failing-on-scaled-up-model","display_username":"David Murphy","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://gamedev.stackexchange.com/questions/72440/the-correct-way-to-transform-a-ray-with-a-matrix","internal":false,"reflection":false,"title":"mathematics - The correct way to transform a ray with a matrix? - Game Development Stack Exchange","clicks":5}],"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":790,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[25368,25377,25387]},"timeline_lookup":[[1,1587],[2,1583]],"suggested_topics":[{"id":7266,"title":"Compile Urho3D 1.8 failed with the default MinGW of Clion2022.1","fancy_title":"Compile Urho3D 1.8 failed with the default MinGW of Clion2022.1","slug":"compile-urho3d-1-8-failed-with-the-default-mingw-of-clion2022-1","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/fcbe1a1f0cd74c5cc158c8c790c6c472f3b96011_2_1024x359.png","created_at":"2022-05-14T06:22:45.469Z","last_posted_at":"2022-05-16T06:45:54.546Z","bumped":true,"bumped_at":"2022-05-16T06:45:54.546Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":124,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":745,"username":"ChunFengTsin","name":"Chun Feng Tsin","avatar_template":"/user_avatar/discourse.urho3d.io/chunfengtsin/{size}/450_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7200,"title":"Urho3D just building if I check \"use SHARED libraries\"","fancy_title":"Urho3D just building if I check \u0026ldquo;use SHARED libraries\u0026rdquo;","slug":"urho3d-just-building-if-i-check-use-shared-libraries","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-02-22T20:02:48.835Z","last_posted_at":"2022-02-23T15:38:33.698Z","bumped":true,"bumped_at":"2022-02-23T15:54:07.879Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":165,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7204,"title":"How handle with multiple scenes?","fancy_title":"How handle with multiple scenes?","slug":"how-handle-with-multiple-scenes","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-02-23T16:15:02.697Z","last_posted_at":"2022-02-23T16:15:02.762Z","bumped":true,"bumped_at":"2022-02-23T16:15:02.762Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":131,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}}]},{"id":7092,"title":"Finding the World Space Coordinates of the Screen Edges","fancy_title":"Finding the World Space Coordinates of the Screen Edges","slug":"finding-the-world-space-coordinates-of-the-screen-edges","posts_count":6,"reply_count":2,"highest_post_number":6,"image_url":null,"created_at":"2021-12-07T20:53:49.453Z","last_posted_at":"2021-12-08T12:33:52.510Z","bumped":true,"bumped_at":"2021-12-08T12:33:52.510Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":210,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7284,"title":"[Solved] Moving a Navigation Mesh","fancy_title":"[Solved] Moving a Navigation Mesh","slug":"solved-moving-a-navigation-mesh","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-06-20T20:10:14.786Z","last_posted_at":"2022-06-21T21:25:22.088Z","bumped":true,"bumped_at":"2022-06-21T21:25:22.088Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":138,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster, Accepted Answer","user":{"id":1228,"username":"PsychoCircuitry","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/a9a28c/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]}],"tags_descriptions":{},"id":4399,"title":"RaycastSingle failing on scaled up model","fancy_title":"RaycastSingle failing on scaled up model","posts_count":3,"created_at":"2018-07-20T14:39:01.688Z","views":412,"reply_count":1,"like_count":1,"last_posted_at":"2018-07-24T14:31:21.270Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"raycastsingle-failing-on-scaled-up-model","category_id":10,"word_count":323,"deleted_at":null,"user_id":790,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4399","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":790,"username":"davemurphy","name":"David Murphy","avatar_template":"/user_avatar/discourse.urho3d.io/davemurphy/{size}/1004_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":790,"username":"davemurphy","name":"David Murphy","avatar_template":"/user_avatar/discourse.urho3d.io/davemurphy/{size}/1004_2.png"},"last_poster":{"id":790,"username":"davemurphy","name":"David Murphy","avatar_template":"/user_avatar/discourse.urho3d.io/davemurphy/{size}/1004_2.png"},"links":[{"url":"https://github.com/KhronosGroup/glTF-Sample-Models/tree/master/2.0/Avocado","title":"glTF-Sample-Models/2.0/Avocado at master · KhronosGroup/glTF-Sample-Models · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":6,"user_id":790,"domain":"github.com","root_domain":"github.com"},{"url":"https://gamedev.stackexchange.com/questions/72440/the-correct-way-to-transform-a-ray-with-a-matrix","title":"mathematics - The correct way to transform a ray with a matrix? - Game Development Stack Exchange","internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":790,"domain":"gamedev.stackexchange.com","root_domain":"stackexchange.com"},{"url":"https://github.com/ksons/gltf-blender-importer","title":"GitHub - ksons/gltf-blender-importer: Blender glTF 2.0 Importer","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":790,"domain":"github.com","root_domain":"github.com"}]}}