{"post_stream":{"posts":[{"id":25981,"name":"","username":"Bananaft","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","created_at":"2018-09-20T20:39:13.094Z","cooked":"\u003cp\u003eIn my project I use deferred lighting, HDR and linear pipeline (not PBR).\u003cbr\u003e\nThere is this annoying banding in albedo. It happens on subtexel level, so after initial sampling and linear interpolation. All images are in lossless PNG.\u003cbr\u003e\nPic1 banding example: \u003ca href=\"https://i.imgur.com/phMaSYr.png\" rel=\"nofollow noopener\"\u003ehttps://i.imgur.com/phMaSYr.png\u003c/a\u003e\u003cbr\u003e\nPic2 banding example: \u003ca href=\"https://i.imgur.com/CWAnxLJ.png\" rel=\"nofollow noopener\"\u003ehttps://i.imgur.com/CWAnxLJ.png\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eA friend of mine suggested me to try and switch albedo buffer to sRGB. It worked:\u003cbr\u003e\nPic3 no banding \u003ca href=\"https://i.imgur.com/6vmLvuB.png\" rel=\"nofollow noopener\"\u003ehttps://i.imgur.com/6vmLvuB.png\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eBut there is a problem. I have two types of geometry. regular polygonal geometry and raymarched geometry (fractal) drawn into the g-buffer by quad command after scene path. After I switched albedo buffer to sRGB polygonal geometry became darker, while raymarched one stayed the same:\u003c/p\u003e\n\u003cp\u003ePic4 before-after comparsion: \u003ca href=\"https://i.imgur.com/47qFQxZ.png\" rel=\"nofollow noopener\"\u003ehttps://i.imgur.com/47qFQxZ.png\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI have to do liear-to-gamma pow(albedo, 1/2.2) in model’s pixel shader to compensate for that. So it seems like GPU correctly converts information when quad command writes into sRGB rendertarget, and when lightpass reads it, but not when scene pass writes into it.\u003c/p\u003e\n\u003cp\u003eIs it a bug? a feature?\u003c/p\u003e\n\u003cp\u003eI can also fix this banding by setting albedo buffer to rgba16f format. But that will increase memory bandwidth. And I can’t see any quality compromises comparing 8bit srgb to 16bit.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-09-20T20:39:13.094Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":120,"reads":40,"readers_count":39,"score":608.0,"yours":false,"topic_id":4558,"topic_slug":"albedo-g-buffer-and-srgb","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://i.imgur.com/phMaSYr.png","internal":false,"reflection":false,"title":"phMaSYr.png","clicks":34},{"url":"https://i.imgur.com/CWAnxLJ.png","internal":false,"reflection":false,"title":"CWAnxLJ.png","clicks":25},{"url":"https://i.imgur.com/6vmLvuB.png","internal":false,"reflection":false,"title":"6vmLvuB.png","clicks":22},{"url":"https://i.imgur.com/47qFQxZ.png","internal":false,"reflection":false,"title":"47qFQxZ.png","clicks":15}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25982,"name":"Jonathan","username":"Sinoid","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","created_at":"2018-09-20T21:35:27.588Z","cooked":"\u003cp\u003eAssuming you’re using a texture on the model, it’s just how it works. \u003ccode\u003eRead non-gamma corrected texture data -\u0026gt; write non-corrected data to gamma correct buffer -\u0026gt; conversion to gamma ends up darker than desired\u003c/code\u003e. More of a \u003cem\u003ethat’s just how the math works out\u003c/em\u003e than bug or feature.\u003c/p\u003e\n\u003cp\u003eYou either correct in the shader or set your input texture to be sRGB as well, which does the 1/2.2 (\u003ccode\u003epow(1/2)\u003c/code\u003e actually) by itself.\u003c/p\u003e\n\u003cp\u003eNot sure if it applies to newer Intels, but the older ones hate using hardware sRGB - it was horrifyingly slow on an HD4000, pretty sure they just emulate it as a full buffer copy of the framebuffer (which murder an already fill-rate limited GPU).\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-09-20T21:35:27.588Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":37,"readers_count":36,"score":17.4,"yours":false,"topic_id":4558,"topic_slug":"albedo-g-buffer-and-srgb","display_username":"Jonathan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":669,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25984,"name":"","username":"Bananaft","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","created_at":"2018-09-20T22:17:28.442Z","cooked":"\u003cp\u003eThank you for reply. Yes, it seems like only models with textures are affected. All my albedo textures are set to srgb, however, with srgb albedo buffer I can see diferent behavior on same texture.\u003c/p\u003e\n\u003cp\u003eJust figured, that urho does not convert textures on load as I thought, so it seems that quad command and  scenepass model read textures diferently, rather than write rendertarget diferently.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-09-20T22:17:28.442Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":32,"readers_count":31,"score":6.4,"yours":false,"topic_id":4558,"topic_slug":"albedo-g-buffer-and-srgb","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Sinoid","name":"Jonathan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25985,"name":"","username":"Bananaft","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","created_at":"2018-09-20T22:41:31.231Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Sinoid\" data-post=\"2\" data-topic=\"4558\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/40.png\" class=\"avatar\"\u003e Sinoid:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eNot sure if it applies to newer Intels, but the older ones hate using hardware sRGB - it was horrifyingly slow on an HD4000, pretty sure they just emulate it as a full buffer copy of the framebuffer (which murder an already fill-rate limited GPU).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI have raymarched 3d fractal, deferred shading and light scattering, Intel 4000 can go straight to hell.\u003c/p\u003e\n\u003cp\u003eEDIT: I mean, you probably have to set resolution to 640x480 to get double digit fps, don’t think extra buffer copy will make any difference.\u003c/p\u003e\n\u003cp\u003eI think even deferred shading alone is too much of fill rate overhead for HD 4000. I\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-09-21T06:41:51.745Z","reply_count":0,"reply_to_post_number":2,"quote_count":1,"incoming_link_count":0,"reads":31,"readers_count":30,"score":6.2,"yours":false,"topic_id":4558,"topic_slug":"albedo-g-buffer-and-srgb","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":6,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[25981,25982,25984,25985]},"timeline_lookup":[[1,1524]],"suggested_topics":[{"id":7304,"title":"Urho3D is crashing on Android 12","fancy_title":"Urho3D is crashing on Android 12","slug":"urho3d-is-crashing-on-android-12","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-28T10:03:51.280Z","last_posted_at":"2022-07-28T10:03:51.349Z","bumped":true,"bumped_at":"2022-07-28T10:38:06.014Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":126,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7344,"title":"Do we give up supporting dx11？","fancy_title":"Do we give up supporting dx11？","slug":"do-we-give-up-supporting-dx11","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-03T09:37:37.893Z","last_posted_at":"2022-11-03T13:09:15.153Z","bumped":true,"bumped_at":"2022-11-03T15:28:58.128Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":78,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7347,"title":"How does Urho handle script objects each frame?","fancy_title":"How does Urho handle script objects each frame?","slug":"how-does-urho-handle-script-objects-each-frame","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-08T02:33:56.461Z","last_posted_at":"2022-11-08T14:46:09.857Z","bumped":true,"bumped_at":"2022-11-08T14:46:09.857Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":64,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7191,"title":"What Technique could do this？look image","fancy_title":"What Technique could do this？look image","slug":"what-technique-could-do-this-look-image","posts_count":10,"reply_count":4,"highest_post_number":12,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/3/35feef53f1dacdd9d85effa676664950fb1a3f20.png","created_at":"2022-02-10T05:39:15.859Z","last_posted_at":"2022-02-11T17:29:59.221Z","bumped":true,"bumped_at":"2022-02-11T17:29:59.221Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":300,"category_id":14,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1503,"username":"tianlv777","name":"zerrrrr","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/a4c791/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7062,"title":"Is WebGL2.0 \u0026 GLES3.0 being supported in the near future?","fancy_title":"Is WebGL2.0 \u0026amp; GLES3.0 being supported in the near future?","slug":"is-webgl2-0-gles3-0-being-supported-in-the-near-future","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-11-23T09:04:28.802Z","last_posted_at":"2021-11-23T21:44:08.088Z","bumped":true,"bumped_at":"2021-11-23T21:44:08.088Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":199,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]}],"tags_descriptions":{},"id":4558,"title":"Albedo g-buffer and sRGB","fancy_title":"Albedo g-buffer and sRGB","posts_count":4,"created_at":"2018-09-20T20:39:13.007Z","views":797,"reply_count":2,"like_count":0,"last_posted_at":"2018-09-20T22:41:31.231Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"albedo-g-buffer-and-srgb","category_id":9,"word_count":526,"deleted_at":null,"user_id":165,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4558","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":4,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":165,"username":"Bananaft","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":669,"username":"Sinoid","name":"Jonathan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":165,"username":"Bananaft","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png"},"last_poster":{"id":165,"username":"Bananaft","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png"}}}