{"post_stream":{"posts":[{"id":23823,"name":"","username":"Pihozamo","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/848f3c/{size}.png","created_at":"2018-03-24T01:21:24.522Z","cooked":"\u003cp\u003eI would like to know if it’s possible to get the face (triangle, quad, …) info from a raycast collision result.\u003c/p\u003e\n\u003cp\u003eWhat I’m doing right now is getting the collision position from the raycast result and calculating the distance from all the geometry vertexes so I can get the nearest point, however I feel like there is a better way.\u003c/p\u003e\n\u003cp\u003eLooking at the documentation for the RayQueryResult class it seems that there’s no info about the intercepted face, only the whole Geometry, in this case the drawable_ variable.\u003c/p\u003e\n\u003cp\u003eSo if I could get the intercepted face info I could just filter it down to that face’s vertexes.\u003c/p\u003e\n\u003cp\u003eThank you.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-03-24T01:21:24.522Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":389,"reads":67,"readers_count":66,"score":1973.4,"yours":false,"topic_id":4118,"topic_slug":"how-can-i-get-the-face-info-from-a-raycast","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":639,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23824,"name":"Jonathan","username":"Sinoid","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","created_at":"2018-03-24T02:35:53.345Z","cooked":"\u003cp\u003e\u003cstrong\u003eA:\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eAdd an \u003ccode\u003eunsigned subObjectElementIndex_\u003c/code\u003e to RayQueryResult that defaults to \u003ccode\u003eM_MAX_UNSIGNED\u003c/code\u003e. Update \u003ccode\u003eRay::HitDistance\u003c/code\u003e to be able to output the index in the index buffer of the first triangle vertex (the index of the index, not the index of the vertex). Make relevant changes to \u003ccode\u003eGeometry\u003c/code\u003e to bubble that up and use it in \u003ccode\u003eStaticModel::ProcessRayQuery\u003c/code\u003e, recording the index whenever the distance checks pass.\u003c/p\u003e\n\u003cp\u003eThen fix all the places that are unhappy about adding the extra parameter to Ray::HitDistance, fix scripting bindings, etc.\u003c/p\u003e\n\u003cp\u003eThe rest of RayQueryResult already contains what you need to get in order to get the vertex and index data as well as vertex data description for pulling out the vertex attributes you care about for your \u003cem\u003ewhatever-it-means-here-triangle\u003c/em\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003eB:\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eRoll a bespoke / copy-pasta of Ray::HitDistance to use after first successful cast to cast again and capture out more data.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003eC:\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eTweak Ray::HitDistance to accept an \u003cem\u003eoutput-count\u003c/em\u003e and thus treat the input pointers as the start of an array, where the first element is the hit position, and the next N are the element data that was used for the triangle of the hit.  Then somehow bubble that mess of information back up and hope you don’t end up ever having more types of triangles you need to get.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-03-24T02:35:53.345Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":67,"readers_count":66,"score":93.4,"yours":false,"topic_id":4118,"topic_slug":"how-can-i-get-the-face-info-from-a-raycast","display_username":"Jonathan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":669,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23863,"name":"Jimmy Gass","username":"ghidra","avatar_template":"/user_avatar/discourse.urho3d.io/ghidra/{size}/69_2.png","created_at":"2018-03-27T16:56:28.689Z","cooked":"\u003cp\u003eis this in the wiki? this should be in the wiki \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=5\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-03-27T16:56:28.689Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":57,"readers_count":56,"score":71.4,"yours":false,"topic_id":4118,"topic_slug":"how-can-i-get-the-face-info-from-a-raycast","display_username":"Jimmy Gass","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Sinoid","name":"Jonathan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":109,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":30746,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2019-07-13T21:26:45.553Z","cooked":"\u003cp\u003eSo has anyone actually made a solution to this?\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2019-07-13T21:26:45.553Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":38,"readers_count":37,"score":12.6,"yours":false,"topic_id":4118,"topic_slug":"how-can-i-get-the-face-info-from-a-raycast","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":30749,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-07-14T05:57:54.034Z","cooked":"\u003cp\u003eI don’t know, but since I have some experience with both physics and graphics raycasting I could add it to my todo list? I would definitely like to say that we can always provide more information from collision queries than we already do. I think its an area where we can do better. I personally should know this, it’s a beginner thing in directx to pick triangles\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2019-07-14T06:48:52.233Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":1,"reads":38,"readers_count":37,"score":27.6,"yours":false,"topic_id":4118,"topic_slug":"how-can-i-get-the-face-info-from-a-raycast","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":30753,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-07-15T07:31:26.165Z","cooked":"\u003cp\u003eI just poked around a bit - Urho3D::RayQueryResult does not tell us which triangle we hit - however it does tell us the exact UV coordinates of the hitpoint (which indicates that yes we COULD have returned that extra information…)\u003c/p\u003e\n\u003cp\u003eIn another time, I had to use barycentric coordinates to determine the UV of the hit point (terrain painting, coming soon!) - given there is no internal acceleration structure for hit queries in the Model class, and assuming that all UVs are “unique” (subject to interpretation of the definition), I reckon the fastest way to determine which triangle was hit is to check every triangle in the model, to find out if we can map the UV hit coordinate back to a barycentric coordinate within that triangle. In the case of unique UVs, there will be only one hit result (and so a chance to terminate our search early). In the case of shared UVs, we have to do a second test to figure out which hit result is closest, and/or sort the results by distance.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2019-07-15T14:46:10.740Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":32,"readers_count":31,"score":6.4,"yours":false,"topic_id":4118,"topic_slug":"how-can-i-get-the-face-info-from-a-raycast","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[23823,23824,23863,30746,30749,30753]},"timeline_lookup":[[1,1705],[3,1701],[4,1228],[6,1227]],"suggested_topics":[{"id":7083,"title":"Using custom models in Xamarin.Forms shared project","fancy_title":"Using custom models in Xamarin.Forms shared project","slug":"using-custom-models-in-xamarin-forms-shared-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-03T08:34:21.895Z","last_posted_at":"2021-12-03T11:40:30.983Z","bumped":true,"bumped_at":"2021-12-03T11:40:30.983Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":198,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1493,"username":"Nikolai","name":"Nikolai Miroshnichenko","avatar_template":"/user_avatar/discourse.urho3d.io/nikolai/{size}/3632_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7092,"title":"Finding the World Space Coordinates of the Screen Edges","fancy_title":"Finding the World Space Coordinates of the Screen Edges","slug":"finding-the-world-space-coordinates-of-the-screen-edges","posts_count":6,"reply_count":2,"highest_post_number":6,"image_url":null,"created_at":"2021-12-07T20:53:49.453Z","last_posted_at":"2021-12-08T12:33:52.510Z","bumped":true,"bumped_at":"2021-12-08T12:33:52.510Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":210,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7132,"title":"How to Draw Anti-Aliased Outlined Line on the UI layer?","fancy_title":"How to Draw Anti-Aliased Outlined Line on the UI layer?","slug":"how-to-draw-anti-aliased-outlined-line-on-the-ui-layer","posts_count":8,"reply_count":5,"highest_post_number":8,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/c/c040fdbc2f1856c238ba6328fd7f5ff80b15858f_2_782x1024.jpeg","created_at":"2022-01-17T22:08:06.874Z","last_posted_at":"2022-01-20T20:13:30.614Z","bumped":true,"bumped_at":"2022-01-20T20:13:30.614Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":173,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7080,"title":"Build urho3d source on windows 10 - cmake - \"Error in configuration process, project files may be invalid\"","fancy_title":"Build urho3d source on windows 10 - cmake - \u0026ldquo;Error in configuration process, project files may be invalid\u0026rdquo;","slug":"build-urho3d-source-on-windows-10-cmake-error-in-configuration-process-project-files-may-be-invalid","posts_count":8,"reply_count":4,"highest_post_number":8,"image_url":null,"created_at":"2021-12-03T01:55:53.267Z","last_posted_at":"2021-12-06T22:46:59.584Z","bumped":true,"bumped_at":"2021-12-06T22:46:59.584Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":324,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]}],"tags_descriptions":{},"id":4118,"title":"How can I get the face info from a raycast?","fancy_title":"How can I get the face info from a raycast?","posts_count":6,"created_at":"2018-03-24T01:21:24.446Z","views":1218,"reply_count":2,"like_count":7,"last_posted_at":"2019-07-15T07:31:26.165Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"how-can-i-get-the-face-info-from-a-raycast","category_id":10,"word_count":597,"deleted_at":null,"user_id":639,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4118","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":5,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":109,"username":"ghidra","name":"Jimmy Gass","avatar_template":"/user_avatar/discourse.urho3d.io/ghidra/{size}/69_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":3},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":639,"username":"Pihozamo","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/848f3c/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":669,"username":"Sinoid","name":"Jonathan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":639,"username":"Pihozamo","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/848f3c/{size}.png"},"last_poster":{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"}}}