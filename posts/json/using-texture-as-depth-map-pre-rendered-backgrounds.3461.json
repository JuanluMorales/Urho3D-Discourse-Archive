{"post_stream":{"posts":[{"id":20165,"name":"","username":"napoleon","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/58956e/{size}.png","created_at":"2017-08-19T14:58:51.793Z","cooked":"\u003cp\u003eHi all,\u003c/p\u003e\n\u003cp\u003eSo I’d like to use pre-rendered backgrounds like in the first Resident Evil games.\u003cbr\u003e\nFor this I render my backgrounds in Blender and then render the depth values to a grayscale image (with the values {0, 1} stretching from the near to far clip).\u003c/p\u003e\n\u003cp\u003eIs there a way to “render” the values from the grayscale texture directly into the depth buffer?\u003c/p\u003e\n\u003cp\u003eThanks in advance!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-08-19T14:58:51.793Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":113,"reads":53,"readers_count":52,"score":575.6,"yours":false,"topic_id":3461,"topic_slug":"using-texture-as-depth-map-pre-rendered-backgrounds","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":801,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":20254,"name":"","username":"Bananaft","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","created_at":"2017-08-22T19:52:32.884Z","cooked":"\u003cp\u003eAs far as I know, you can not write into depth buffer that is used by GPU for pixel sorting. You can however read your own depth in pixel shader, and discard pixels that are further away.\u003c/p\u003e\n\u003cp\u003eAnother solution would be to use mesh occludes - invisible meshes, that are only rendered into depth buffer. Like some old games did it:\u003cbr\u003e\n\u003cimg src=\"//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/c43be8dce3f7b7384e25c5f396e838ae51adeb59.png\"\u003e\u003cbr\u003e\n\u003cimg src=\"//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/540918c3bdf146dbf91c88b035997d9caedc6877.png\"\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-08-22T19:57:58.998Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":44,"readers_count":43,"score":8.8,"yours":false,"topic_id":3461,"topic_slug":"using-texture-as-depth-map-pre-rendered-backgrounds","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":"downloaded local copies of images","can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":20293,"name":"","username":"napoleon","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/58956e/{size}.png","created_at":"2017-08-23T12:12:31.930Z","cooked":"\u003cp\u003eThank you very much! I was experimenting with a much more complicated solution, but I guess using occludes will be more suitable (and actually work).\u003cbr\u003e\nFor testing this method I rendered my occlude mesh with a modified version of the “Unlit” shader, where I simply deleted the “oColor” definitions, so only “oDepth” will be written into, but nothing happens, the stuff behind the occlude is still visible. Is that the correct way to do it? (I don’t know much about hlsl shaders.)\u003cbr\u003e\nHere is a part of the “PS” section of my hlsl shader: (The rest is identical to the standard “Unlit” shader)\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e#if defined(PREPASS)\n    // Fill light pre-pass G-Buffer\n    oColor = float4(0.5, 0.5, 0.5, 1.0);\n    oDepth = iWorldPos.w;\n#elif defined(DEFERRED)\n    // Fill deferred G-buffer\n    //oColor = float4(GetFog(diffColor.rgb, fogFactor), diffColor.a);\n    //oAlbedo = float4(0.0, 0.0, 0.0, 0.0);\n   //oNormal = float4(0.5, 0.5, 0.5, 1.0);\n    oDepth = iWorldPos.w;\n#else\n    //oColor = float4(GetFog(diffColor.rgb, fogFactor), diffColor.a);\n#endif\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eEDIT: To elaborate: I now have two scenes and two viewports to first render the background and then the rest on top of it (\u003ca href=\"https://discourse.urho3d.io/t/how-to-layer-scenes/740/4\"\u003elike this\u003c/a\u003e). So I guess I need to have a shader where nothing except for the depth values is drawn, correct? If no color output occured, shouldn’t you be able to see the background viewport instead?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-08-23T13:59:10.269Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":45,"readers_count":44,"score":24.0,"yours":false,"topic_id":3461,"topic_slug":"using-texture-as-depth-map-pre-rendered-backgrounds","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://discourse.urho3d.io/t/how-to-layer-scenes/740/4","internal":true,"reflection":false,"title":"How to Layer Scenes","clicks":5}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":801,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":20487,"name":"","username":"Bananaft","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","created_at":"2017-08-28T20:24:04.984Z","cooked":"\u003cp\u003eStuff like this must be determined by technique, not shader: \u003ca href=\"https://urho3d.github.io/documentation/1.4/_materials.html\" rel=\"nofollow noopener\"\u003ehttps://urho3d.github.io/documentation/1.4/_materials.html\u003c/a\u003e\u003cbr\u003e\nhere are some solutions you can try:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eEnabling depthwrite and depthtest, setting blend mode to add and outputting black color in shader.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAssuming you are using ForwardDepth render path, you can make a technique that renders your occluder during depth scenepass, and does nothing during base scenepass.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAnother way is to write a shader for your occluder, that reads your background image in screen coordinates(rather than UVs) and outputs as oColor. That way painting background image on top of any geometry that further away.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":4,"post_type":1,"updated_at":"2017-08-29T14:35:08.492Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":38,"readers_count":37,"score":22.6,"yours":false,"topic_id":3461,"topic_slug":"using-texture-as-depth-map-pre-rendered-backgrounds","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://urho3d.github.io/documentation/1.4/_materials.html","internal":false,"reflection":false,"title":"Urho3D - Documentation","clicks":7}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":20500,"name":"","username":"napoleon","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/58956e/{size}.png","created_at":"2017-08-29T14:32:57.667Z","cooked":"\u003cp\u003eOh man, thank you so much! I used the first solution and it finally works!\u003cbr\u003e\nI gained much insight into the network of shaders, scenepasses and techniques, thank you!\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-08-29T14:32:57.667Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":35,"readers_count":34,"score":27.0,"yours":false,"topic_id":3461,"topic_slug":"using-texture-as-depth-map-pre-rendered-backgrounds","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":801,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":20501,"name":"","username":"Bananaft","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","created_at":"2017-08-29T18:16:20.331Z","cooked":"\u003cp\u003eUgh, actually, on second thought i realized, there could be a pitfall with this method.  You have to somehow be sure, that occluder is drawn before stuff that needs to be occluded. Otherwise it wont work. Engine is choosing order to draw stuff in opaque pass with fancy algorithm, to draw stuff faster, there is no guarantee it will keep this particular order forever.\u003c/p\u003e\n\u003cp\u003eI guess, you should draw only occluders in base pass, and occludable objects in postopaque pass.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-08-29T18:16:20.331Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":3,"reads":35,"readers_count":34,"score":22.0,"yours":false,"topic_id":3461,"topic_slug":"using-texture-as-depth-map-pre-rendered-backgrounds","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"napoleon","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/58956e/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[20165,20254,20293,20487,20500,20501]},"timeline_lookup":[[1,1922],[2,1918],[4,1912],[6,1911]],"suggested_topics":[{"id":7086,"title":"Handling CrowdAgents that get stuck","fancy_title":"Handling CrowdAgents that get stuck","slug":"handling-crowdagents-that-get-stuck","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-04T01:26:23.062Z","last_posted_at":"2021-12-05T04:37:54.143Z","bumped":true,"bumped_at":"2021-12-05T04:37:54.143Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7160,"title":"RayCast trouble","fancy_title":"RayCast trouble","slug":"raycast-trouble","posts_count":17,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-01-29T00:06:00.367Z","last_posted_at":"2022-01-30T00:29:39.356Z","bumped":true,"bumped_at":"2022-01-30T00:29:39.356Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":260,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]},{"id":7182,"title":"How install landscape in the format (.tor or .obj)?","fancy_title":"How install landscape in the format (.tor or .obj)?","slug":"how-install-landscape-in-the-format-tor-or-obj","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-02-03T16:58:20.976Z","last_posted_at":"2022-02-04T16:34:09.663Z","bumped":true,"bumped_at":"2022-02-04T16:34:09.663Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":151,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":"latest","description":"Most Recent Poster, Accepted Answer","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7098,"title":"Cartoon Fire Effect","fancy_title":"Cartoon Fire Effect","slug":"cartoon-fire-effect","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2021-12-10T04:08:49.887Z","last_posted_at":"2021-12-12T02:49:51.076Z","bumped":true,"bumped_at":"2021-12-12T02:49:51.076Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":274,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7215,"title":"How to build rbfx?","fancy_title":"How to build rbfx?","slug":"how-to-build-rbfx","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-03-11T01:28:40.314Z","last_posted_at":"2022-03-12T19:16:39.360Z","bumped":true,"bumped_at":"2022-03-12T19:16:39.360Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":268,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1447,"username":"Batch","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f17d59/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":3461,"title":"Using Texture as Depth Map? (Pre-Rendered Backgrounds)","fancy_title":"Using Texture as Depth Map? (Pre-Rendered Backgrounds)","posts_count":6,"created_at":"2017-08-19T14:58:51.703Z","views":1074,"reply_count":1,"like_count":1,"last_posted_at":"2017-08-29T18:16:20.331Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"using-texture-as-depth-map-pre-rendered-backgrounds","category_id":10,"word_count":606,"deleted_at":null,"user_id":801,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_3461","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":4,"username":"Bananaft","excerpt":"Stuff like this must be determined by technique, not shader: \u003ca href=\"https://urho3d.github.io/documentation/1.4/_materials.html\" rel=\"nofollow noopener\"\u003ehttps://urho3d.github.io/documentation/1.4/_materials.html\u003c/a\u003e \nhere are some solutions you can try: \n\n\nEnabling depthwrite and depthtest, setting blend mode to add and outputting black color in shader. \n\n\nAssuming you are using ForwardDepth r\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":165,"username":"Bananaft","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":801,"username":"napoleon","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/58956e/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":801,"username":"napoleon","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/58956e/{size}.png"},"last_poster":{"id":165,"username":"Bananaft","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png"},"links":[{"url":"https://urho3d.github.io/documentation/1.4/_materials.html","title":"Urho3D - Documentation","internal":false,"attachment":false,"reflection":false,"clicks":7,"user_id":165,"domain":"urho3d.github.io","root_domain":"urho3d.github.io"},{"url":"http://discourse.urho3d.io/t/how-to-layer-scenes/740/4","title":"How to Layer Scenes","internal":true,"attachment":false,"reflection":false,"clicks":5,"user_id":801,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"}]}}