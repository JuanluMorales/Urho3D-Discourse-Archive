{"post_stream":{"posts":[{"id":23711,"name":"","username":"feltech","avatar_template":"/user_avatar/discourse.urho3d.io/feltech/{size}/1362_2.png","created_at":"2018-03-19T23:09:13.132Z","cooked":"\u003cp\u003eHey all,\u003c/p\u003e\n\u003cp\u003eI want to create a simple space sim/trading game (yes, another one, but wait, there’s a catch!)…  I want to fully physically simulate all AI ships in the universe - even those far from the player.  The idea is to use extremely simple geometry, so that 1000s of bodies can be simulated at real-time rates.\u003c/p\u003e\n\u003cp\u003eThe problem I’m trying to wrap my head around is the floating point accuracy issue.  Even with double-precision at 1cm resolution you only get approx 0.01 light years (approx 16 sig figs in a double, with cm resolution, is 10^14 m = 0.01 light years).\u003c/p\u003e\n\u003cp\u003eReading around these, and other, forums, it seems the way to solve this is a hierarchical coordinate system, i.e. chunking or tiling the world.  Unfortunately, as far as I can tell Bullet is just not set up for this at all.\u003c/p\u003e\n\u003cp\u003eI have a couple of ideas, e.g. an entirely separate physics world per tile; or re-centring entities relative to their local tile with a “broadphase” plugin to exclude all entities not on that tile.\u003c/p\u003e\n\u003cp\u003eThe main thing I’m struggling to wrap my head around is how to handle movement and collision detection across (i.e. on the edge between) world chunks/tiles.  I’m fairly sure this is a solved problem, but I can’t find any specific information about it on the web.\u003c/p\u003e\n\u003cp\u003eAnyone got any ideas?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-03-19T23:10:39.686Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":203,"reads":66,"readers_count":65,"score":1028.2,"yours":false,"topic_id":4105,"topic_slug":"full-physics-simulation-of-extremely-large-world","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":260,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23739,"name":"","username":"Bananaft","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","created_at":"2018-03-20T19:31:16.516Z","cooked":"\u003cp\u003eHow many light years will comply? \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e\n\u003cp\u003eStart small, try to get maximum performance from single bullet physics world, like one tiny solar system or asteroid field. It will provide you good learning and you will be able to grow your universe from there.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-03-20T19:31:16.516Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":60,"readers_count":59,"score":17.0,"yours":false,"topic_id":4105,"topic_slug":"full-physics-simulation-of-extremely-large-world","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23754,"name":"","username":"feltech","avatar_template":"/user_avatar/discourse.urho3d.io/feltech/{size}/1362_2.png","created_at":"2018-03-21T13:39:35.040Z","cooked":"\u003cp\u003eI think that the problem of tiling the world needs to be tackled from the start, since it affects the internals of the engine.\u003c/p\u003e\n\u003cp\u003eI’ve had some more thoughts on this. I propose that all entities have a real-valued position relative to their current tile.  As far as Bullet is concerned, they would all inhabit the same small region of space.\u003c/p\u003e\n\u003cp\u003eThen, we have a (pre-)broadphase that will filter down to entities in a single tile.  There is already similar functionality in Bullet via the collision object mask, but it has insufficient bits for this purpose.  Hopefully it will require limited modification to support tile coordinates, rather than a bitmask, though.  Or perhaps it will be more performant to roll something new.\u003c/p\u003e\n\u003cp\u003eThe real trick, as I mentioned in my previous post, is what to do at the edges between tiles.  I think in that case we need to get deeper into Bullet’s collision detection to re-centre the origin at the midpoint between two tiles, and compare pairs of entities across the tiles.\u003c/p\u003e\n\u003cp\u003eThat is, in a separate pass, use a list of pairs of inhabited tiles that neighbour one-another. Then, check pairs of entities (AABB overlap and the rest) across the divide, with the origin centred at the midpoint between the two tiles.\u003c/p\u003e\n\u003cp\u003eI’ve only got passing familiarity with some of Bullet’s collision detection code, and very little familiarity with the collision response code, so I’m not sure how viable this is.\u003c/p\u003e\n\u003cp\u003eAnyone got any comments/suggestions/alternatives on this idea?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-03-21T13:39:35.040Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":54,"readers_count":53,"score":20.8,"yours":false,"topic_id":4105,"topic_slug":"full-physics-simulation-of-extremely-large-world","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":260,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23775,"name":"","username":"Bananaft","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","created_at":"2018-03-21T21:19:52.289Z","cooked":"\u003cp\u003eYeah, one more thing. Given, you have so enormously huge open spaces, spaceships will probably fly around on ridiculous speeds. And that means they will fly through everything and each other, as each frame they will move a great distance, even continuous collision detection won’t cover that. Sweep test may work alright but only for collision with static geometry.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ecollision detection across (i.e. on the edge between) world chunks/tiles.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eproxy-collider that checks collisions in adjacent chunk and passes impulses to real object.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-03-21T21:19:52.289Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":3,"reads":50,"readers_count":49,"score":25.0,"yours":false,"topic_id":4105,"topic_slug":"full-physics-simulation-of-extremely-large-world","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"feltech","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/feltech/{size}/1362_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27155,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-01-02T09:11:20.182Z","cooked":"\u003cp\u003eJust a thought - The scene octree could be modified to be aligned more closely to Bullet’s spatial tree, this could mean regions of the octree could be considered as separate physics worlds, with well-defined volume boundaries. This could be an extension of the existing octree, rather than a whole new work, so it would not need to disrupt standard visibility testing etc.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2019-01-02T09:11:20.182Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":21.0,"yours":false,"topic_id":4105,"topic_slug":"full-physics-simulation-of-extremely-large-world","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27165,"name":"","username":"I3DB","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","created_at":"2019-01-02T20:57:40.954Z","cooked":"\u003cp\u003eYou could maintain a physics world size of a reasonable space size, and translate each area of interest into that space, while maintaining it’s normal position outside your physics world space for viewing.\u003c/p\u003e\n\u003cp\u003eSo in effect you have two locations for each and every object. It’s translated location for physics world processing, and it’s visible location.\u003c/p\u003e\n\u003cp\u003eBut if you take a look at the Feature Sample ‘Physics Stress Test’ you’ll get an idea of the number of objects tracked before things go awry.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2019-01-02T20:57:40.954Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":25,"readers_count":24,"score":15.0,"yours":false,"topic_id":4105,"topic_slug":"full-physics-simulation-of-extremely-large-world","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1086,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[23711,23739,23754,23775,27155,27165]},"timeline_lookup":[[1,1709],[2,1708],[4,1707],[5,1421],[6,1420]],"suggested_topics":[{"id":7304,"title":"Urho3D is crashing on Android 12","fancy_title":"Urho3D is crashing on Android 12","slug":"urho3d-is-crashing-on-android-12","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-28T10:03:51.280Z","last_posted_at":"2022-07-28T10:03:51.349Z","bumped":true,"bumped_at":"2022-07-28T10:38:06.014Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":126,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7344,"title":"Do we give up supporting dx11？","fancy_title":"Do we give up supporting dx11？","slug":"do-we-give-up-supporting-dx11","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-03T09:37:37.893Z","last_posted_at":"2022-11-03T13:09:15.153Z","bumped":true,"bumped_at":"2022-11-03T15:28:58.128Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":78,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7347,"title":"How does Urho handle script objects each frame?","fancy_title":"How does Urho handle script objects each frame?","slug":"how-does-urho-handle-script-objects-each-frame","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-08T02:33:56.461Z","last_posted_at":"2022-11-08T14:46:09.857Z","bumped":true,"bumped_at":"2022-11-08T14:46:09.857Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":64,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7277,"title":"MessageBox issue when building for Windows","fancy_title":"MessageBox issue when building for Windows","slug":"messagebox-issue-when-building-for-windows","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2022-06-05T07:25:41.629Z","last_posted_at":"2022-06-11T08:37:06.685Z","bumped":true,"bumped_at":"2022-06-11T08:45:09.060Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":152,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":527,"username":"zedraken","name":"Charles","avatar_template":"/user_avatar/discourse.urho3d.io/zedraken/{size}/328_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]},{"id":7063,"title":"Quadspinner Gaea support on Urho?","fancy_title":"Quadspinner Gaea support on Urho?","slug":"quadspinner-gaea-support-on-urho","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2021-11-23T23:30:45.335Z","last_posted_at":"2021-11-23T23:30:45.396Z","bumped":true,"bumped_at":"2021-11-23T23:30:45.396Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":150,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]}],"tags_descriptions":{},"id":4105,"title":"Full physics simulation of extremely large world","fancy_title":"Full physics simulation of extremely large world","posts_count":6,"created_at":"2018-03-19T23:09:13.000Z","views":1439,"reply_count":1,"like_count":1,"last_posted_at":"2019-01-02T20:57:40.954Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"full-physics-simulation-of-extremely-large-world","category_id":9,"word_count":783,"deleted_at":null,"user_id":260,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4105","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":165,"username":"Bananaft","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":260,"username":"feltech","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/feltech/{size}/1362_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":1086,"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":260,"username":"feltech","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/feltech/{size}/1362_2.png"},"last_poster":{"id":1086,"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png"}}}