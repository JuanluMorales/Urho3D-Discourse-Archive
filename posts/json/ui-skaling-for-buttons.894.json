{"post_stream":{"posts":[{"id":5118,"name":"","username":"TikariSakari","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f4b2a3/{size}.png","created_at":"2015-03-02T17:38:50.000Z","cooked":"\u003cp\u003eI was trying to do some ui-scaling like buttons mostly so that they would scale according to screen resolution, this is the code I have. I think I managed to get it to work at least up to some level. Maybe it will help others or maybe even someone can improve the code a lot.\u003c/p\u003e\n\u003cp\u003eThe code is definitely not pretty, just a warning. I am using the sample as a base class.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\nvoid MyProj::Setup()\n{\n\tSample::Setup();\n\tengineParameters_[\"WindowResizable\"] = true; // to make window resizable.\n\n}\n\nvoid MyProj::SubscribeToEvents()\n{\n    // Subscribe HandleUpdate() function for processing update events\n    SubscribeToEvent(E_UPDATE, HANDLER(SkeletalAnimation, HandleUpdate));\n\n    // Subscribe HandlePostRenderUpdate() function for processing the post-render update event, sent after Renderer subsystem is\n    // done with defining the draw calls for the viewports (but before actually executing them.) We will request debug geometry\n    // rendering during that event\n    SubscribeToEvent(E_POSTRENDERUPDATE, HANDLER(SkeletalAnimation, HandlePostRenderUpdate));\n\n   // For resizing UI\n    SubscribeToEvent( E_SCREENMODE,  HANDLER( MyProj, ResizeUI));\n}\n\n/// Handle ScreenMode event. Resize and such.\nvoid MyProj::ResizeUI( StringHash eventType, VariantMap\u0026amp; eventData ) {\n    auto rootSize = GetSubsystem\u0026lt;UI\u0026gt;()-\u0026gt;GetRoot()-\u0026gt;GetSize();\n\n\n   // I am using class called GameUI for handling the ui.\n    if( gameUI_ )\n        gameUI_-\u0026gt;resizeUI( rootSize.x_, rootSize.y_,\n            GetSubsystem\u0026lt;ResourceCache\u0026gt;()-\u0026gt;GetResource\u0026lt;Font\u0026gt;((\"Fonts/Anonymous Pro.ttf\")));\n\n}\n\n\nvoid UIGame::resizeUI( const int\u0026amp; width, const int\u0026amp; height, Urho3D::Font* font ) {\n\n    fontSize_ = std::min( width, height ) / 20;\n\n    setElementsZero( root_ );\n    resizeElement( root_ );\n\n    root_-\u0026gt;SetSize( width, height );\n}\n\n\n// Set all sizes to 0 from deepest first, because if child node is not 0, the parent cannot\n// be set to 0. This will not shrink components when making window smaller\nvoid UIGame::setElementsZero( Urho3D::UIElement* element ) {\n    for( int i = 0; i \u0026lt; element-\u0026gt;GetChildren().Size(); ++i ){\n        if( auto tmp = dynamic_cast\u0026lt;Urho3D::DropDownList*\u0026gt;( element ) ) {\n            for( int j = 0; j \u0026lt; tmp-\u0026gt;GetItems().Size(); ++j )\n                setElementsZero( tmp-\u0026gt;GetItems()[j] );\n        }\n        setElementsZero( element-\u0026gt;GetChildren()[i] );\n    }\n\n    element-\u0026gt;SetMinSize(0,0);\n    element-\u0026gt;SetSize(0,0);\n}\n\n// Sets elements size according to childrens size.\nvoid UIGame::resizeElement( Urho3D::UIElement* element ) {\n\n    auto elements = element-\u0026gt;GetChildren();\n    if( elements.Size() == 0 )\n        return;\n\n    int width = 0;\n    int height = 0;\n\n\n    for( auto elementIter = elements.Begin(); elementIter != elements.End(); ++elementIter ) {\n        Urho3D::UIElement* ele = elementIter-\u0026gt;Get();\n\n        resizeElement( ele );\n\n        findUIType( ele );\n\n\n\n        switch(  element-\u0026gt;GetLayoutMode() ) {\n            case Urho3D::LM_HORIZONTAL:\n                height = std::max(  ele-\u0026gt;GetHeight(), height );\n            break;\n\n            case Urho3D::LM_VERTICAL:\n                width = std::max(  ele-\u0026gt;GetWidth(), width );\n            break;\n\n            default:\n                height = std::max(  ele-\u0026gt;GetHeight(), height );\n                width = std::max(  ele-\u0026gt;GetWidth(), width );\n            break;\n        }\n\n\n    }\n\n\n    switch(  element-\u0026gt;GetLayoutMode() ) {\n        case Urho3D::LM_HORIZONTAL:\n            element-\u0026gt;SetMinWidth( width );\n            element-\u0026gt;SetWidth( width );\n        break;\n\n        case Urho3D::LM_VERTICAL:\n            element-\u0026gt;SetMinHeight( height );\n            element-\u0026gt;SetHeight( height );\n        break;\n\n        default:\n            element-\u0026gt;SetMinSize( width, height );\n            element-\u0026gt;SetSize( width, height );\n        break;\n    }\n\n}\n\n\n// Find the elements type and do stuff according to element type\nvoid UIGame::findUIType( Urho3D::UIElement* ele ) {\n\n    if( Urho3D::BorderImage* tmp = dynamic_cast\u0026lt;Urho3D::BorderImage*\u0026gt;( ele )  ) {\n        if( Urho3D::Button* tmp2 = dynamic_cast\u0026lt;Urho3D::Button*\u0026gt;( ele )  ) {\n            if( Urho3D::DropDownList* tmp3 = dynamic_cast\u0026lt;Urho3D::DropDownList*\u0026gt;( ele ) ) {\n                int width = 0;\n                int height = 0;\n                for( int i = 0; i \u0026lt; tmp3-\u0026gt;GetItems().Size(); ++i ) {\n                    findUIType(tmp3-\u0026gt;GetItems()[i]);\n                    width = std::max( tmp3-\u0026gt;GetItems()[i]-\u0026gt;GetWidth(), width );\n                    height = std::max( tmp3-\u0026gt;GetItems()[i]-\u0026gt;GetHeight(), height );\n                }\n                tmp3-\u0026gt;SetMinSize(width, height);\n                tmp3-\u0026gt;SetSize(width, height);\n            }\n            else if( Urho3D::Menu* tmp3 = dynamic_cast\u0026lt;Urho3D::Menu*\u0026gt;( ele ) ) {\n            }\n            else { // Button\n            }\n        }\n        else if(Urho3D::CheckBox* tmp2 = dynamic_cast\u0026lt;Urho3D::CheckBox*\u0026gt;( ele )) {\n\n        }\n\n        else if(Urho3D::Cursor* tmp2 = dynamic_cast\u0026lt;Urho3D::Cursor*\u0026gt;( ele )) {\n\n        }\n\n        else if(Urho3D::LineEdit* tmp2 = dynamic_cast\u0026lt;Urho3D::LineEdit*\u0026gt;( ele )) {\n\n        }\n\n        else if(Urho3D::Slider* tmp2 = dynamic_cast\u0026lt;Urho3D::Slider*\u0026gt;( ele )) {\n\n        }\n\n        else if(Urho3D::Window* tmp3 = dynamic_cast\u0026lt;Urho3D::Window*\u0026gt;( ele )) {\n            if(Urho3D::View3D* tmp3 = dynamic_cast\u0026lt;Urho3D::View3D*\u0026gt;( ele )) {\n\n            }\n            else { // Window\n            }\n\n        }\n        else { // borderImage\n\n        }\n\n    }\n\n    else if(Urho3D::ScrollBar* tmp = dynamic_cast\u0026lt;Urho3D::ScrollBar*\u0026gt;( ele )) {\n\n    }\n\n    else if(Urho3D::ScrollView* tmp = dynamic_cast\u0026lt;Urho3D::ScrollView*\u0026gt;( ele )) {\n        if(Urho3D::ListView* tmp = dynamic_cast\u0026lt;Urho3D::ListView*\u0026gt;( ele )) {\n\n        }\n        else {\n\n        }\n\n\n    }\n\n    else if(Urho3D::Sprite* tmp = dynamic_cast\u0026lt;Urho3D::Sprite*\u0026gt;( ele )) {\n\n\n    }\n\n    else if(Urho3D::Text* tmp = dynamic_cast\u0026lt;Urho3D::Text*\u0026gt;( ele )) {\n        tmp-\u0026gt;SetMinSize(0,0);\n// There is probably a lot smarter way to do this, but if the fontsize is same\n// this does nothing. Since we already zeroed the text element earlier, this means\n// the whole text will be 0 pixel size otherwise.\n        tmp-\u0026gt;SetFont(tmp-\u0026gt;GetFont(), fontSize_ - 1 );\n        tmp-\u0026gt;SetFont(tmp-\u0026gt;GetFont(), fontSize_ );\n\n        tmp-\u0026gt;SetMinSize( tmp-\u0026gt;GetSize() );\n    }\n\n    else if(Urho3D::ToolTip* tmp = dynamic_cast\u0026lt;Urho3D::ToolTip*\u0026gt;( ele ) ) {\n\n    }\n    else { // UIElement\n\n    }\n\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis code assumes that every type that has children does not contain things on their own. Also basically the only thing it does is change fonts size to an object. It doesn‚Äôt handle position changes according to resolution, since I am only using elements in corners and edges nor it handles images neither.\u003c/p\u003e\n\u003cp\u003eAnyways do what you want with it. Oh and I am using c++11 autos, so c++11 must be used for the code to work.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:03:53.405Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":11,"reads":12,"readers_count":11,"score":57.4,"yours":false,"topic_id":894,"topic_slug":"ui-skaling-for-buttons","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":205,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[5118]},"timeline_lookup":[[1,2822]],"suggested_topics":[{"id":7099,"title":":fallen_leaf: Polynomials \u0026 Harmonics","fancy_title":":fallen_leaf: Polynomials \u0026amp; Harmonics","slug":"polynomials-harmonics","posts_count":6,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2021-12-13T05:06:04.641Z","last_posted_at":"2021-12-27T23:27:39.489Z","bumped":true,"bumped_at":"2021-12-27T23:27:39.489Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"üçÇ Polynomials \u0026 Harmonics","tags_descriptions":{},"like_count":6,"views":392,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7103,"title":":test_tube: DebugRenderer as GUI","fancy_title":":test_tube: DebugRenderer as GUI","slug":"debugrenderer-as-gui","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-17T02:25:06.606Z","last_posted_at":"2021-12-18T01:09:27.738Z","bumped":true,"bumped_at":"2021-12-18T01:09:27.738Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"üß™ DebugRenderer as GUI","tags_descriptions":{},"like_count":4,"views":267,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7110,"title":"Resource fetch define","fancy_title":"Resource fetch define","slug":"resource-fetch-define","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-27T12:28:55.126Z","last_posted_at":"2021-12-27T17:00:37.699Z","bumped":true,"bumped_at":"2021-12-27T17:00:37.699Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":7,"views":184,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7120,"title":"Log Error Once Macro","fancy_title":"Log Error Once Macro","slug":"log-error-once-macro","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-01-04T02:24:37.857Z","last_posted_at":"2022-01-04T02:24:37.925Z","bumped":true,"bumped_at":"2022-01-04T02:24:37.925Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":143,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7325,"title":"Unable to use external GPU for Urho3D app on Mac OS Monterey","fancy_title":"Unable to use external GPU for Urho3D app on Mac OS Monterey","slug":"unable-to-use-external-gpu-for-urho3d-app-on-mac-os-monterey","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/5f906b318833e198a50421d1068fb2d87d17c231_2_1024x585.jpeg","created_at":"2022-09-13T10:07:14.458Z","last_posted_at":"2022-09-14T07:07:26.247Z","bumped":true,"bumped_at":"2022-09-14T07:07:26.247Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":84,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1424,"username":"daokoder","name":"Limin Fu","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/d/898d66/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":894,"title":"UI-skaling for buttons","fancy_title":"UI-skaling for buttons","posts_count":1,"created_at":"2015-03-02T17:38:50.000Z","views":353,"reply_count":0,"like_count":0,"last_posted_at":"2015-03-02T17:38:50.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"ui-skaling-for-buttons","category_id":13,"word_count":764,"deleted_at":null,"user_id":205,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_894","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":1,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":205,"username":"TikariSakari","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f4b2a3/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":205,"username":"TikariSakari","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f4b2a3/{size}.png"},"last_poster":{"id":205,"username":"TikariSakari","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f4b2a3/{size}.png"}}}