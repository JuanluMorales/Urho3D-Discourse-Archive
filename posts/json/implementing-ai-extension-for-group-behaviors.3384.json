{"post_stream":{"posts":[{"id":19604,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2017-07-26T01:03:08.950Z","cooked":"\u003cp\u003eHi, all!\u003cbr\u003e\nWhile I tried to be as tactful and tasteful as I possibly could I think this post might\u003cbr\u003e\nbe considered offensive by some people, so I really sincerely apologize to them\u003cbr\u003e\nand ask to remain constructive. I don’t intend to offend anybody and I really like\u003cbr\u003e\nhelpful and friendly community.\u003cbr\u003e\nAs I will probably would write another long post which would break people’s brains,\u003cbr\u003e\nI thought I could ask my question in more picture/comic form, so people who won’t read could really\u003cbr\u003e\nget interest and actually try to understand what I want to ask.\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669.png\" title=\"ai_architecture.png\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669_2_597x500.png\" alt=\"ai_architecture\" width=\"597\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669_2_597x500.png, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669_2_895x750.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669_2_1194x1000.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003eai_architecture.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e2480×2076 515 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eWhat I want is simple - make group behaviors. Not only this one but as many as needed in systemic form.\u003cbr\u003e\nThe current AI architecture I use is based on individual agents. Similar to NinjaSnowWar,\u003cbr\u003e\nbut technologically improved (behavior tree, some complex mechanics, different specialized character controllers for vehicle, on-foot, etc.). But lets start from NinjaSnowWar or similar concept - how would you change the AI architecture of NinjaSnowWar to allow group behaviors?\u003cbr\u003e\n\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/6cb1683c72e827ef4215f5444662aeb3209c8778.png\" title=\"ai_architecture2.png\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/6cb1683c72e827ef4215f5444662aeb3209c8778_2_250x500.png\" alt=\"ai_architecture2\" width=\"250\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/6cb1683c72e827ef4215f5444662aeb3209c8778_2_250x500.png, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/6cb1683c72e827ef4215f5444662aeb3209c8778_2_375x750.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/6cb1683c72e827ef4215f5444662aeb3209c8778_2_500x1000.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/6cb1683c72e827ef4215f5444662aeb3209c8778_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003eai_architecture2.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e512×1024 76.5 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eMany games implement such systems, but I never seen any tutorials, any explanations\u003cbr\u003e\non AI architectures implementing this, I seen only very brief commentaries on GDC videos and some game AI papers. I really would like to see the code, architecture guides, blueprints, references, suggestions et al. about implementation of such architecture, to boost individual agent AI to group awareness AI.\u003c/p\u003e\n\u003cp\u003eAdditional thanks would be to a person who would teach me on this (I would pay for proper knowledge; most AI books contain too much words and too little information, the area looks heavily commercial, with very hard way to get to truth so proper pointers on practical references and tutorials would be very welcome, even if these are paid stuff).\u003c/p\u003e\n\u003cp\u003eHere I really hope that I just look in wrong direction and the answer is on surface, but really it looks like it is not a topic which is easily accessible.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2019-05-23T13:20:00.798Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":21,"reads":43,"readers_count":42,"score":113.6,"yours":false,"topic_id":3384,"topic_slug":"implementing-ai-extension-for-group-behaviors","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669.png","internal":false,"reflection":false,"title":"78ded3dbad4b6333346d40f0d681630e5f4f3669.png","clicks":0},{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/6cb1683c72e827ef4215f5444662aeb3209c8778.png","internal":false,"reflection":false,"title":"6cb1683c72e827ef4215f5444662aeb3209c8778.png","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19609,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2017-07-26T16:47:17.161Z","cooked":"\u003cp\u003eWhat I would do (having never done it, and not doing it at present) is have a group AI manager class that would have ‘slots’ to be filled, and assign these roles. If the GroupManager has control of the agent, it does nothing by itself (i.e. it doesn’t send the control signals) and just waits for the GroupManager to release it. I’m not certain what conditions I would use for entering the Group Behavior – naturally there is a base requirement of the number of agents available (in your example, 4 + 1 enemy). Given that scenario, I would probably have the enemy AI trigger it – have the red one store a list of aggressors/targets (when the NPCs attack, they are added to it, and then removed after a timeout and/or if they are defeated), and then if you have the required 4 aggressors randomly instantiate the GroupManager (say a 1/10 chance or something, or much lower if you are going to check every frame). The GroupManager is passed the list of aggressors, and assigns them to their roles, and it sends the commands that would otherwise be done by the individual agent (I am assuming you already have controls set up for the individual agents such as hold, attack, and play victim). The GroupManager will then execute until some condition is met – say while (Red is not defeated \u0026amp;\u0026amp; all Blues are alive \u0026amp;\u0026amp; timer \u0026lt;= 20 seconds) and then release the individual agents, notifying them of their role/last action (if they don’t record it) – this way they can (but don’t have to) do something different based on whether they were the victims or the attackers in the group managed scenario).\u003c/p\u003e\n\u003cp\u003eIf you already have in place methods of querying nearby AIs, then you don’t even need to have the Red agent trigger it – you can have some zone-based system (what I would do – give bounding regions for the possible scenarios, and have the manager check if conditions are right within the region – say in an alley for your given scenario) or a global one and it can create the GroupManager if the conditions are right (say a 4v1 fight in the given area). This also makes it easier should you want, e.g. a 2v2 group scenario, as it means you don’t have to figure out how the 2 red AIs coordinate to know that they both exist, and both (or individually) have the 2 blue enemies.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-07-26T16:47:17.161Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":32,"readers_count":31,"score":11.4,"yours":false,"topic_id":3384,"topic_slug":"implementing-ai-extension-for-group-behaviors","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19611,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2017-07-26T17:41:04.048Z","cooked":"\u003cp\u003eThanks for your answer, you added some things to think about.\u003c/p\u003e\n\u003cp\u003eHow would you implement zones - trigger rigid bodies? I actually never seen these implemented using\u003cbr\u003e\nphysics, but nobody shared the details…\u003c/p\u003e\n\u003cp\u003eAlso these zones probably should be dynamic and spawned around camera… sort of simulation bubble -\u003cbr\u003e\nany ideas on how to implement it?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-07-26T17:41:04.048Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":10.8,"yours":false,"topic_id":3384,"topic_slug":"implementing-ai-extension-for-group-behaviors","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19612,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2017-07-26T18:24:01.971Z","cooked":"\u003cp\u003eLast question first, since the code is fairly long: depending on the scale of your game (you are going for a \u003cem\u003every\u003c/em\u003e large scale, right?) you may want to just not bother with dynamic spawning. If you are reasonably sure that it would be an issue, it depends on how you set up your map. I set up my maps with a bunch of ‘chunks’ that are each a node with all of the stuff in that chunk parented to it (the static stuff – player is just parented to scene). In that case, since my chunks are disabled and enabled, I would just have the chunk handle spawning the triggers, or, if you have a fairly static scene layout, you could just have them loaded already and enable/disable the trigger node (this is what I do, but I think you are going for a larger scale than I am and that could require different solutions). If your map is not divided this way, you may be able to use the Octree to accomplish the zoning, provided you aren’t going for a particularly map-aware zoning (i.e. if the zones don’t have to correspond to, say, a room or an alley). If you do want the map-aware zoning, but having the collision stuff spawned and just disabled is a problem, you can instead just mark your map with some empty nodes that have either the Trigger component loaded and let it spawn the collision stuff as needed later, storing the parameters needed in the node’s user variables (or the trigger’s attributes). If this to is too burdensome, you will probably have to create a subsystem for it that stores all of the triggers in some structure efficient for querying based off of proximity to a location (i.e. the camera’s), and then you instantiate the first 50 or so of them every second or so, and perhaps give them all a timer so they remove themselves after 15 seconds or whatever if they are not re-instantiated (to be clear, I have very little idea of what you would need for this, so I would test the other solutions first, as I have no real idea if this is a good answer).\u003c/p\u003e\n\u003cp\u003eAnd here’s how I set up triggers for battles in my game. You would probably also need to subscribe to E_NODECOLLISIONEND, and then remove the agents that leave the region and possibly also those that end up assigned to a group action (if the group action takes it out of the region that is fine, as the GroupManager would still store them)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-cpp\"\u003e#pragma once\n\n#include \u0026lt;Urho3D.h\u0026gt;\n#include \u0026lt;Scene/Component.h\u0026gt;\n#include \u0026lt;Core/Object.h\u0026gt;\n#include \u0026lt;Core/Context.h\u0026gt;\n#include \"../CollisionMasks.hpp\"\n#include \"../Character.hpp\"\n#include \u0026lt;Physics/PhysicsEvents.h\u0026gt;\n\nusing namespace Urho3D;\n\n#include \"BattleEvents.hpp\"\n#include \"BattleQueue.hpp\"\n#include \u0026lt;IO/Log.h\u0026gt;\n\nclass BattleTrigger: public Component\n{\n\tOBJECT(BattleTrigger, Component);\n\n\tSharedPtr\u0026lt;BattleQueue\u0026gt; battle_;\n\n\tBattleTrigger(Context* context): Component(context), battle_(\n\t\t\tnew BattleQueue(context, nullptr, 2/*number of participants*/))\n\t{\n\n\t}\n\n\tstatic void RegisterBattleTrigger(Context* context)\n\t{\n\t\tcontext-\u0026gt;RegisterFactory\u0026lt;BattleTrigger\u0026gt;();\n\t}\n\n\t/// Handle scene node being assigned at creation.\n\tvirtual void OnNodeSet(Node* node)\n\t{\n\t\tif (node == 0)\n\t\t\treturn;\n\t\t//todo: change to GetComponents?\n\t\tRigidBody* body = node-\u0026gt;GetComponent\u0026lt;RigidBody\u0026gt;();\n\t\tif (body)\n\t\t{\n\t\t\tbody-\u0026gt;SetCollisionLayerAndMask(COLLISION_BATTLE, COLLISION_PERSON);\n\t\t\tbody-\u0026gt;SetTrigger(true);\n\t\t\tSubscribeToEvent(node, E_NODECOLLISIONSTART, \n\t\t\t\t\tHANDLER(BattleTrigger, HandleCollision));\n\t\t}\n\t}\n\tvoid HandleCollision(StringHash eventType, VariantMap\u0026amp; eventData)\n\t{\n\t\tif (!enabled_)\n\t\t\treturn;\n\t\tusing namespace NodeCollisionStart;\n\t\tNode*other = (Node*)eventData[P_OTHERNODE].GetPtr();\n\t\tif (other == nullptr)\n\t\t\treturn;\n\t\tusing namespace BattleTriggered;\n\t\teventData[BattleTriggered::P_BATTLE_QUEUE] = battle_;\n\t\teventData[P_TARGET] = other;\n//The pretrigger is so that the character can 'capture' the trigger and display a dialogue.\n// Skipping to the E_BATTLE_TRIGGERED is more like what you want.\n// Or just storing the agents that enter and removing them when they leave,\n// using this class as the 'manager' that decides when a GroupManager should be instantiated\n\t\tnode_-\u0026gt;SendEvent(E_BATTLE_PRE_TRIGGERED, eventData);\n\t\tif (eventData[BattlePreTriggered::P_CAPTURE].GetBool())\n\t\t\tLOGDEBUG(\"Battle Trigger Captured.\");\n\t\telse\n\t\t\tnode_-\u0026gt;SendEvent(E_BATTLE_TRIGGERED, eventData);\n//In my game, the Player object receives this event and then has the queue start the battle\n\t}\n};\n\u003c/code\u003e\u003c/pre\u003e","post_number":4,"post_type":1,"updated_at":"2017-07-26T18:24:01.971Z","reply_count":1,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":11.0,"yours":false,"topic_id":3384,"topic_slug":"implementing-ai-extension-for-group-behaviors","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19627,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2017-07-27T08:58:00.414Z","cooked":"\u003cp\u003eThank you so much for the code!\u003c/p\u003e\n\u003cp\u003eI see you use custom events, right?\u003c/p\u003e\n\u003cp\u003eI wonder about this part:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003enode_-\u0026gt;SendEvent(E_BATTLE_PRE_TRIGGERED, eventData);\nif (eventData[BattlePreTriggered::P_CAPTURE].GetBool())\n\tLOGDEBUG(\"Battle Trigger Captured.\");\nelse\n\tnode_-\u0026gt;SendEvent(E_BATTLE_TRIGGERED, eventData);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYour comment above is qute clear, but I wonder how do you fill the eventData part - is it happens directly in handler? is such reuse of eventData safe?\u003c/p\u003e\n\u003cp\u003eAnyway, I currently think of strategy to use having behavior trees handling group behaviors.\u003c/p\u003e\n\u003cp\u003e\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/4021632c16286a0b93154dcb05f06cd5e43babcb.png\" title=\"ai_behavior_tree_problem.png\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/4021632c16286a0b93154dcb05f06cd5e43babcb_2_250x500.png\" alt=\"ai_behavior_tree_problem\" width=\"250\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/4021632c16286a0b93154dcb05f06cd5e43babcb_2_250x500.png, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/4021632c16286a0b93154dcb05f06cd5e43babcb_2_375x750.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/4021632c16286a0b93154dcb05f06cd5e43babcb_2_500x1000.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/4021632c16286a0b93154dcb05f06cd5e43babcb_2_10x10.png\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003csvg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#far-image\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003cspan class=\"filename\"\u003eai_behavior_tree_problem.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e512×1024 28.2 KB\u003c/span\u003e\u003csvg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"\u003e\u003cuse xlink:href=\"#discourse-expand\"\u003e\u003c/use\u003e\u003c/svg\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eI’d like to inject group behavior somehow so they do not increase complexity of BTs\u003cbr\u003e\nand still do not be a heavy hack.\u003cbr\u003e\nI need to think of this now, as I currently re-implement the AI architecture to get rid of many shortcomings, as I was going from one shortcoming to next blindly, because I never did such thing and there is too little hints around here… Actually I think I need to write a tutorial of sorts after I finally get enlightened\u003cbr\u003e\nso to have some records left \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=9\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2019-05-23T13:20:00.996Z","reply_count":1,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":10.4,"yours":false,"topic_id":3384,"topic_slug":"implementing-ai-extension-for-group-behaviors","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/4021632c16286a0b93154dcb05f06cd5e43babcb.png","internal":false,"reflection":false,"title":"4021632c16286a0b93154dcb05f06cd5e43babcb.png","clicks":0}],"read":true,"user_title":null,"reply_to_user":{"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19628,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2017-07-27T08:59:50.509Z","cooked":"\u003cp\u003eSo if i have large number of zones with large number of group behaviors, together with zone-based behaviors, I need something systemic to handle behavior injection, and i still could not find ejjective way to do that…\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-07-27T08:59:50.509Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":26,"readers_count":25,"score":5.2,"yours":false,"topic_id":3384,"topic_slug":"implementing-ai-extension-for-group-behaviors","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19642,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2017-07-27T15:42:13.672Z","cooked":"\u003cp\u003eI am pretty sure that what I did was safe. P_CAPTURE, if it is not actually filled in the handler, should just be constructed as a new Variant, which returns false since the type is not VAR_BOOL. Let’s say, at least, that what I did has not been a problem for me. I think it should be completely safe (since I’ve defined the two events to use the same parameters, so a new variant map doesn’t need to be filled, and as eventData is passed by reference to the handlers it has worked). I suppose engine changes could break it, but that isn’t something I need to be too worried about, as I can always just not move to the next release.\u003c/p\u003e\n\u003cp\u003eLet us know how it goes! A tutorial sounds great \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e\n\u003cp\u003eWhat I might think about doing is having the behavior trees all just query ‘the engine’ about behaviors attached to their location every so often, and then cache those to be considered for a while. I’ve no real experience in behavior trees, though, so perhaps someone else can help you, otherwise good luck!\u003c/p\u003e\n\u003cp\u003eAlso, if you’ve not seen it, I think this presentation \u003cem\u003emight\u003c/em\u003e have gone in to how they implemented location-based behaviors (though I watched it quite a while ago, so no promises): \u003ca href=\"https://www.youtube.com/watch?v=OiFdlYY-GFA\" rel=\"nofollow noopener\"\u003eBuilding a Better Centaur AI at Massive Scale\u003c/a\u003e\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-07-27T15:42:13.672Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":25,"readers_count":24,"score":15.0,"yours":false,"topic_id":3384,"topic_slug":"implementing-ai-extension-for-group-behaviors","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.youtube.com/watch?v=OiFdlYY-GFA","internal":false,"reflection":false,"title":"YouTube","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19643,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2017-07-27T20:21:12.999Z","cooked":"\u003cp\u003eThanks for your answers!\u003c/p\u003e\n\u003cp\u003eI watched this one too, and remember they do a bit of teaser but do not go into much detail\u003cbr\u003e\nof implementation.\u003cbr\u003e\nAbout BTs - I implemented them in very rough way using article on \u003ca href=\"https://www.youtube.com/watch?v=n4aREFb3SsU\" rel=\"nofollow noopener\"\u003ehttps://www.youtube.com/watch?v=n4aREFb3SsU\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://aigamedev.com/insider/tutorial/second-generation-bt/\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\"\u003ehttp://aigamedev.com/insider/tutorial/second-generation-bt/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eusing AngelScript first, but almost finished rewrite to C++. I also wrote graphical editor for them. I wonder if it is feasible to add them to engine though,\u003cbr\u003e\nas Urho rarely have high-level engine constructs… probably should ask such question to \u003ca class=\"mention\" href=\"/u/cadaver\"\u003e@cadaver\u003c/a\u003e\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2017-07-27T20:21:12.999Z","reply_count":0,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":4.4,"yours":false,"topic_id":3384,"topic_slug":"implementing-ai-extension-for-group-behaviors","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.youtube.com/watch?v=n4aREFb3SsU","internal":false,"reflection":false,"clicks":5},{"url":"http://aigamedev.com/insider/tutorial/second-generation-bt/","internal":false,"reflection":false,"title":"Understanding the Second-Generation of Behavior Trees – #AltDevConf | AiGameDev.com","clicks":0}],"read":true,"user_title":null,"reply_to_user":{"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":19650,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2017-07-28T05:44:48.439Z","cooked":"\u003cp\u003eI found a great approach to implement various systems with Urho. It just occured to me that I could communicate events through components of the same node, which makes scripted behavior tree nodes not necessary which allows to remove huge chunk of ugly code. So I can replace all BT action nodes with events and implement everything in much simpler way. This also can be used to inject zone-based behaviors easily.\u003cbr\u003e\nAlso this can decouple tree from character controller, which is also great!\u003cbr\u003e\nLooks I have some refactoring work now, and the result will be much better than before!\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2017-07-28T05:44:48.439Z","reply_count":0,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":3.8,"yours":false,"topic_id":3384,"topic_slug":"implementing-ai-extension-for-group-behaviors","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[19604,19609,19611,19612,19627,19628,19642,19643,19650]},"timeline_lookup":[[1,1946],[3,1945],[8,1944]],"suggested_topics":[{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7125,"title":"Android mobile shows jaggies in the instersection plane-terrain","fancy_title":"Android mobile shows jaggies in the instersection plane-terrain","slug":"android-mobile-shows-jaggies-in-the-instersection-plane-terrain","posts_count":5,"reply_count":3,"highest_post_number":5,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d36aedb4e8cf5409efca6c976aae7e4a5c499eb9.png","created_at":"2022-01-11T11:59:18.993Z","last_posted_at":"2022-01-11T21:27:40.692Z","bumped":true,"bumped_at":"2022-01-12T07:36:41.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":129,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7129,"title":"Best Model Import Pipeline as of Jan 2022?","fancy_title":"Best Model Import Pipeline as of Jan 2022?","slug":"best-model-import-pipeline-as-of-jan-2022","posts_count":7,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2022-01-17T09:27:23.432Z","last_posted_at":"2022-01-17T20:37:59.458Z","bumped":true,"bumped_at":"2022-01-17T20:37:59.458Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":170,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]}],"tags_descriptions":{},"id":3384,"title":"Implementing AI extension for group behaviors","fancy_title":"Implementing AI extension for group behaviors","posts_count":9,"created_at":"2017-07-26T01:03:08.850Z","views":725,"reply_count":6,"like_count":0,"last_posted_at":"2017-07-28T05:44:48.439Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"implementing-ai-extension-for-group-behaviors","category_id":10,"word_count":2138,"deleted_at":null,"user_id":554,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669_2_1024x857.png","slow_mode_seconds":0,"draft":null,"draft_key":"topic_3384","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":9,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":[{"max_width":null,"max_height":null,"width":2480,"height":2076,"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669.png"},{"max_width":1024,"max_height":1024,"width":1024,"height":857,"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/1X/78ded3dbad4b6333346d40f0d681630e5f4f3669_2_1024x857.png"}],"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","post_count":6,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png"},"last_poster":{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png"},"links":[{"url":"https://www.youtube.com/watch?v=n4aREFb3SsU","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":554,"domain":"www.youtube.com","root_domain":"youtube.com"}]}}