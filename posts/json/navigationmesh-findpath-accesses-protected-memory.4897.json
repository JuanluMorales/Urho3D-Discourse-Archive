{"post_stream":{"posts":[{"id":27986,"name":"","username":"I3DB","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","created_at":"2019-02-06T00:25:56.675Z","cooked":"\u003cp\u003eUsing the SharpReality binding and using the FeatureSample Navigation.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Portable/NavigationMesh.cs#L15\" rel=\"nofollow noopener\"\u003eThe line of code throwing the exception is this one\u003c/a\u003e, as shown:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evar ptr = urho_navigationmesh_findpath(Handle, start, end, out int count);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAll the arguments look fine. The definition of the dll call just before that call at the link above is:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e[DllImport(Consts.NativeImport, CallingConvention = CallingConvention.Cdecl)]\ninternal extern static IntPtr urho_navigationmesh_findpath(IntPtr navMesh, Vector3 start, Vector3 end, out int count);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUpon making that call, the error generated is:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eException thrown: 'System.AccessViolationException' in Urho.dll\nAn unhandled exception of type 'System.AccessViolationException' occurred in Urho.dll\nAttempted to read or write protected memory. This is often an indication that other memory is corrupt.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOther platforms I’ve run this on work fine. (WPF, winForms). But it fails on any UWP platform.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Native/glue.cpp#L328\" rel=\"nofollow noopener\"\u003eglue.cpp\u003c/a\u003e defines the call as:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eDllExport Interop::Vector3 *\nurho_navigationmesh_findpath(NavigationMesh * navMesh, const class Urho3D::Vector3 \u0026amp; start, const class Urho3D::Vector3 \u0026amp; end, int *count)\n\t{\n\t\tPODVector\u0026lt;Vector3\u0026gt; dest;\n\t\tnavMesh-\u0026gt;FindPath(dest, start, end);\n\t\tif (dest.Size() == 0)\n\t\t\treturn NULL;\n\t\t*count = dest.Size();\n\t\tInterop::Vector3 * results = new Interop::Vector3[dest.Size()];\n\t\tfor (int i = 0; i \u0026lt; dest.Size(); i++) {\n\t\t\tauto vector = *((Interop::Vector3  *) \u0026amp;(dest[i]));\n\t\t\tresults[i] = vector;\n\t\t}\n\t\treturn results;\n\t}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eImmediately preceeding that call, a call to navMesh.FindNearestPoint is made, and it runs flawlessly.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e[DllImport (Consts.NativeImport, CallingConvention = CallingConvention.Cdecl)]\ninternal static extern Vector3 NavigationMesh_FindNearestPoint (IntPtr handle, ref Urho.Vector3 point, ref Urho.Vector3 extents, dtQueryFilter* filter, uint* nearestRef);\n\t\t/// \u0026lt;summary\u0026gt;\n\t\t/// Find the nearest point on the navigation mesh to a given point. Extents specifies how far out from the specified point to check along each axis.\n\t\t/// \u0026lt;/summary\u0026gt;\n\t\tpublic Vector3 FindNearestPoint (Urho.Vector3 point, Urho.Vector3 extents, dtQueryFilter* filter = null, uint* nearestRef = null)\n\t\t{\n\t\t\tRuntime.ValidateRefCounted (this);\n\t\t\treturn NavigationMesh_FindNearestPoint (handle, ref point, ref extents, filter, nearestRef);\n\t\t}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Portable/Generated/binding.cpp#L23986\" rel=\"nofollow noopener\"\u003ebinding.cpp\u003c/a\u003e, a generated file, defines that call as:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eDllExport Interop::Vector3 \nNavigationMesh_FindNearestPoint (Urho3D::NavigationMesh *_target, const class Urho3D::Vector3 \u0026amp; point, const class Urho3D::Vector3 \u0026amp; extents, const class dtQueryFilter * filter, dtPolyRef * nearestRef)\n{\n\treturn *((Interop::Vector3  *) \u0026amp;(_target-\u0026gt;FindNearestPoint (point, extents, filter, nearestRef)));\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eMore details on the error occurring. \u003ca href=\"https://github.com/xamarin/Urho3D/blob/4862691d18c0ed40895ba532dd7ba6f17cd2c763/Source/Urho3D/Navigation/NavigationMesh.cpp#L677\" rel=\"nofollow noopener\"\u003eAt this call:\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e[navMesh-\u0026gt;FindPath(dest, start, end);](https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Native/glue.cpp#L331)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe start and end vectors cannot be read by the debugger, both start and end are read as\u003cbr\u003e\n\u003ccode\u003e\u0026lt;Struct At NULL\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThe actual crash is when calculating localEnd, the localStart works, this is code from \u003ca href=\"https://github.com/xamarin/Urho3D/blob/4862691d18c0ed40895ba532dd7ba6f17cd2c763/Source/Urho3D/Navigation/NavigationMesh.cpp#L677\" rel=\"nofollow noopener\"\u003eNavigationMesh.cpp\u003c/a\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e Vector3 localStart = inverse * start;\n Vector3 localEnd = inverse * end;\n\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2019-02-06T07:54:09.722Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":18,"readers_count":17,"score":33.6,"yours":false,"topic_id":4897,"topic_slug":"navigationmesh-findpath-accesses-protected-memory","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":12,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Native/glue.cpp#L328","internal":false,"reflection":false,"title":"urho/glue.cpp at 050fdf9943b154549e7928b32f398e727191202a · xamarin/urho · GitHub","clicks":0},{"url":"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Portable/Generated/binding.cpp#L23986","internal":false,"reflection":false,"clicks":0},{"url":"https://github.com/xamarin/Urho3D/blob/4862691d18c0ed40895ba532dd7ba6f17cd2c763/Source/Urho3D/Navigation/NavigationMesh.cpp#L677","internal":false,"reflection":false,"title":"Urho3D/NavigationMesh.cpp at 4862691d18c0ed40895ba532dd7ba6f17cd2c763 · xamarin/Urho3D · GitHub","clicks":0},{"url":"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Portable/NavigationMesh.cs#L15","internal":false,"reflection":false,"title":"urho/NavigationMesh.cs at 050fdf9943b154549e7928b32f398e727191202a · xamarin/urho · GitHub","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1086,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27987,"name":"","username":"I3DB","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","created_at":"2019-02-06T01:27:58.618Z","cooked":"\u003cp\u003eThis is a bug in the SharpReality binding.\u003c/p\u003e\n\u003cp\u003eTo make this work for UWP, requires the start and end be passed in as ref. \u003ca href=\"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Portable/NavigationMesh.cs#L8\" rel=\"nofollow noopener\"\u003eHere’s the original dll call definition\u003c/a\u003e, and my proposed follows:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e[DllImport(Consts.NativeImport, CallingConvention = CallingConvention.Cdecl)]\ninternal extern static IntPtr urho_navigationmesh_findpath(IntPtr navMesh, ref Urho.Vector3 start, ref Urho.Vector3 end, out int count);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNext, the two vectors must be passed as ref. \u003ca href=\"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Portable/NavigationMesh.cs#L15\" rel=\"nofollow noopener\"\u003eThe original is here\u003c/a\u003e, my suggested changes is as shown:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evar ptr = urho_navigationmesh_findpath(Handle, ref start, ref end, out int count);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen it works.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2019-02-06T07:54:02.026Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":16,"readers_count":15,"score":18.2,"yours":false,"topic_id":4897,"topic_slug":"navigationmesh-findpath-accesses-protected-memory","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Portable/NavigationMesh.cs#L8","internal":false,"reflection":false,"title":"urho/NavigationMesh.cs at 050fdf9943b154549e7928b32f398e727191202a · xamarin/urho · GitHub","clicks":0},{"url":"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Portable/NavigationMesh.cs#L15","internal":false,"reflection":false,"title":"urho/NavigationMesh.cs at 050fdf9943b154549e7928b32f398e727191202a · xamarin/urho · GitHub","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1086,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true}],"stream":[27986,27987]},"timeline_lookup":[[1,1386]],"suggested_topics":[{"id":7105,"title":"Multiple Application.UI Roots?","fancy_title":"Multiple Application.UI Roots?","slug":"multiple-application-ui-roots","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/7/74b10ce575f1b69fe43be4abcb07605d74a1d27c_2_1024x544.jpeg","created_at":"2021-12-20T08:55:14.707Z","last_posted_at":"2021-12-22T02:33:05.795Z","bumped":true,"bumped_at":"2021-12-22T02:33:05.795Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":243,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7146,"title":"How create affordable comfortable and modern terrain?","fancy_title":"How create affordable comfortable and modern terrain?","slug":"how-create-affordable-comfortable-and-modern-terrain","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-01-21T15:20:08.910Z","last_posted_at":"2022-01-21T21:51:58.799Z","bumped":true,"bumped_at":"2022-01-21T22:03:14.896Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7179,"title":"Need help with cusomized PBR renderpath","fancy_title":"Need help with cusomized PBR renderpath","slug":"need-help-with-cusomized-pbr-renderpath","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-02-01T09:04:58.692Z","last_posted_at":"2022-02-03T17:35:34.174Z","bumped":true,"bumped_at":"2022-02-03T17:35:34.174Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":13,"views":205,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster, Accepted Answer","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7215,"title":"How to build rbfx?","fancy_title":"How to build rbfx?","slug":"how-to-build-rbfx","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-03-11T01:28:40.314Z","last_posted_at":"2022-03-12T19:16:39.360Z","bumped":true,"bumped_at":"2022-03-12T19:16:39.360Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":268,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1447,"username":"Batch","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f17d59/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7243,"title":"Android compile fails","fancy_title":"Android compile fails","slug":"android-compile-fails","posts_count":5,"reply_count":2,"highest_post_number":5,"image_url":null,"created_at":"2022-04-25T08:46:07.947Z","last_posted_at":"2022-05-06T08:22:51.592Z","bumped":true,"bumped_at":"2022-05-06T08:22:51.592Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":181,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":4897,"title":"NavigationMesh.FindPath accesses protected memory","fancy_title":"NavigationMesh.FindPath accesses protected memory","posts_count":2,"created_at":"2019-02-06T00:25:56.568Z","views":239,"reply_count":0,"like_count":1,"last_posted_at":"2019-02-06T01:27:58.618Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"navigationmesh-findpath-accesses-protected-memory","category_id":10,"word_count":585,"deleted_at":null,"user_id":1086,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4897","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":2,"username":"I3DB","excerpt":"This is a bug in the SharpReality binding. \nTo make this work for UWP, requires the start and end be passed in as ref. \u003ca href=\"https://github.com/xamarin/urho/blob/050fdf9943b154549e7928b32f398e727191202a/Bindings/Portable/NavigationMesh.cs#L8\" rel=\"nofollow noopener\"\u003eHere’s the original dll call definition\u003c/a\u003e, and my proposed follows: \n[DllImport(Consts.NativeImport, CallingConvention = CallingConvention.Cdecl)]\ninternal extern static IntPtr urho_n\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1086,"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1086,"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png"},"last_poster":{"id":1086,"username":"I3DB","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/3ec8ea/{size}.png"}}}