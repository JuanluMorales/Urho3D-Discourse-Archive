{"post_stream":{"posts":[{"id":11003,"name":"Per Hyyrynen","username":"Per_Hyyrynen","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/bbe5ce/{size}.png","created_at":"2016-03-15T15:55:21.000Z","cooked":"\u003cp\u003eI’ve been fooling around a bit in Urho3D and am very impressed with it so far. The samples has been very useful.\u003c/p\u003e\n\u003cp\u003eI have a plane that basically is a billboard with animated content on it. By animated content I mean I rotate and translate them.\u003c/p\u003e\n\u003cp\u003eI have a bunch of other objects on it that I animate. When the animated objects are partially outside the bounds of the billboard I wish to mask the part of the object that is outside of the billboard.\u003c/p\u003e\n\u003cp\u003eThe way I managed to achieve this is by setting up the billboard and its animated objects in its own scene and then use RenderToTexture to get the content on the actual billboard. It works very well! I’ve noticed a difference in performance compared to having all the objects on the same scene and having the billboard in its own scene with RenderToTexture. If I start introducing multiple billboards with RenderToTexture it adds up. I’ve resolved this by decreasing the reslution of RenderToTexture if I have too many billboards.\u003c/p\u003e\n\u003cp\u003eFor my case this is good enough. I still can’t help to wonder.\u003c/p\u003e\n\u003cp\u003eIs there a better way to do this?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:11:04.521Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":10,"readers_count":9,"score":32.0,"yours":false,"topic_id":1884,"topic_slug":"rendertotexture-as-volumetric-mask","display_username":"Per Hyyrynen","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":433,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":11006,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-03-15T16:36:30.000Z","cooked":"\u003cp\u003eCan you draw geometry, for example black walls, that mask everything outside?\u003c/p\u003e\n\u003cp\u003eIf you had full control of the rendering you could also use the stencil buffer for masking. Unfortunately Urho already uses the stencil buffer for its own optimizations in the high-level scene rendering (light influence masking) so you would have to go low-level, using the Graphics class directly.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:11:04.717Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":1884,"topic_slug":"rendertotexture-as-volumetric-mask","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":11012,"name":"","username":"codingmonkey","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","created_at":"2016-03-15T17:45:08.000Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eI wish to mask the part of the object that is outside of the billboard.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eYou may try this trick:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eadd for yours billboard technique with additional pass let’s say - “bmask”\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;technique vs=\"LitSolid\" ps=\"LitSolid\" psdefines=\"DIFFMAP\"\u0026gt;\n    \u0026lt;pass name=\"base\" /\u0026gt;\n    \u0026lt;pass name=\"litbase\" psdefines=\"AMBIENT\" /\u0026gt;\n    \u0026lt;pass name=\"light\" depthtest=\"equal\" depthwrite=\"false\" blend=\"add\" /\u0026gt;\n    \u0026lt;pass name=\"prepass\" psdefines=\"PREPASS\" /\u0026gt;\n    \u0026lt;pass name=\"material\" psdefines=\"MATERIAL\" depthtest=\"equal\" depthwrite=\"false\" /\u0026gt;\n    \u0026lt;pass name=\"deferred\" psdefines=\"DEFERRED\" /\u0026gt;\n    \u0026lt;pass name=\"depth\" vs=\"Depth\" ps=\"Depth\" /\u0026gt;\n    \u0026lt;pass name=\"shadow\" vs=\"Shadow\" ps=\"Shadow\" /\u0026gt;\n    \u0026lt;pass name=\"bmask\" vs=\"YourShaderToWriteBWColor\" ps=\"YourShaderToWriteBWColor\" /\u0026gt;\n\u0026lt;/technique\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eYourShaderToWriteBWColor.glsl\u003c/p\u003e\n\u003cp\u003e[spoiler][code]\u003cspan class=\"hashtag\"\u003e#include\u003c/span\u003e “Uniforms.glsl”\u003cbr\u003e\n\u003cspan class=\"hashtag\"\u003e#include\u003c/span\u003e “Samplers.glsl”\u003cbr\u003e\n\u003cspan class=\"hashtag\"\u003e#include\u003c/span\u003e “Transform.glsl”\u003cbr\u003e\n\u003cspan class=\"hashtag\"\u003e#include\u003c/span\u003e “ScreenPos.glsl”\u003c/p\u003e\n\u003cp\u003evoid VS()\u003cbr\u003e\n{\u003cbr\u003e\nmat4 modelMatrix = iModelMatrix;\u003cbr\u003e\nvec3 worldPos = GetWorldPos(modelMatrix);\u003cbr\u003e\ngl_Position = GetClipPos(worldPos);\u003cbr\u003e\n}\u003c/p\u003e\n\u003cp\u003evoid PS()\u003cbr\u003e\n{\u003cbr\u003e\ngl_FragColor.rgb = vec3(1.0);\u003cbr\u003e\n}[/code][/spoiler]\u003c/p\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e\n\u003cp\u003eadd in RenderPath new RTT (with screen size or less) I think 8-bit for mask is enough let’s say it named as \"bmaskRTT\"\u003cbr\u003e\nSo you are add into head of RP: \u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ealso add scene pass to RenderPath what will be used for billboards with your custom material/technique what have “bmask” material pass\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"4\"\u003e\n\u003cli\u003eat last you have mask and you still do not render your objects what need masking.\u003cbr\u003e\nSo, at this step you will need tweak shader of this objects(shader) to let use this mask. and add bmask RTT for scenepass into TU where this object are rendered\u003cbr\u003e\nPrepare workaround for shader with put all needed data in RenderPath pass:\u003cbr\u003e\nIt’s may looked like this:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ccode\u003e    \u0026lt;command type=\"scenepass\" pass=\"ThereisWillbeDrawObjectWhatMaskedByBMASKRTT\"  output=\"viewport\"\u0026gt;\n        \u0026lt;texture unit=\"diffuse\" name=\"bmask\" /\u0026gt;\n    \u0026lt;/command\u0026gt;\u003c/code\u003e\u003cbr\u003e\nso and shader for this will be quite simple it fetch from diffuse(bmask).a \u0026lt; 0.5 you write result color of objects, if not you doing discard.\u003c/p\u003e\n\u003cp\u003ethere maybe needed little fixes/polishing but main concept of using this trick I think simple.\u003cbr\u003e\nIn this case you do not need second scenes and other stuff, you just works only with RTT and custom shaders/passes in RenderPath.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ealso don’t forget clear yours custom RTT by clear command for properly rendering working in some cases.\u003c/li\u003e\n\u003c/ul\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:11:05.140Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":1884,"topic_slug":"rendertotexture-as-volumetric-mask","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":148,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[11003,11006,11012]},"timeline_lookup":[[1,2444],[3,2443]],"suggested_topics":[{"id":7304,"title":"Urho3D is crashing on Android 12","fancy_title":"Urho3D is crashing on Android 12","slug":"urho3d-is-crashing-on-android-12","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-28T10:03:51.280Z","last_posted_at":"2022-07-28T10:03:51.349Z","bumped":true,"bumped_at":"2022-07-28T10:38:06.014Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":126,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7344,"title":"Do we give up supporting dx11？","fancy_title":"Do we give up supporting dx11？","slug":"do-we-give-up-supporting-dx11","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-03T09:37:37.893Z","last_posted_at":"2022-11-03T13:09:15.153Z","bumped":true,"bumped_at":"2022-11-03T15:28:58.128Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":78,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7347,"title":"How does Urho handle script objects each frame?","fancy_title":"How does Urho handle script objects each frame?","slug":"how-does-urho-handle-script-objects-each-frame","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-08T02:33:56.461Z","last_posted_at":"2022-11-08T14:46:09.857Z","bumped":true,"bumped_at":"2022-11-08T14:46:09.857Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":64,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7221,"title":"While ParticleEmitter emitting how can i change color?","fancy_title":"While ParticleEmitter emitting how can i change color?","slug":"while-particleemitter-emitting-how-can-i-change-color","posts_count":7,"reply_count":4,"highest_post_number":8,"image_url":null,"created_at":"2022-03-18T15:49:19.164Z","last_posted_at":"2022-03-20T10:51:58.767Z","bumped":true,"bumped_at":"2022-03-20T10:51:58.767Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":196,"category_id":14,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1503,"username":"tianlv777","name":"zerrrrr","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/a4c791/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7098,"title":"Cartoon Fire Effect","fancy_title":"Cartoon Fire Effect","slug":"cartoon-fire-effect","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2021-12-10T04:08:49.887Z","last_posted_at":"2021-12-12T02:49:51.076Z","bumped":true,"bumped_at":"2021-12-12T02:49:51.076Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":274,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]}],"tags_descriptions":{},"id":1884,"title":"RenderToTexture as Volumetric mask","fancy_title":"RenderToTexture as Volumetric mask","posts_count":3,"created_at":"2016-03-15T15:55:21.000Z","views":266,"reply_count":0,"like_count":0,"last_posted_at":"2016-03-15T17:45:08.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"rendertotexture-as-volumetric-mask","category_id":9,"word_count":643,"deleted_at":null,"user_id":433,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1884","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":148,"username":"codingmonkey","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":433,"username":"Per_Hyyrynen","name":"Per Hyyrynen","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/bbe5ce/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":433,"username":"Per_Hyyrynen","name":"Per Hyyrynen","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/p/bbe5ce/{size}.png"},"last_poster":{"id":148,"username":"codingmonkey","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png"}}}