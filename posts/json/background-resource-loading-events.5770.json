{"post_stream":{"posts":[{"id":34649,"name":"Chris Cranford","username":"Naros","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png","created_at":"2019-12-17T02:33:49.364Z","cooked":"\u003cp\u003eSo I have been looking into using the background resource loading semantics in \u003ccode\u003eResourceCache\u003c/code\u003e, but I’ve ran into something I’d like to understand if there is a better solution for.\u003c/p\u003e\n\u003cp\u003eLets say there are 10 objects that have subscribed to \u003ccode\u003eE_RESOURCEBACKGROUNDLOADED\u003c/code\u003e, and each of these objects have requested different files to be loaded.  In the event callback function, I’m having to write something like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid Tile::OnResourceLoaded(Urho3D::StsringHash eventType, Urho3D::VariantMap \u0026amp;eventData)\n{\n  using namespace Urho3D;\n  using namespace Urho3D::ResourceBackgroundLoaded;\n  if ( eventData[ P_SUCCESS ].GetBool() )\n  {\n    auto resource = reinterpret_cast\u0026lt;Resource*\u0026gt;( eventDAta[ P_RESOURCE ].GetPtr() );\n    if ( resource-\u0026gt;GetName().Compare( queuedResourceName ) == 0 )\n    {\n      // handle it here\n    }\n  }  \n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIs there anyway to actually do it more along the lines of this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid Tile::OnResourceLoaded(Urho3D::StsringHash eventType, Urho3D::VariantMap \u0026amp;eventData)\n{\n  using namespace Urho3D;\n  using namespace Urho3D::ResourceBackgroundLoaded;\n  if ( eventData[ P_USERDATA ].GetPtr() == this \u0026amp;\u0026amp; eventData[ P_SUCCESS ].GetBool() )\n  {\n    // do logic\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI can certainly modify the source of the engine or re-implement this in a custom way, but before I go down either of those paths, I was curious if there was any sort of way of actually indicating that only a single recipient is interested in a specific event.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2019-12-17T02:38:32.664Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":8,"reads":35,"readers_count":34,"score":47.0,"yours":false,"topic_id":5770,"topic_slug":"background-resource-loading-events","display_username":"Chris Cranford","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":876,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34665,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2019-12-17T22:20:20.221Z","cooked":"\u003cp\u003eIt’s not an answer to your question, but if it’s just about the speed of the string compassion you could use GetNameHash() instead for the name comparison.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2019-12-17T22:20:20.221Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":21.0,"yours":false,"topic_id":5770,"topic_slug":"background-resource-loading-events","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34669,"name":"Chris Cranford","username":"Naros","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png","created_at":"2019-12-18T06:51:05.815Z","cooked":"\u003cp\u003eThank \u003ca class=\"mention\" href=\"/u/sirnate0\"\u003e@SirNate0\u003c/a\u003e, that would definitely be an optimization for sure, but the basis for my question is to better understand if what I am after is outside the scope/usage of the event system.\u003c/p\u003e\n\u003cp\u003eFrom what I’ve gathered, this simply isn’t something the system provides out of the box.  I understand in the general sense that multiple recipients may be interested in being notified when the same resource becomes loaded, e.g. multiple objects that share a texture.\u003c/p\u003e\n\u003cp\u003eWhen its explicitly known up front that a single Object is only ever interested in being informed when a resource has been loaded, wouldn’t it make sense to offer a way to short-circuit the dispatch of the handlers somehow?\u003c/p\u003e\n\u003cp\u003eI have considered overloading \u003ccode\u003eBackgroundLoadResource\u003c/code\u003e that accepts a \u003ccode\u003eUrho3D::Object\u003c/code\u003e pointer that the caller can use to provide an intended recipient and when its not-null, that object will be used to masquerade the event dispatch.  This would allow an object to subscribe to the event on itself for my use case and therefore only its event handler would be informed when the resource is loaded.\u003c/p\u003e\n\u003cp\u003eWhile that would work, is there a better way as I’d prefer to avoid engine changes where possible to keep upgrade paths easy and clean where possible.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2019-12-18T06:51:05.815Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":29,"readers_count":28,"score":10.8,"yours":false,"topic_id":5770,"topic_slug":"background-resource-loading-events","display_username":"Chris Cranford","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":876,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[34649,34665,34669]},"timeline_lookup":[[1,1072],[2,1071]],"suggested_topics":[{"id":7323,"title":"Missing 1.8 release change log?","fancy_title":"Missing 1.8 release change log?","slug":"missing-1-8-release-change-log","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2022-09-06T02:36:19.003Z","last_posted_at":"2022-09-06T11:11:09.921Z","bumped":true,"bumped_at":"2022-09-06T11:11:09.921Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":117,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7358,"title":"Linux vs Windows benchmark","fancy_title":"Linux vs Windows benchmark","slug":"linux-vs-windows-benchmark","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/6/611198df38f129e8707d6211c16443e3db18c583.jpeg","created_at":"2022-11-18T02:28:29.520Z","last_posted_at":"2022-11-18T03:12:05.805Z","bumped":true,"bumped_at":"2022-11-18T03:12:05.805Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":86,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7188,"title":"Urho.Net 2D maps of Doom game","fancy_title":"Urho.Net 2D maps of Doom game","slug":"urho-net-2d-maps-of-doom-game","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/0/04438054f6d0aa310e84c25a92cf807242e2bc1a.png","created_at":"2022-02-07T17:06:26.933Z","last_posted_at":"2022-02-07T19:19:36.582Z","bumped":true,"bumped_at":"2022-02-07T19:19:36.582Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":149,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1487,"username":"bayganik","name":"Abadani667","avatar_template":"/user_avatar/discourse.urho3d.io/bayganik/{size}/3602_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7245,"title":"Custom memory allocation","fancy_title":"Custom memory allocation","slug":"custom-memory-allocation","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-04-29T12:59:26.211Z","last_posted_at":"2022-04-29T23:01:14.486Z","bumped":true,"bumped_at":"2022-04-29T23:01:14.486Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":193,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1386,"username":"mohamed.chit","name":"Mohamed Chit","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/d6d6ee/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1363,"username":"vmost","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/5f9b8f/{size}.png"}}]},{"id":7122,"title":"Faster allocations with PMR","fancy_title":"Faster allocations with PMR","slug":"faster-allocations-with-pmr","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-01-10T16:23:15.053Z","last_posted_at":"2022-01-10T16:42:29.752Z","bumped":true,"bumped_at":"2022-01-10T17:55:02.117Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":209,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1363,"username":"vmost","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/5f9b8f/{size}.png"}}]}],"tags_descriptions":{},"id":5770,"title":"Background resource loading events","fancy_title":"Background resource loading events","posts_count":3,"created_at":"2019-12-17T02:33:49.290Z","views":349,"reply_count":0,"like_count":1,"last_posted_at":"2019-12-18T06:51:05.815Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"background-resource-loading-events","category_id":7,"word_count":437,"deleted_at":null,"user_id":876,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_5770","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":876,"username":"Naros","name":"Chris Cranford","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":876,"username":"Naros","name":"Chris Cranford","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png"},"last_poster":{"id":876,"username":"Naros","name":"Chris Cranford","avatar_template":"/user_avatar/discourse.urho3d.io/naros/{size}/2728_2.png"}}}