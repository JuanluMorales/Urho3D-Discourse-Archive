{"post_stream":{"posts":[{"id":4924,"name":"","username":"codingmonkey","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","created_at":"2015-02-21T17:51:31.000Z","cooked":"\u003cp\u003eHi folks! Today I tried to deal with multithreading.\u003cbr\u003e\nI have something has been done and it works.\u003cbr\u003e\nfor the test, I concluded numbers to the console from another thread.\u003cbr\u003e\nHere are the basic pieces of code.\u003c/p\u003e\n\u003cp\u003e[pastebin]fidfpQKQ[/pastebin]\u003c/p\u003e\n\u003cp\u003eBut I have some questions.\u003c/p\u003e\n\u003cp\u003efor what purpose is WorkItem-\u0026gt; aux_ ?\u003cbr\u003e\nand what is the difference of aux from item-\u0026gt; start_ or item-\u0026gt; end_?\u003cbr\u003e\nis they can not be assigned the same thing ?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:03:38.657Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":77,"reads":18,"readers_count":17,"score":388.6,"yours":false,"topic_id":864,"topic_slug":"multithreading","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://discourse.urho3d.io/t/headless-server-multithread-console-prompt-interface-help/1209/2","internal":true,"reflection":true,"title":"Headless server multithread console prompt - Interface Help!","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":148,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":4929,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-02-21T21:12:40.000Z","cooked":"\u003cp\u003eYou can use the variables like you want, they’re only for the worker function and are not touched by anything else. Typically a worker function would process a range of items from start_ to end_ and maybe use some auxiliary data structure (aux_). A future improvement would perhaps be to simply subclass the worker task and remove those hardcoded variables.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:03:38.969Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":19,"readers_count":18,"score":8.8,"yours":false,"topic_id":864,"topic_slug":"multithreading","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":4935,"name":"","username":"codingmonkey","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","created_at":"2015-02-22T04:58:13.000Z","cooked":"\u003cp\u003eAnd how many of these work items user can create ?\u003c/p\u003e\n\u003cp\u003eLet’s say if I write a component that prepares the dynamic geometry in a work item (thread) on the current frame and on the next frame if the data is ready, they are copied into the main thread into the vertex buffer.\u003c/p\u003e\n\u003cp\u003eAnd if such components in the scene will be 100, it will create 100 threads at same time or still have 1 - 4 threads ?\u003cbr\u003e\nI mean these workers are create really new thread or they push all new-incoming works into some already existed threads ?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:03:39.427Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":19,"readers_count":18,"score":13.8,"yours":false,"topic_id":864,"topic_slug":"multithreading","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":148,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":4938,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-02-22T13:44:08.000Z","cooked":"\u003cp\u003eThey are pushed into a queue from which the worker threads take work to execute. New threads will not be spawned per item, so you can use as many work items as you want. By default the engine creates as many worker threads as there are physical CPU cores.\u003c/p\u003e\n\u003cp\u003eOne thing you want to note is the work item priority. The rendering system uses work items of priority 0xffffffff (maximum) to execute work it needs to complete immediately, but split onto several cores. For example culling. So if you want to make tasks that can take several frames to update, use lower priority.\u003c/p\u003e\n\u003cp\u003eOne more thing, that is easy to trip over: Urho’s shared pointers (or more accurately, the reference counter inside) are not thread-safe, so make sure you’re not manipulating them from the work functions and main thread simultaneously. Copying a shared pointer changes the ref count and counts as manipulation as well.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:03:39.698Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":20,"readers_count":19,"score":24.0,"yours":false,"topic_id":864,"topic_slug":"multithreading","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":13410,"name":"","username":"1vanK","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png","created_at":"2016-08-27T19:00:41.000Z","cooked":"\u003cp\u003e\u003ca href=\"https://urho3d.github.io/documentation/1.6/_multithreading.html\"\u003eurho3d.github.io/documentation/ … ading.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e[quote]\u003cbr\u003e\nWhen making your own work functions or threads, observe that the following things are unsafe and will result in undefined behavior and crashes, if done outside the main thread:\u003c/p\u003e\n\u003cp\u003eModifying scene or UI content[/quote]\u003c/p\u003e\n\u003cp\u003eAs far as I understand, this means a depreciation of creating and deleting of nodes. But it is allowed nodes transformation in a background thread?\u003c/p\u003e\n\u003cp\u003eEDIT: Is the event system thread-safe? If I add tag to Node in bacground thread it call SendEvent. Does it problems?\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:13:57.812Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":3.8,"yours":false,"topic_id":864,"topic_slug":"multithreading","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://urho3d.github.io/documentation/1.6/_multithreading.html","internal":false,"reflection":false,"title":"Urho3D - Documentation - Multithreading","clicks":12}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":263,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[4924,4929,4935,4938,13410]},"timeline_lookup":[[1,2831],[5,2278]],"suggested_topics":[{"id":7146,"title":"How create affordable comfortable and modern terrain?","fancy_title":"How create affordable comfortable and modern terrain?","slug":"how-create-affordable-comfortable-and-modern-terrain","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-01-21T15:20:08.910Z","last_posted_at":"2022-01-21T21:51:58.799Z","bumped":true,"bumped_at":"2022-01-21T22:03:14.896Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7177,"title":"Attaching a shader to a BorderImage","fancy_title":"Attaching a shader to a BorderImage","slug":"attaching-a-shader-to-a-borderimage","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-01-31T17:49:50.734Z","last_posted_at":"2022-02-01T02:22:10.927Z","bumped":true,"bumped_at":"2022-02-01T02:22:10.927Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":151,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]}],"tags_descriptions":{},"id":864,"title":"Multithreading","fancy_title":"Multithreading","posts_count":5,"created_at":"2015-02-21T17:51:31.000Z","views":637,"reply_count":0,"like_count":0,"last_posted_at":"2016-08-27T19:00:41.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"multithreading","category_id":10,"word_count":487,"deleted_at":null,"user_id":148,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_864","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":148,"username":"codingmonkey","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"moderator":true,"trust_level":4}],"created_by":{"id":148,"username":"codingmonkey","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png"},"last_poster":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"},"links":[{"url":"https://urho3d.github.io/documentation/1.6/_multithreading.html","title":"Urho3D - Documentation - Multithreading","internal":false,"attachment":false,"reflection":false,"clicks":12,"user_id":263,"domain":"urho3d.github.io","root_domain":"urho3d.github.io"}]}}