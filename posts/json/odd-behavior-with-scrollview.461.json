{"post_stream":{"posts":[{"id":2521,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-09-30T19:47:46.000Z","cooked":"\u003cp\u003eI want to confirm if this is a bug or if I’m just doing something wrong. There’s two issues here actually.\u003c/p\u003e\n\u003cp\u003eHere’s how I’m setting up my ScrollView:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e_scrollview_chat = chatContainer-\u0026gt;CreateChild\u0026lt;Urho3D::ScrollView\u0026gt;();\n_scrollview_chat-\u0026gt;SetStyleAuto();\n_scrollview_chat-\u0026gt;SetFocusMode(Urho3D::FM_NOTFOCUSABLE);\n_scrollview_chat-\u0026gt;SetEditable(false);\n_scrollview_chat-\u0026gt;SetSize(chatContainer-\u0026gt;GetWidth(), chatContainer-\u0026gt;GetHeight() - 24);\n_scrollview_chat-\u0026gt;SetPosition(0, 0);\n\nUrho3D::UIElement* chatContentElement = _scrollview_chat-\u0026gt;CreateChild\u0026lt;Urho3D::UIElement\u0026gt;();\n_scrollview_chat-\u0026gt;SetContentElement(chatContentElement);\nchatContentElement-\u0026gt;SetLayoutMode(Urho3D::LM_VERTICAL);\nchatContentElement-\u0026gt;SetStyleAuto();\nchatContentElement-\u0026gt;SetPosition(0, -12);\nchatContentElement-\u0026gt;SetAlignment(Urho3D::HA_LEFT, Urho3D::VA_BOTTOM);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere’s how I add a message:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eUrho3D::Text* text = _scrollview_chat-\u0026gt;GetContentElement()-\u0026gt;CreateChild\u0026lt;Urho3D::Text\u0026gt;();\n//text-\u0026gt;SetWordwrap(true);\ntext-\u0026gt;SetFont(font, 12);\ntext-\u0026gt;SetText(sender + \": \" +message);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe first issue that I’m experiencing is that the scrollbar doesn’t properly work with the alignment VA_BOTTOM. Elements populate bottom-to-top as they should, but the scrollbar still expands from the top instead of the bottom.\u003c/p\u003e\n\u003cp\u003eI’ve included some screenshots showing the behavior here: \u003ca href=\"http://imgur.com/a/ywDZn\" rel=\"nofollow noopener\"\u003eimgur.com/a/ywDZn\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eMy second issue is that word wrap does not work properly. In the above code, I’ve uncommented the following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003etext-\u0026gt;SetWordwrap(true);\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHowever what this does is cause the text not to appear entirely. The length of the text causes the height of the scrollview content element to become very tall, indicating that it is likely wrapping the text to be 1 character wide.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:00:37.338Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":14,"reads":9,"readers_count":8,"score":71.8,"yours":false,"topic_id":461,"topic_slug":"odd-behavior-with-scrollview","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://imgur.com/a/ywDZn","internal":false,"reflection":false,"title":"Imgur: The most awesome images on the Internet","clicks":2}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2525,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-10-01T08:10:20.000Z","cooked":"\u003cp\u003eThe ScrollView’s content element should be left at 0,0, alignment HA_LEFT, VA_TOP; think of it as a canvas extending from the top-left edge of the ScrollView.\u003c/p\u003e\n\u003cp\u003eYou can also use ListView which allows you to add child items directly (it handles the content container for you). Two examples of adding chat-like text elements to a list are Console.cpp and the Chat sample application.\u003c/p\u003e\n\u003cp\u003eHowever everything doable with ListView should also be doable with ScrollView, it just takes more effort. I’ll try to cook up a basic code example below.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:00:37.688Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":8,"readers_count":7,"score":1.6,"yours":false,"topic_id":461,"topic_slug":"odd-behavior-with-scrollview","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2527,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-10-01T08:40:39.000Z","cooked":"\u003cp\u003eHere is a minimal example. It’s in AngelScript but should be quite easily translatable to C++. While writing it I uncovered something weird related to use of wordwrap and vertical layout: the content element should resize itself to the children’s combined height, but is instead left too large if I don’t call UpdateLayout manually in the end. I’ll make an issue of that.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eUIElement@ content;\n\nvoid CreateUI()\n{\n    XMLFile@ uiStyle = cache.GetResource(\"XMLFile\", \"UI/DefaultStyle.xml\");\n    // Set style to the UI root so that elements will inherit it\n    ui.root.defaultStyle = uiStyle;\n\n    Window@ window = ui.root.CreateChild(\"Window\");\n    window.size = IntVector2(400, 300);\n    window.position = IntVector2(100, 100);\n    window.movable = true;\n    window.SetStyleAuto();\n    \n    ScrollView@ view = window.CreateChild(\"ScrollView\");\n    view.position = IntVector2(10, 10);\n    view.size = IntVector2(380, 280);\n    view.SetStyleAuto();\n    \n    content = UIElement();\n    view.contentElement = content;\n    content.SetLayout(LM_VERTICAL);\n    content.SetFixedWidth(376); // Scrollview has a small border around the edges, account for that\n\n    for (int i = 0; i \u0026lt; 10; ++i)\n    {\n        Text@ text = content.CreateChild(\"Text\");\n        text.SetStyleAuto();\n        text.wordwrap = true;\n        text.text = \"Longcat and Tacgnol fought the battle of Catnarok. No-one survived\";\n    }\n    // There is currently a bug which requires calling this manually after manipulating children.\n    // It shouldn't be necessary. Otherwise content element is left too big. This has to do with\n    // wordwrap, as the bug doesn't appear if wordwrap in the children is left false\n    content.UpdateLayout();\n}\u003c/code\u003e\u003c/pre\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:00:37.833Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":8,"readers_count":7,"score":1.6,"yours":false,"topic_id":461,"topic_slug":"odd-behavior-with-scrollview","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2530,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-10-01T12:51:19.000Z","cooked":"\u003cp\u003eAnother example doing the same with ListView, this time with a resizable window. ListView actually behaves more robustly when used with wordwrap text elements and dynamic resizing, and is easier to use when all you need is to just stack the items vertically:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid CreateUI()\n{\n    XMLFile@ uiStyle = cache.GetResource(\"XMLFile\", \"UI/DefaultStyle.xml\");\n    // Set style to the UI root so that elements will inherit it\n    ui.root.defaultStyle = uiStyle;\n\n    Window@ window = ui.root.CreateChild(\"Window\");\n    window.size = IntVector2(400, 300);\n    window.position = IntVector2(100, 100);\n    window.movable = true;\n    window.SetStyleAuto();\n    window.resizable = true;\n    window.SetLayout(LM_VERTICAL);\n    window.layoutBorder = IntRect(20,20,20,20);\n\n    ListView@ view = window.CreateChild(\"ListView\");\n    view.minSize = IntVector2(300, 200);\n    view.SetStyleAuto();\n\n    for (int i = 0; i \u0026lt; 10; ++i)\n    {\n        Text@ text = Text();\n        text.defaultStyle = uiStyle;\n        text.SetStyleAuto();\n        text.text = \"Longcat and Tacgnol fought the battle of Catnarok. No-one survived\";\n        text.wordwrap = true;\n        view.AddItem(text);\n    }\n    SubscribeToEvent(\"Update\", \"HandleUpdate\");\n}\u003c/code\u003e\u003c/pre\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:00:38.050Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":6,"readers_count":5,"score":1.2,"yours":false,"topic_id":461,"topic_slug":"odd-behavior-with-scrollview","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2534,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-10-01T16:37:15.000Z","cooked":"\u003cp\u003eFor the chat box bit I went ahead with a ListView since that is probably better in this case. I did figure out that there is some odd behavior with the scrollbar when I created my items as a child of the listbox (scrollview has same odd behavior) and then add it to the listview items. However as in your examples, creating it separately then adding it does just fine. I think that’s a big part of where my confusion came from as well. However it is all working good for now, thanks again.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:00:38.350Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":4,"readers_count":3,"score":0.8,"yours":false,"topic_id":461,"topic_slug":"odd-behavior-with-scrollview","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[2521,2525,2527,2530,2534]},"timeline_lookup":[[1,2975]],"suggested_topics":[{"id":7100,"title":"UI Sprites - Wrapping/Repeating Texture","fancy_title":"UI Sprites - Wrapping/Repeating Texture","slug":"ui-sprites-wrapping-repeating-texture","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5d95641f056666c79c67a12520276d2d9f4729ae.png","created_at":"2021-12-15T20:32:37.485Z","last_posted_at":"2021-12-16T03:28:29.146Z","bumped":true,"bumped_at":"2021-12-16T03:28:29.146Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7104,"title":"Bug in my partial-model copying code","fancy_title":"Bug in my partial-model copying code","slug":"bug-in-my-partial-model-copying-code","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5367e370779d64989e5c3ff2c1ebfb0689908c87.png","created_at":"2021-12-17T03:50:19.405Z","last_posted_at":"2021-12-17T13:50:49.662Z","bumped":true,"bumped_at":"2021-12-17T13:50:49.662Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7083,"title":"Using custom models in Xamarin.Forms shared project","fancy_title":"Using custom models in Xamarin.Forms shared project","slug":"using-custom-models-in-xamarin-forms-shared-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-03T08:34:21.895Z","last_posted_at":"2021-12-03T11:40:30.983Z","bumped":true,"bumped_at":"2021-12-03T11:40:30.983Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":198,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1493,"username":"Nikolai","name":"Nikolai Miroshnichenko","avatar_template":"/user_avatar/discourse.urho3d.io/nikolai/{size}/3632_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]}],"tags_descriptions":{},"id":461,"title":"Odd behavior with Scrollview","fancy_title":"Odd behavior with Scrollview","posts_count":5,"created_at":"2014-09-30T19:47:46.000Z","views":257,"reply_count":0,"like_count":0,"last_posted_at":"2014-10-01T16:37:15.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"odd-behavior-with-scrollview","category_id":10,"word_count":815,"deleted_at":null,"user_id":80,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_461","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":80,"username":"thebluefish","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":80,"username":"thebluefish","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png"},"last_poster":{"id":80,"username":"thebluefish","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png"},"links":[{"url":"http://imgur.com/a/ywDZn","title":"Imgur: The most awesome images on the Internet","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":80,"domain":"imgur.com","root_domain":"imgur.com"}]}}