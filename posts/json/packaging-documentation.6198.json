{"post_stream":{"posts":[{"id":37869,"name":"","username":"Avagrande","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png","created_at":"2020-06-10T05:36:30.102Z","cooked":"\u003cp\u003eHello.\u003c/p\u003e\n\u003cp\u003eI am looking into packaging but I find that documentation for it is rather scarce.\u003c/p\u003e\n\u003cp\u003eIf I create a package out of say the Data folder and then bind it, will that create a a true read only filesystem such that I can iterate the contents of the directory using ScanDir?\u003c/p\u003e\n\u003cp\u003eI use file structure to automatically bind scripts and other assets for the purposes of modding and ease of use, so you can do things like introduce a new entity by simply creating a appropriately named file and folder.  This makes modding really easy but I am not sure if this would be compatible with package structures.\u003c/p\u003e\n\u003cp\u003eI haven’t tried yet to implement it so I am asking just in case someone else has experience with it.\u003c/p\u003e\n\u003cp\u003etl;dr : How do packages work and what are their limitations?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2020-06-10T05:36:30.102Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":7,"reads":40,"readers_count":39,"score":48.0,"yours":false,"topic_id":6198,"topic_slug":"packaging-documentation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1201,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37870,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2020-06-10T10:14:00.634Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Avagrande\" data-post=\"1\" data-topic=\"6198\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/avagrande/40/2686_2.png\" class=\"avatar\"\u003e Avagrande:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003etl;dr : How do packages work and what are their limitations?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003ePackages don’t interact with Filesystem in any way.\u003cbr\u003e\nPackage support and abstraction is implemented at the level of ResourceCache.\u003cbr\u003e\nI’m not aware of any mechanism that allows to iterate resources without knowing their names thru ResourceCache.\u003cbr\u003e\nAlthough, there’s no physical limitation for implementing it… at the level of ResourceCache, of course.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2020-06-10T10:33:33.339Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":37,"readers_count":36,"score":12.4,"yours":false,"topic_id":6198,"topic_slug":"packaging-documentation","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":37871,"name":"","username":"Avagrande","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png","created_at":"2020-06-10T10:34:22.233Z","cooked":"\u003cp\u003eThanks.\u003cbr\u003e\nI guess I will have to implement my own package format.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2020-06-10T10:34:22.233Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":2,"reads":37,"readers_count":36,"score":22.4,"yours":false,"topic_id":6198,"topic_slug":"packaging-documentation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1201,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37873,"name":"Thomas Trocha","username":"dertom","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png","created_at":"2020-06-10T13:43:08.772Z","cooked":"\u003cp\u003eWithout ever using it, but you might want a look to this:\u003cbr\u003e\n\u003c/p\u003e\u003caside class=\"onebox whitelistedgeneric\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://icculus.org/physfs/\" target=\"_blank\" rel=\"nofollow noopener\"\u003eicculus.org\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003cimg src=\"\" class=\"thumbnail\" width=\"\" height=\"\"\u003e\n\n\u003ch3\u003e\u003ca href=\"https://icculus.org/physfs/\" target=\"_blank\" rel=\"nofollow noopener\"\u003ePhysicsFS\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003eA portable, flexible virtual file system API\u003c/p\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":4,"post_type":1,"updated_at":"2020-06-10T13:43:08.772Z","reply_count":1,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":33,"readers_count":32,"score":26.6,"yours":false,"topic_id":6198,"topic_slug":"packaging-documentation","display_username":"Thomas Trocha","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://icculus.org/physfs/","internal":false,"reflection":false,"title":"PhysicsFS","clicks":2}],"read":true,"user_title":null,"reply_to_user":{"username":"Avagrande","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1038,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37874,"name":"Arnis Lielturks","username":"Miegamicis","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png","created_at":"2020-06-10T13:58:19.618Z","cooked":"\u003cp\u003eYou can iterate trough the package entries with the following code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eauto packageFiles = GetSubsystem\u0026lt;ResourceCache\u0026gt;()-\u0026gt;GetPackageFiles();\nfor (auto it = packageFiles.Begin(); it != packageFiles.End(); ++it) {\n    auto files = (*it)-\u0026gt;GetEntryNames();\n    for (auto it2 = files.Begin(); it2 != files.End(); ++it2) {\n        if ((*it2).EndsWith(\".as\")) {\n           //This is an AngelScript file in a package\n           // (*it2) is a string with the full file path like Scripts/Sample.as\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBut you can’t add new files to an existing package as far as I know.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2020-06-10T14:01:11.632Z","reply_count":1,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":33,"readers_count":32,"score":26.6,"yours":false,"topic_id":6198,"topic_slug":"packaging-documentation","display_username":"Arnis Lielturks","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core Developer","title_is_group":false,"reply_to_user":{"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":444,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37877,"name":"","username":"Avagrande","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png","created_at":"2020-06-10T20:52:07.681Z","cooked":"\u003cp\u003eOh thats nice! from the looks of it, its possible to create a index from packages which means I could then integrate it with the filesystem not just the cache.\u003c/p\u003e\n\u003cp\u003eMy goal is to make a package that mimics filesystem without Write or rather when you write it writes on disk in the same location.\u003cbr\u003e\nso if I ScanDir in “Scripts/” and I have “Scripts/OnDisk.lua” in the hdd and then “Scripts/InPkg.lua” in the PKG, the ScanDir function should return both files.\u003c/p\u003e\n\u003cp\u003eHowever if I write to “Scripts/InPkg.lua” that will create a file on the actual filesystem ( hdd ) and not the pkg, but when I then run ScanDir I will still have two files and the one in PKG will be ignored.\u003c/p\u003e\n\u003cp\u003eThe filesystem will prefer the InPkg.lua from the filesystem instead of the pkg.\u003cbr\u003e\nAlthough I will probably want to give some control to the priority list such that I can prefer one package over the other or in some instances prefer pkg over filesystem.\u003c/p\u003e\n\u003cp\u003eThe benefit of this would be that players can exchange mods in .pkg format and easily remove or add them without the need to unzip anything and that my filesystem controls remain the same. Even if I try to write to a file thats in the pkg it will just write it to the hdd and therefore “overwrite” it as far as priority is concerned.  Therefore making somewhat of a virtual extension to the filesystem.\u003c/p\u003e\n\u003cp\u003eI previously worked on Love2D  ( which uses PhysicsFS ) before moving to Urho3D, One key issue with PhysicsFS is that it applies strict limitations making something like a file browser next to impossible to do. If you are making a editor for example or something that needs to access files on disk it will be a pain since you might need to write all the operations yourself for each OS.\u003c/p\u003e\n\u003cp\u003eI think the way the package system is now its possible to create the behaviour I need, so I will have a ago.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2020-06-10T20:52:07.681Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":32,"readers_count":31,"score":6.4,"yours":false,"topic_id":6198,"topic_slug":"packaging-documentation","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Miegamicis","name":"Arnis Lielturks","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1201,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[37869,37870,37871,37873,37874,37877]},"timeline_lookup":[[1,896],[6,895]],"suggested_topics":[{"id":7112,"title":"What is the proper way to add more source files(.cpp and .h) to a project?","fancy_title":"What is the proper way to add more source files(.cpp and .h) to a project?","slug":"what-is-the-proper-way-to-add-more-source-files-cpp-and-h-to-a-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-27T18:18:21.946Z","last_posted_at":"2021-12-28T12:19:43.514Z","bumped":true,"bumped_at":"2021-12-28T12:19:43.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":195,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1498,"username":"Tryout","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/85f322/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7125,"title":"Android mobile shows jaggies in the instersection plane-terrain","fancy_title":"Android mobile shows jaggies in the instersection plane-terrain","slug":"android-mobile-shows-jaggies-in-the-instersection-plane-terrain","posts_count":5,"reply_count":3,"highest_post_number":5,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d36aedb4e8cf5409efca6c976aae7e4a5c499eb9.png","created_at":"2022-01-11T11:59:18.993Z","last_posted_at":"2022-01-11T21:27:40.692Z","bumped":true,"bumped_at":"2022-01-12T07:36:41.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":129,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7177,"title":"Attaching a shader to a BorderImage","fancy_title":"Attaching a shader to a BorderImage","slug":"attaching-a-shader-to-a-borderimage","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-01-31T17:49:50.734Z","last_posted_at":"2022-02-01T02:22:10.927Z","bumped":true,"bumped_at":"2022-02-01T02:22:10.927Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":151,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7098,"title":"Cartoon Fire Effect","fancy_title":"Cartoon Fire Effect","slug":"cartoon-fire-effect","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2021-12-10T04:08:49.887Z","last_posted_at":"2021-12-12T02:49:51.076Z","bumped":true,"bumped_at":"2021-12-12T02:49:51.076Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":274,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]}],"tags_descriptions":{},"id":6198,"title":"Packaging documentation","fancy_title":"Packaging documentation","posts_count":6,"created_at":"2020-06-10T05:36:30.015Z","views":261,"reply_count":4,"like_count":2,"last_posted_at":"2020-06-10T20:52:07.681Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"packaging-documentation","category_id":10,"word_count":659,"deleted_at":null,"user_id":1201,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6198","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":2,"username":"Eugene","excerpt":"Packages don’t interact with Filesystem in any way. \nPackage support and abstraction is implemented at the level of ResourceCache. \nI’m not aware of any mechanism that allows to iterate resources without knowing their names thru ResourceCache. \nAlthough, there’s no physical limitation for implement\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1201,"username":"Avagrande","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":444,"username":"Miegamicis","name":"Arnis Lielturks","avatar_template":"/user_avatar/discourse.urho3d.io/miegamicis/{size}/2547_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1201,"username":"Avagrande","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png"},"last_poster":{"id":1201,"username":"Avagrande","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png"},"links":[{"url":"https://icculus.org/physfs/","title":"PhysicsFS","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":1038,"domain":"icculus.org","root_domain":"icculus.org"}]}}