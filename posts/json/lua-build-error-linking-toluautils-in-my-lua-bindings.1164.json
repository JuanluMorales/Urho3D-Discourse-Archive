{"post_stream":{"posts":[{"id":6665,"name":"","username":"setzer22","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","created_at":"2015-07-07T19:14:34.000Z","cooked":"\u003cp\u003eI’m trying to learn how to bind C++ code to the Lua API.\u003c/p\u003e\n\u003cp\u003eWhat I’ve managed so far is registering simple functions and components, but so far I had never registered a function that received a Vector parameter.\u003c/p\u003e\n\u003cp\u003eIt appears that Urho uses some binding code in \u0026lt;Urho3D/LuaScript/ToLuaUtils.h\u0026gt;, the relevant functions for me right now are ToluaIsVector and ToluaToVector. So I \u003cspan class=\"hashtag\"\u003e#included\u003c/span\u003e the file (with the Urho full path, like I just wrote) in my pkg file.\u003c/p\u003e\n\u003cp\u003eThe binding code is generated with the proper include and the code correctly sees the functions and compiles. But it’s failing to link. One of the errors is:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe other errors are very similar.\u003c/p\u003e\n\u003cp\u003eI’m correctly linking to Urho3D as a library so why are those symbols not included? Maybe that file doesn’t get built in the library version?\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"bbcode-b\"\u003eEDIT:\u003c/span\u003e I’m pretty sure it’s not that as I just looked through libUrho3D.a (with grep) and ToluaIsVector is in there.\u003c/p\u003e\n\u003cp\u003eWould it be better to just maintain a copy of ToLuaUtils in my Source folder and just build it as if it was part of my game?\u003c/p\u003e\n\u003cp\u003eAlso, I was wondering, why are relative include paths being used inside Urho files? I’m talking for exaple about this file, ToLuaUtils.h:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThanks!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:05:49.383Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":5,"reads":3,"readers_count":2,"score":25.6,"yours":false,"topic_id":1164,"topic_slug":"lua-build-error-linking-toluautils-in-my-lua-bindings","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":125,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":6669,"name":"","username":"setzer22","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","created_at":"2015-07-07T20:34:08.000Z","cooked":"\u003cp\u003eOk I’ve figured it out. Apparently the implementation in ToluaUtils is only provided for certain types of Vectors like Vector or PODVector despite being declared as a completely generic function and thus, it only fails at the linking phase.\u003c/p\u003e\n\u003cp\u003eIsn’t there any way I can get it to accept Vector\u0026lt;WeakPtr\u0026gt;?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:05:49.659Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":1164,"topic_slug":"lua-build-error-linking-toluautils-in-my-lua-bindings","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":125,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":6671,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-07-07T21:22:34.000Z","cooked":"\u003cp\u003eSomewhat of a hack, but it should be possible to define the whole Lua binding function in the pkg file, using the \u003cspan class=\"hashtag\"\u003e#define\u003c/span\u003e mechanism to disable the generated binding. You would first take the generated function as a base, and modify it to push your custom vector without going through ToLuaUtils.\u003c/p\u003e\n\u003cp\u003eTake a look at for example ResourceCache.pkg:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e${\n#define TOLUA_DISABLE_tolua_ResourceLuaAPI_GetCache00\nstatic int tolua_ResourceLuaAPI_GetCache00(lua_State* tolua_S)\n{\n    return ToluaGetSubsystem\u0026lt;ResourceCache\u0026gt;(tolua_S);\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnother possibility (not 100% sure it will work) is to define the necessary template implementation of the ToLuaUtils pushvector for your specific vector specialization in your code.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:05:49.783Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":1164,"topic_slug":"lua-build-error-linking-toluautils-in-my-lua-bindings","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":6674,"name":"","username":"setzer22","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","created_at":"2015-07-08T08:26:00.000Z","cooked":"\u003cp\u003eThank you,\u003c/p\u003e\n\u003cp\u003eAs a sollution I’d rather implement the needed template functions instead of manually defining each function with vector parameters. Right now I’m a bit confused on what ToluaIsVector and ToluaToVector do. From the context (an when do they get called) I assumed they were to convert a C++ Vector to an indexed lua table. But from what I can read in the implementation, my assumptions don’t make sense. So basically, what’s the use of those functions? And more specifically, what do those parameter names mean (lo, type, def, err)? Is that part of the lua API?\u003c/p\u003e\n\u003cp\u003eFor now I’ve made a workaround by having the function take a Vector (which works) containing the node ids that contain the components the function should received.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:05:50.088Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":1164,"topic_slug":"lua-build-error-linking-toluautils-in-my-lua-bindings","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":125,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[6665,6669,6671,6674]},"timeline_lookup":[[1,2695]],"suggested_topics":[{"id":7186,"title":"Best way to do Blob Shadows in Urho","fancy_title":"Best way to do Blob Shadows in Urho","slug":"best-way-to-do-blob-shadows-in-urho","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/2/22e3dc1892512375cae09bf84fd92071a1ae27d8.png","created_at":"2022-02-05T04:59:31.388Z","last_posted_at":"2022-02-05T13:29:22.054Z","bumped":true,"bumped_at":"2022-02-05T13:31:44.299Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":179,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7146,"title":"How create affordable comfortable and modern terrain?","fancy_title":"How create affordable comfortable and modern terrain?","slug":"how-create-affordable-comfortable-and-modern-terrain","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-01-21T15:20:08.910Z","last_posted_at":"2022-01-21T21:51:58.799Z","bumped":true,"bumped_at":"2022-01-21T22:03:14.896Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7160,"title":"RayCast trouble","fancy_title":"RayCast trouble","slug":"raycast-trouble","posts_count":17,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-01-29T00:06:00.367Z","last_posted_at":"2022-01-30T00:29:39.356Z","bumped":true,"bumped_at":"2022-01-30T00:29:39.356Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":260,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]},{"id":7065,"title":"Angelscript: Loading a char file into a 2D array: how?","fancy_title":"Angelscript: Loading a char file into a 2D array: how?","slug":"angelscript-loading-a-char-file-into-a-2d-array-how","posts_count":7,"reply_count":4,"highest_post_number":7,"image_url":null,"created_at":"2021-11-24T09:20:05.420Z","last_posted_at":"2021-11-28T11:19:39.689Z","bumped":true,"bumped_at":"2021-11-28T11:26:00.375Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":239,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":983,"username":"tarzeron","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ecae2f/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7209,"title":"Need Compute Shader for Heightmap Normals Calculation","fancy_title":"Need Compute Shader for Heightmap Normals Calculation","slug":"need-compute-shader-for-heightmap-normals-calculation","posts_count":14,"reply_count":5,"highest_post_number":14,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f3699392311fc006b02311f4ac539017ce2ba760.jpeg","created_at":"2022-02-26T04:46:13.776Z","last_posted_at":"2022-03-10T00:07:52.127Z","bumped":true,"bumped_at":"2022-03-10T00:07:52.127Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":410,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]}],"tags_descriptions":{},"id":1164,"title":"[LUA / Build] Error linking ToLuaUtils in my Lua bindings","fancy_title":"[LUA / Build] Error linking ToLuaUtils in my Lua bindings","posts_count":4,"created_at":"2015-07-07T19:14:34.000Z","views":202,"reply_count":0,"like_count":0,"last_posted_at":"2015-07-08T08:26:00.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"lua-build-error-linking-toluautils-in-my-lua-bindings","category_id":10,"word_count":534,"deleted_at":null,"user_id":125,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1164","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":4,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2}],"created_by":{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png"},"last_poster":{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png"}}}