{"post_stream":{"posts":[{"id":17114,"name":"","username":"cap","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/e9bcb4/{size}.png","created_at":"2017-04-11T20:50:28.150Z","cooked":"\u003cp\u003eSuppose there’s a third party library function \u003ccode\u003eCoolFunction(FILE* cfile)\u003c/code\u003e taking a C style \u003ccode\u003eFILE*\u003c/code\u003e, and there’s a file in the \u003ccode\u003eResourceCache\u003c/code\u003e that we can get at pretty easily in the form of an \u003ccode\u003eUrho3D::File*\u003c/code\u003e. Is there any direct way to get at an underlying C style \u003ccode\u003eFILE\u003c/code\u003e from the \u003ccode\u003eUrho3D::File*\u003c/code\u003e?\u003c/p\u003e\n\u003cp\u003eI started to do it as below (which has bugs, but the approach is clear), then began to figure the approach I was using was probably pointless, since if I need to be copying array values like that, I would probably be better off to just create the \u003ccode\u003eFILE\u003c/code\u003e directly from the name of the resource … but that way we can’t take advantage of the fact that the resource is loaded in the cache already. Any tips?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid CoolFunctionWrapper(Urho3D::File* ufile)\n{\n  PODVector\u0026lt;unsigned char\u0026gt; buffer = ufile-\u0026gt;ReadBuffer();\n\n  size_t n = (size_t)buffer.Size();\n  unsigned char* array = new unsigned char[n];\n  for (size_t i = 0; i \u0026lt; (size_t)buffer.Size(); ++i) {\n    array[i] = buffer[i];\n  }\n\n  FILE* cfile = fopen(\"tmp_name\", \"w\");\n  fwrite(array, sizeof(unsigned char), n, cfile);\n  delete array;\n\n  CoolFunction(cfile);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e(Also there is this \u003ca href=\"http://discourse.urho3d.io/t/file-as-an-std-istream/2197\"\u003eFile as an std::istream\u003c/a\u003e which looks relevant, but I still have to digest it.)\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-04-13T14:38:51.003Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":35,"readers_count":34,"score":12.0,"yours":false,"topic_id":3000,"topic_slug":"c-style-file-from-urho3d-file","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://discourse.urho3d.io/t/file-as-an-std-istream/2197","internal":true,"reflection":false,"title":"File as an std::istream","clicks":3}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":278,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":17116,"name":"","username":"1vanK","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png","created_at":"2017-04-11T21:32:43.906Z","cooked":"\u003cp\u003eTry \u003ccode\u003e(FILE*)file-\u0026gt;GetGandle()\u003c/code\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-04-13T14:39:02.877Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":34,"readers_count":33,"score":6.8,"yours":false,"topic_id":3000,"topic_slug":"c-style-file-from-urho3d-file","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":true,"admin":false,"staff":true,"user_id":263,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":17122,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2017-04-12T06:18:18.530Z","cooked":"\u003cp\u003eNote that the GetHandle() solution will only work for non-packaged files (I’m fairly certain, perhaps for uncompressed package files as well). If you need to use packaged files for it, I’m pretty sure you will have to write some platform-dependent code to create a memory-mapped file (I think that’s the right term for this), and it is not as easy to do as for file streams. If you can, I would suggest modifying the library to use either Urho’s File class or a stream or your own custom version of the functions like fread that use one of those as a back end. (See \u003ca href=\"http://stackoverflow.com/questions/12249610/c-create-file-in-memory\" rel=\"nofollow noopener\"\u003ehttp://stackoverflow.com/questions/12249610/c-create-file-in-memory\u003c/a\u003e for info about creating a file in memory)\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-04-12T06:18:18.530Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":31,"readers_count":30,"score":6.2,"yours":false,"topic_id":3000,"topic_slug":"c-style-file-from-urho3d-file","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://stackoverflow.com/questions/12249610/c-create-file-in-memory","internal":false,"reflection":false,"title":"windows - C - create file in memory - Stack Overflow","clicks":7}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":17128,"name":"","username":"cap","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/e9bcb4/{size}.png","created_at":"2017-04-12T17:29:18.524Z","cooked":"\u003cp\u003eDoing \u003ccode\u003e(FILE)*file-\u0026gt;GetHandle()\u003c/code\u003e indeed works! Though due to the likely issue with packaged files, I think I’ll try modifying the library function to use Urho’s File as suggested. Thanks for the responses.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-04-12T17:29:18.524Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":9.8,"yours":false,"topic_id":3000,"topic_slug":"c-style-file-from-urho3d-file","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":278,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":17304,"name":"","username":"cap","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/e9bcb4/{size}.png","created_at":"2017-04-21T18:58:12.126Z","cooked":"\u003cp\u003eSmall update, I guess some care needs to be taken when using \u003ccode\u003e(FILE*)file-\u0026gt;GetHandle()\u003c/code\u003e. One of the third party library functions was a bit too daunting to modify for an \u003ccode\u003eUrho3D::File*\u003c/code\u003e, so I used the \u003ccode\u003eGetHandle()\u003c/code\u003e method. All’s well on Windows, but on Ubuntu the same code leads to a segmentation fault.\u003c/p\u003e\n\u003cp\u003eIf I can find out why, I’ll share the reason here.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-04-21T18:58:12.126Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":3.8,"yours":false,"topic_id":3000,"topic_slug":"c-style-file-from-urho3d-file","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"cap","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/e9bcb4/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":278,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[17114,17116,17122,17128,17304]},"timeline_lookup":[[1,2051],[4,2050],[5,2041]],"suggested_topics":[{"id":7100,"title":"UI Sprites - Wrapping/Repeating Texture","fancy_title":"UI Sprites - Wrapping/Repeating Texture","slug":"ui-sprites-wrapping-repeating-texture","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5d95641f056666c79c67a12520276d2d9f4729ae.png","created_at":"2021-12-15T20:32:37.485Z","last_posted_at":"2021-12-16T03:28:29.146Z","bumped":true,"bumped_at":"2021-12-16T03:28:29.146Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7125,"title":"Android mobile shows jaggies in the instersection plane-terrain","fancy_title":"Android mobile shows jaggies in the instersection plane-terrain","slug":"android-mobile-shows-jaggies-in-the-instersection-plane-terrain","posts_count":5,"reply_count":3,"highest_post_number":5,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d36aedb4e8cf5409efca6c976aae7e4a5c499eb9.png","created_at":"2022-01-11T11:59:18.993Z","last_posted_at":"2022-01-11T21:27:40.692Z","bumped":true,"bumped_at":"2022-01-12T07:36:41.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":129,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7156,"title":"Manual Mesh Part Animation (e.g. Rotate a propeller)","fancy_title":"Manual Mesh Part Animation (e.g. Rotate a propeller)","slug":"manual-mesh-part-animation-e-g-rotate-a-propeller","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-01-26T23:50:29.343Z","last_posted_at":"2022-01-27T05:31:02.766Z","bumped":true,"bumped_at":"2022-01-27T05:31:02.766Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":155,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]},{"id":7185,"title":"Update Ray ray direction","fancy_title":"Update Ray ray direction","slug":"update-ray-ray-direction","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-02-05T00:28:45.414Z","last_posted_at":"2022-02-05T20:19:51.238Z","bumped":true,"bumped_at":"2022-02-05T20:19:51.238Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7067,"title":"Can the latest Urho3D version be built with VS2013?","fancy_title":"Can the latest Urho3D version be built with VS2013?","slug":"can-the-latest-urho3d-version-be-built-with-vs2013","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2021-11-25T18:00:24.336Z","last_posted_at":"2021-11-26T17:22:21.878Z","bumped":true,"bumped_at":"2021-11-26T17:22:21.878Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":157,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]}],"tags_descriptions":{},"id":3000,"title":"C style FILE* from Urho3D::File*?","fancy_title":"C style FILE* from Urho3D::File*?","posts_count":5,"created_at":"2017-04-11T20:50:28.086Z","views":682,"reply_count":1,"like_count":0,"last_posted_at":"2017-04-21T18:58:12.126Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"c-style-file-from-urho3d-file","category_id":10,"word_count":445,"deleted_at":null,"user_id":278,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_3000","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":2,"username":"1vanK","excerpt":"Try (FILE*)file-\u0026gt;GetGandle()"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":278,"username":"cap","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/e9bcb4/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"moderator":true,"trust_level":4},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":278,"username":"cap","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/e9bcb4/{size}.png"},"last_poster":{"id":278,"username":"cap","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/e9bcb4/{size}.png"},"links":[{"url":"http://stackoverflow.com/questions/12249610/c-create-file-in-memory","title":"windows - C - create file in memory - Stack Overflow","internal":false,"attachment":false,"reflection":false,"clicks":7,"user_id":628,"domain":"stackoverflow.com","root_domain":"stackoverflow.com"},{"url":"http://discourse.urho3d.io/t/file-as-an-std-istream/2197","title":"File as an std::istream","internal":true,"attachment":false,"reflection":false,"clicks":3,"user_id":278,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"}]}}