{"post_stream":{"posts":[{"id":2465,"name":"","username":"Bluemoon","avatar_template":"/user_avatar/discourse.urho3d.io/bluemoon/{size}/348_2.png","created_at":"2014-09-26T19:00:42.000Z","cooked":"\u003cp\u003eThe little secret I have about My Urho3D encounter is that I actually found out about Urho3D through AngelScript  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=5\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"\u003e. And to be honest I’m really impressed by the beautiful integration of AngelScript into Urho3D. But the problem is that its really easy to get carried away by this beauty and go on scripting almost every part of your application (I’m “almost” guilty here  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/smiley.png?v=5\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\"\u003e ). In order to save myself from this easily neglected mistake I’ll really like to know the performance hits and penalties that can be incurred while using AngelScript and the areas where they present themselves. And perhaps if there is an advice for a soon-to-become-script-addict I’ll really need it  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/unamused.png?v=5\" title=\":unamused:\" class=\"emoji\" alt=\":unamused:\"\u003e\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:00:33.027Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":330,"reads":15,"readers_count":14,"score":1653.0,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":94,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2466,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-09-26T19:32:46.000Z","cooked":"\u003cp\u003eI don’t have any numbers, but I did do benchmarking with Angelscript ~2 years ago when I was working with Ogre3D. TBH the performance was pretty bad, it was something like 25-30 times slower than native C++ when it came to some complex calculations. LUA was something like 10-15 times slower than native C++ in comparison. Of course, I only did a few limited tests that may scale better in C++ than any scripting languages.\u003c/p\u003e\n\u003cp\u003eIn Urho3D however, most of the performance-critical parts are ran in native code. If you’re writing a game, then most of what you’re doing is simply calling native functions to do the actual work, instead of doing the slow calculations directly within your script.\u003c/p\u003e\n\u003cp\u003ePersonally I find it easiest to write most of my objects and game logic in C++ and extend various functionality to scripting. This allows me to maintain tight control of the actual logic, while still allowing easy expandability via scripts. For example, in my multiplayer card game, the base Card class is in C++, while the cards are actually defined via Script. That way the performance critical parts such as shuffling cards, drawing cards, and managing them is handled native while things such as card effects are handled by the script.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:00:33.083Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":16,"readers_count":15,"score":18.2,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2467,"name":"","username":"Bluemoon","avatar_template":"/user_avatar/discourse.urho3d.io/bluemoon/{size}/348_2.png","created_at":"2014-09-26T20:28:32.000Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"thebluefish\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/f04885/40.png\" class=\"avatar\"\u003e thebluefish:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIn Urho3D however, most of the performance-critical parts are ran in native code. If you’re writing a game, then most of what you’re doing is simply calling native functions to do the actual work, instead of doing the slow calculations directly within your script.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=10\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e That’s exactly the point I put in mind while scripting being rest assured that the calculation intensive routines are handled in native functions.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:00:33.165Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":16,"reads":15,"readers_count":14,"score":83.0,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":94,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2473,"name":"","username":"izackp","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/9de053/{size}.png","created_at":"2014-09-28T02:28:55.000Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"thebluefish\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/f04885/40.png\" class=\"avatar\"\u003e thebluefish:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eit was something like 25-30 times slower than native C++\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWas this before the JIT version of Angel Script? JIT should be a bit better than that I think…\u003c/p\u003e\n\u003cp\u003eNonetheless, Angel Script is really close to c++ so it wouldn’t be too hard to port code over ^.^\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:00:33.608Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":5,"reads":16,"readers_count":15,"score":28.2,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":129,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2475,"name":"","username":"friesencr","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png","created_at":"2014-09-28T04:39:40.000Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"izackp\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/i/9de053/40.png\" class=\"avatar\"\u003e izackp:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e[quote=“thebluefish”]it was something like 25-30 times slower than native C++\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWas this before the JIT version of Angel Script? JIT should be a bit better than that I think…\u003c/p\u003e\n\u003cp\u003eNonetheless, Angel Script is really close to c++ so it wouldn’t be too hard to port code over ^.\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-2475-1\" id=\"footnote-ref-2475-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\u003cp\u003eEven better than a jit it has an aot. \u003ca href=\"https://github.com/quarnster/asaot\" rel=\"noopener nofollow ugc\"\u003egithub.com/quarnster/asaot\u003c/a\u003e  It will convert angelscript to c++.  I havn’t tested it though.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-2475-1\" class=\"footnote-item\"\u003e\n\u003cp\u003e/quote \u003ca href=\"#footnote-ref-2475-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:00:33.748Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":7,"reads":16,"readers_count":15,"score":38.2,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/quarnster/asaot","internal":false,"reflection":false,"title":"GitHub - quarnster/asaot: AngelScript Ahead Of Time compiler","clicks":23}],"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":15,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2483,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-09-28T21:14:07.000Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"izackp\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/i/9de053/40.png\" class=\"avatar\"\u003e izackp:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e[quote=“thebluefish”]it was something like 25-30 times slower than native C++\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWas this before the JIT version of Angel Script? JIT should be a bit better than that I think…[/quote]\u003c/p\u003e\n\u003cp\u003eI believe so, but I can’t be 100% certain. Any decent JIT should be close to C++ performance-wise methinks. 2-3x slower would be perfectly acceptable in that case.\u003c/p\u003e\n\u003cp\u003eI wonder if we can get some performance tests utilizing Urho3D, comparing native, Angelscript, and LUA.\u003c/p\u003e\n\u003cp\u003eAOT compilation would be nice, but I’m concerned if it would affect device compatibility given the various different architectures we can port to. Maybe include the scripts, and have the engine automatically save the bytecode on first execution?\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:00:34.314Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":15,"readers_count":14,"score":3.0,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2485,"name":"","username":"boberfly","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/aeb1de/{size}.png","created_at":"2014-09-29T00:56:30.000Z","cooked":"\u003cp\u003eOh yeah I almost forgot about this AOT compiler for Angelscript, very cool. There’s no docs on how to use it but I guess it could make sense from reading the samples for awhile.\u003c/p\u003e\n\u003cp\u003eThis makes me think about working on my failed attempt again at porting Urho3D to Emscripten/HTML5, and I see SDL2 is now ported over. Having angelscript go into AOT form would let it turn into LLVM bytecode and then eventually javascript. Originally having angelscript being interpreted in javascript would’ve been painful for performance I’d imagine.\u003c/p\u003e\n\u003cp\u003eNow, hurry up WebGL I want GL 4.5 features in there already… \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-01-02T01:00:34.502Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":15,"readers_count":14,"score":3.0,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":69,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2486,"name":"","username":"marynate","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/b9bd4f/{size}.png","created_at":"2014-09-29T01:54:59.000Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"thebluefish\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/f04885/40.png\" class=\"avatar\"\u003e thebluefish:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e…\u003cbr\u003e\nI wonder if we can get some performance tests utilizing Urho3D, comparing native, Angelscript, and LUA.\u003cbr\u003e\n…\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI did a comparison using sample 24 Urho2DSprite with 2000 sprites, here’s the result:\u003c/p\u003e\n\u003cp\u003e[ul]\u003cbr\u003e\n[li]c++ \u003cspan class=\"bbcode-b\"\u003e970\u003c/span\u003e[/li]\u003cbr\u003e\n[li]Angelscript \u003cspan class=\"bbcode-b\"\u003e280\u003c/span\u003e[/li]\u003cbr\u003e\n[li]LuaJIT \u003cspan class=\"bbcode-b\"\u003e112\u003c/span\u003e[/li]\u003cbr\u003e\n[li]Lua \u003cspan class=\"bbcode-b\"\u003e85\u003c/span\u003e[/li][/ul]\u003c/p\u003e\n\u003cp\u003eand if anyone curious, same test with unity and godot (2000 random moving 2d sprites):\u003c/p\u003e\n\u003cp\u003e[ul]\u003cbr\u003e\n[li]Unity \u003cspan class=\"bbcode-b\"\u003e340\u003c/span\u003e[/li]\u003cbr\u003e\n[li]Godot \u003cspan class=\"bbcode-b\"\u003e170\u003c/span\u003e[/li][/ul]\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2017-01-02T01:00:34.588Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":14,"readers_count":13,"score":2.8,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":63,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2487,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-09-29T05:58:52.000Z","cooked":"\u003cp\u003eI’m guessing that’s FPS?\u003c/p\u003e\n\u003cp\u003eThat kind of slow-down is fairly acceptable for scripting, certainly much better than it used to be.\u003c/p\u003e\n\u003cp\u003eAs long as the performance-critical parts are left to native, it should be easy to get top-notch performance while still being able to extend plenty of functionality to scripting.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2017-01-02T01:00:34.668Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":14,"readers_count":13,"score":2.8,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2493,"name":"","username":"izackp","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/9de053/{size}.png","created_at":"2014-09-29T19:52:59.000Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"thebluefish\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/f04885/40.png\" class=\"avatar\"\u003e thebluefish:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAOT compilation would be nice, but I’m concerned if it would affect device compatibility given the various different architectures we can port to.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAnother thing to consider is that it is against Apple’s policy to dynamically load native code on iPhones. So, JIT compilation is out of the question for iOS devices.\u003c/p\u003e\n\u003cp\u003eFrom what I’ve seen the code gets compiled to c++ which means you should be able to compile the script for any device that c++ supports.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2017-01-02T01:00:35.074Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":13,"readers_count":12,"score":2.6,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":129,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2495,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-09-29T21:47:24.000Z","cooked":"\u003cp\u003eAh ok, I didn’t read too much on AOT compilation, so I thought it still dynamically loaded it much like JIT.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2017-01-02T01:00:35.205Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":13,"readers_count":12,"score":2.6,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2511,"name":"","username":"gokr","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e56c9b/{size}.png","created_at":"2014-09-30T12:20:16.000Z","cooked":"\u003cp\u003e[quote=“marynate”][quote=“thebluefish”]\u003cbr\u003e\n…\u003cbr\u003e\nI wonder if we can get some performance tests utilizing Urho3D, comparing native, Angelscript, and LUA.\u003cbr\u003e\n…\u003cbr\u003e\n[/quote]\u003c/p\u003e\n\u003cp\u003eI did a comparison using sample 24 Urho2DSprite with 2000 sprites, here’s the result:\u003c/p\u003e\n\u003cp\u003e[ul]\u003cbr\u003e\n[li]c++ \u003cspan class=\"bbcode-b\"\u003e970\u003c/span\u003e[/li]\u003cbr\u003e\n[li]Angelscript \u003cspan class=\"bbcode-b\"\u003e280\u003c/span\u003e[/li]\u003cbr\u003e\n[li]LuaJIT \u003cspan class=\"bbcode-b\"\u003e112\u003c/span\u003e[/li]\u003cbr\u003e\n[li]Lua \u003cspan class=\"bbcode-b\"\u003e85\u003c/span\u003e[/li][/ul]\u003c/p\u003e\n\u003cp\u003eand if anyone curious, same test with unity and godot (2000 random moving 2d sprites):\u003c/p\u003e\n\u003cp\u003e[ul]\u003cbr\u003e\n[li]Unity \u003cspan class=\"bbcode-b\"\u003e340\u003c/span\u003e[/li]\u003cbr\u003e\n[li]Godot \u003cspan class=\"bbcode-b\"\u003e170\u003c/span\u003e[/li][/ul][/quote]\u003c/p\u003e\n\u003cp\u003eSoo… Angelscript is faster than LuaJIT? And only a tad faster than regular Lua? That sounds… odd. Can you share how you compared?\u003c/p\u003e\n\u003cp\u003eregards, G?ran\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2017-01-02T01:00:36.425Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":13,"readers_count":12,"score":2.6,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":77,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2514,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-09-30T13:21:09.000Z","cooked":"\u003cp\u003eI understood that in things like array/table access Lua will have an advantage, as Lua arrays are native to the language, while in AngelScript they are bound like any external class and induce calls through the binding system.\u003c/p\u003e\n\u003cp\u003eMoving a large amount of sprites will stress mainly the bindings (GetPosition(), SetPosition() etc.)\u003c/p\u003e\n\u003cp\u003eI know Lua will suffer a large overhead if the bindings safety checks are enabled (-DURHO3D_SAFE_LUA=1) but they should be off by default.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2017-01-02T01:00:36.664Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":11,"readers_count":10,"score":7.2,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2515,"name":"","username":"marynate","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/b9bd4f/{size}.png","created_at":"2014-09-30T14:26:25.000Z","cooked":"\u003cp\u003e[quote=“gokr”]\u003cbr\u003e\nSoo… Angelscript is faster than LuaJIT? And only a tad faster than regular Lua? That sounds… odd. Can you share how you compared?\u003c/p\u003e\n\u003cp\u003eregards, G?ran[/quote]\u003c/p\u003e\n\u003cp\u003eFor testing scene, I use  24_Urho2DSprite (bumping the sprite count up to 2000)\u003c/p\u003e\n\u003cp\u003eFor building Urho3DPlayer, I used following defines:\u003c/p\u003e\n\u003cp\u003ec++ / angelscript / luajit\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003elua\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e","post_number":14,"post_type":1,"updated_at":"2017-01-02T01:00:36.760Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":13,"readers_count":12,"score":2.6,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":63,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2541,"name":"","username":"gokr","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e56c9b/{size}.png","created_at":"2014-10-02T20:06:15.000Z","cooked":"\u003cp\u003e[quote=“cadaver”]I understood that in things like array/table access Lua will have an advantage, as Lua arrays are native to the language, while in AngelScript they are bound like any external class and induce calls through the binding system.\u003c/p\u003e\n\u003cp\u003eMoving a large amount of sprites will stress mainly the bindings (GetPosition(), SetPosition() etc.)\u003c/p\u003e\n\u003cp\u003eI know Lua will suffer a large overhead if the bindings safety checks are enabled (-DURHO3D_SAFE_LUA=1) but they should be off by default.[/quote]\u003c/p\u003e\n\u003cp\u003eI played around a bit myself and also read up on the net. Feel free to correct me but I think that tolua++ uses the regular Lua C API for integration. Its quite slow, and tolua++ is also considered to be quite slow compared to many of the other C++ binding generators like Dub or OOLua. Now… if one wants to get the full insane speed of LuaJIT one should \u003cspan class=\"bbcode-b\"\u003eideally\u003c/span\u003e:\u003c/p\u003e\n\u003cp\u003e[ul]\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUse LuaJIT FFI for calling into C\u003c/li\u003e\n\u003cli\u003eAs much as possible avoid callbacks from C into Lua\u003cbr\u003e\n[/ul]\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLuaJIT FFI is crazy good and makes C calls as cheap as they are in C itself. Yeah, really. And LuaJIT seems to be able to inline them while JITting too. Unfortunately there aren’t that many C++ binding generators that use LuaJIT FFI (I found a few experiments). But calling back into LuaJIT is costly even using LuaJIT FFI - I think like… 30x slower, so the advice from Mike Pall (LuaJIT genius author) here is “don’t do it”. At least not many, many times :\u003c/p\u003e\n\u003cp\u003eSo… if we have TONS of objects and these are iterated over in C (say on every frame) and we do callbacks into LuaJIT for updating them - \u003cspan class=\"bbcode-b\"\u003ewe get hosed by the overhead\u003c/span\u003e. The fact that Lua is almost the same speed as LuaJIT is very telling here. LuaJIT should SMOKE it.\u003c/p\u003e\n\u003cp\u003eSo what to do about callbacks? One way is to move the loop to Lua and “pull” the objects via an API over some iterator in C. This would turn it to “calls from Lua to C” and thus remove the overhead completely. Mike calls this a “pull” API instead of a “push” API design.\u003c/p\u003e\n\u003cp\u003eSince we want to basically build everything in Lua this may become important to us. And just so everyone knows - LuaJIT is very, very, very fast. It “should” generally beat the pants of regular Lua and Angelscript and come close to C++ speed. The numbers imply that all of that speed is lost here.\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2017-01-02T01:00:38.806Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":4,"reads":13,"readers_count":12,"score":22.6,"yours":false,"topic_id":454,"topic_slug":"script-perfomance-penalty","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":77,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[2465,2466,2467,2473,2475,2483,2485,2486,2487,2493,2495,2511,2514,2515,2541]},"timeline_lookup":[[1,2979],[4,2978],[6,2977],[10,2976],[15,2973]],"suggested_topics":[{"id":7344,"title":"Do we give up supporting dx11？","fancy_title":"Do we give up supporting dx11？","slug":"do-we-give-up-supporting-dx11","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-03T09:37:37.893Z","last_posted_at":"2022-11-03T13:09:15.153Z","bumped":true,"bumped_at":"2022-11-03T15:28:58.128Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":78,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7347,"title":"How does Urho handle script objects each frame?","fancy_title":"How does Urho handle script objects each frame?","slug":"how-does-urho-handle-script-objects-each-frame","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-11-08T02:33:56.461Z","last_posted_at":"2022-11-08T14:46:09.857Z","bumped":true,"bumped_at":"2022-11-08T14:46:09.857Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":64,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7304,"title":"Urho3D is crashing on Android 12","fancy_title":"Urho3D is crashing on Android 12","slug":"urho3d-is-crashing-on-android-12","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-28T10:03:51.280Z","last_posted_at":"2022-07-28T10:03:51.349Z","bumped":true,"bumped_at":"2022-07-28T10:38:06.014Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":126,"category_id":9,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7188,"title":"Urho.Net 2D maps of Doom game","fancy_title":"Urho.Net 2D maps of Doom game","slug":"urho-net-2d-maps-of-doom-game","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/0/04438054f6d0aa310e84c25a92cf807242e2bc1a.png","created_at":"2022-02-07T17:06:26.933Z","last_posted_at":"2022-02-07T19:19:36.582Z","bumped":true,"bumped_at":"2022-02-07T19:19:36.582Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":149,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1487,"username":"bayganik","name":"Abadani667","avatar_template":"/user_avatar/discourse.urho3d.io/bayganik/{size}/3602_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7196,"title":"Windows Urho3D build with -DURHO3D_OPENGL=1 using rake","fancy_title":"Windows Urho3D build with -DURHO3D_OPENGL=1 using rake","slug":"windows-urho3d-build-with-durho3d-opengl-1-using-rake","posts_count":18,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-02-20T12:49:25.777Z","last_posted_at":"2022-02-24T18:24:11.679Z","bumped":true,"bumped_at":"2022-02-24T18:24:11.679Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":254,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":421,"username":"Lunarovich","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/lunarovich/{size}/2097_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]}],"tags_descriptions":{},"id":454,"title":"Script Perfomance Penalty","fancy_title":"Script Perfomance Penalty","posts_count":15,"created_at":"2014-09-26T19:00:42.000Z","views":1156,"reply_count":0,"like_count":0,"last_posted_at":"2014-10-02T20:06:15.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"script-perfomance-penalty","category_id":9,"word_count":1730,"deleted_at":null,"user_id":94,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_454","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":15,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":8,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":80,"username":"thebluefish","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":63,"username":"marynate","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/b9bd4f/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":129,"username":"izackp","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/i/9de053/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":77,"username":"gokr","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e56c9b/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":94,"username":"Bluemoon","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bluemoon/{size}/348_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":15,"username":"friesencr","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":69,"username":"boberfly","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/aeb1de/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2}],"created_by":{"id":94,"username":"Bluemoon","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bluemoon/{size}/348_2.png"},"last_poster":{"id":77,"username":"gokr","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e56c9b/{size}.png"},"links":[{"url":"https://github.com/quarnster/asaot","title":"GitHub - quarnster/asaot: AngelScript Ahead Of Time compiler","internal":false,"attachment":false,"reflection":false,"clicks":23,"user_id":15,"domain":"github.com","root_domain":"github.com"}]}}