{"post_stream":{"posts":[{"id":12797,"name":"","username":"reattiva","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/r/b77776/{size}.png","created_at":"2016-07-12T17:51:56.000Z","cooked":"\u003cp\u003eHello, I’ve tried to port the code of “Rasterized Voxel-based Dynamic Global Illumination” by Hawar Doghramachi:\u003cbr\u003e\n\u003ca href=\"http://hd-prg.com/RVGlobalIllumination.html\" rel=\"nofollow noopener\"\u003ehd-prg.com/RVGlobalIllumination.html\u003c/a\u003e\u003cbr\u003e\nIt is only a port, all credits to the original author.\u003cbr\u003e\nIt is DirectX11 only, you can find it here:\u003cbr\u003e\n\u003ca href=\"https://github.com/reattiva/Urho3D/tree/GI_work\" rel=\"nofollow noopener\"\u003egithub.com/reattiva/Urho3D/tree/GI_work\u003c/a\u003e\u003cbr\u003e\nThe main code is here: .\\Source\\Work\\WorkTests\\SampleRVGI.cpp\u003cbr\u003e\nThe render path (Data/RVGI/RenderPaths/RVGI.xml) has a brief explanation of what it is doing.\u003c/p\u003e\n\u003cp\u003eIt is still incomplete, has only one voxel grid (two in the original code) and there are some problems: random flickering (this can be solved with a temporal filter), light bleeding through walls, pixellated look… the original sample looks better.\u003c/p\u003e\n\u003cp\u003eIt is so so, but what was implemented to make it work maybe can be useful (DirectX11 only):\u003cbr\u003e\ngeometry shaders, compute shaders, structured buffers (called ShaderBuffer) for reading (StructuredBuffer) and writing (RWStructuredBuffer) from compute and pixel shaders, compute command for the render path, manual unbinding of graphic resources (SRV, UAV, RT) (very useful), texture arrays as output (render targets) for pixel and compute shaders, null triangle command (this is similar to the quad command but can be instanced, it is useful to write to texture arrays), option to disable the stencil view (again, useful for writing to texture arrays), option to set a per-pass cull mode, per-command shaders parameters for scene pass commands, jumps and repetitions in the render path.\u003c/p\u003e\n\u003cp\u003eI’ve added some examples, they are in the same directory, see the selector in main.cpp.\u003c/p\u003e\n\u003cp\u003eVideo: \u003ca href=\"http://webmshare.com/ww16j\" rel=\"nofollow noopener\"\u003ewebmshare.com/ww16j\u003c/a\u003e (does not represent the quality of the original work)\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:13:12.918Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":252,"reads":81,"readers_count":80,"score":1387.2,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://webmshare.com/ww16j","internal":false,"reflection":false,"title":"2016-07-14 20-32-52 | hosted on webmshare","clicks":104},{"url":"https://github.com/reattiva/Urho3D/tree/GI_work","internal":false,"reflection":false,"title":"GitHub - reattiva/Urho3D at GI_work","clicks":101},{"url":"http://hd-prg.com/RVGlobalIllumination.html","internal":false,"reflection":false,"title":"HD | RV Global Illumination","clicks":100},{"url":"https://discourse.urho3d.io/t/realtime-gi-via-radiance-hints/2954/3","internal":true,"reflection":true,"title":"Realtime GI via Radiance Hints","clicks":0},{"url":"https://discourse.urho3d.io/t/attempt-of-porting-aoit/6028","internal":true,"reflection":true,"title":"Attempt of porting AOIT","clicks":0},{"url":"https://discourse.urho3d.io/t/how-to-properly-render-dark-caves/6886/4","internal":true,"reflection":true,"title":"How to properly render dark caves?","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":72,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12798,"name":"","username":"franck22000","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f4b2a3/{size}.png","created_at":"2016-07-12T21:22:28.000Z","cooked":"\u003cp\u003eVery impressive amount of work done here \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e\n\u003cp\u003eAre you planning to make some separate pull request for adding compute, geometry shaders supports and all new renderpath commands in Urho ? That would be awesome for everyone.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:13:12.987Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":76,"readers_count":75,"score":15.2,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":174,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12800,"name":"hd_","username":"hdunderscore","avatar_template":"/user_avatar/discourse.urho3d.io/hdunderscore/{size}/1151_2.png","created_at":"2016-07-13T07:25:59.000Z","cooked":"\u003cp\u003eScreenshot?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:13:13.125Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":74,"readers_count":73,"score":14.8,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"hd_","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Contributor","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":114,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12801,"name":"","username":"codingmonkey","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","created_at":"2016-07-13T09:27:57.000Z","cooked":"\u003cp\u003eGreat work! It will be nice to see all this cool canges in master even without GI \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:13:13.200Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":73,"readers_count":72,"score":14.6,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":148,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12818,"name":"","username":"reattiva","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/r/b77776/{size}.png","created_at":"2016-07-13T19:59:23.000Z","cooked":"\u003cp\u003eI’m not planning to do a pull request. It is DirectX11 only, the OpenGL (and script) part is totally missing and it probably requires OpenGl 4.3. Other users have already fully implemented geometry shaders. Also I cannot give support for these changes, and I don’t want to dump it on the maintainers. Anyway, if you need help you can ask here.\u003cbr\u003e\nThis was already an old sample, a month ago I decided to tidying it up and organize it. Unfortunately now it is already too old for the master (Urho is very healthy).\u003cbr\u003e\nI’ll post some images.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:13:14.425Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":72,"readers_count":71,"score":19.4,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":72,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12824,"name":"","username":"franck22000","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f4b2a3/{size}.png","created_at":"2016-07-14T08:07:49.000Z","cooked":"\u003cp\u003eIf you are agree reattiva i can make some pull request based on your work to integrate Geometry shaders and compute shaders support in Urho for DX11 API only for now (Will try OpenGL implementation and left it for someone else if i can’t do it). I have been asking Cadaver and he is agree on his side.\u003c/p\u003e\n\u003cp\u003eIs it ok for you ?\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:13:14.891Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":70,"readers_count":69,"score":14.0,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":174,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12832,"name":"","username":"reattiva","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/r/b77776/{size}.png","created_at":"2016-07-14T18:02:02.000Z","cooked":"\u003cp\u003efranck, you don’t even need to ask, it’s 100% ok.\u003cbr\u003e\nHowever let me be pedant, can you also support it? I don’t want to push more work on Cadaver’s shoulders. Maybe, a separate branch kept updated with the master by somebody else, could be better (but unknown and out of range for many users).\u003cbr\u003e\nAnd please take a look at the code, my approach to problems was always hacky, a workaround with less effort possible (which is good if you want to merge time to time with the master branch). However some problems should have been solved in a more brave, organic and elegant way.\u003cbr\u003e\nBe sure to ask Cadaver before starting to work on it, compute shaders could be really off scope.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-01-02T01:13:15.414Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":69,"readers_count":68,"score":13.8,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":72,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12835,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-07-14T19:08:05.000Z","cooked":"\u003cp\u003eThe somewhat tricky thing with both geometry and compute is that at this point Urho itself requires them for absolutely nothing, there are no test cases / examples. Same could be said of e.g. texture arrays too, though.\u003c/p\u003e\n\u003cp\u003eIn that sense they could be quite low-maintenance features, as most don’t even notice or use them. But yes, definitely the hope is that once you contribute something, you practically know it best and it’s certainly better if you also have time in the future to even out possible rough spots.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2017-01-02T01:13:15.625Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":64,"readers_count":63,"score":12.8,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12912,"name":"","username":"godan","avatar_template":"/user_avatar/discourse.urho3d.io/godan/{size}/49_2.png","created_at":"2016-07-20T17:37:44.000Z","cooked":"\u003cp\u003eFor what it’s worth - I would \u003cem\u003elove\u003c/em\u003e to see this functionality become part of Urho. My main use of the Urho is for fairly computationally intensive tasks, so the ability to farm some of that off to graphics card is very appealing.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2017-01-02T01:13:21.003Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":64,"readers_count":63,"score":12.8,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":134,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12914,"name":"","username":"dragonCASTjosh","avatar_template":"/user_avatar/discourse.urho3d.io/dragoncastjosh/{size}/774_2.png","created_at":"2016-07-20T19:38:52.000Z","cooked":"\u003cp\u003ei think compute would allow allot of opportunity to optimize Urho under all API’s that support it\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2017-01-02T01:13:21.142Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":63,"readers_count":62,"score":17.6,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":284,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12927,"name":"","username":"codingmonkey","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","created_at":"2016-07-22T10:58:21.000Z","cooked":"\u003cp\u003eYes, gs and cs wery useful in some cases \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e\n\u003cp\u003eRiattivas’s implement very nice/legant decision with introduce the ShaderKey, i suppose.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2017-01-02T01:13:22.077Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":65,"readers_count":64,"score":13.0,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":148,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12939,"name":"","username":"reattiva","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/r/b77776/{size}.png","created_at":"2016-07-22T22:40:18.000Z","cooked":"\u003cp\u003eActually, I’ve borrowed that from Boberfly’s modern OpenGL branch.\u003cbr\u003e\nBut I wonder, how probable is a collision?\u003cbr\u003e\nI’ve tested another way, more crude and clumsy but with no collision.\u003cbr\u003e\nWe store the shaders pointers in a PODVector. For each new combination we store this PODVector in a list and we store the real shader program in another list (or create a struct for the two and use only one list). These two lists are kept in synch, so a PODVector and its corresponding program have the same index in the two lists.\u003cbr\u003e\nWhen we search for an existing combination, we skim the list, find its index and use this index to get the program from the other list.\u003cbr\u003e\nThis can be slower than a simple map search, but for a hundred of combinations should still be comparable, I think.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e    /// Shader programs search keys.\n    Vector\u0026lt;PODVector\u0026lt;ShaderVariation*\u0026gt; \u0026gt; shaderProgramsKeys_;\n    /// Shader programs.\n    Vector\u0026lt;SharedPtr\u0026lt;ShaderProgram\u0026gt; \u0026gt; shaderPrograms_;\n\n\n    PODVector\u0026lt;ShaderVariation*\u0026gt; key(3);\n    key[0] = computeShader_ ? computeShader_ : vertexShader_;\n    key[1] = pixelShader_;\n    key[2] = geometryShader_;\n\n    Vector\u0026lt;PODVector\u0026lt;ShaderVariation*\u0026gt; \u0026gt;::Iterator iKey = shaderProgramsKeys_.Find(key);\n    if (iKey != shaderProgramsKeys_.End())\n        shaderProgram_ = shaderPrograms_[iKey - shaderProgramsKeys_.Begin()];\n    else\n    {\n        ShaderProgram* newProgram = new ShaderProgram(this, vertexShader_, pixelShader_, geometryShader_, computeShader_);\n        shaderProgramsKeys_.Push(key);\n        shaderPrograms_.Push(SharedPtr\u0026lt;ShaderProgram\u0026gt;(newProgram));\n        shaderProgram_ = newProgram;\n    }\u003c/code\u003e\u003c/pre\u003e","post_number":12,"post_type":1,"updated_at":"2017-01-02T01:13:22.988Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":70,"readers_count":69,"score":19.0,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":72,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":12948,"name":"","username":"codingmonkey","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","created_at":"2016-07-24T05:54:17.000Z","cooked":"\u003cp\u003eI think need desing the right arhetecture what take into account the future code changes in shader related part of urho. For example for future easy adding TES-shader.\u003cbr\u003e\nAlos you are right, I don’t think what key search are dramaticaly slow or mostly impact on perfomance.\u003c/p\u003e\n\u003cp\u003ecollisions:\u003cbr\u003e\nIn previous my trying i use some parts of your code for testing but part what placed in void Renderer::SetBatchShaders(Batch\u0026amp; batch, Technique* tech, bool allowShadows) works not well in my case, because it not take into account the shaders defenitions (auto pushed defs with vsi, gsi, psi) I suppose in most cases vsi= gsi (because vertex data flows from vs into gs, the same interpolators are used by both) but I decide to devide this into separated parts, for situation where GS-shader will have own unique auto-def.\u003c/p\u003e\n\u003cp\u003eso my impl looks like this:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://pastebin.com/Es5JVPY5\" class=\"onebox\" target=\"_blank\"\u003ehttp://pastebin.com/Es5JVPY5\u003c/a\u003e\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2017-03-28T02:23:19.183Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":67,"readers_count":66,"score":88.4,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://pastebin.com/Es5JVPY5","internal":false,"reflection":false,"title":"[C++] void Renderer::SetBatchShaders(Batch\u0026 batch, Technique* tech, bool allowShadows) - Pastebin.com","clicks":44},{"url":"http://discourse.urho3d.io/t/questions-on-urho3d/3439/5","internal":true,"reflection":true,"title":"Questions on URHO3D","clicks":3}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":148,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36773,"name":"ab4daa","username":"ab4daa","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/d26b3c/{size}.png","created_at":"2020-03-18T01:41:09.462Z","cooked":"\u003cp\u003eHello,\u003c/p\u003e\n\u003cp\u003eI want to have UAVs in shaders so trying to merge some codes from the repo.\u003c/p\u003e\n\u003cp\u003eUnfortunately after merge the smoke billboards in sample 07_Billboards becomes invisible.\u003c/p\u003e\n\u003cp\u003eGI_work repo has same problem.\u003c/p\u003e\n\u003cp\u003eIs it supposed to break the sample or some tweak should be done?\u003c/p\u003e\n\u003cp\u003eThanks!\u003c/p\u003e\n\u003cp\u003eEDIT:\u003cbr\u003e\nIt’s strange that if removing mushrooms and floors, the smoke is visible.\u003cbr\u003e\nBut once add back the mushrooms or floors the smoke becomes invisible.\u003cbr\u003e\nSo far have no idea what to check \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/sob.png?v=9\" title=\":sob:\" class=\"emoji\" alt=\":sob:\"\u003e\u003c/p\u003e\n\u003cp\u003eEDIT2:\u003cbr\u003e\nGot some luck with renderdoc, which points out size mismatch of some constant buffer in some vertex shaders.\u003cbr\u003e\nWhen searching for existed constant buffer with same name, should check its size, too.\u003cbr\u003e\nBecause same cbuffer might be different size with different compile flag.\u003c/p\u003e\n\u003caside class=\"onebox githubblob\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://github.com/reattiva/Urho3D/blob/GI_work/Source/Urho3D/Graphics/Direct3D11/D3D11Graphics.cpp#L2259-L2268\" target=\"_blank\" rel=\"nofollow noopener\"\u003egithub.com\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ch4\u003e\u003ca href=\"https://github.com/reattiva/Urho3D/blob/GI_work/Source/Urho3D/Graphics/Direct3D11/D3D11Graphics.cpp#L2259-L2268\" target=\"_blank\" rel=\"nofollow noopener\"\u003ereattiva/Urho3D/blob/GI_work/Source/Urho3D/Graphics/Direct3D11/D3D11Graphics.cpp#L2259-L2268\u003c/a\u003e\u003c/h4\u003e\n\u003cpre class=\"onebox\"\u003e\u003ccode class=\"lang-cpp\"\u003e\u003col class=\"start lines\" start=\"2259\" style=\"counter-reset: li-counter 2258 ;\"\u003e\n\u003cli\u003e// However is the name is the same, get the same buffer (the penalty is the same as creating a unique\u003c/li\u003e\n\u003cli\u003e// buffer for each stage)\u003c/li\u003e\n\u003cli\u003eHashMap\u0026lt;StringHash, unsigned\u0026gt;::Iterator j = constantBuffersKeys_.Find(name);\u003c/li\u003e\n\u003cli\u003eif (j != constantBuffersKeys_.End())\u003c/li\u003e\n\u003cli\u003e{\u003c/li\u003e\n\u003cli\u003e    key = j-\u0026gt;second_;\u003c/li\u003e\n\u003cli\u003e    i = constantBuffers_.Find(key);\u003c/li\u003e\n\u003cli\u003e    if (i != constantBuffers_.End())\u003c/li\u003e\n\u003cli\u003e        return i-\u0026gt;second_.Get();\u003c/li\u003e\n\u003cli\u003e}\u003c/li\u003e\n\u003c/ol\u003e\u003c/code\u003e\u003c/pre\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\n\u003cp\u003eIn this case, it is the ObjectVS will have problem.(size is different depends on BILLBOARD)\u003c/p\u003e\n\u003caside class=\"onebox githubblob\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://github.com/reattiva/Urho3D/blob/GI_work/bin/CoreData/Shaders/HLSL/Uniforms.hlsl#L129-L138\" target=\"_blank\" rel=\"nofollow noopener\"\u003egithub.com\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ch4\u003e\u003ca href=\"https://github.com/reattiva/Urho3D/blob/GI_work/bin/CoreData/Shaders/HLSL/Uniforms.hlsl#L129-L138\" target=\"_blank\" rel=\"nofollow noopener\"\u003ereattiva/Urho3D/blob/GI_work/bin/CoreData/Shaders/HLSL/Uniforms.hlsl#L129-L138\u003c/a\u003e\u003c/h4\u003e\n\u003cpre class=\"onebox\"\u003e\u003ccode class=\"lang-hlsl\"\u003e\u003col class=\"start lines\" start=\"129\" style=\"counter-reset: li-counter 128 ;\"\u003e\n\u003cli\u003ecbuffer ObjectVS : register(b5)\n\u003c/li\u003e\n\u003cli\u003e{\n\u003c/li\u003e\n\u003cli\u003e    float4x3 cModel;\n\u003c/li\u003e\n\u003cli\u003e#ifdef BILLBOARD\n\u003c/li\u003e\n\u003cli\u003e    float3x3 cBillboardRot;\n\u003c/li\u003e\n\u003cli\u003e#endif\n\u003c/li\u003e\n\u003cli\u003e#ifdef SKINNED\n\u003c/li\u003e\n\u003cli\u003e    uniform float4x3 cSkinMatrices[MAXBONES];\n\u003c/li\u003e\n\u003cli\u003e#endif\n\u003c/li\u003e\n\u003cli\u003e}\n\u003c/li\u003e\n\u003c/ol\u003e\u003c/code\u003e\u003c/pre\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":14,"post_type":1,"updated_at":"2020-03-18T04:32:30.220Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":37,"readers_count":36,"score":12.4,"yours":false,"topic_id":2115,"topic_slug":"rasterized-voxel-based-global-illumination","display_username":"ab4daa","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/reattiva/Urho3D/blob/GI_work/Source/Urho3D/Graphics/Direct3D11/D3D11Graphics.cpp#L2259-L2268","internal":false,"reflection":false,"title":"Urho3D/D3D11Graphics.cpp at GI_work · reattiva/Urho3D · GitHub","clicks":0},{"url":"https://github.com/reattiva/Urho3D/blob/GI_work/bin/CoreData/Shaders/HLSL/Uniforms.hlsl#L129-L138","internal":false,"reflection":false,"title":"Urho3D/Uniforms.hlsl at GI_work · reattiva/Urho3D · GitHub","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":867,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[12797,12798,12800,12801,12818,12824,12832,12835,12912,12914,12927,12939,12948,36773]},"timeline_lookup":[[1,2324],[5,2323],[7,2322],[9,2316],[11,2315],[12,2314],[13,2313],[14,980]],"suggested_topics":[{"id":7120,"title":"Log Error Once Macro","fancy_title":"Log Error Once Macro","slug":"log-error-once-macro","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-01-04T02:24:37.857Z","last_posted_at":"2022-01-04T02:24:37.925Z","bumped":true,"bumped_at":"2022-01-04T02:24:37.925Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":143,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7103,"title":":test_tube: DebugRenderer as GUI","fancy_title":":test_tube: DebugRenderer as GUI","slug":"debugrenderer-as-gui","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-17T02:25:06.606Z","last_posted_at":"2021-12-18T01:09:27.738Z","bumped":true,"bumped_at":"2021-12-18T01:09:27.738Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"🧪 DebugRenderer as GUI","tags_descriptions":{},"like_count":4,"views":267,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7099,"title":":fallen_leaf: Polynomials \u0026 Harmonics","fancy_title":":fallen_leaf: Polynomials \u0026amp; Harmonics","slug":"polynomials-harmonics","posts_count":6,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2021-12-13T05:06:04.641Z","last_posted_at":"2021-12-27T23:27:39.489Z","bumped":true,"bumped_at":"2021-12-27T23:27:39.489Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"🍂 Polynomials \u0026 Harmonics","tags_descriptions":{},"like_count":6,"views":392,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7110,"title":"Resource fetch define","fancy_title":"Resource fetch define","slug":"resource-fetch-define","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-27T12:28:55.126Z","last_posted_at":"2021-12-27T17:00:37.699Z","bumped":true,"bumped_at":"2021-12-27T17:00:37.699Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":7,"views":184,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7254,"title":"Android :android:urho3d-lib:generateJsonModelDebug failed task","fancy_title":"Android :android:urho3d-lib:generateJsonModelDebug failed task","slug":"android-urho3d-lib-generatejsonmodeldebug-failed-task","posts_count":14,"reply_count":8,"highest_post_number":14,"image_url":null,"created_at":"2022-05-07T08:16:09.637Z","last_posted_at":"2022-08-31T13:37:02.824Z","bumped":true,"bumped_at":"2022-08-31T13:37:02.824Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"Android :android:urho3d-lib:generateJsonModelDebug failed task","tags_descriptions":{},"like_count":2,"views":344,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1518,"username":"Joshua-PotatoMan","name":"Joshua","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/e9c0ed/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1522,"username":"tungts1101","name":"tungts1101","avatar_template":"/user_avatar/discourse.urho3d.io/tungts1101/{size}/3803_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":2115,"title":"Rasterized Voxel-based Global Illumination","fancy_title":"Rasterized Voxel-based Global Illumination","posts_count":14,"created_at":"2016-07-12T17:51:56.000Z","views":2375,"reply_count":0,"like_count":3,"last_posted_at":"2020-03-18T01:41:09.462Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"rasterized-voxel-based-global-illumination","category_id":13,"word_count":1340,"deleted_at":null,"user_id":72,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_2115","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":14,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":8,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":72,"username":"reattiva","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/r/b77776/{size}.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":148,"username":"codingmonkey","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/codingmonkey/{size}/119_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":174,"username":"franck22000","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f4b2a3/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":284,"username":"dragonCASTjosh","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dragoncastjosh/{size}/774_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":3},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":867,"username":"ab4daa","name":"ab4daa","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/d26b3c/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":114,"username":"hdunderscore","name":"hd_","avatar_template":"/user_avatar/discourse.urho3d.io/hdunderscore/{size}/1151_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":134,"username":"godan","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/godan/{size}/49_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":72,"username":"reattiva","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/r/b77776/{size}.png"},"last_poster":{"id":867,"username":"ab4daa","name":"ab4daa","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/d26b3c/{size}.png"},"links":[{"url":"http://webmshare.com/ww16j","title":"2016-07-14 20-32-52 | hosted on webmshare","internal":false,"attachment":false,"reflection":false,"clicks":104,"user_id":72,"domain":"webmshare.com","root_domain":"webmshare.com"},{"url":"https://github.com/reattiva/Urho3D/tree/GI_work","title":"GitHub - reattiva/Urho3D at GI_work","internal":false,"attachment":false,"reflection":false,"clicks":101,"user_id":72,"domain":"github.com","root_domain":"github.com"},{"url":"http://hd-prg.com/RVGlobalIllumination.html","title":"HD | RV Global Illumination","internal":false,"attachment":false,"reflection":false,"clicks":100,"user_id":72,"domain":"hd-prg.com","root_domain":"hd-prg.com"},{"url":"http://pastebin.com/Es5JVPY5","title":"[C++] void Renderer::SetBatchShaders(Batch\u0026 batch, Technique* tech, bool allowShadows) - Pastebin.com","internal":false,"attachment":false,"reflection":false,"clicks":44,"user_id":148,"domain":"pastebin.com","root_domain":"pastebin.com"},{"url":"http://discourse.urho3d.io/t/questions-on-urho3d/3439/5","title":"Questions on URHO3D","internal":true,"attachment":false,"reflection":true,"clicks":3,"user_id":628,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"}]}}