{"post_stream":{"posts":[{"id":4812,"name":"","username":"setzer22","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","created_at":"2015-02-16T23:37:58.000Z","cooked":"\u003cp\u003eI have made this simple Urho3D application that just gets an Script name as a parameter, compiles it and then exits. All is done in headless mode.\u003c/p\u003e\n\u003cp\u003eThe goal is having a tool that just checks the syntax for a given Script. Having this, combined with a simple Unix script to filter the output and just show compiler errors I’ve been able to check for compiler errors just by pressing F6 on vim \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/smiley.png?v=5\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\"\u003e\u003c/p\u003e\n\u003cp\u003eHere’s the Urho3D application code:\u003c/p\u003e\n\u003cp\u003eSyntaxChecker.h:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e#pragma once\n\n#include \u0026lt;Urho3D/Urho3D.h\u0026gt;\n#include \u0026lt;Urho3D/Engine/Application.h\u0026gt;\n\nusing namespace Urho3D;\n\nclass SyntaxChecker : public Urho3D::Application {\n   OBJECT(SyntaxChecker);\n\npublic:\n   SyntaxChecker(Urho3D::Context*);\n\n   virtual void Setup();\n   virtual void Start();\n   virtual void Stop() {}\n\nprivate:\n   \n   SharedPtr\u0026lt;Context\u0026gt; context;\n   String scriptName;\n};\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSyntaxChecker.cpp\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e#include \u0026lt;Urho3D/Engine/Engine.h\u0026gt;\n#include \u0026lt;Urho3D/Resource/ResourceCache.h\u0026gt;\n#include \u0026lt;Urho3D/Script/ScriptFile.h\u0026gt;\n#include \u0026lt;Urho3D/Script/Script.h\u0026gt;\n#include \"CustomComponents.h\"\n\nusing namespace Urho3D;\n\nDEFINE_APPLICATION_MAIN(SyntaxChecker)\n\nSyntaxChecker::SyntaxChecker(Urho3D::Context* context) : Application(context){\n    this-\u0026gt;context = context;\n}\n\nvoid SyntaxChecker::Setup(){\n    engineParameters_[\"Headless\"] = true;\n    \n    context_-\u0026gt;RegisterSubsystem(new Script(context_));\n    asIScriptEngine* engine = GetSubsystem\u0026lt;Script\u0026gt;()-\u0026gt;GetScriptEngine();\n    \n    //Register here your custom script and object methods\n    //if you happen to have them\n    \n    const Vector\u0026lt;String\u0026gt;\u0026amp; arguments = GetArguments();\n    scriptName = arguments[0];\n}\n\nvoid SyntaxChecker::Start(){\n    \n    ScriptFile* e = context-\u0026gt;GetSubsystem\u0026lt;ResourceCache\u0026gt;()-\u0026gt;\n        GetResource\u0026lt;ScriptFile\u0026gt;(\"Scripts/\"+scriptName);\n    engine_-\u0026gt;Exit();\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis should build fine as of 1.32 (and the most recent commit I have, actually).\u003c/p\u003e\n\u003cp\u003eThis will basically load the engine and then exit. If there was a compiler error, it should’ve been logged. The executable receives the Script path as its first paramer. Now to filter the output I use the following bash script (this is placed next to the executable):\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://syncheck.sh\" rel=\"nofollow noopener\"\u003esyncheck.sh\u003c/a\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e#!/bin/bash\n\ns=$(echo $1 | sed s/'.*\\/Scripts\\/\\(.*\\)'/'\\1'/g)\necho Checking syntax for $s\n./SyntaxChecker $s 2\u0026gt;\u0026amp;1 | awk '/ERROR/{print;}' | sed s/'\\[.*\\]\\s'/''/g\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis script does two things, first it takes a full (or relative) path as an argument and passes it to the Urho application I just posted and then it runs the application with the correct path. It’s assumed that all the scripts are under the “Scripts” directory, note that if there are multiple “Scripts” folders in the path this will fail (I’m not that good with regex, but this can be fixed).\u003c/p\u003e\n\u003cp\u003eLastly, I added this to my .vimrc in order to bind F6 to check the syntax for the current script:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd that’s all folks! When I have time I’ll just get rid of all the bash and do everything with Urho to ensure compatibility in all platforms.\u003c/p\u003e\n\u003cp\u003eThis can be basically used as an application that returns all the errors in a file, so it can be the base of a sublime, vim or similar editors’ plugin to highlight errors and things like that, and that was my idea on the first place. If anyone does something similar please share it!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:03:30.471Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":1,"readers_count":0,"score":12.2,"yours":false,"topic_id":852,"topic_slug":"utility-to-check-the-syntax-for-a-script-linux-only","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://syncheck.sh","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":125,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[4812]},"timeline_lookup":[[1,2836]],"suggested_topics":[{"id":7099,"title":":fallen_leaf: Polynomials \u0026 Harmonics","fancy_title":":fallen_leaf: Polynomials \u0026amp; Harmonics","slug":"polynomials-harmonics","posts_count":6,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2021-12-13T05:06:04.641Z","last_posted_at":"2021-12-27T23:27:39.489Z","bumped":true,"bumped_at":"2021-12-27T23:27:39.489Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"🍂 Polynomials \u0026 Harmonics","tags_descriptions":{},"like_count":6,"views":392,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7103,"title":":test_tube: DebugRenderer as GUI","fancy_title":":test_tube: DebugRenderer as GUI","slug":"debugrenderer-as-gui","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-17T02:25:06.606Z","last_posted_at":"2021-12-18T01:09:27.738Z","bumped":true,"bumped_at":"2021-12-18T01:09:27.738Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"🧪 DebugRenderer as GUI","tags_descriptions":{},"like_count":4,"views":267,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7110,"title":"Resource fetch define","fancy_title":"Resource fetch define","slug":"resource-fetch-define","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-27T12:28:55.126Z","last_posted_at":"2021-12-27T17:00:37.699Z","bumped":true,"bumped_at":"2021-12-27T17:00:37.699Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":7,"views":184,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7120,"title":"Log Error Once Macro","fancy_title":"Log Error Once Macro","slug":"log-error-once-macro","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-01-04T02:24:37.857Z","last_posted_at":"2022-01-04T02:24:37.925Z","bumped":true,"bumped_at":"2022-01-04T02:24:37.925Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":143,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7132,"title":"How to Draw Anti-Aliased Outlined Line on the UI layer?","fancy_title":"How to Draw Anti-Aliased Outlined Line on the UI layer?","slug":"how-to-draw-anti-aliased-outlined-line-on-the-ui-layer","posts_count":8,"reply_count":5,"highest_post_number":8,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/c/c040fdbc2f1856c238ba6328fd7f5ff80b15858f_2_782x1024.jpeg","created_at":"2022-01-17T22:08:06.874Z","last_posted_at":"2022-01-20T20:13:30.614Z","bumped":true,"bumped_at":"2022-01-20T20:13:30.614Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":173,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]}],"tags_descriptions":{},"id":852,"title":"Utility to check the syntax for a script [Linux only]","fancy_title":"Utility to check the syntax for a script [Linux only]","posts_count":1,"created_at":"2015-02-16T23:37:58.000Z","views":223,"reply_count":0,"like_count":0,"last_posted_at":"2015-02-16T23:37:58.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"utility-to-check-the-syntax-for-a-script-linux-only","category_id":13,"word_count":501,"deleted_at":null,"user_id":125,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_852","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":1,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png"},"last_poster":{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png"}}}