{"post_stream":{"posts":[{"id":23637,"name":"","username":"simonsch","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png","created_at":"2018-03-14T10:17:56.755Z","cooked":"\u003cp\u003eI have a RenderPath which is responsible for rendering a quad with a texture. So far i created a command for using a texture from disk.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026lt;renderpath\u0026gt;\n    \u0026lt;command output=\"viewport\" ps=\"Quad\" type=\"quad\" vs=\"Quad\"\n        \u0026lt;texture unit=\"diffuse\" name=\"Textures/Mushroom.dds\"/\u0026gt;\n    \u0026lt;/command\u0026gt;\n\u0026lt;/renderpath\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis works fine, now i want to change this texture programmatically in each new frame. How can i achieve this with c++? The texture is ready and i can grab the render path via the viewport in an eventcallback for begin_frame. But i am only able to change texture name.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eViewport* overlayViewport = renderer-\u0026gt;GetViewport(1);\nRenderPath * rp = overlayViewport-\u0026gt;GetRenderPath();\n\nfor ( int i = 0; i \u0026lt; rp-\u0026gt;GetNumCommands(); i++ ) {\n    RenderPathCommand *cmd = rp-\u0026gt;GetCommand(i);\n    if (cmd-\u0026gt;type_ == RenderCommandType::CMD_QUAD) {\n        cmd-\u0026gt;SetTextureName(TextureUnit::TU_DIFFUSE, \"texturename\");\n    }\n}\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2018-03-14T10:17:56.755Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":90,"reads":64,"readers_count":63,"score":462.8,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":938,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23638,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-03-14T10:44:49.817Z","cooked":"\u003cp\u003eAdd your texture as manual resource with some synthetic name to \u003ccode\u003eResourceCache\u003c/code\u003e.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-03-14T10:59:29.288Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":61,"readers_count":60,"score":37.2,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":23639,"name":"","username":"simonsch","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png","created_at":"2018-03-14T11:00:51.173Z","cooked":"\u003cp\u003eThank you, you are an hero :). It is really hard to get into this, but for those who want some code\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e auto *cache = GetSubsystem\u0026lt;ResourceCache\u0026gt;();\n cache-\u0026gt;AddManualResource(yourtexture);\u003c/code\u003e\u003c/pre\u003e","post_number":3,"post_type":1,"updated_at":"2018-03-14T11:00:51.173Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":61,"readers_count":60,"score":72.2,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":938,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23642,"name":"","username":"simonsch","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png","created_at":"2018-03-14T14:20:34.850Z","cooked":"\u003cp\u003eI have an additional problem now, i want to update that texture in each frame. Therefore i use the -\u0026gt;SetData() method and pass in the data of a opencv Mat. The texture gets updated, but it is flickering, i already tried different event callback.\u003c/p\u003e\n\u003cp\u003eIs there any fast way to update the content of this texture in each frame?\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-03-14T14:20:34.850Z","reply_count":2,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":58,"readers_count":57,"score":21.6,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":938,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23643,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-03-14T14:34:26.125Z","cooked":"\u003cp\u003eWhere do you call SetData?\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2018-03-14T14:34:26.125Z","reply_count":1,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":58,"readers_count":57,"score":16.6,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"simonsch","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23644,"name":"","username":"simonsch","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png","created_at":"2018-03-14T14:38:21.020Z","cooked":"\u003cp\u003eI call\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ecameraTexture-\u0026gt;SetData(0, 0, 0, overlay.cols, overlay.rows, overlay.data);\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ein\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSubscribeToEvent(E_UPDATE, URHO3D_HANDLER(HelloGUI, HandleUpdate));\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ebut also tried\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eE_BEGINFRAME\u003cbr\u003e\nE_ENDFRAME\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ewith same flickering result, texture resolution is fullscreen 1920 x 1080.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-03-14T14:39:19.812Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":57,"readers_count":56,"score":11.4,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":938,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23645,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-03-14T14:57:44.642Z","cooked":"\u003col\u003e\n\u003cli\u003eWhat’s exactly “flickering”? I suppose 1/2 of all possible graphical bugs are “flickering”.\u003c/li\u003e\n\u003cli\u003eTexture data is perfectly valid, isn’t it? So if you e.g.“dump” the texture somewhere, all images are fine.\u003c/li\u003e\n\u003cli\u003eWhat framerate do you have? If you reduce framerate (e.g. to 10 FPS via Sleep(100)), do you see this flickering?\u003c/li\u003e\n\u003c/ol\u003e","post_number":7,"post_type":1,"updated_at":"2018-03-14T14:57:44.642Z","reply_count":1,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":58,"readers_count":57,"score":16.6,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"simonsch","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23646,"name":"","username":"simonsch","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png","created_at":"2018-03-14T15:13:44.823Z","cooked":"\u003cp\u003e@ 1. I know, i try to describe. It seems that the frames are not valid, like the frame is not complete as the next one appears.\u003cbr\u003e\n@ 2. Maybe it will help you if i give you more context. I get a texture stream from a framework it is in an YUV NV21 format, i convert this to RGB via opencv and make the texture ready for rendering. So i think the error is there, i have this code\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ecv::cvtColor(yuv, rgb, CV_YUV2RGB_NV21);\ncv::transpose(rgb, result);\ncv::flip(result, result, 0);\ncv::flip(result, result, 1);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt converts color space, rotates and vertically flips the image so it fits the screen. When i remove this conversion the flickering between the frames is gone, but of course the image itself is wrong. I don’t understand how this conversion can cause this issues while rendering, as i only update the cv::Mat with the ‘result’ when everything is done. I should also say that i am in a different thread and head to set a mutex lock when writing to ‘result’.\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"mention\"\u003e@3\u003c/span\u003e. Lowering the framerate had no effect, like said i think the error is caused by the conversion.\u003c/p\u003e\n\u003cp\u003eEasiest way would be if i can directly push YUV through the texture, but as i saw only RGB formats are supported aren’t they?\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e            cameraTexture-\u0026gt;SetSize(overlay.cols, overlay.rows, Urho3D::Graphics::GetRGBFormat(), \n                                   TextureUsage::TEXTURE_STATIC);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBecause this conversion could also be done in glsl shadercode.\u003c/p\u003e\n\u003cp\u003eEDIT:\u003cbr\u003e\nI tryed a bit and moved the cv conversion part into the HandleUpdate() method, and now the flickering is gone, the but the fps dropped down noticeable. I think getting that YUV through shader would be great.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2018-03-14T15:19:37.594Z","reply_count":1,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":0,"reads":55,"readers_count":54,"score":16.0,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":938,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23647,"name":"Jonathan","username":"Sinoid","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","created_at":"2018-03-14T15:20:56.600Z","cooked":"\u003cp\u003eIf you don’t need the pixel data yourself I’d flip your UV coordinates where you access the surface. Material param \u003ccode\u003eVOffset\u003c/code\u003e 0, -1, 0, 0.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2018-03-14T15:20:56.600Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":51,"readers_count":50,"score":10.2,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"Jonathan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":669,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23648,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-03-14T15:26:28.093Z","cooked":"\u003caside class=\"quote\" data-post=\"8\" data-topic=\"4086\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/simonsch/40/1319_1.png\" class=\"avatar\"\u003e simonsch:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI think getting that YUV through shader would be great.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYou could always write your own shader that do whatever you want.\u003c/p\u003e\n\u003cp\u003eRegarding your issue, you cannot call SetData while you are touching passed data, so they both shall be mutexed. Is it valid for you? OFC it’s better to move everything into shader.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2018-03-14T15:31:18.023Z","reply_count":1,"reply_to_post_number":8,"quote_count":1,"incoming_link_count":0,"reads":51,"readers_count":50,"score":15.2,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"simonsch","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23649,"name":"Jonathan","username":"Sinoid","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","created_at":"2018-03-14T15:39:31.140Z","cooked":"\u003cp\u003eIf you move it into the shader you have to first figure out what type of YUV you’re getting - YUV422, interleaved, U odd V quad, two-channel 16-bit interleaved, NvRG16, etc? As well as what you might get if cv is just giving you \u003cem\u003eraw\u003c/em\u003e device data.\u003c/p\u003e\n\u003cp\u003eYou can pass whatever through Texture::SetData as long as it fits the constraints of the texture format. It doesn’t care about the \u003cem\u003emeaning\u003c/em\u003e of the data, just that the layout is correct - so feeding it YUV that’s 8-bits per components is okay if you’re decoding in the shader.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2018-03-14T15:39:31.140Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":51,"readers_count":50,"score":15.2,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"Jonathan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":669,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23660,"name":"","username":"simonsch","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png","created_at":"2018-03-15T08:24:48.038Z","cooked":"\u003cp\u003eYeah i think that was issue, it now runs stable but slow. I know that about the shader but i need to get YUV into it as far as is saw i only can tell the urho texture to use an rgb format like -\u0026gt; Urho3D::Graphics::GetRGBFormat(). I am not sure how to create a texture sampler which holds that kind of data.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2018-03-15T08:24:48.038Z","reply_count":0,"reply_to_post_number":10,"quote_count":0,"incoming_link_count":0,"reads":47,"readers_count":46,"score":9.4,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":938,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23661,"name":"","username":"simonsch","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png","created_at":"2018-03-15T08:31:43.956Z","cooked":"\u003cp\u003eHi :),\u003c/p\u003e\n\u003cp\u003ei think the exact format ist YUV NV21 (420sp) i am not sure how to handle these. So you say, that i should you use something like Urho3D::Graphics::GetFloat16Format() for YUV for the texture binding?\u003c/p\u003e\n\u003cp\u003eIn relation to your previous post\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e flip your UV coordinates\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ei have only a texture no material and no xml. Any way to set this programmatically. I don’t see a corresponding field in the documentation. Is there a way to use GL_TEXTURE_EXTERNAL_OES as target when urho calls glTexImage2D? I read this would make things easy with YUV.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2018-03-15T09:49:11.538Z","reply_count":1,"reply_to_post_number":11,"quote_count":0,"incoming_link_count":1,"reads":46,"readers_count":45,"score":19.2,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Sinoid","name":"Jonathan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":938,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23665,"name":"Jonathan","username":"Sinoid","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","created_at":"2018-03-15T16:52:24.213Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003ei think the exact format ist YUV NV21 (420sp) i am not sure how to handle these. So you say, that i should you use something like Urho3D::Graphics::GetFloat16Format() for YUV for the texture binding?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eNV21 is an 8-bit per component interleave. That requires an R8G8 format, which currently isn’t supported so you’d have to modify the engine to support R8G8 formats. Because it’s interleaved you’re going to need to pass the texture size off to your shaders or through the vertex data you draw (ie. setting the uv coords there) so you know the domain for sampling - blame GLES2 for that (lacking \u003ccode\u003etextureSize\u003c/code\u003e).\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ei have only a texture no material and no xml\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eYou need a material even if it doesn’t come from XML. If you’re using your own shader through some explicit means then you have to do the UV coordinate transform in your shader.\u003c/p\u003e\n\u003cp\u003eVOffset and UOffset are shader parameters the material picks up. You set them through \u003ccode\u003evoid Material::SetShaderParameter(const String\u0026amp; name, const Variant\u0026amp; value)\u003c/code\u003e so:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ematerial-\u0026gt;SetShaderParamater(\"UOffset\", Vector4(-1,0,0,0));\nmaterial-\u0026gt;SetShaderParamater(\"VOffset\", Vector4(0, -1,0,0));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIs there a way to use GL_TEXTURE_EXTERNAL_OES as target when urho calls glTexImage2D? I read this would make things easy with YUV.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eNo not easily. You’ll have to modify the engine to hack it in. Since OpenGL is a bizarre mess it treats GL_TEXTURE_EXTERNAL_OES as a texture-type so that’s probably going to be \u003cem\u003efun\u003c/em\u003e.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2018-03-15T16:52:24.213Z","reply_count":1,"reply_to_post_number":13,"quote_count":0,"incoming_link_count":0,"reads":45,"readers_count":44,"score":14.0,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"Jonathan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"simonsch","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":669,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":23766,"name":"","username":"simonsch","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png","created_at":"2018-03-21T15:14:34.844Z","cooked":"\u003cp\u003eHi\u003cbr\u003e\ni finally was able to get this working. It was even more easy then i thought.\u003cbr\u003e\nAfter creating the texture in cache i fetched the textureID. The framework i use was able to directly bind the camera image to this texture then.\u003cbr\u003e\nIn my shader code it was necessary to enable the extension for GL_TEXTURE_EXTERNAL_OES and then in was able to directly read rgb pixels from that sampler \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e.\u003c/p\u003e\n\u003cp\u003eThy all for your great support!\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2018-03-21T15:14:34.844Z","reply_count":1,"reply_to_post_number":14,"quote_count":0,"incoming_link_count":0,"reads":42,"readers_count":41,"score":73.4,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Sinoid","name":"Jonathan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":938,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":32633,"name":"Pencheff","username":"Pencheff","avatar_template":"/user_avatar/discourse.urho3d.io/pencheff/{size}/259_2.png","created_at":"2019-08-16T11:56:11.990Z","cooked":"\u003cp\u003eI just finished porting my video player to Android using MediaCodec, which also needs GL_TEXTURE_EXTERNAL_OES to render directly to surface (instead of having to copy the texture through CPU).\u003c/p\u003e\n\u003cp\u003eFor anyone who needs such texture in Urho3D in the future without hacking Urho’s code:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eclass Texture2D_ExternalOES: public Texture2D {\n  URHO3D_OBJECT(Texture2D_ExternalOES, Texture2D)\npublic:\n  explicit Texture2D_ExternalOES(Context* context): Texture2D(context) {\n    target_ = GL_TEXTURE_EXTERNAL_OES;\n    autoResolve_ = false;\n    multiSample_ = 0;\n  }\n  ~Texture2D_ExternalOES() override = default;\nprotected:\n  // NOTE: Works fine without this but you will get an error \n  // \"Failed to create texture\" because Urho3D will try to glTexImage2D\n  bool Create() override {\n    Release();\n    if (!graphics_ || !width_ || !height_)\n      return false;\n\n    if (graphics_-\u0026gt;IsDeviceLost()) {\n      URHO3D_LOGWARNING(\"Texture creation while device is lost\");\n      return true;\n    }\n\n    GLuint texture_id;\n    glGenTextures(1, \u0026amp;texture_id);\n    glBindTexture(GL_TEXTURE_EXTERNAL_OES, texture_id);\n    glBindTexture(GL_TEXTURE_EXTERNAL_OES, 0);\n\n    object_.name_ = texture_id;\n    levels_ = 1;\n    levelsDirty_ = false;\n    parametersDirty_ = false;\n    return true;\n  }\n};\n\n// Example usage (same as Texture2D):\nauto graphics = context-\u0026gt;GetSubsystem\u0026lt;Graphics\u0026gt;();\ntexture_ = new Texture2D_ExternalOES(context);\ntexture_-\u0026gt;SetNumLevels(1);\ntexture_-\u0026gt;SetSize(graphics-\u0026gt;GetWidth(), graphics-\u0026gt;GetHeight(), Graphics::GetFloat32Format(), TEXTURE_DYNAMIC);\ntexture_-\u0026gt;SetAddressMode(COORD_U, ADDRESS_CLAMP);\ntexture_-\u0026gt;SetAddressMode(COORD_V, ADDRESS_CLAMP);\ntexture_-\u0026gt;SetFilterMode(FILTER_ANISOTROPIC);\u003c/code\u003e\u003c/pre\u003e","post_number":16,"post_type":1,"updated_at":"2019-08-19T13:01:12.305Z","reply_count":0,"reply_to_post_number":15,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":35.8,"yours":false,"topic_id":4086,"topic_slug":"renderpath-dynamic-texture-changing","display_username":"Pencheff","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"simonsch","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":691,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":"Add Create() override","can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[23637,23638,23639,23642,23643,23644,23645,23646,23647,23648,23649,23660,23661,23665,23766,32633]},"timeline_lookup":[[1,1715],[12,1714],[14,1713],[15,1708],[16,1195]],"suggested_topics":[{"id":7080,"title":"Build urho3d source on windows 10 - cmake - \"Error in configuration process, project files may be invalid\"","fancy_title":"Build urho3d source on windows 10 - cmake - \u0026ldquo;Error in configuration process, project files may be invalid\u0026rdquo;","slug":"build-urho3d-source-on-windows-10-cmake-error-in-configuration-process-project-files-may-be-invalid","posts_count":8,"reply_count":4,"highest_post_number":8,"image_url":null,"created_at":"2021-12-03T01:55:53.267Z","last_posted_at":"2021-12-06T22:46:59.584Z","bumped":true,"bumped_at":"2021-12-06T22:46:59.584Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":324,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7215,"title":"How to build rbfx?","fancy_title":"How to build rbfx?","slug":"how-to-build-rbfx","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-03-11T01:28:40.314Z","last_posted_at":"2022-03-12T19:16:39.360Z","bumped":true,"bumped_at":"2022-03-12T19:16:39.360Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":268,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1447,"username":"Batch","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f17d59/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":4086,"title":"RenderPath dynamic Texture changing","fancy_title":"RenderPath dynamic Texture changing","posts_count":16,"created_at":"2018-03-14T10:17:56.669Z","views":1207,"reply_count":12,"like_count":7,"last_posted_at":"2019-08-16T11:56:11.990Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"renderpath-dynamic-texture-changing","category_id":10,"word_count":1460,"deleted_at":null,"user_id":938,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4086","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":16,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":2,"username":"Eugene","excerpt":"Add your texture as manual resource with some synthetic name to ResourceCache."},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":938,"username":"simonsch","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png","post_count":8,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":669,"username":"Sinoid","name":"Jonathan","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/f19dbf/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":691,"username":"Pencheff","name":"Pencheff","avatar_template":"/user_avatar/discourse.urho3d.io/pencheff/{size}/259_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":938,"username":"simonsch","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/simonsch/{size}/1319_2.png"},"last_poster":{"id":691,"username":"Pencheff","name":"Pencheff","avatar_template":"/user_avatar/discourse.urho3d.io/pencheff/{size}/259_2.png"}}}