{"post_stream":{"posts":[{"id":34487,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-11-21T04:53:18.966Z","cooked":"\u003cp\u003eI noticed the \u003cstrong\u003etodo\u003c/strong\u003e in \u003ca href=\"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Core/Context.cpp#L138\" rel=\"nofollow noopener\"\u003ehttps://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Core/Context.cpp#L138\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eSince those subsystems were created by the Engine class, why not remove them in the Engine destructor?\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eEngine::~Engine()\n{\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;Audio\u0026gt;();\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;UI\u0026gt;();\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;Input\u0026gt;();\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;Renderer\u0026gt;();\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;Graphics\u0026gt;();\n}\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2019-11-21T21:08:49.571Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":23,"reads":44,"readers_count":43,"score":138.8,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Core/Context.cpp#L138","internal":false,"reflection":false,"title":"Urho3D/Context.cpp at master ¬∑ urho3d/Urho3D ¬∑ GitHub","clicks":10}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34506,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2019-11-22T14:15:52.056Z","cooked":"\u003cp\u003eIt was from a quick fix about 7 years ago. See \u003ca href=\"https://github.com/urho3d/Urho3D/commit/4f5e060a6acf9640e2940aa3f7189fb7eaa0b6b5\"\u003ehttps://github.com/urho3d/Urho3D/commit/4f5e060a6acf9640e2940aa3f7189fb7eaa0b6b5\u003c/a\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2019-11-22T14:15:52.056Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":42,"readers_count":41,"score":13.4,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/commit/4f5e060a6acf9640e2940aa3f7189fb7eaa0b6b5","internal":false,"reflection":false,"title":"Fixed possible subsystem deinitialization order error. ¬∑ urho3d/Urho3D@4f5e060 ¬∑ GitHub","clicks":5}],"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34507,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2019-11-22T14:34:30.554Z","cooked":"\u003cp\u003eI like the suggestion! If I‚Äôm not mistaken, Engine is also a subsystem, so when the context is destroyed and it‚Äôs hash map holding the subsystems is emptied, there won‚Äôt be a guarantee that the Engine subsystem is destroyed first. I haven‚Äôt looked through the code regarding that, so I could be wrong. If I‚Äôm correct, though, I think you‚Äôll also need to either have shared pointers to those subsystems in Engine or will have to explicitly remove the engine subsystem in Context‚Äôs destructor.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2019-11-22T14:34:30.554Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":41,"readers_count":40,"score":13.2,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34508,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2019-11-22T14:45:28.684Z","cooked":"\u003cp\u003eTwo things for sure, the \u003ccode\u003eEngine\u003c/code\u003e is not a subsystem and the ‚Äútodo‚Äù marker is not intended to remind the original author (Lasse) to revert the code back. My two cents.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2019-11-22T14:45:28.684Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":39,"readers_count":38,"score":32.8,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34509,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2019-11-22T15:10:06.503Z","cooked":"\u003caside class=\"quote no-group\" data-post=\"4\" data-topic=\"5728\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/weitjong/40/4_2.png\" class=\"avatar\"\u003e weitjong:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ethe \u003ccode\u003eEngine\u003c/code\u003e is not a subsystem\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eActually‚Ä¶\u003c/p\u003e\n\u003caside class=\"onebox githubblob\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Engine/Engine.cpp#L118-L119\" target=\"_blank\"\u003egithub.com\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ch4\u003e\u003ca href=\"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Engine/Engine.cpp#L118-L119\" target=\"_blank\"\u003eurho3d/Urho3D/blob/master/Source/Urho3D/Engine/Engine.cpp#L118-L119\u003c/a\u003e\u003c/h4\u003e\n\u003cpre class=\"onebox\"\u003e\u003ccode class=\"lang-cpp\"\u003e\u003col class=\"start lines\" start=\"118\" style=\"counter-reset: li-counter 117 ;\"\u003e\n\u003cli\u003e// Register self as a subsystem\n\u003c/li\u003e\n\u003cli\u003econtext_-\u0026gt;RegisterSubsystem(this);\n\u003c/li\u003e\n\u003c/ol\u003e\u003c/code\u003e\u003c/pre\u003e\n\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":5,"post_type":1,"updated_at":"2019-11-22T15:10:06.503Z","reply_count":0,"reply_to_post_number":4,"quote_count":1,"incoming_link_count":2,"reads":41,"readers_count":40,"score":63.2,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Engine/Engine.cpp#L118-L119","internal":false,"reflection":false,"title":"Urho3D/Engine.cpp at master ¬∑ urho3d/Urho3D ¬∑ GitHub","clicks":0}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34510,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2019-11-22T16:12:01.250Z","cooked":"\u003cp\u003eHah! I should have double checked the codebase myself before making that previous post. To me the ‚ÄúEngine‚Äù doesn‚Äôt seem to be in the same level as the rest of the subsystems. Perhaps we have not modeled the dependency between the subsystems properly. The context class should not know/have the harcoded order to remove the subsystems. It will be great if Lasse can comment on this todo marker.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2019-11-22T16:12:01.250Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":39,"readers_count":38,"score":12.8,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34512,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2019-11-22T16:45:03.978Z","cooked":"\u003caside class=\"quote no-group\" data-post=\"6\" data-topic=\"5728\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/weitjong/40/4_2.png\" class=\"avatar\"\u003e weitjong:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt will be great if Lasse can comment on this\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eMentioning \u003ca class=\"mention\" href=\"/u/cadaver\"\u003e@cadaver\u003c/a\u003e occasionally summons him. \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slightly_smiling_face.png?v=9\" title=\":slightly_smiling_face:\" class=\"emoji\" alt=\":slightly_smiling_face:\"\u003e\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2019-11-22T16:45:03.978Z","reply_count":0,"reply_to_post_number":6,"quote_count":1,"incoming_link_count":0,"reads":37,"readers_count":36,"score":7.4,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34514,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-11-22T21:19:09.602Z","cooked":"\u003cp\u003eThis is what I came up with:\u003cbr\u003e\nThe Application registers the Engine as subsystem and also removes it when the Engine is stoped.\u003c/p\u003e\n\u003cp\u003eI don‚Äôt know how to make this work on Android/iOS since I‚Äôm not targeting those platforms (Perhaps remove the Engine subsystem in RunFrame when exiting?), but here‚Äôs some code:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eApplication.cpp\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eApplication::Application(Context *context) :\n\tObject(context),\n\texitCode_(EXIT_SUCCESS)\n{\n\t...\n\n\tengine_ = context_-\u0026gt;RegisterSubsystem\u0026lt;Engine\u0026gt;();\n\t\n\t...\n}\n\nint Application::Run()\n{\n\t...\n\n\tStop();\n\n\t// Now this Application is the only object holding a reference to an Engine instance.\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;Engine\u0026gt;();\n\t\n\treturn exitCode_;\n\t\n\t...\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eContext.cpp\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eContext::~Context()\n{\n\tsubsystems_.Clear();\n\tfactories_.Clear();\n\n\t...\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eEngine.h\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eclass URHO3D_API Engine : public Object\n{\n\t...\n\t\nprivate:\n\tSharedPtr\u0026lt;FileSystem\u0026gt; filesystem_;\n#ifdef URHO3D_LOGGING\n\tSharedPtr\u0026lt;Log\u0026gt; log_;\n#endif\n#ifdef URHO3D_PROFILING\n\tSharedPtr\u0026lt;Profiler\u0026gt; profiler_;\n\tSharedPtr\u0026lt;EventProfiler\u0026gt; eventProfiler_;\n#endif\n\n\t// Note the ordering, we want Graphics to be the last to be destructed.\n\tSharedPtr\u0026lt;Graphics\u0026gt; graphics_;\n\tSharedPtr\u0026lt;Renderer\u0026gt; renderer_;\n\tSharedPtr\u0026lt;Input\u0026gt; input_;\n\tSharedPtr\u0026lt;Audio\u0026gt; audio_;\n\tSharedPtr\u0026lt;UI\u0026gt; ui_;\n\n\tSharedPtr\u0026lt;Time\u0026gt; time_;\n\tSharedPtr\u0026lt;WorkQueue\u0026gt; workQueue_;\n\tSharedPtr\u0026lt;ResourceCache\u0026gt; resourceCache_;\n\tSharedPtr\u0026lt;Localization\u0026gt; localization_;\n#ifdef URHO3D_NETWORK\n\tSharedPtr\u0026lt;Network\u0026gt; network_;\n#endif\n#ifdef URHO3D_DATABASE\n\tSharedPtr\u0026lt;Database\u0026gt; database_;\n#endif\n\n\t...\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eEngine.cpp\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eEngine::Engine(Context *context) :\n\t...\n{\n\tfilesystem_ = context_-\u0026gt;RegisterSubsystem\u0026lt;FileSystem\u0026gt;();\n#ifdef URHO3D_LOGGING\n\tlog_ = context_-\u0026gt;RegisterSubsystem\u0026lt;Log\u0026gt;();\n#endif\n#ifdef URHO3D_PROFILING\n\tprofiler_ = context_-\u0026gt;RegisterSubsystem\u0026lt;Profiler\u0026gt;();\n#endif\n\tinput_ = context_-\u0026gt;RegisterSubsystem\u0026lt;Input\u0026gt;();\n\taudio_ = context_-\u0026gt;RegisterSubsystem\u0026lt;Audio\u0026gt;();\n\tui_ = context_-\u0026gt;RegisterSubsystem\u0026lt;UI\u0026gt;();\n\ttime_ = context_-\u0026gt;RegisterSubsystem\u0026lt;Time\u0026gt;();\n\tworkQueue_ = context_-\u0026gt;RegisterSubsystem\u0026lt;WorkQueue\u0026gt;();\n\tresourceCache_ = context_-\u0026gt;RegisterSubsystem\u0026lt;ResourceCache\u0026gt;();\n\tlocalization_ = context_-\u0026gt;RegisterSubsystem\u0026lt;Localization\u0026gt;();\n#ifdef URHO3D_NETWORK\n\tnetwork_ = context_-\u0026gt;RegisterSubsystem\u0026lt;Network\u0026gt;();\n#endif\n#ifdef URHO3D_DATABASE\n\tdatabase_ = context_-\u0026gt;RegisterSubsystem\u0026lt;Database\u0026gt;();\n#endif\n\n\t...\n}\n\nEngine::~Engine()\n{\n\t// Remove SDL based subsystems from the context.\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;UI\u0026gt;();\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;Audio\u0026gt;();\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;Input\u0026gt;();\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;Renderer\u0026gt;();\n\tcontext_-\u0026gt;RemoveSubsystem\u0026lt;Graphics\u0026gt;();\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis also reduces the number of GetSubsystem() calls.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2019-11-22T21:22:39.584Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":38,"readers_count":37,"score":37.6,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34515,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2019-11-22T22:13:15.118Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/athos\"\u003e@Athos\u003c/a\u003e Could you turn this into a PR and link to it from here?\u003cbr\u003e\nI think that would make it easier to discuss it further.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2019-11-22T22:13:15.118Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":33,"readers_count":32,"score":6.6,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34517,"name":"","username":"Athos","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","created_at":"2019-11-23T00:53:18.446Z","cooked":"\u003caside class=\"onebox githubpullrequest\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://github.com/urho3d/Urho3D/pull/2549\" target=\"_blank\" rel=\"nofollow noopener\"\u003egithub.com/urho3d/Urho3D\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003cdiv class=\"github-row\"\u003e\n  \u003cdiv class=\"github-icon-container\" title=\"Pull Request\"\u003e\n    \u003csvg width=\"60\" height=\"60\" class=\"github-icon\" viewbox=\"0 0 12 16\" aria-hidden=\"true\"\u003e\u003cpath d=\"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z\"\u003e\u003c/path\u003e\u003c/svg\u003e\n  \u003c/div\u003e\n\n  \u003cdiv class=\"github-info-container\"\u003e\n    \u003ch4\u003e\n      \u003ca href=\"https://github.com/urho3d/Urho3D/pull/2549\" target=\"_blank\" rel=\"nofollow noopener\"\u003eMove Context subsystem removal to Engine class\u003c/a\u003e\n    \u003c/h4\u003e\n\n    \u003cdiv class=\"branches\"\u003e\n      \u003ccode\u003eurho3d:master\u003c/code\u003e ‚Üê \u003ccode\u003eAthosArantes:Context-cleanup\u003c/code\u003e\n    \u003c/div\u003e\n\n    \u003cdiv class=\"github-info\"\u003e\n      \u003cdiv class=\"date\"\u003e\n        opened \u003cspan class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2019-11-23\" data-time=\"00:47:38\" data-timezone=\"UTC\"\u003e12:47AM - 23 Nov 19 UTC\u003c/span\u003e\n      \u003c/div\u003e\n\n      \u003cdiv class=\"user\"\u003e\n        \u003ca href=\"https://github.com/AthosArantes\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\n          \u003cimg alt=\"AthosArantes\" src=\"https://avatars2.githubusercontent.com/u/45997893?v=4\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\"\u003e\n          AthosArantes\n        \u003c/a\u003e\n      \u003c/div\u003e\n\n      \u003cdiv class=\"lines\" title=\"1 commits changed 4 files with 136 additions and 117 deletions\"\u003e\n        \u003ca href=\"https://github.com/urho3d/Urho3D/pull/2549/files\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\n          \u003cspan class=\"added\"\u003e+136\u003c/span\u003e\n          \u003cspan class=\"removed\"\u003e-117\u003c/span\u003e\n        \u003c/a\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\n  \u003c/div\u003e\n\u003c/div\u003e\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":10,"post_type":1,"updated_at":"2019-11-23T00:53:18.446Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":35,"readers_count":34,"score":22.0,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/pull/2549","internal":false,"reflection":false,"title":"Move Context subsystem removal to Engine class by AthosArantes ¬∑ Pull Request #2549 ¬∑ urho3d/Urho3D ¬∑ GitHub","clicks":1},{"url":"https://github.com/urho3d/Urho3D/pull/2549/files","internal":false,"reflection":false,"title":"Move Context subsystem removal to Engine class by AthosArantes ¬∑ Pull Request #2549 ¬∑ urho3d/Urho3D ¬∑ GitHub","clicks":0},{"url":"https://github.com/AthosArantes","internal":false,"reflection":false,"title":"AthosArantes (Athos Arantes Pereira) ¬∑ GitHub","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1179,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":34521,"name":"Lasse √ñ√∂rni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2019-11-25T08:54:24.646Z","cooked":"\u003cp\u003eIf you wanted to guarantee subsystem removal order, you could use a different data structure for that in addition to the lookup map, ie. a vector in Context, that the subsystems are also added to. And then removed in a reverse order.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2019-11-25T08:54:24.646Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":34,"readers_count":33,"score":66.8,"yours":false,"topic_id":5728,"topic_slug":"subsystem-removal-in-context-destructor","display_username":"Lasse √ñ√∂rni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[34487,34506,34507,34508,34509,34510,34512,34514,34515,34517,34521]},"timeline_lookup":[[1,1098],[2,1097],[8,1096],[11,1094]],"suggested_topics":[{"id":7196,"title":"Windows Urho3D build with -DURHO3D_OPENGL=1 using rake","fancy_title":"Windows Urho3D build with -DURHO3D_OPENGL=1 using rake","slug":"windows-urho3d-build-with-durho3d-opengl-1-using-rake","posts_count":18,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-02-20T12:49:25.777Z","last_posted_at":"2022-02-24T18:24:11.679Z","bumped":true,"bumped_at":"2022-02-24T18:24:11.679Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":254,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":421,"username":"Lunarovich","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/lunarovich/{size}/2097_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7122,"title":"Faster allocations with PMR","fancy_title":"Faster allocations with PMR","slug":"faster-allocations-with-pmr","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-01-10T16:23:15.053Z","last_posted_at":"2022-01-10T16:42:29.752Z","bumped":true,"bumped_at":"2022-01-10T17:55:02.117Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":209,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1363,"username":"vmost","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/5f9b8f/{size}.png"}}]},{"id":7158,"title":"Xamarin android urhosharp has no octree.getdrawables","fancy_title":"Xamarin android urhosharp has no octree.getdrawables","slug":"xamarin-android-urhosharp-has-no-octree-getdrawables","posts_count":11,"reply_count":9,"highest_post_number":11,"image_url":null,"created_at":"2022-01-27T15:03:52.636Z","last_posted_at":"2022-02-02T07:17:04.722Z","bumped":true,"bumped_at":"2022-02-02T07:17:04.722Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":256,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1503,"username":"tianlv777","name":"zerrrrr","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/a4c791/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7063,"title":"Quadspinner Gaea support on Urho?","fancy_title":"Quadspinner Gaea support on Urho?","slug":"quadspinner-gaea-support-on-urho","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2021-11-23T23:30:45.335Z","last_posted_at":"2021-11-23T23:30:45.396Z","bumped":true,"bumped_at":"2021-11-23T23:30:45.396Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":150,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7211,"title":"Particle is low","fancy_title":"Particle is low","slug":"particle-is-low","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-03-03T13:52:14.991Z","last_posted_at":"2022-04-20T05:18:36.122Z","bumped":true,"bumped_at":"2022-04-20T05:18:36.122Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":232,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1503,"username":"tianlv777","name":"zerrrrr","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/a4c791/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]}],"tags_descriptions":{},"id":5728,"title":"Subsystem removal in Context destructor","fancy_title":"Subsystem removal in Context destructor","posts_count":11,"created_at":"2019-11-21T04:53:18.910Z","views":539,"reply_count":2,"like_count":8,"last_posted_at":"2019-11-25T08:54:24.646Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"subsystem-removal-in-context-destructor","category_id":16,"word_count":677,"deleted_at":null,"user_id":1179,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_5728","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":11,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":5,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":4},{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":1179,"username":"Athos","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":3,"username":"cadaver","name":"Lasse √ñ√∂rni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1179,"username":"Athos","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/f1d935/{size}.png"},"last_poster":{"id":3,"username":"cadaver","name":"Lasse √ñ√∂rni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png"},"links":[{"url":"https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Core/Context.cpp#L138","title":"Urho3D/Context.cpp at master ¬∑ urho3d/Urho3D ¬∑ GitHub","internal":false,"attachment":false,"reflection":false,"clicks":10,"user_id":1179,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/urho3d/Urho3D/commit/4f5e060a6acf9640e2940aa3f7189fb7eaa0b6b5","title":"Fixed possible subsystem deinitialization order error. ¬∑ urho3d/Urho3D@4f5e060 ¬∑ GitHub","internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":4,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/urho3d/Urho3D/pull/2549","title":"Move Context subsystem removal to Engine class by AthosArantes ¬∑ Pull Request #2549 ¬∑ urho3d/Urho3D ¬∑ GitHub","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":1179,"domain":"github.com","root_domain":"github.com"}]}}