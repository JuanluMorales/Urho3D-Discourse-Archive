{"post_stream":{"posts":[{"id":27813,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-02-01T01:38:11.633Z","cooked":"\u003cp\u003eHey guys, I’m using the following code to rotate an enemy model to face the player model.\u003cbr\u003e\nIt’s the humble beginning of a simple steering behaviour.\u003cbr\u003e\nGenerally it’s working, but the orientation seems to flicker occasionally, which visually looks like a 90 degree error in orientation. Any ideas what the source of the numerical instability might be?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e        // Get the current facing direction (had to flip sign to suit model)\n        Vector3 currentDir = - GetNode()-\u0026gt;GetWorldDirection();\n\n        // Get the desired new direction\n        Vector3 newDir =  (target_-\u0026gt;GetNode()-\u0026gt;GetWorldPosition() - GetNode()-\u0026gt;GetWorldPosition()).Normalized();\n\n        // Compute the angle between current and new directions\n        float angle = currentDir.Angle(newDir);\n\n        // Construct our quaternion to rotate around world up axis by our angle\n        Quaternion q(angle, Vector3(0,1,0));\n\n        // Apply rotation\n        GetNode()-\u0026gt;Rotate(q, TS_WORLD);\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2019-02-02T15:37:05.130Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":328,"reads":30,"readers_count":29,"score":1646.0,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":4,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27814,"name":"ab4daa","username":"ab4daa","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/d26b3c/{size}.png","created_at":"2019-02-01T02:09:17.808Z","cooked":"\u003cp\u003eI don’t really know what do you exactly want to do.\u003c/p\u003e\n\u003cp\u003eBut I ran into quaternion rotation problem when trying to rotate toward a target rotation from current rotation with fixed rotation speed/degree per second.\u003cbr\u003e\n(consider a fighter is chasing its target, it should try to turn to the fleeing target)\u003cbr\u003e\nThis is \u003ca href=\"https://github.com/ab4daa/vehicle_rotation\" rel=\"nofollow noopener\"\u003emy way\u003c/a\u003e to do it.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eset rotation speed degree per second\u003c/li\u003e\n\u003c/ol\u003e\n\u003cblockquote\u003e\n\u003cp\u003evehicle_rotation.set_speed(spd, spd, spd);\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003einitialize current rotation\u003c/li\u003e\n\u003c/ol\u003e\n\u003cblockquote\u003e\n\u003cp\u003evehicle_rotation.set_rotation(urho3d_quater.PitchAngle(), urho3d_quater.YawAngle(), urho3d_quater.RollAngle());\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003eturn toward target each frame\u003c/li\u003e\n\u003c/ol\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUrho3D::Vector3 targetDir = target_location_ - my_position;\u003cbr\u003e\nUrho3D::Quaternion target_q(Urho3D::Vector3::FORWARD, targetDir);\u003cbr\u003e\nvehicle_rotation.turnToward(timeStep, target_q.PitchAngle(), target_q.YawAngle(), target_q.RollAngle());\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003col start=\"4\"\u003e\n\u003cli\u003eget result and apply to urho3d quaternion each frame\u003c/li\u003e\n\u003c/ol\u003e\n\u003cblockquote\u003e\n\u003cp\u003evehicle_rotation.get_rotation(p, y, r);\u003cbr\u003e\nurho3d_quaternion.FromEulerAngles(p, y, r);\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eBy doing this, even target keeps running/zig zag, fighter can smoothly turn toward it.\u003cbr\u003e\nIf just quaternion.nlerp, the turning speed is hard to control and will have some glitch in turning process.\u003c/p\u003e\n\u003cp\u003eDon’t know if it helps.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2019-02-01T02:12:11.208Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":29,"readers_count":28,"score":40.8,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"ab4daa","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/ab4daa/vehicle_rotation","internal":false,"reflection":false,"title":"GitHub - ab4daa/vehicle_rotation","clicks":1}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":867,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27815,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-02-01T02:23:31.096Z","cooked":"\u003cp\u003eMan, you certainly do a lot of angular constraining in your approach \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e\n\u003cp\u003eI still don’t yet know what is causing the ‘flickering orientation’ at certain angles, but I did notice a bug in Node::Rotate, where one of the cases is not normalizing the quaternion it returns:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e    case TS_WORLD:\n        if (parent_ == scene_ || !parent_)\n            rotation_ = (delta * rotation_).Normalized();\n        else\n        {\n            Quaternion worldRotation = GetWorldRotation();\n            rotation_ = rotation_ * worldRotation.Inverse() * delta * worldRotation;\n        }\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eStill, I switched from TS_WORLD to TS_LOCAL, and the flickering still occurs, so that is not the cause of the issue.\u003c/p\u003e\n\u003cp\u003eEDIT:\u003cbr\u003e\nI’ve just noticed that the issue only occurs in one direction.\u003cbr\u003e\nIf the player walks around the enemy in one direction, the enemy tracks the player perfectly - no glitches. But if player walks around enemy in the OTHER direction, glitch city.\u003cbr\u003e\nThis appears to be about the sign of the angle returned by Vector::Angle … as we know, there is no such thing as a negative angle, we’re using a fixed range, 0 to 360 degrees (I checked this). Well guess what, a Quaternion cannot perform a rotation of , say, -10 degrees (eg 350) degrees … quaternions are limited to 180 degree rotations, but our quaternion class appears not to be smart enough to choose the shortest path of rotation, which causes my orientation to have error of roughly 180 degrees whenever I attempt to rotate in a specific direction. Anyone care to weigh in on this?\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2019-02-01T02:44:07.750Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":2,"reads":28,"readers_count":27,"score":15.6,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"ab4daa","name":"ab4daa","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/d26b3c/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27816,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-02-01T03:17:05.699Z","cooked":"\u003cp\u003eI have solved the issue! The problem? Vector3::Angle( ) returns an UNSIGNED angle between two vectors. I needed a Signed angle.\u003c/p\u003e\n\u003cp\u003eIn order to solve the problem, I poked around in Unity sourcecode for a SignedAngle method, which I’ve slightly modified for Urho3D math.\u003cbr\u003e\nI highly recommend that we consider adding this guy to our Vector3 class!\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\n  float SignedAngle(Vector3 from, Vector3 to, Vector3 axis)\n        {\n            float unsignedAngle = from.Angle(to);\n            float sign = axis.DotProduct(from.CrossProduct(to));\n            if(sign\u0026lt;0)\n                unsignedAngle = -unsignedAngle;\n            return unsignedAngle;\n}\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThe ‘axis’ vector is a reference axis of rotation, which is compared (using dot product) against the orthogonal crossproduct of the from and to vectors, though we are only interested in the Sign, which is then applied to the unsigned angle.\u003cbr\u003e\nThe resulting SIGNED ANGLE is suitable for feeding to Quaternion’s angle/axis constructor, no more glitching.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2019-02-01T10:59:56.454Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":28,"readers_count":27,"score":40.6,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27819,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-02-01T04:17:41.155Z","cooked":"\u003cp\u003eHere’s my implementation for AI steering behaviour, except for having some fixed values for rotation speed limits, that will likely be changed.\u003cbr\u003e\nNote that I don’t drop down to euler angles.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid Character::UpdateZombie(float timeStep){\n    auto* animCtrl = node_-\u0026gt;GetComponent\u0026lt;AnimationController\u0026gt;(true);\n\n    if(target_!=nullptr)\n    {\n\n        // Get the current facing direction (had to flip sign to suit model)\n        Vector3 currentDir = - GetNode()-\u0026gt;GetWorldDirection();\n\n        // Get the desired new direction\n        Vector3 newDir =  (target_-\u0026gt;GetNode()-\u0026gt;GetWorldPosition() - GetNode()-\u0026gt;GetWorldPosition()).Normalized();\n\n        // Compute the angle between current and new directions\n        float angle = SignedAngle(currentDir, newDir, Vector3(0,1,0));\n\n        // Clamp the rate of rotation\n        angle *= 5 * timeStep;                  // 5 degrees per second\n        angle = Clamp\u0026lt;float\u0026gt;(angle,-30,+30) ;   // But limited to max 30 degrees per frame\n\n        // Construct our quaternion to rotate around world up axis by our angle\n        Quaternion q(angle, Vector3(0,1,0));\n\n        // Apply rotation\n        GetNode()-\u0026gt;Rotate(q, TS_LOCAL);\n\n    }\n\n    // TODO: fix up animations\n     animCtrl-\u0026gt;PlayExclusive(Animations_[Animations_Zombie::Z_Attack].Name, 0, true, 0.2f);\n\n}\u003c/code\u003e\u003c/pre\u003e","post_number":5,"post_type":1,"updated_at":"2019-02-01T11:00:13.738Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":6,"reads":26,"readers_count":25,"score":35.2,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":27822,"name":"","username":"guk_alex","avatar_template":"/user_avatar/discourse.urho3d.io/guk_alex/{size}/1929_2.png","created_at":"2019-02-01T06:43:34.194Z","cooked":"\u003cp\u003eLater I also experienced strange behaviour with calculating angles, it gives the range of (-180; 180); when I was working with euler angles as hot fix solution I appended 360 degrees to the result to make it positive and do not change the actual rotation. But this range is definitely not expected (may be in some cases it makes sense), but when calculating direction of rotation the change of the sign in some cases is not desirable effect (-179.9 - 1 = 179.1).\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2019-02-01T06:44:26.174Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":30.4,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1015,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27825,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-02-01T09:23:15.832Z","cooked":"\u003cp\u003eI have no strange side effects at this point, and shared my code in full, if you have some side cases to talk about i want to know\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2019-02-01T09:23:15.832Z","reply_count":1,"reply_to_post_number":6,"quote_count":0,"incoming_link_count":6,"reads":25,"readers_count":24,"score":40.0,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"guk_alex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/guk_alex/{size}/1929_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27826,"name":"","username":"guk_alex","avatar_template":"/user_avatar/discourse.urho3d.io/guk_alex/{size}/1929_2.png","created_at":"2019-02-01T10:20:55.568Z","cooked":"\u003cp\u003eThe only problem was that I thought that EulerAngles function of Quaternion returns values in range [0;360), but it is (-180;180) (I’m not sure does the range include 180 or -180). In this way it makes sense - if you need the [0;180) range and sign to make sure direction of an angle. (In my case I had an issue with dividing this range to get number of sectors of circle)\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2019-02-01T11:00:06.073Z","reply_count":1,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":4,"reads":23,"readers_count":22,"score":44.6,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1015,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27837,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-02-01T12:08:59.995Z","cooked":"\u003cp\u003eI would like your reply twice if i could, but I solved the issue, and am happy to explain it\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2019-02-01T12:08:59.995Z","reply_count":0,"reply_to_post_number":8,"quote_count":0,"incoming_link_count":1,"reads":23,"readers_count":22,"score":9.6,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"guk_alex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/guk_alex/{size}/1929_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27838,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-02-01T12:16:39.856Z","cooked":"\u003cp\u003eour quaternion math concludes that you want to know, or set, degrees of angular change in the counter clockwise direction only\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2019-02-01T12:16:39.856Z","reply_count":1,"reply_to_post_number":6,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":9.8,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"guk_alex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/guk_alex/{size}/1929_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27839,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-02-01T12:18:09.577Z","cooked":"\u003cp\u003ehighly unsafe given a 180 degree freedom\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2019-02-01T12:18:09.577Z","reply_count":0,"reply_to_post_number":10,"quote_count":0,"incoming_link_count":1,"reads":24,"readers_count":23,"score":9.8,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"reply_to_user":{"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":27874,"name":"Leith Ketchell","username":"Leith","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","created_at":"2019-02-02T14:43:18.607Z","cooked":"\u003cp\u003eGuys, we need a signed version of Vector3::Angle, one that tells us about the direction, not just the measure of the angle, its good for steering in games\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2019-02-02T14:43:18.607Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":21,"readers_count":20,"score":4.2,"yours":false,"topic_id":4887,"topic_slug":"unstable-quaternion-rotation-solved-solution-provided","display_username":"Leith Ketchell","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"suspended user","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1098,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[27813,27814,27815,27816,27819,27822,27825,27826,27837,27838,27839,27874]},"timeline_lookup":[[1,1391],[12,1390]],"suggested_topics":[{"id":7092,"title":"Finding the World Space Coordinates of the Screen Edges","fancy_title":"Finding the World Space Coordinates of the Screen Edges","slug":"finding-the-world-space-coordinates-of-the-screen-edges","posts_count":6,"reply_count":2,"highest_post_number":6,"image_url":null,"created_at":"2021-12-07T20:53:49.453Z","last_posted_at":"2021-12-08T12:33:52.510Z","bumped":true,"bumped_at":"2021-12-08T12:33:52.510Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":210,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7074,"title":"First Person and 3rd person camera and water reflections","fancy_title":"First Person and 3rd person camera and water reflections","slug":"first-person-and-3rd-person-camera-and-water-reflections","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-01T18:37:28.669Z","last_posted_at":"2021-12-01T21:19:51.519Z","bumped":true,"bumped_at":"2021-12-01T21:19:51.519Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":158,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7193,"title":"Can Z-Axis Feasibly be \"Up\"?","fancy_title":"Can Z-Axis Feasibly be \u0026ldquo;Up\u0026rdquo;?","slug":"can-z-axis-feasibly-be-up","posts_count":4,"reply_count":2,"highest_post_number":4,"image_url":null,"created_at":"2022-02-14T05:17:28.054Z","last_posted_at":"2022-02-14T07:26:53.817Z","bumped":true,"bumped_at":"2022-02-14T07:26:53.817Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":161,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]}],"tags_descriptions":{},"id":4887,"title":"Unstable quaternion rotation [Solved, solution provided]","fancy_title":"Unstable quaternion rotation [Solved, solution provided]","posts_count":12,"created_at":"2019-02-01T01:38:11.521Z","views":1120,"reply_count":7,"like_count":4,"last_posted_at":"2019-02-02T14:43:18.607Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"unstable-quaternion-rotation-solved-solution-provided","category_id":10,"word_count":1113,"deleted_at":null,"user_id":1098,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4887","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":12,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":5,"username":"Leith","excerpt":"Here’s my implementation for AI steering behaviour, except for having some fixed values for rotation speed limits, that will likely be changed. \nNote that I don’t drop down to euler angles. \nvoid Character::UpdateZombie(float timeStep){\n    auto* animCtrl = node_-\u0026gt;GetComponent\u0026lt;AnimationController\u0026gt;(t\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png","post_count":9,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":1015,"username":"guk_alex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/guk_alex/{size}/1929_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":867,"username":"ab4daa","name":"ab4daa","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/d26b3c/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"},"last_poster":{"id":1098,"username":"Leith","name":"Leith Ketchell","avatar_template":"/user_avatar/discourse.urho3d.io/leith/{size}/2384_2.png"},"links":[{"url":"https://github.com/ab4daa/vehicle_rotation","title":"GitHub - ab4daa/vehicle_rotation","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":867,"domain":"github.com","root_domain":"github.com"}]}}