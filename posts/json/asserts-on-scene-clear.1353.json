{"post_stream":{"posts":[{"id":7726,"name":"","username":"Enhex","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","created_at":"2015-09-10T17:52:48.000Z","cooked":"\u003cp\u003eThis is really weird.\u003cbr\u003e\nIt only happens in my game when the player dies while the monster attack animation plays, and the scene clears after attack animation ends and a the idle animation starts.\u003cbr\u003e\nThe scene clear is used for a level restart, removing everything and re-creating the scene.\u003c/p\u003e\n\u003cp\u003eThe assertions seems to originate from components deleting things on destruction.\u003cbr\u003e\nEach time it’s one of the following:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003edelete compoundShape_;\u003c/code\u003e in ~RigidBody()\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"spoiler\"\u003e\u003ccode\u003ebtFreeDefault(void * ptr) Line 29\tC++\nbtAlignedFreeDefault(void * ptr) Line 86\tC++\nbtAlignedFreeInternal(void * ptr) Line 177\tC++\nbtAlignedAllocator\u0026lt;btCompoundShapeChild,16\u0026gt;::deallocate(btCompoundShapeChild * ptr) Line 90\tC++\nbtAlignedObjectArray\u0026lt;btCompoundShapeChild\u0026gt;::deallocate() Line 117\tC++\nbtAlignedObjectArray\u0026lt;btCompoundShapeChild\u0026gt;::clear() Line 190\tC++\nbtAlignedObjectArray\u0026lt;btCompoundShapeChild\u0026gt;::~btAlignedObjectArray\u0026lt;btCompoundShapeChild\u0026gt;() Line 134\tC++\nbtCompoundShape::~btCompoundShape() Line 47\tC++\n[External Code]\t\nUrho3D::RigidBody::~RigidBody() Line 97\tC++\n\u003c/code\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003eSome HashMap in ~PhysicsWorld()\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eoperator delete[](void * ptr) Line 82\tC++\nUrho3D::AllocatorUninitialize(Urho3D::AllocatorBlock * allocator) Line 82\tC++\nUrho3D::HashMap\u0026lt;Urho3D::StringHash,Urho3D::Variant\u0026gt;::~HashMap\u0026lt;Urho3D::StringHash,Urho3D::Variant\u0026gt;() Line 246\tC++\nUrho3D::PhysicsWorld::~PhysicsWorld() Line 179\tC++\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eWhen AnimationController is destroyed, and \u003ccode\u003eVector\u0026lt;AnimationControl\u0026gt; animations_;\u003c/code\u003e is destroyed.\u003c/p\u003e\n\u003cp\u003eIf I don’t play the idle animation, the first kind of assertions stop happening (destruction ones), but I still get this assertion in asCContext::CleanReturnObject():\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhich originates from  ScriptFile::Execute().\u003cbr\u003e\nI’m not sure but I think this one doesn’t originate from scene-\u0026gt;Clear().\u003cbr\u003e\nIt also may happen when the idle animation is enabled but quite rarely.\u003c/p\u003e\n\u003cp\u003eI use a ScriptInstance on the scene node and have a script entry point “Main” class that derives from ScriptObject.\u003cbr\u003e\nWhen the scene clears, the scriptInstance is removed, and when the level is reloaded a new scriptInstance is created. Maybe it causes problems with the script engine state?\u003c/p\u003e\n\u003cp\u003eI do derive a class from Script to register game level script API, could it cause this problem?\u003c/p\u003e\n\u003cp\u003eI’m using HEAD version (a2d8f8670e46565b74f1765c369f969c83cdf7c6)\u003cbr\u003e\nVS2015\u003cbr\u003e\nWindows 7 64bit\u003c/p\u003e\n\u003cp\u003eIt seems like something went horribly wrong but I have no idea what.\u003cbr\u003e\nAnd it only happens in that weird case of player dying while the monster AI is attacking and the scene is cleared after the attack animation is over.\u003cbr\u003e\nIf another animation starts after the attack is over it also changes the kind of error.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:07:06.547Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":14,"reads":4,"readers_count":3,"score":70.8,"yours":false,"topic_id":1353,"topic_slug":"asserts-on-scene-clear","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":184,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7733,"name":"","username":"Enhex","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","created_at":"2015-09-11T06:06:32.000Z","cooked":"\u003cp\u003eI tried to change the idle animation to the walk animation and the problem disappeared.\u003cbr\u003e\nWhen I tried other animations it still happens, only the walk animation works.\u003c/p\u003e\n\u003cp\u003eIs it possible that the .ani is corrupted? I exported it from Blender using the Urho addon.\u003c/p\u003e\n\u003cp\u003eIt still doesn’t make sense that the asserts only happen when a specific animation is played after the attack animation.\u003cbr\u003e\nMaybe there’s a bug with the animation controller?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:07:07.094Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":4,"readers_count":3,"score":0.8,"yours":false,"topic_id":1353,"topic_slug":"asserts-on-scene-clear","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":184,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7734,"name":"","username":"rasteron","avatar_template":"/user_avatar/discourse.urho3d.io/rasteron/{size}/55_2.png","created_at":"2015-09-11T06:24:27.000Z","cooked":"\u003caside class=\"quote\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/enhex/40/81_1.png\" class=\"avatar\"\u003e Enhex:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIs it possible that the .ani is corrupted? I exported it from Blender using the Urho addon.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYou should probably test your ani files first individually and verify if you have successfully exported them using Blender. The Editor is a good tool for that. Check also if you are using the correct animation layers.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:07:07.154Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":4,"readers_count":3,"score":0.8,"yours":false,"topic_id":1353,"topic_slug":"asserts-on-scene-clear","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7735,"name":"","username":"Enhex","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","created_at":"2015-09-11T06:52:05.000Z","cooked":"\u003cp\u003e[quote=“rasteron”]\u003cbr\u003e\nYou should probably test your ani files first individually and verify if you have successfully exported them using Blender. The Editor is a good tool for that. Check also if you are using the correct animation layers.[/quote]\u003c/p\u003e\n\u003cp\u003eIt works, if an animation wouldn’t work on its own will be very obvious and trivial.\u003cbr\u003e\nAll the animations are on layer 0.\u003cbr\u003e\nLike I said the weird part is that it only happens when the attack animation is played and then the other animation is played, and the scene clears.\u003c/p\u003e\n\u003cp\u003eEDIT:\u003cbr\u003e\nI just tested it with just a model (no monster AI), and it still happens.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:07:07.227Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":1353,"topic_slug":"asserts-on-scene-clear","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":184,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7737,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-09-11T07:37:40.000Z","cooked":"\u003cp\u003eI just tested a potentially dangerous operation, clearing the scene from a script object’s method in the AnimatingScene sample (which plays animations), but it didn’t cause trouble.\u003c/p\u003e\n\u003cp\u003eMy suspicion is on memory / heap corruption, but it’s hard to say where that is happening, it could be your code.\u003c/p\u003e\n\u003cp\u003eSee if you can get a short reproduction case with for example only using scripting and the Urho built-in assets, if you manage that then please submit it as an issue.\u003c/p\u003e\n\u003cp\u003eWe should definitely update AngelScript to newer at some point, it has improved a lot in the meanwhile.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:07:07.349Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":1353,"topic_slug":"asserts-on-scene-clear","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":7738,"name":"","username":"Enhex","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","created_at":"2015-09-11T08:00:37.000Z","cooked":"\u003cp\u003eManaged to replicate it in a project based on modified “04_StaticScene.as” using “Urho3DPlayer_d.exe”.\u003c/p\u003e\n\u003cp\u003eI’m using the same free model, which is this one: \u003ca href=\"http://opengameart.org/content/lizardman-0\" rel=\"nofollow noopener\"\u003eopengameart.org/content/lizardman-0\u003c/a\u003e\u003cbr\u003e\nIt takes two animations, and jack only have walk animation.\u003c/p\u003e\n\u003cp\u003eI’ll pack it up, including the lizardman model and its blender file, and open an issue in a moment.\u003c/p\u003e\n\u003cp\u003eEDIT:\u003cbr\u003e\nIssue opened: \u003ca href=\"https://github.com/urho3d/Urho3D/issues/885\" rel=\"nofollow noopener\"\u003egithub.com/urho3d/Urho3D/issues/885\u003c/a\u003e\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:07:07.418Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":3,"readers_count":2,"score":5.6,"yours":false,"topic_id":1353,"topic_slug":"asserts-on-scene-clear","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://opengameart.org/content/lizardman-0","internal":false,"reflection":false,"title":"Lizardman | OpenGameArt.org","clicks":1},{"url":"https://github.com/urho3d/Urho3D/issues/885","internal":false,"reflection":false,"title":"Animations cause asserts on exit · Issue #885 · urho3d/Urho3D · GitHub","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":184,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[7726,7733,7734,7735,7737,7738]},"timeline_lookup":[[1,2630]],"suggested_topics":[{"id":7105,"title":"Multiple Application.UI Roots?","fancy_title":"Multiple Application.UI Roots?","slug":"multiple-application-ui-roots","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/7/74b10ce575f1b69fe43be4abcb07605d74a1d27c_2_1024x544.jpeg","created_at":"2021-12-20T08:55:14.707Z","last_posted_at":"2021-12-22T02:33:05.795Z","bumped":true,"bumped_at":"2021-12-22T02:33:05.795Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":243,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7125,"title":"Android mobile shows jaggies in the instersection plane-terrain","fancy_title":"Android mobile shows jaggies in the instersection plane-terrain","slug":"android-mobile-shows-jaggies-in-the-instersection-plane-terrain","posts_count":5,"reply_count":3,"highest_post_number":5,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d36aedb4e8cf5409efca6c976aae7e4a5c499eb9.png","created_at":"2022-01-11T11:59:18.993Z","last_posted_at":"2022-01-11T21:27:40.692Z","bumped":true,"bumped_at":"2022-01-12T07:36:41.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":129,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7181,"title":"StaticModelGroup - Are ShaderParameters Shared?","fancy_title":"StaticModelGroup - Are ShaderParameters Shared?","slug":"staticmodelgroup-are-shaderparameters-shared","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-02-02T09:31:19.658Z","last_posted_at":"2022-02-02T17:06:24.059Z","bumped":true,"bumped_at":"2022-02-02T17:06:24.059Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":120,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7083,"title":"Using custom models in Xamarin.Forms shared project","fancy_title":"Using custom models in Xamarin.Forms shared project","slug":"using-custom-models-in-xamarin-forms-shared-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-03T08:34:21.895Z","last_posted_at":"2021-12-03T11:40:30.983Z","bumped":true,"bumped_at":"2021-12-03T11:40:30.983Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":198,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1493,"username":"Nikolai","name":"Nikolai Miroshnichenko","avatar_template":"/user_avatar/discourse.urho3d.io/nikolai/{size}/3632_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]}],"tags_descriptions":{},"id":1353,"title":"Asserts on scene-\u003eClear()","fancy_title":"Asserts on scene-\u0026gt;Clear()","posts_count":6,"created_at":"2015-09-10T17:52:48.000Z","views":355,"reply_count":0,"like_count":0,"last_posted_at":"2015-09-11T08:00:37.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"asserts-on-scene-clear","category_id":10,"word_count":813,"deleted_at":null,"user_id":184,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1353","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":54,"username":"rasteron","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rasteron/{size}/55_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png"},"last_poster":{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png"},"links":[{"url":"http://opengameart.org/content/lizardman-0","title":"Lizardman | OpenGameArt.org","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":184,"domain":"opengameart.org","root_domain":"opengameart.org"}]}}