{"post_stream":{"posts":[{"id":2620,"name":"","username":"cin","avatar_template":"/user_avatar/discourse.urho3d.io/cin/{size}/5_2.png","created_at":"2014-10-10T07:35:16.000Z","cooked":"\u003cp\u003eI want to allow user upload package file on runtime, with [UserNodeFile].xml and all resources used in xml file, to server, create node and load content to this node from xml file.\u003cbr\u003e\nAll stes here:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eUser upload package file to server\u003c/li\u003e\n\u003cli\u003eServer call ResourceCache-\u0026gt;AddPackageFile(user_package_file); and add package file to autoload.\u003c/li\u003e\n\u003cli\u003eClient send command to create node and load node content form xml file from package file.\u003c/li\u003e\n\u003cli\u003eServer create node and load its content from xml file.\u003c/li\u003e\n\u003cli\u003eNow network must send package file to clients to allow see created model by user.\u003c/li\u003e\n\u003cli\u003eServer send node ID to client to allow user manipulate it.\u003c/li\u003e\n\u003c/ol\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:00:45.090Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":26,"reads":10,"readers_count":9,"score":132.0,"yours":false,"topic_id":478,"topic_slug":"transfer-package-by-request","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2626,"name":"","username":"cin","avatar_template":"/user_avatar/discourse.urho3d.io/cin/{size}/5_2.png","created_at":"2014-10-10T13:32:42.000Z","cooked":"\u003cp\u003eNow I make experiment and I see what package file sending when client connect to server.\u003cbr\u003e\nMy test code here.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eNode* NetServer::CreateTestObject(Vector3 pos = Vector3::ZERO)\n{\n\tNode* pn = scene-\u0026gt;CreateChild(\"Test\");\n\tpn-\u0026gt;SetPosition(pos);\n\tResourceCache* cache = GetSubsystem\u0026lt;ResourceCache\u0026gt;();\n\tSharedPtr\u0026lt;PackageFile\u0026gt; pkgfile(new PackageFile(context_, \"Packages\\\\Teapot.pkg\"));\n\tcache-\u0026gt;AddPackageFile(pkgfile);\n\tscene-\u0026gt;AddRequiredPackageFile(pkgfile);\n\tXMLFile* xf = (cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"Teapot.xml\"));\n\tXMLElement xr = xf-\u0026gt;GetRoot(\"node\");\n\tpn-\u0026gt;LoadXML(xr);\n\treturn pn;\n}\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eHow i can to force clients to download added package when they already connected and have loaded scene?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:00:45.584Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":10,"readers_count":9,"score":7.0,"yours":false,"topic_id":478,"topic_slug":"transfer-package-by-request","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2627,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-10-10T14:25:06.000Z","cooked":"\u003cp\u003ePresently you can’t (without modifying the engine).\u003c/p\u003e\n\u003cp\u003eUrho does not work well as an engine using network streamed resources/packages, because everything is based on the assumption of immediately available resources (ie. you instantiate a model, you expect the model/material/textures to already be there.)\u003c/p\u003e\n\u003cp\u003eIf resources were loaded from packages in the middle of a client being connected to a scene, either the server would have to delay sending objects depending on those packages, or the client would need the intelligence to wait before trying to instantiate them.\u003c/p\u003e\n\u003cp\u003eYou are welcome to improve the engine to work in this direction, but it may be a large and hard overhaul. Btw. this is exactly the situation we are dealing a lot in the realXtend Tundra project (\u003ca href=\"https://github.com/realxtend/tundra.git\"\u003egithub.com/realxtend/tundra.git\u003c/a\u003e), and that’s also why its network \u0026amp; asset code are at least 2x more complex than Urho \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:00:45.648Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":478,"topic_slug":"transfer-package-by-request","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/realxtend/tundra.git","internal":false,"reflection":false,"title":"GitHub - realXtend/tundra: realXtend Tundra SDK, a 3D virtual world application platform.","clicks":2}],"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2628,"name":"","username":"cin","avatar_template":"/user_avatar/discourse.urho3d.io/cin/{size}/5_2.png","created_at":"2014-10-10T14:54:52.000Z","cooked":"\u003cp\u003ecadaver,  are you (or who now work with realXtend/tundra) plan to add this feature to engine?\u003cbr\u003e\nToday I try to understand engine internals and may be write here about how to implement this.\u003cbr\u003e\nMy preliminary thoughts on the matter:\u003c/p\u003e\n\u003cp\u003e[ul][li]Client receive that what it must create replicated node with component.[/li]\u003cbr\u003e\n[li]If it fail, client get list of packages on server and check they on cache. If needed then client download (sync) missing packages from server, and try again to load resource into cache.\u003cbr\u003e\nOR[/li]\u003cbr\u003e\n[li]If it fail, client ask server “In which package this resource?” . Server send package filename and client download (sync) only this missing package from server, and try again  to load resource.[/li][/ul]\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:00:45.729Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":478,"topic_slug":"transfer-package-by-request","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2629,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-10-10T15:08:24.000Z","cooked":"\u003cp\u003eMy plan is to not work on this kind of functionality, at least for now. The Tundra codebase is practically full of assumptions “what if this asset is not yet downloaded” and the increased complexity that results from it, so in Urho I was glad to be free from that \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=5\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"\u003e\u003c/p\u003e\n\u003cp\u003eI assume that with “fail” you mean that some of the needed resources is missing. Your flow looks basically OK. You possibly may get away with instantiating the node and component instantly, but leaving for example the model empty (null) as it hasn’t been downloaded yet. Then you start the download and once it’s completed, assign the model. You’ll run into difficulties and special cases, though, for example a bone hierarchy can not be instantiated before the model exists, so if the object has bone attachments, those can not practically be instantiated before the model.\u003c/p\u003e\n\u003cp\u003eAnother way would be to store objects received from server, that have missing resources, into a kind of “buffer” while waiting for the resources to load. Then, after all needed resources are loaded, instantiate the object based on the buffered data. The server will of course keep sending updates (as eg. the object moves), in which case you must keep updating the buffered data. And in worst case the object might get deleted before the downloads finish, which you also need to take into account.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:00:45.791Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":9,"readers_count":8,"score":1.8,"yours":false,"topic_id":478,"topic_slug":"transfer-package-by-request","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2637,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-10-11T10:37:45.000Z","cooked":"\u003cp\u003eIt looks to be on the right track at least in theory. One thing you didn’t have there yet would be to sync the updated package list to other connected clients, right?\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:00:46.421Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":9,"readers_count":8,"score":1.8,"yours":false,"topic_id":478,"topic_slug":"transfer-package-by-request","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":2638,"name":"","username":"cin","avatar_template":"/user_avatar/discourse.urho3d.io/cin/{size}/5_2.png","created_at":"2014-10-12T02:42:07.000Z","cooked":"\u003cp\u003eSome update.\u003cbr\u003e\nindent is 4 spaces.\u003cbr\u003e\nAdded parameter all_clients, if it true then all clients sync packages. Default it true.\u003cbr\u003e\nSyncPackages registered in NetworkAPI.cpp.\u003cbr\u003e\nPull request created.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-01-02T01:00:46.483Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":9,"readers_count":8,"score":11.8,"yours":false,"topic_id":478,"topic_slug":"transfer-package-by-request","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":7,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[2620,2626,2627,2628,2629,2637,2638]},"timeline_lookup":[[1,2966],[6,2965],[7,2964]],"suggested_topics":[{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7098,"title":"Cartoon Fire Effect","fancy_title":"Cartoon Fire Effect","slug":"cartoon-fire-effect","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2021-12-10T04:08:49.887Z","last_posted_at":"2021-12-12T02:49:51.076Z","bumped":true,"bumped_at":"2021-12-12T02:49:51.076Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":274,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7160,"title":"RayCast trouble","fancy_title":"RayCast trouble","slug":"raycast-trouble","posts_count":17,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-01-29T00:06:00.367Z","last_posted_at":"2022-01-30T00:29:39.356Z","bumped":true,"bumped_at":"2022-01-30T00:29:39.356Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":260,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7081,"title":"Install Urho3D Library - Windows 10 - rake build - \"project does not exist\"","fancy_title":"Install Urho3D Library - Windows 10 - rake build - \u0026ldquo;project does not exist\u0026rdquo;","slug":"install-urho3d-library-windows-10-rake-build-project-does-not-exist","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-03T03:06:40.974Z","last_posted_at":"2021-12-03T17:53:10.844Z","bumped":true,"bumped_at":"2021-12-03T17:53:10.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":190,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]}],"tags_descriptions":{},"id":478,"title":"Transfer package by request","fancy_title":"Transfer package by request","posts_count":7,"created_at":"2014-10-10T07:35:16.000Z","views":277,"reply_count":0,"like_count":0,"last_posted_at":"2014-10-12T02:42:07.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"transfer-package-by-request","category_id":10,"word_count":778,"deleted_at":null,"user_id":7,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_478","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":7,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":7,"username":"cin","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/cin/{size}/5_2.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2}],"created_by":{"id":7,"username":"cin","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/cin/{size}/5_2.png"},"last_poster":{"id":7,"username":"cin","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/cin/{size}/5_2.png"},"links":[{"url":"https://github.com/realxtend/tundra.git","title":"GitHub - realXtend/tundra: realXtend Tundra SDK, a 3D virtual world application platform.","internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":3,"domain":"github.com","root_domain":"github.com"}]}}