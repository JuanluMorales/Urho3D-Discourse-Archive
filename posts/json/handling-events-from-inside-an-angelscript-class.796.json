{"post_stream":{"posts":[{"id":4352,"name":"","username":"JulyForToday","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/a9a28c/{size}.png","created_at":"2015-01-26T14:16:21.000Z","cooked":"\u003cp\u003eHi again. Back with another snag.\u003c/p\u003e\n\u003cp\u003eWent searching through the forums, and \u003ca href=\"http://discourse.urho3d.io/t/angelscript-scriptobject-methods/366/6\" data-bbcode=\"true\"\u003ethis thread\u003c/a\u003e \u003cspan class=\"bbcode-i\"\u003ealmost\u003c/span\u003e covers what I’m interested in.\u003c/p\u003e\n\u003cp\u003eHere is the issue: in angelscript, I have a \u003ca href=\"http://Main.as\" rel=\"nofollow noopener\"\u003eMain.as\u003c/a\u003e that has a bunch of code (stolen from one of the samples) and Start() calls a SubscribeEvents() method, which calls SubscribeToEvent() to register some event handlers.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://Main.as\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\"\u003eMain.as\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e#include \"Stuff.as\"\nvoid Start()\n{\n\tSubscriberToEvents();\n}\n\nvoid SubscribeToEvents()\n{\n\tSubscribeToEvent(\"KeyDown\", \"HandleKeyDown\");\n\tSubscribeToEvent(\"UIMouseClick\", \"HandleUIMouseClick\");\n\tSubscribeToEvent(\"Update\", \"HandleUpdate\");\n\tSubscribeToEvent(\"PostUpdate\", \"HandlePostUpdate\");\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere is more code in \u003ca href=\"http://main.as\" rel=\"nofollow noopener\"\u003emain.as\u003c/a\u003e, but I’m keeping it simple for clarity. Everything runs fine with things set up this way.\u003c/p\u003e\n\u003cp\u003eNow I want to move most of the code in \u003ca href=\"http://Main.as\" rel=\"nofollow noopener\"\u003eMain.as\u003c/a\u003e, including the handlers and the SubscribeToEvents() method over into another class. Then \u003ca href=\"http://Main.as\" rel=\"nofollow noopener\"\u003eMain.as\u003c/a\u003e will work mainly as an entry point, and I can instantiate that new class in \u003ca href=\"http://Main.as\" rel=\"nofollow noopener\"\u003eMain.as\u003c/a\u003e instead:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://Main.as\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\"\u003eMain.as\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e#include \"FPSGame.as\"\nvoid Start()\n{\n\tFPSGame@ game = FPSGame();\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"http://FPSGame.as\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\"\u003eFPSGame.as\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e#include \"Stuff.as\"\nclass FPSGame\n{\n\tFPSGame()\n\t{\n\t\tSubscribeToEvents();\n\t}\n\n\tvoid SubscribeToEvents()\n\t{\n\t\tSubscribeToEvent(\"KeyDown\", \"HandleKeyDown\");\n\t\tSubscribeToEvent(\"UIMouseClick\", \"HandleUIMouseClick\");\n\t\tSubscribeToEvent(\"Update\", \"HandleUpdate\");\n\t\tSubscribeToEvent(\"PostUpdate\", \"HandlePostUpdate\");\n\t}\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe scripts do compile and run, but none of the event handlers in FPSGame fire (HandleKeyDown, HandleUIMouseClick, etc…). Which of course is undesirable.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://urho3d.github.io/documentation/HEAD/_scripting.html\" data-bbcode=\"true\" rel=\"nofollow noopener\"\u003eFrom the documentation:\u003c/a\u003e\u003c/p\u003e\n\u003caside class=\"quote\"\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSubscribing to events in script behaves differently depending on whether SubscribeToEvent() is called from a script object’s method, or from a procedural script function. If called from an instantiated script object, the ScriptInstance becomes the event receiver on the C++ side, and calls the specified handler method when the event arrives. If called from a function, the ScriptFile will be the event receiver and the handler must be a free function in the same script file. The third case is if the event is subscribed to from a script object that does not belong to a ScriptInstance. In that case the ScriptFile will create a proxy C++ object on demand to be able to forward the event to the script object.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSo SubscribeToEvent() has 3 modes of operating.\u003cbr\u003e\n[ul]\u003cbr\u003e\n[\u003cem\u003e] ScriptInstance (not applicable here)[/\u003c/em\u003e]\u003cbr\u003e\n[\u003cem\u003e] Procedural (which is what is happening in the original \u003ca href=\"http://Main.as\" rel=\"nofollow noopener\"\u003eMain.as\u003c/a\u003e)[/\u003c/em\u003e]\u003cbr\u003e\n[\u003cem\u003e] Proxy (which I’m fairly sure is applicable here)[/\u003c/em\u003e]\u003cbr\u003e\n[/ul]\u003c/p\u003e\n\u003cp\u003eNow I’m not sure that the script object mentioned in that paragraph means a plain vanilla angelscript object (class), or a ScriptObject from Urho, which FPSGame could inherit from, although I’m not sure I want to do that (I tried that, and it didn’t work anyways). Maybe there is a special way to register the eventhandlers with that proxy object mentioned?\u003c/p\u003e\n\u003cp\u003eIt seems like I should be able to use normal angelscript classes to build my application, and only use ScriptObject when those classes will be used in a ScriptInstance (which FPSGame never would be). Or maybe I’m wrong about that. But either way, I can’t get the events to work in the FPSGame class.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:02:57.360Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":148,"reads":24,"readers_count":23,"score":746.8,"yours":false,"topic_id":796,"topic_slug":"handling-events-from-inside-an-angelscript-class","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://Main.as","internal":false,"reflection":false,"clicks":5},{"url":"http://discourse.urho3d.io/t/angelscript-scriptobject-methods/366/6","internal":false,"reflection":false,"title":"Angelscript ScriptObject methods - Support - Urho3D","clicks":4},{"url":"http://main.as","internal":false,"reflection":false,"clicks":1},{"url":"http://urho3d.github.io/documentation/HEAD/_scripting.html","internal":false,"reflection":false,"title":"Urho3D - Documentation - Scripting","clicks":0},{"url":"http://FPSGame.as","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":193,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":4357,"name":"","username":"Bluemoon","avatar_template":"/user_avatar/discourse.urho3d.io/bluemoon/{size}/348_2.png","created_at":"2015-01-26T18:07:29.000Z","cooked":"\u003cp\u003eTo be able to subscribe to and handle event in an angelscript class, the class would have to inherit from the ScriptObject angelscript class. Try making your scriptclass inherit from scriptobject, it should work.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:02:57.738Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":20,"readers_count":19,"score":4.0,"yours":false,"topic_id":796,"topic_slug":"handling-events-from-inside-an-angelscript-class","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":94,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":4372,"name":"","username":"friesencr","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png","created_at":"2015-01-26T22:05:27.000Z","cooked":"\u003cp\u003eYou don’t have to inherit from scriptobject.  Tried to find one without specified sender - no luck.\u003c/p\u003e\n\u003cp\u003eThe ViewportContext in the Editor does this:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/urho3d/Urho3D/blob/master/bin/Data/Scripts/Editor/EditorView.as#L75\" rel=\"nofollow noopener\"\u003egithub.com/urho3d/Urho3D/blob/m … iew.as#L75\u003c/a\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:02:58.798Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":19,"readers_count":18,"score":8.8,"yours":false,"topic_id":796,"topic_slug":"handling-events-from-inside-an-angelscript-class","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/blob/master/bin/Data/Scripts/Editor/EditorView.as#L75","internal":false,"reflection":false,"title":"Urho3D/EditorView.as at master · urho3d/Urho3D · GitHub","clicks":3}],"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":15,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":4373,"name":"","username":"JulyForToday","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/a9a28c/{size}.png","created_at":"2015-01-27T03:15:07.000Z","cooked":"\u003cp\u003eI made a small, runnable, example:\u003cbr\u003e\n(warning, the 2nd one will will require alt-tab or alt-ctrl-del to unfocus the window to close the program)\u003c/p\u003e\n\u003cp\u003eExample 1 \u0026lt;- this works fine. Event handlers get called, so the text changes and F1 opens/closes console, and the program closes with Escape\u003cbr\u003e\n\u003ca href=\"http://Main.as\" rel=\"nofollow noopener\"\u003eMain.as\u003c/a\u003e (A)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eText@ label;\n\nvoid Start()\n{\n\tSubscribeToEvents();\n\tCreateConsoleAndDebugHud();\n\tCreateOverlays();\n\tconsole.visible = true;\n}\nvoid CreateConsoleAndDebugHud()\n{\n\t// Get default style\n\tXMLFile@ xmlFile = cache.GetResource(\"XMLFile\", \"UI/DefaultStyle.xml\");\n\tif (xmlFile is null)\n\t\treturn;\n\t// Create console\n\tConsole@ console = engine.CreateConsole();\n\tconsole.defaultStyle = xmlFile;\n\tconsole.background.opacity = 0.8f;\n}\n\nvoid SetLabel(String text)\n{\n\tlabel.text = text;\n}\nvoid CreateOverlays()\n{\t\n\tFont@ font = cache.GetResource(\"Font\", \"Fonts/bluehighway.ttf\");\n\tlabel = Text();\n\tlabel.SetFont(font, 32);\n\tlabel.SetAlignment(HA_CENTER, VA_CENTER);\n\tlabel.SetPosition(HA_CENTER, VA_CENTER);\n\tui.root.AddChild(label);\n\tlabel.text = \"Action Text\";\n}\n\n//specify sender?\nvoid SubscribeToEvents()\n{\n\tPrint(\"TESTGAME SubscribeToEvents\");\n\tSubscribeToEvent(\"KeyDown\", \"HandleKeyDown\");\n\tSubscribeToEvent(\"UIMouseClick\", \"HandleUIMouseClick\");\n\tSubscribeToEvent(\"Update\", \"HandleUpdate\");\n}\n\nvoid HandleKeyDown(StringHash eventType, VariantMap\u0026amp; eventData)\n{\n\tint key = eventData[\"Key\"].GetInt();\n\n\t// Close console (if open) or exit when ESC is pressed\n\tif (key == KEY_ESC)\n\t{\n\t\tif (!console.visible)\n\t\t\tengine.Exit();\n\t\telse\n\t\t\tconsole.visible = false;\n\t}\n\n\t// Toggle console with F1\n\telse if (key == KEY_F1)\n\t\tconsole.Toggle();\n}\n\nvoid HandleUIMouseClick(StringHash eventType, VariantMap\u0026amp; eventData)\n{\n\tPrint(\"MOUSE CLICK\");\n\tSetLabel(\"MOUSE CLICK\");\n}\nvoid HandleUpdate(StringHash eventType, VariantMap\u0026amp; eventData)\n{\n\tPrint(\"UPDATE\");\n\tSetLabel(\"UPDATE\");\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eExample 2  \u0026lt;- Same code, just moved most of it into the TestGame class. Seems as though it ought to work. But none of the event handlers are ever called.\u003cbr\u003e\n\u003ca href=\"http://Main.as\" rel=\"nofollow noopener\"\u003eMain.as\u003c/a\u003e (B)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e#include \"Scripts/TestGame.as\"\nvoid Start()\n{\n\tCreateConsoleAndDebugHud();\n\tTestGame@ game = TestGame();\n\tconsole.visible = true;\n}\nvoid CreateConsoleAndDebugHud()\n{\n\t// Get default style\n\tXMLFile@ xmlFile = cache.GetResource(\"XMLFile\", \"UI/DefaultStyle.xml\");\n\tif (xmlFile is null)\n\t\treturn;\n\t// Create console\n\tConsole@ console = engine.CreateConsole();\n\tconsole.defaultStyle = xmlFile;\n\tconsole.background.opacity = 0.8f;\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"http://TestGame.as\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\"\u003eTestGame.as\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eclass TestGame\n{\n\tText@ label;\n\n\tTestGame()\n\t{\n\t\tCreateOverlays();\n\t\tSubscribeToEvents();\n\t}\n\t\n\tvoid SetLabel(String text)\n\t{\n\t\tlabel.text = text;\n\t}\n\tvoid CreateOverlays()\n\t{\t\n\t\tFont@ font = cache.GetResource(\"Font\", \"Fonts/bluehighway.ttf\");\n\t\tlabel = Text();\n\t\tlabel.SetFont(font, 32);\n\t\tlabel.SetAlignment(HA_CENTER, VA_CENTER);\n\t\tlabel.SetPosition(HA_CENTER, VA_CENTER);\n\t\tui.root.AddChild(label);\n\t\tlabel.text = \"Action Text\";\n\t}\n\t\n\t//specify sender?\n\tvoid SubscribeToEvents()\n\t{\n\t\tPrint(\"TESTGAME SubscribeToEvents\");\n\t\tSubscribeToEvent(\"KeyDown\", \"HandleKeyDown\");\n\t\tSubscribeToEvent(\"UIMouseClick\", \"HandleUIMouseClick\");\n\t\tSubscribeToEvent(\"Update\", \"HandleUpdate\");\n\t}\n\n\tvoid HandleKeyDown(StringHash eventType, VariantMap\u0026amp; eventData)\n\t{\n\t\tint key = eventData[\"Key\"].GetInt();\n\n\t\t// Close console (if open) or exit when ESC is pressed\n\t\tif (key == KEY_ESC)\n\t\t{\n\t\t\tif (!console.visible)\n\t\t\t\tengine.Exit();\n\t\t\telse\n\t\t\t\tconsole.visible = false;\n\t\t}\n\n\t\t// Toggle console with F1\n\t\telse if (key == KEY_F1)\n\t\t\tconsole.Toggle();\n\t}\n\t\n\tvoid HandleUIMouseClick(StringHash eventType, VariantMap\u0026amp; eventData)\n\t{\n\t\tPrint(\"MOUSE CLICK\");\n\t\tSetLabel(\"MOUSE CLICK\");\n\t}\n\tvoid HandleUpdate(StringHash eventType, VariantMap\u0026amp; eventData)\n\t{\n\t\tPrint(\"UPDATE\");\n\t\tSetLabel(\"UPDATE\");\n\t}\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI tried making TestGame inherit from ScriptObject, it doesn’t seem to cause a change. The handlers still will not be called.\u003c/p\u003e\n\u003cp\u003eI noticed that ViewportContext doesn’t call it’s CreateViewportContextUI() method for registering it’s handlers, it’s called externally from outside the class’s scope (I’m guess it’s the module’s global scope). So I tried moving the call to TestGame’s SubscribeToEvents() method from TestGame’s constructor into Main’s Start() method after instantiating the class. No luck with that.\u003c/p\u003e\n\u003cp\u003eI don’t know if it would have anything to do with not specifying a sender for the event handler. Not sure what I would specify as senders for these events.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:02:58.905Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":18,"readers_count":17,"score":3.6,"yours":false,"topic_id":796,"topic_slug":"handling-events-from-inside-an-angelscript-class","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://TestGame.as","internal":false,"reflection":false,"clicks":0},{"url":"http://Main.as","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":193,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":4374,"name":"","username":"friesencr","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png","created_at":"2015-01-27T04:34:12.000Z","cooked":"\u003cp\u003ewonder if you class is getting removed from going out of scope.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e  TestGame@ game = TestGame();\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTry putting it in a global variable.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eTestGame@ game;\nvoid Start()\n{\n   CreateConsoleAndDebugHud();\n   @game = TestGame();\n   console.visible = true;\n}\n\u003c/code\u003e\u003c/pre\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:02:58.994Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":15,"readers_count":14,"score":3.0,"yours":false,"topic_id":796,"topic_slug":"handling-events-from-inside-an-angelscript-class","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":15,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":4386,"name":"","username":"JulyForToday","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/a9a28c/{size}.png","created_at":"2015-01-27T21:36:42.000Z","cooked":"\u003cp\u003eI think you were right, using a global variable fixed the problem.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eHowever, I did run into something noteworthy while using your suggestion.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e@game = TestGame();\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI didn’t notice that @ symbol at first, so I wrote it like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003egame = TestGame();\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis seemingly fixed the events in my sample, although the console was logging a Null Pointer Access exception in Start() on that line.\u003c/p\u003e\n\u003cp\u003eI tried the same change on my actual code, and it was still having trouble with the event handlers not being called. So I expanded my sample so that TestGame contained a Scene object, and a Node object. Then added a simple TestObject class ( that inherits from ScriptObject), and created a method in TestGame that added a ScriptInstance to the node. And I narrowed the problem down to where I was using CreateScriptObject() on the node inside TestGame.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e \tvoid CreateTestObject(Vector3 position)\n\t{\n\t\ttestObjectNode = scene_.CreateChild(\"TestObject\");\n\t\ttestObjectNode.position = position;\t\t\n\t\t\n\t\ttestObjectNode.CreateScriptObject(scriptFile, \"TestObject\");\n\t\tTestObject@ testObject = cast\u0026lt;TestObject\u0026gt;(testObjectNode.GetScriptObject());\n\t\tif(testObject is null)\n\t\t\tSetLabel(\"NULL TEST OBJECT\");\n\t\tString testText = testObject.GetTestString();\n\t\tSetLabel(testText);\n\t}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat call to CreateScriptObject() was doing something that caused the event handlers to not get fired (still not sure why).\u003cbr\u003e\nI was further confused because I thought maybe it was an issue with the \u003cspan class=\"bbcode-b\"\u003escriptFile\u003c/span\u003e reference not being valid in the scope of \u003ca href=\"http://TestGame.as\" rel=\"nofollow noopener\"\u003eTestGame.as\u003c/a\u003e. I now think this is not the case, \u003cspan class=\"bbcode-b\"\u003escriptFile\u003c/span\u003e seems to be a module wide reference, so as long as you’re in the same module it will work, including in a vanilla class. Correct me if I’m wrong about that. Since I thought \u003cspan class=\"bbcode-b\"\u003escriptFile\u003c/span\u003e might be different for each class/file, I looked at the scripting documentation and found CreateScriptObject() can take a string of the script’s filename.\u003c/p\u003e\n\u003caside class=\"quote\"\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThere are shortcut methods on the script side for creating and accessing a node’s script object: node.CreateScriptObject() and node.GetScriptObject(). Alternatively, if the node has only one ScriptInstance, and a specific class is not needed, the node’s scriptObject property can also be used. CreateScriptObject() takes the script file name (or alternatively, a ScriptFile object handle) and class name as parameters and creates a ScriptInstance component automatically, then creates the script object. For example:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSo I used “Scripts/Main.as” instead of \u003cspan class=\"bbcode-b\"\u003escriptFile\u003c/span\u003e  and it (obviously, in hindsight) didn’t change anything. So being confused, I was going to post the second sample, when I noticed you were using that @ symbol. I gave it a try, and now everything works as I would expect it to. No more Null Pointer Access exception, and the events handlers fire, and I can do what I want with my ScriptObjects contained inside of my vanilla TestGame class.\u003c/p\u003e\n\u003cp\u003eThought I’d include all this in case anyone in the future encounters similar problems.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eSo what is the significance of the @ symbol prefixed on the global reference, and why do you think it would cause the kinds of secondary problems I was having with CreateScriptObject() ?\u003c/p\u003e\n\u003cp\u003eAnd I should really brush up on my reading skills. lmao  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/laughing.png?v=5\" title=\":laughing:\" class=\"emoji\" alt=\":laughing:\"\u003e\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T01:02:59.946Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":15,"readers_count":14,"score":3.0,"yours":false,"topic_id":796,"topic_slug":"handling-events-from-inside-an-angelscript-class","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://TestGame.as","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":193,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":4387,"name":"","username":"friesencr","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png","created_at":"2015-01-27T23:14:13.000Z","cooked":"\u003cp\u003eThe @ is much like a pointer.  Angelscript calls it a ‘handle’.  If you create a variable by handle than you can pass by reference rather than by value.  Urho does a kind of tricky thing that I don’t always like in that it will always assign by reference and pass by reference with its own class types like the script object.  In Urho you can’t make a IntVector with a @ since it is purely a value type in urho.  There was a time when you did have to use the handle but only had to use it some of the time and that was more confusing.  This is hardly anything offensive but has created a sort of loose screw rattling in my brain when it shakes and I wonder what I forgot to screw down.  For your own created classes you have to properly use the handle.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-01-02T01:03:00.031Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":11,"readers_count":10,"score":17.2,"yours":false,"topic_id":796,"topic_slug":"handling-events-from-inside-an-angelscript-class","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":15,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[4352,4357,4372,4373,4374,4386,4387]},"timeline_lookup":[[1,2858],[2,2857],[6,2856]],"suggested_topics":[{"id":7081,"title":"Install Urho3D Library - Windows 10 - rake build - \"project does not exist\"","fancy_title":"Install Urho3D Library - Windows 10 - rake build - \u0026ldquo;project does not exist\u0026rdquo;","slug":"install-urho3d-library-windows-10-rake-build-project-does-not-exist","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-03T03:06:40.974Z","last_posted_at":"2021-12-03T17:53:10.844Z","bumped":true,"bumped_at":"2021-12-03T17:53:10.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":190,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7092,"title":"Finding the World Space Coordinates of the Screen Edges","fancy_title":"Finding the World Space Coordinates of the Screen Edges","slug":"finding-the-world-space-coordinates-of-the-screen-edges","posts_count":6,"reply_count":2,"highest_post_number":6,"image_url":null,"created_at":"2021-12-07T20:53:49.453Z","last_posted_at":"2021-12-08T12:33:52.510Z","bumped":true,"bumped_at":"2021-12-08T12:33:52.510Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":210,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7112,"title":"What is the proper way to add more source files(.cpp and .h) to a project?","fancy_title":"What is the proper way to add more source files(.cpp and .h) to a project?","slug":"what-is-the-proper-way-to-add-more-source-files-cpp-and-h-to-a-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-27T18:18:21.946Z","last_posted_at":"2021-12-28T12:19:43.514Z","bumped":true,"bumped_at":"2021-12-28T12:19:43.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":195,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1498,"username":"Tryout","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/85f322/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7067,"title":"Can the latest Urho3D version be built with VS2013?","fancy_title":"Can the latest Urho3D version be built with VS2013?","slug":"can-the-latest-urho3d-version-be-built-with-vs2013","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2021-11-25T18:00:24.336Z","last_posted_at":"2021-11-26T17:22:21.878Z","bumped":true,"bumped_at":"2021-11-26T17:22:21.878Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":157,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]}],"tags_descriptions":{},"id":796,"title":"Handling Events from inside an AngelScript Class","fancy_title":"Handling Events from inside an AngelScript Class","posts_count":7,"created_at":"2015-01-26T14:16:21.000Z","views":577,"reply_count":0,"like_count":0,"last_posted_at":"2015-01-27T23:14:13.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"handling-events-from-inside-an-angelscript-class","category_id":10,"word_count":1860,"deleted_at":null,"user_id":193,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_796","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":7,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":15,"username":"friesencr","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":193,"username":"JulyForToday","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/a9a28c/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":94,"username":"Bluemoon","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bluemoon/{size}/348_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":193,"username":"JulyForToday","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/a9a28c/{size}.png"},"last_poster":{"id":15,"username":"friesencr","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png"},"links":[{"url":"http://Main.as","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":193,"domain":"Main.as","root_domain":"Main.as"},{"url":"http://discourse.urho3d.io/t/angelscript-scriptobject-methods/366/6","title":"Angelscript ScriptObject methods - Support - Urho3D","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":193,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"},{"url":"https://github.com/urho3d/Urho3D/blob/master/bin/Data/Scripts/Editor/EditorView.as#L75","title":"Urho3D/EditorView.as at master · urho3d/Urho3D · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":3,"user_id":15,"domain":"github.com","root_domain":"github.com"},{"url":"http://main.as","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":193,"domain":"main.as","root_domain":"main.as"}]}}