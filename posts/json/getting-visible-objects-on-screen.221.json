{"post_stream":{"posts":[{"id":1222,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-04-30T01:03:55.000Z","cooked":"\u003cp\u003eI have spent a few hours on this, and I haven’t really came up with a solution.\u003c/p\u003e\n\u003cp\u003eSay I have a chest with several objects inside, and I want to know if these objects can be interacted by the player. I want it to be easy for the player to interact with several objects in a small radius around the center of the screen, ordering from nearest to the center to furthest. That way I could have a player grab several items without having to directly look at each one. Sorting the objects is no problem since I can just transform all object to screen space and sort them that way.\u003c/p\u003e\n\u003cp\u003eSo far, I’ve filtered potential candidates with the following:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eUrho3D::PODVector\u0026lt;Urho3D::Node*\u0026gt; results;\nGetScene()-\u0026gt;GetChildrenWithComponent\u0026lt;GameItem\u0026gt;(results, true);\nfor(Urho3D::PODVector\u0026lt;Urho3D::Node*\u0026gt;::Iterator itr = results.Begin(); itr != results.End(); itr++)\n{\n\tfloat distance = (_cameraNode-\u0026gt;GetPosition() - (*itr)-\u0026gt;GetPosition()).Length();\n\tUrho3D::BoundingBox box = (*itr)-\u0026gt;GetComponent\u0026lt;Urho3D::StaticModel\u0026gt;()-\u0026gt;GetBoundingBox();\n\tbox.Transform((*itr)-\u0026gt;GetTransform());\n\tif( Urho3D::INSIDE == camera-\u0026gt;GetFrustum().IsInsideFast(box) \u0026amp;\u0026amp; distance \u0026lt;= 3.0f)\n\t{\n\t\tdebugRenderer-\u0026gt;AddBoundingBox((*itr)-\u0026gt;GetComponent\u0026lt;Urho3D::StaticModel\u0026gt;()-\u0026gt;GetBoundingBox(), (*itr)-\u0026gt;GetTransform(), Urho3D::Color::GREEN, false);\n\t}\n}\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAny ideas?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T00:58:58.777Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":103,"reads":13,"readers_count":12,"score":517.6,"yours":false,"topic_id":221,"topic_slug":"getting-visible-objects-on-screen","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":1223,"name":"","username":"friesencr","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png","created_at":"2014-04-30T02:49:15.000Z","cooked":"\u003cp\u003eThat’s kind of how I have been doing a bunch of my distancy/radius maths.  I havn’t tried using a physics based solution.  Something like having a giant cylinder around the character and capturing all collisons per interaction.  A mask could be used.\u003c/p\u003e\n\u003cp\u003eI don’t exactly know what kind of camera you are using.  That may be helpful information.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T00:58:58.839Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":11,"readers_count":10,"score":2.2,"yours":false,"topic_id":221,"topic_slug":"getting-visible-objects-on-screen","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":15,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":1224,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-04-30T03:24:55.000Z","cooked":"\u003cp\u003eOne of my original ideas was a cone emitting from the cameraNode pointed out at 3 units length. It worked in grabbing all of the items close by, but again it would still detect items that are hidden away. Such that a player wouldn’t have to open a chest to be able to grab everything inside so long as the player was within 3 units of the content.\u003c/p\u003e\n\u003cp\u003eFor the moment I’ve switched to using a physics-based ray query so that a convex hull at least gives better precision. I’m hoping though that I will be able to make it so that a player could grab items much like in oblivion or skyrim for example.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T00:58:58.913Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":12,"readers_count":11,"score":2.4,"yours":false,"topic_id":221,"topic_slug":"getting-visible-objects-on-screen","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":1226,"name":"","username":"friesencr","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png","created_at":"2014-04-30T03:43:41.000Z","cooked":"\u003cp\u003eThis looks promising:\u003c/p\u003e\n\u003ch3\u003eDrawable\u003c/h3\u003e\n\u003cp\u003eMethods:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ebool IsInView(Camera@) const\u003c/li\u003e\n\u003c/ul\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T00:58:59.075Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":11,"readers_count":10,"score":12.2,"yours":false,"topic_id":221,"topic_slug":"getting-visible-objects-on-screen","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":15,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":1227,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-04-30T04:05:25.000Z","cooked":"\u003cp\u003e[quote=“friesencr”]This looks promising:\u003c/p\u003e\n\u003ch3\u003eDrawable\u003c/h3\u003e\n\u003cp\u003eMethods:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ebool IsInView(Camera@) const[/quote]\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ePromising indeed! As a note it only works with occluders and occludees. Here’s a little snippet to easily visualize the effect:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eUrho3D::PODVector\u0026lt;Urho3D::Node*\u0026gt; results;\n\t_scene-\u0026gt;GetChildrenWithComponent\u0026lt;Urho3D::StaticModel\u0026gt;(results, true);\n\tfor(Urho3D::PODVector\u0026lt;Urho3D::Node*\u0026gt;::Iterator itr = results.Begin(); itr != results.End(); itr++)\n\t{\n\t\tfloat distance = (_cameraNode-\u0026gt;GetPosition() - (*itr)-\u0026gt;GetPosition()).Length();\n\t\tUrho3D::BoundingBox box = (*itr)-\u0026gt;GetComponent\u0026lt;Urho3D::StaticModel\u0026gt;()-\u0026gt;GetBoundingBox();\n\t\tbox.Transform((*itr)-\u0026gt;GetTransform());\n\t\tif( !(*itr)-\u0026gt;GetComponent\u0026lt;Urho3D::StaticModel\u0026gt;()-\u0026gt;IsInView(camera))\n\t\t{\n\t\t\tdebugRenderer-\u0026gt;AddBoundingBox((*itr)-\u0026gt;GetComponent\u0026lt;Urho3D::StaticModel\u0026gt;()-\u0026gt;GetBoundingBox(), (*itr)-\u0026gt;GetTransform(), Urho3D::Color::GREEN, false);\n\t\t}\n\t}\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThis makes it so that only fully hidden objects are debug drawn. Works like a charm as long as I set my occluders correctly!\u003c/p\u003e\n\u003cp\u003eI wonder if there may be a better way in the future, though. I can’t complain with this approach, but \u003cspan class=\"bbcode-i\"\u003e\u003cspan class=\"bbcode-b\"\u003eit is\u003c/span\u003e\u003c/span\u003e based off frame occlusion information, which is dependent on this such as frame size and the likes. I doubt it’s a real problem though.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T00:58:59.159Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":3,"reads":13,"readers_count":12,"score":17.6,"yours":false,"topic_id":221,"topic_slug":"getting-visible-objects-on-screen","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":1229,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-04-30T06:57:14.000Z","cooked":"\u003cp\u003eIf your objects have Drawable components, you can use octree queries (box, sphere, frustum etc.) to get the objects within a geometrical volume. See Octree::GetDrawables(). This is the same what the rendering code is using.\u003c/p\u003e\n\u003cp\u003eFor physics rigidbodies there’s similar but more limited functionality, you can query the physics world by a box or sphere volume. See PhysicsWorld::GetRigidBodies() overloads.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-01-02T00:58:59.311Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":12,"readers_count":11,"score":2.4,"yours":false,"topic_id":221,"topic_slug":"getting-visible-objects-on-screen","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[1222,1223,1224,1226,1227,1229]},"timeline_lookup":[[1,3129]],"suggested_topics":[{"id":7104,"title":"Bug in my partial-model copying code","fancy_title":"Bug in my partial-model copying code","slug":"bug-in-my-partial-model-copying-code","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5367e370779d64989e5c3ff2c1ebfb0689908c87.png","created_at":"2021-12-17T03:50:19.405Z","last_posted_at":"2021-12-17T13:50:49.662Z","bumped":true,"bumped_at":"2021-12-17T13:50:49.662Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7107,"title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u003cSDL/SDL_gamecontroller.h\u003e","fancy_title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u0026lt;SDL/SDL_gamecontroller.h\u0026gt;","slug":"error-sdl-sdl-gamecontroller-h-no-such-file-or-directory-include-sdl-sdl-gamecontroller-h","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2021-12-21T15:29:52.810Z","last_posted_at":"2021-12-22T15:32:44.818Z","bumped":true,"bumped_at":"2021-12-22T15:32:44.818Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":271,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":221,"title":"Getting visible objects on screen","fancy_title":"Getting visible objects on screen","posts_count":6,"created_at":"2014-04-30T01:03:55.000Z","views":533,"reply_count":0,"like_count":0,"last_posted_at":"2014-04-30T06:57:14.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"getting-visible-objects-on-screen","category_id":10,"word_count":618,"deleted_at":null,"user_id":80,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_221","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":80,"username":"thebluefish","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":15,"username":"friesencr","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/friesencr/{size}/827_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2}],"created_by":{"id":80,"username":"thebluefish","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png"},"last_poster":{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png"}}}