{"post_stream":{"posts":[{"id":43848,"name":"DoubleSuper","username":"Sunc","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png","created_at":"2021-12-01T03:43:48.670Z","cooked":"\u003cp\u003eI see this is an absence feature of Urho3D, but it really helps the rendering overhead. So I intend to do the implementation by my self, however suggestions is needed by you experts. What would I do is the static batch like what Unity have done, I read its’ manual page about this feature and thought about it deeper and… Wow, it’s not so easy like my first thought about it. There apears much rendering mechanism details in my head such about what should the quantity limitation of VBO and IBO be, how about the semi-transparent objects, what about LOD, in which way to produce the merged mesh(pre or runtime), and blablabla… At first I thought may be the StaticModelGroup component would be a good place to dig in, but I found it’s just a way to speed up GPU intancing. So, now I am lost in thought,\u003cbr\u003e\nlooking forward you guys suggestions.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2021-12-01T03:45:39.783Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":26,"readers_count":25,"score":35.2,"yours":false,"topic_id":7073,"topic_slug":"a-plan-to-support-static-batching","display_username":"DoubleSuper","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1490,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43849,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2021-12-01T13:48:43.703Z","cooked":"\u003cp\u003eI’m certainly not an expert (and I’ve not read about Unity’s implementation, so you probably know more than me), but here are my thoughts:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003equantity limitation of VBO and IBO: You’ll need to test on several machines to determine an optimal size.\u003c/li\u003e\n\u003cli\u003esemi-transparent objects: Forbidden except for ALPHAMASK objects, as it would probably be more of a pain to deal with than it’s worth, and you’d probably need the depth sorting for each object anyways.\u003c/li\u003e\n\u003cli\u003eLOD: provided per batch only. So a room might be a good example of a batch, as when the player is in it it would have the highest LOD, and when they are in a distant room looking in through a door a lower LOD may be acceptable.\u003c/li\u003e\n\u003cli\u003eway to produce the merged mesh(pre or runtime): beforehand since it’s static. You’re choice whether it’s completely separate with another tool (e.g. added to the editor or something) or whether it’s done at startup and cached to the disk (could also be done at level load, but as a player I’d prefer a one-time several minute setup when installing and first running the game over a several second longer load every level. Unless it is really short to do (\u0026lt;0.5 seconds per level or so), in which case truly doing it at runtime may be acceptable.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAnd I have a question: How does the method handle different textures/materials? Do the textures need to be combined into an atlas and the materials need to be the same other than the textures?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2021-12-01T13:48:43.703Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":21,"readers_count":20,"score":9.2,"yours":false,"topic_id":7073,"topic_slug":"a-plan-to-support-static-batching","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43867,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2021-12-02T15:10:58.836Z","cooked":"\u003cp\u003eThis is one of many features that suffer from fully dynamic nature of Urho3D as engine.\u003cbr\u003e\nUrho does not have the concept of “compilation”, therefore “editor-time logic” and “run-time logic” are the same thing, therefore there’s no such thing as “static object” and, consequently, “static batching”.\u003c/p\u003e\n\u003cp\u003eUrho has \u003cem\u003esome\u003c/em\u003e things that are 100% editor-time, and they are always explicitly invoked by user, e.g. \u003ccode\u003eNavigationMesh\u003c/code\u003e build.\u003cbr\u003e\nYour best bet would be to make something similar. Utility class that:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eIterates over Drawables in Scene or Node\u003c/li\u003e\n\u003cli\u003eChecks whether to batch each specific Drawable\u003c/li\u003e\n\u003cli\u003eDisable and/or remove such drawables\u003c/li\u003e\n\u003cli\u003eGenerates new Drawables somewhere else\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe exact algorithm is almost pure heuristics, but you can \u003cem\u003etecnhically\u003c/em\u003e accumulate arbitrary amount of \u003ccode\u003eStaticModel\u003c/code\u003es in one \u003ccode\u003eStaticModel\u003c/code\u003e, and you can pack multiple Materials in one Material if they use same shader and same parameters.\u003c/p\u003e\n\u003cp\u003eIt’s probably going to be an offline tool expicitly used by the user.\u003cbr\u003e\nIf you want Unity-like static batching which is almost hidden from user… I am not sure you can.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2021-12-02T15:10:58.836Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":23.8,"yours":false,"topic_id":7073,"topic_slug":"a-plan-to-support-static-batching","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43874,"name":"DoubleSuper","username":"Sunc","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png","created_at":"2021-12-02T23:13:53.759Z","cooked":"\u003cp\u003eThanks for reply.\u003cbr\u003e\nLast few days, I thought more about the subjects above.\u003c/p\u003e\n\u003cp\u003e● quantity limitation of VBO and IBO: There are different limitations on different platforms which determined by either hardware or software, according to the unity manual it says “Batch limits are 64k vertices and 64k indices on most platforms (48k indices on OpenGLES, 32k indices on macOS)”.\u003cbr\u003e\n● semi-transparent objects: The sorting job is needed by arrange objects from far to near at runtime, but it makes extra CPU cost.\u003cbr\u003e\n● LOD: An object may group up with several LOD meshs which differs at number of triangles but represents the same stuff. I would batch all the LOD type geometries into N groups which N stands for the maximum LOD level among them, the downside is it costs more memory but suitable level mesh could be chosen to display.\u003cbr\u003e\n● way to produce the merged mesh(pre or runtime): I tend to preprocess(or “bake”) much more, cause it saves the overhead of merging vertices. The job should be done at editor side.\u003c/p\u003e\n\u003cp\u003eAnd about your question: I didn’t mean to merge objects with different materials, only objects with same materials is concerned. But try best to let more objects share the same material is a good advise to modelers, such as make the use of atlas textures.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2021-12-02T23:13:53.759Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":17,"readers_count":16,"score":3.4,"yours":false,"topic_id":7073,"topic_slug":"a-plan-to-support-static-batching","display_username":"DoubleSuper","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1490,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43875,"name":"DoubleSuper","username":"Sunc","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png","created_at":"2021-12-02T23:30:07.199Z","cooked":"\u003cp\u003eThanks for reply.\u003cbr\u003e\nI would take your suggestions into considering, and later I would try to make the design(maybe after a few days, start by a simple scratch). And now, allow me to think more about it, I would make a reply to you later.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2021-12-02T23:30:07.199Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":17,"readers_count":16,"score":3.4,"yours":false,"topic_id":7073,"topic_slug":"a-plan-to-support-static-batching","display_username":"DoubleSuper","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1490,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[43848,43849,43867,43874,43875]},"timeline_lookup":[[1,357],[3,356],[4,355]],"suggested_topics":[{"id":7244,"title":"Overgrowth source released","fancy_title":"Overgrowth source released","slug":"overgrowth-source-released","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-04-25T14:10:33.749Z","last_posted_at":"2022-04-25T17:18:36.743Z","bumped":true,"bumped_at":"2022-04-25T17:18:36.743Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":190,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]},{"id":7262,"title":"iOS build cannot be installed on sim or device","fancy_title":"iOS build cannot be installed on sim or device","slug":"ios-build-cannot-be-installed-on-sim-or-device","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d889ae74b8b75bfe705a15b4cee71e82faea0f4d.png","created_at":"2022-05-12T15:33:33.531Z","last_posted_at":"2022-05-12T16:13:22.078Z","bumped":true,"bumped_at":"2022-05-12T16:13:22.078Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":95,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1340,"username":"KatekovAnton","name":"KatekovAnton","avatar_template":"/user_avatar/discourse.urho3d.io/katekovanton/{size}/2988_2.png"}}]},{"id":7197,"title":"Does Urho3D support multithreaded rendering?","fancy_title":"Does Urho3D support multithreaded rendering?","slug":"does-urho3d-support-multithreaded-rendering","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-02-21T08:07:57.726Z","last_posted_at":"2022-02-21T08:42:15.358Z","bumped":true,"bumped_at":"2022-02-21T08:42:15.358Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":156,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7101,"title":"Unique Per-Node Shader Uniform for Model-Particles","fancy_title":"Unique Per-Node Shader Uniform for Model-Particles","slug":"unique-per-node-shader-uniform-for-model-particles","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-16T03:16:09.579Z","last_posted_at":"2021-12-16T09:40:41.978Z","bumped":true,"bumped_at":"2021-12-16T09:40:41.978Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":139,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7264,"title":"Mesh not rendering right and no idea why [SOLVED]","fancy_title":"Mesh not rendering right and no idea why [SOLVED]","slug":"mesh-not-rendering-right-and-no-idea-why-solved","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/58b096d0ea560021fc4301ffe097f4b1350670af_2_1024x519.jpeg","created_at":"2022-05-13T01:26:06.152Z","last_posted_at":"2022-05-13T20:26:12.059Z","bumped":true,"bumped_at":"2022-05-13T20:26:12.059Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":147,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1507,"username":"Kest","name":"Kest","avatar_template":"/user_avatar/discourse.urho3d.io/kest/{size}/3734_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]}],"tags_descriptions":{},"id":7073,"title":"A plan to support static batching","fancy_title":"A plan to support static batching","posts_count":5,"created_at":"2021-12-01T03:43:48.579Z","views":180,"reply_count":2,"like_count":1,"last_posted_at":"2021-12-02T23:30:07.199Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"a-plan-to-support-static-batching","category_id":16,"word_count":873,"deleted_at":null,"user_id":1490,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_7073","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"},"last_poster":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}}}