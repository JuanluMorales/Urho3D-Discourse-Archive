{"post_stream":{"posts":[{"id":14068,"name":"","username":"TheComet","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","created_at":"2016-10-14T10:28:11.000Z","cooked":"\u003cp\u003eI have this situation in my code where I’ve subclassed UIElement and am maintaining a child UIElement that gets loaded from XML (a pattern I learned from Qt now that I think about it).\u003c/p\u003e\n\u003cp\u003eWhat I’d like to be able to write is this:\u003c/p\u003e\n\u003cp\u003e[code]void MenuScreen::ReloadUI()\u003cbr\u003e\n{\u003cbr\u003e\nResourceCache* cache = GetSubsystem();\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eif(ui_)\n    RemoveChild(ui_);\nui_ = LoadChildXML(\n    xml_-\u0026gt;GetRoot(),\n    cache-\u0026gt;GetResource\u0026lt;XMLFile\u0026gt;(\"UI/DefaultStyle.xml\")\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e}[/code]\u003c/p\u003e\n\u003cp\u003eWhere:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eSharedPtr\u0026lt;XMLFile\u0026gt; xml_;\nSharedPtr\u0026lt;UIElement\u0026gt; ui_;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eExcept that I can’t, because \u003cspan class=\"bbcode-b\"\u003eLoadChildXML()\u003c/span\u003e returns a bool and not a pointer to the child that was created. There seems to be no easy way to fish out the created child afterwards, because I can’t rely on the name nor can I rely on ui_ being the only child of MenuScreen.\u003c/p\u003e\n\u003cp\u003eI propose the function be changed to return the child pointer. No functionality is lost, since you can still check if creation failed by comparing to NULL:\u003c/p\u003e\n\u003cp\u003e[code]UIElement* UIElement::LoadChildXML(const XMLElement\u0026amp; childElem, XMLFile* styleFile, bool setInstanceDefault)\u003cbr\u003e\n{\u003cbr\u003e\nbool internalElem = childElem.GetBool(“internal”);\u003cbr\u003e\nif (internalElem)\u003cbr\u003e\n{\u003cbr\u003e\nURHO3D_LOGERROR(“Loading internal child element is not supported”);\u003cbr\u003e\nreturn NULL;\u003cbr\u003e\n}\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eString typeName = childElem.GetAttribute(\"type\");\nif (typeName.Empty())\n    typeName = \"UIElement\";\nunsigned index = childElem.HasAttribute(\"index\") ? childElem.GetUInt(\"index\") : M_MAX_UNSIGNED;\nUIElement* child = CreateChild(typeName, String::EMPTY, index);\n\nif (child)\n{\n    if (!styleFile)\n        styleFile = GetDefaultStyle();\n    if (!child-\u0026gt;LoadXML(childElem, styleFile, setInstanceDefault))\n        return NULL;\n}\n\nreturn child;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e}[/code]\u003c/p\u003e\n\u003cp\u003eThis would require changes to the angelscript bindings:\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"bbcode-b\"\u003eAPITemplates.h:953\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e[code]static UIElement* UIElementLoadChildXML(XMLFile* file, XMLFile* styleFile, UIElement* ptr)\u003cbr\u003e\n{\u003cbr\u003e\nif (file == NULL)\u003cbr\u003e\nreturn NULL;\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eXMLElement rootElem = file-\u0026gt;GetRoot(\"element\");\nif (rootElem)\n    return ptr-\u0026gt;LoadChildXML(rootElem, styleFile);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e}[/code]\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"bbcode-b\"\u003eAPITemplates.h:1055\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e    engine-\u0026gt;RegisterObjectMethod(className, \"UIElement@+ LoadChildXML(const XMLElement\u0026amp;in, XMLFile@+ arg1 = null, bool arg2 = false)\", asMETHOD(T, LoadChildXML), asCALL_THISCALL);\n    engine-\u0026gt;RegisterObjectMethod(className, \"UIElement@+ LoadChildXML(XMLFile@+, XMLFile@+ arg1 = null)\", asFUNCTION(UIElementLoadChildXML), asCALL_CDECL_OBJLAST);\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAs well as in the editor script \u003cspan class=\"bbcode-b\"\u003e\u003ca href=\"http://EditorUIElement.as:319\" rel=\"nofollow noopener\"\u003eEditorUIElement.as:319\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI can make a PR if you want.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:14:46.259Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":5,"readers_count":4,"score":11.0,"yours":false,"topic_id":2325,"topic_slug":"changing-the-return-type-of-uielement-loadchildxml","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://EditorUIElement.as:319","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":"Community repository maintainer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":37,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":14069,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-10-14T10:40:54.000Z","cooked":"\u003cp\u003eI believe this would make sense. If you want, you can make a PR (it’s not a large change)\u003c/p\u003e\n\u003cp\u003eOne thing to consider is what to do when the child has been created but load fails. Should the child be destroyed then? Presently it isn’t, but false would be returned regardless in the current implementation.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:14:46.334Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":2325,"topic_slug":"changing-the-return-type-of-uielement-loadchildxml","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":14070,"name":"","username":"TheComet","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","created_at":"2016-10-14T10:57:57.000Z","cooked":"\u003cp\u003eGood point. I’d argue it would make sense to destroy the child if loading fails. It makes little sense to keep an empty child around. If the child isn’t destroyed, it would be kind of deceitful to return NULL.\u003c/p\u003e\n\u003cp\u003eReturning the empty child would be the other option, however, that makes it harder to check if loading fails.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:14:46.398Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":2325,"topic_slug":"changing-the-return-type-of-uielement-loadchildxml","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Community repository maintainer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":37,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":14073,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2016-10-14T12:04:10.000Z","cooked":"\u003cp\u003eIf you make the PR, you can make it so that the child is destroyed. We can correct later if it turns out other behavior is needed. This error case shouldn’t happen in normal editor use; only in the case of malformed handwritten UI XML, but in that case I don’t think it would even get as far as creating the child.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:14:46.613Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":2325,"topic_slug":"changing-the-return-type-of-uielement-loadchildxml","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":14080,"name":"","username":"TheComet","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","created_at":"2016-10-14T19:20:27.000Z","cooked":"\u003cp\u003eHere you go: \u003ca href=\"https://github.com/urho3d/Urho3D/pull/1649\" data-bbcode=\"true\" rel=\"nofollow noopener\"\u003ehttps://github.com/urho3d/Urho3D/pull/1649\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI made sure the editor works and I tested the behaviour of the function in my own code.\u003c/p\u003e\n\u003cp\u003eThere appear to be no lua bindings for this function. I didn’t create any because I don’t understand it enough.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:14:47.073Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":4,"readers_count":3,"score":0.8,"yours":false,"topic_id":2325,"topic_slug":"changing-the-return-type-of-uielement-loadchildxml","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/pull/1649","internal":false,"reflection":false,"title":"UIElement::CreateChildXML() returns child instead of bool by TheComet93 · Pull Request #1649 · urho3d/Urho3D · GitHub","clicks":1}],"read":true,"user_title":"Community repository maintainer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":37,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[14068,14069,14070,14073,14080]},"timeline_lookup":[[1,2231],[5,2230]],"suggested_topics":[{"id":7264,"title":"Mesh not rendering right and no idea why [SOLVED]","fancy_title":"Mesh not rendering right and no idea why [SOLVED]","slug":"mesh-not-rendering-right-and-no-idea-why-solved","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/58b096d0ea560021fc4301ffe097f4b1350670af_2_1024x519.jpeg","created_at":"2022-05-13T01:26:06.152Z","last_posted_at":"2022-05-13T20:26:12.059Z","bumped":true,"bumped_at":"2022-05-13T20:26:12.059Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":147,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1507,"username":"Kest","name":"Kest","avatar_template":"/user_avatar/discourse.urho3d.io/kest/{size}/3734_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]},{"id":7095,"title":"Texture2D from imported GPU memory (interop)","fancy_title":"Texture2D from imported GPU memory (interop)","slug":"texture2d-from-imported-gpu-memory-interop","posts_count":6,"reply_count":2,"highest_post_number":6,"image_url":null,"created_at":"2021-12-09T10:52:31.426Z","last_posted_at":"2021-12-13T15:40:35.300Z","bumped":true,"bumped_at":"2021-12-13T15:40:35.300Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":316,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1496,"username":"ange","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/76d3ee/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7119,"title":"How to programmatically access Morph Target in FBX file?","fancy_title":"How to programmatically access Morph Target in FBX file?","slug":"how-to-programmatically-access-morph-target-in-fbx-file","posts_count":13,"reply_count":8,"highest_post_number":13,"image_url":null,"created_at":"2022-01-03T23:01:43.070Z","last_posted_at":"2022-01-05T11:55:31.130Z","bumped":true,"bumped_at":"2022-01-05T11:55:31.130Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":214,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1499,"username":"csteaderman","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/b487fb/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7218,"title":"Jolt Physics: physics engine from Horizon Forbidden West open-sourced","fancy_title":"Jolt Physics: physics engine from Horizon Forbidden West open-sourced","slug":"jolt-physics-physics-engine-from-horizon-forbidden-west-open-sourced","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-03-14T15:23:58.296Z","last_posted_at":"2022-03-21T03:18:16.555Z","bumped":true,"bumped_at":"2022-03-21T03:18:16.555Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":10,"views":439,"category_id":16,"featured_link":"https://github.com/jrouwe/JoltPhysics","featured_link_root_domain":"github.com","has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]},{"id":7285,"title":"Adding SFINAE for Container Operators","fancy_title":"Adding SFINAE for Container Operators","slug":"adding-sfinae-for-container-operators","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-06-22T02:05:49.368Z","last_posted_at":"2022-06-22T02:05:49.441Z","bumped":true,"bumped_at":"2022-06-22T02:05:49.441Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":98,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":2325,"title":"Changing the return type of UIElement::LoadChildXML()","fancy_title":"Changing the return type of UIElement::LoadChildXML()","posts_count":5,"created_at":"2016-10-14T10:28:11.000Z","views":478,"reply_count":0,"like_count":0,"last_posted_at":"2016-10-14T19:20:27.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"changing-the-return-type-of-uielement-loadchildxml","category_id":16,"word_count":576,"deleted_at":null,"user_id":37,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_2325","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":37,"username":"TheComet","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2}],"created_by":{"id":37,"username":"TheComet","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png"},"last_poster":{"id":37,"username":"TheComet","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png"},"links":[{"url":"https://github.com/urho3d/Urho3D/pull/1649","title":"UIElement::CreateChildXML() returns child instead of bool by TheComet93 · Pull Request #1649 · urho3d/Urho3D · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":37,"domain":"github.com","root_domain":"github.com"}]}}