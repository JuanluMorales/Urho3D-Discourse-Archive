{"post_stream":{"posts":[{"id":45793,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2022-11-03T11:35:59.983Z","cooked":"\u003cp\u003eI‚Äôm working on a game with a large procedural map. The game generates the overworld, represented by small sprites in a 2d grid. Wait times for generation are fine. However, to reload this same map later in game as a map screen in the menu would be far too slow. Could I just screenshot it at generation and load that file in somehow? I guess I‚Äôd have to figure out the cropping? Or is there a better way?\u003cbr\u003e\nI‚Äôm talking like 1million combines sprites so‚Ä¶\u003c/p\u003e\n\u003cp\u003eCurious if anyone has done anything similar.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2022-11-03T11:35:59.983Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":17,"readers_count":16,"score":3.4,"yours":false,"topic_id":7345,"topic_slug":"preserving-a-large-sprite-array","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45798,"name":null,"username":"vmost","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/5f9b8f/{size}.png","created_at":"2022-11-03T13:14:40.542Z","cooked":"\u003cp\u003eIf you have a maximum resolution for the map you could save a map file that maps each pixel to a grid of underlying sprites. Initialize the file to black then set each map pixel as the world gets generated. If you exceed the bounds of your file, then make additional files in an expanding map composite.\u003c/p\u003e\n\u003cp\u003eIf a change in the world requires a change in the map, it should be straightforward to add an event to world changes that the map-maker can listen to to update relevant map pixels.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2022-11-03T13:17:12.171Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":17,"readers_count":16,"score":8.4,"yours":false,"topic_id":7345,"topic_slug":"preserving-a-large-sprite-array","display_username":null,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1363,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45800,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2022-11-03T13:44:38.569Z","cooked":"\u003cp\u003eHm so it‚Äôs already a grid of sprites. It takes up 1gb of memory after creation. If I unload them then reloading them takes a while. I should clarify that I already have the data saved in a nested lua table. I am basically stuck between disabling the sprites and keeping them in memory (wasteful) or removing and recreating from the data (slow). But maybe at map gen I could create an image file pixel by pixel and blow it up, since the overworld sprites are 8x8 sprites of solid colors anyway. Need to check if urho has a way to create image data like that. I did that in another framework once.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2022-11-03T13:44:38.569Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":17,"readers_count":16,"score":3.4,"yours":false,"topic_id":7345,"topic_slug":"preserving-a-large-sprite-array","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"vmost","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/5f9b8f/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45842,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2022-11-08T14:24:54.460Z","cooked":"\u003cp\u003eOkay I figured it out.\u003c/p\u003e\n\u003cp\u003eTook a little tinkering but got image creation working pixel by pixel. This works great for an overworld preview. I also am going to try using this as the base map layer in game, and just spawning entities, waves, and other details on top of it. For example, most games like this have grass cluster tiles every so often instead of regular grass tiles. However, I can just do the clusters randomly and not have to have a sprite for each tile. I can now have the entire map (or a large area) loaded as a single sprite and keep a great frame rate.\u003c/p\u003e\n\u003cp\u003eSaved the map preview to disk and then used it later as a sprite2d resource. Also will later let the player look at their creations and stuff.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003efunction InitImage()\n\timg = Image:new()\n\tlocal sz = SizeIndexToSize(worldgen.mapSize)\n\timg:SetSize(sz,sz,4)\n\treturn img\nend\n\nfunction AddPixel(x,y,tile)\n\tlocal col = spriteColors[tile]\n\timg:SetPixel(x-1,y-1,col)\nend\n\nfunction AddImage()\n\tlocal sz = SizeIndexToSize(worldgen.mapSize)\n\t\n\tlocal texture = Texture2D:new()\n\ttexture:SetFilterMode(FILTER_NEAREST)\n\ttexture:SetNumLevels(1)\n\ttexture:SetSize(sz,sz,graphics:GetRGBAFormat(),TEXTURE_STATIC)\n\ttexture:SetData(img)\n\t\n\tlocal sprite = ui.root:CreateChild(\"Sprite\")\n\tsprite:SetTexture(texture)\n\tlocal m = graphics.width*.007 * (1/(sz*.02))\n\tsprite:SetSize(sz*m,sz*m)\n\tsprite:SetPosition(graphics.width/2 - sz*m/2,graphics.height/2 - sz*m/2)\n\tsprite:SetBlendMode(BLEND_ALPHA)\n\t\n\timg:SavePNG(\"Data/Art/map.png\")\nend\n\u003c/code\u003e\u003c/pre\u003e","post_number":4,"post_type":1,"updated_at":"2022-11-08T14:24:54.460Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":15,"readers_count":14,"score":63.0,"yours":false,"topic_id":7345,"topic_slug":"preserving-a-large-sprite-array","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true}],"stream":[45793,45798,45800,45842]},"timeline_lookup":[[1,20],[4,15]],"suggested_topics":[{"id":7182,"title":"How install landscape in the format (.tor or .obj)?","fancy_title":"How install landscape in the format (.tor or .obj)?","slug":"how-install-landscape-in-the-format-tor-or-obj","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-02-03T16:58:20.976Z","last_posted_at":"2022-02-04T16:34:09.663Z","bumped":true,"bumped_at":"2022-02-04T16:34:09.663Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":151,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":"latest","description":"Most Recent Poster, Accepted Answer","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7146,"title":"How create affordable comfortable and modern terrain?","fancy_title":"How create affordable comfortable and modern terrain?","slug":"how-create-affordable-comfortable-and-modern-terrain","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-01-21T15:20:08.910Z","last_posted_at":"2022-01-21T21:51:58.799Z","bumped":true,"bumped_at":"2022-01-21T22:03:14.896Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":193,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7200,"title":"Urho3D just building if I check \"use SHARED libraries\"","fancy_title":"Urho3D just building if I check \u0026ldquo;use SHARED libraries\u0026rdquo;","slug":"urho3d-just-building-if-i-check-use-shared-libraries","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-02-22T20:02:48.835Z","last_posted_at":"2022-02-23T15:38:33.698Z","bumped":true,"bumped_at":"2022-02-23T15:54:07.879Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":165,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]}],"tags_descriptions":{},"id":7345,"title":"Preserving a large sprite array?","fancy_title":"Preserving a large sprite array?","posts_count":4,"created_at":"2022-11-03T11:35:59.907Z","views":69,"reply_count":1,"like_count":4,"last_posted_at":"2022-11-08T14:24:54.460Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"preserving-a-large-sprite-array","category_id":10,"word_count":546,"deleted_at":null,"user_id":1292,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_7345","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":4,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":4,"username":"evolgames","excerpt":"Okay I figured it out. \nTook a little tinkering but got image creation working pixel by pixel. This works great for an overworld preview. I also am going to try using this as the base map layer in game, and just spawning entities, waves, and other details on top of it. For example, most games like t\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1363,"username":"vmost","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/5f9b8f/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"},"last_poster":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"}}}