{"post_stream":{"posts":[{"id":43169,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2021-07-19T07:28:29.252Z","cooked":"\u003cp\u003eToday, we were experiencing some crazy behavior in Shader, seeing the uniform variables being overwritten by some outside force.     It would work for a while, but then would start messing up reliably after about 30 seconds of panning around our map.\u003c/p\u003e\n\u003cp\u003eAfter trying everything else, we finally figured out that changing “register(b6)” to “register(b5)” worked, miraculously (and we see no other side-effects yet from this).\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"hashtag\"\u003e#ifdef\u003c/span\u003e COMPILEPS\u003cbr\u003e\ncbuffer CustomPS : register(b5)  \u0026lt;== changing this from (b6) to (b5) FIXES the issue.\u003cbr\u003e\n{\u003cbr\u003e\nbool cShowRelief;   \u0026lt;== this parameter alone GOES HAYWIRE, sporadically. (gets overwritten?)\u003cbr\u003e\nfloat cAlpha;\u003cbr\u003e\nfloat cOwnshipAltitudeFt;\u003cbr\u003e\nfloat cAltThreshWarn;\u003cbr\u003e\nfloat cAltThreshDanger;\u003cbr\u003e\n}\u003cbr\u003e\n\u003cspan class=\"hashtag\"\u003e#endif\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003eQuestions:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eIs there any reason why we can’t/shouldn’t use register b5?\u003c/li\u003e\n\u003cli\u003eDoes anyone have any clues as to why register b6 could have some sort of cross-talk/overwriting occurring?\u003c/li\u003e\n\u003c/ol\u003e","post_number":1,"post_type":1,"updated_at":"2021-07-19T07:32:47.177Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":28,"readers_count":27,"score":5.6,"yours":false,"topic_id":6931,"topic_slug":"shader-register-b6-vs-b5-cross-talk","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43170,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2021-07-19T07:29:57.368Z","cooked":"\u003cp\u003eUpdate, the following change ALSO fixes our issue, combining the final two uniforms into a float2, as follows:\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"hashtag\"\u003e#ifdef\u003c/span\u003e COMPILEPS\u003cbr\u003e\ncbuffer CustomPS : register(b6)\u003cbr\u003e\n{\u003cbr\u003e\nbool cShowRelief;\u003cbr\u003e\nfloat cAlpha;\u003cbr\u003e\nfloat cOwnshipAltitudeFt;\u003cbr\u003e\nfloat2 cThreshHolds;     \u0026lt;=== combined cAltThreshWarn/Danger into a float2, also fixes this.\u003cbr\u003e\n}\u003cbr\u003e\n\u003cspan class=\"hashtag\"\u003e#endif\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003eThis is making no sense to us.   Anyone got any clues?\u003c/p\u003e\n\u003cp\u003eLuckily this final workaround does work, so we’re going to “go with it”.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2021-07-19T07:32:11.139Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":28,"readers_count":27,"score":10.6,"yours":false,"topic_id":6931,"topic_slug":"shader-register-b6-vs-b5-cross-talk","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":43172,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2021-07-19T09:10:59.973Z","cooked":"\u003cp\u003eIf we ignore a possibility of driver bug messing up with packing bool into uniform buffer… I don’t know. Perhaps Urho messes up parsing such layout, I dunno.\u003cbr\u003e\nIt’s hard to tell without actual GPU debugging (I prefer Visual Studio debugger, which is still quite trash)\u003c/p\u003e\n\u003cp\u003ePersonally I would have just avoided using bool uniforms alltogether. You have floats and integers.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2021-07-19T09:10:59.973Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":28,"readers_count":27,"score":20.6,"yours":false,"topic_id":6931,"topic_slug":"shader-register-b6-vs-b5-cross-talk","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":44759,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2022-03-09T07:18:28.324Z","cooked":"\u003cp\u003eFYI – I encountered this same behavior again tonight – only impacting HLSL.   One Shader’s parameters overwriting another’s.   This time, I’m not making any sense of it.     One way to fix it is to have a single fake float constant defined (that I don’t even use) – and for some reason this clears up the issue.\u003c/p\u003e\n\u003cp\u003eIt works fine in GLSL.   After hours of playing around with this – still no real progress, other than figuring out a kludge that seem “seems to magically work” for this one instance.\u003c/p\u003e\n\u003cp\u003eHere’s the shader that is failing:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e#ifdef COMPILEPS\ncbuffer CustomPS : register(b6)\n{\n    uniform float4 cColor;\n    //uniform float cBOGUSPARAMETER; // Adding this, fixes the issue, otherwise \"cColor\" is overridden by crosstalk from another shader.\n}\n#endif\n\nvoid PS(\n    float2 oTexCoord : TEXCOORD0,\n    out float4 oColor : OUTCOLOR0)\n{\n    float4 diffColor = cColor * Sample2D(DiffMap, oTexCoord).bgra;\n    oColor = diffColor;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDoes anyone have any clues as to what might be causing this?   It seems like an Urho bug to me, at this point.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2022-03-09T07:18:28.324Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":18,"readers_count":17,"score":8.6,"yours":false,"topic_id":6931,"topic_slug":"shader-register-b6-vs-b5-cross-talk","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":44767,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2022-03-09T19:35:51.722Z","cooked":"\u003cp\u003eI spent another 4 hours trying to find the pattern to this – and turns out it’s worse than I thought.   I could make this error happen in a great many situations – all HLSL.   The fix to issues were all nonsense stuff (like above) – but at least these kludges work.   And so we can move on.\u003c/p\u003e\n\u003cp\u003eThis bug exists in UrhoSharp, not \u003ca href=\"http://Urho3D.NET\" rel=\"noopener nofollow ugc\"\u003eUrho3D.NET\u003c/a\u003e – because \u003ca href=\"http://Urho3D.NET\" rel=\"noopener nofollow ugc\"\u003eUrho3D.NET\u003c/a\u003e uses OpenGL on Windows, and so avoids usage of HLSL entirely.   And so I’m going to just live with the silly workaround, and we’re glad that this workaround actually works.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2022-03-09T19:35:51.722Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":18,"readers_count":17,"score":3.6,"yours":false,"topic_id":6931,"topic_slug":"shader-register-b6-vs-b5-cross-talk","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://Urho3D.NET","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":null,"reply_to_user":{"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[43169,43170,43172,44759,44767]},"timeline_lookup":[[1,492],[4,259],[5,258]],"suggested_topics":[{"id":7182,"title":"How install landscape in the format (.tor or .obj)?","fancy_title":"How install landscape in the format (.tor or .obj)?","slug":"how-install-landscape-in-the-format-tor-or-obj","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-02-03T16:58:20.976Z","last_posted_at":"2022-02-04T16:34:09.663Z","bumped":true,"bumped_at":"2022-02-04T16:34:09.663Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":151,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":"latest","description":"Most Recent Poster, Accepted Answer","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7112,"title":"What is the proper way to add more source files(.cpp and .h) to a project?","fancy_title":"What is the proper way to add more source files(.cpp and .h) to a project?","slug":"what-is-the-proper-way-to-add-more-source-files-cpp-and-h-to-a-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-27T18:18:21.946Z","last_posted_at":"2021-12-28T12:19:43.514Z","bumped":true,"bumped_at":"2021-12-28T12:19:43.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":195,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1498,"username":"Tryout","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/85f322/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7081,"title":"Install Urho3D Library - Windows 10 - rake build - \"project does not exist\"","fancy_title":"Install Urho3D Library - Windows 10 - rake build - \u0026ldquo;project does not exist\u0026rdquo;","slug":"install-urho3d-library-windows-10-rake-build-project-does-not-exist","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-03T03:06:40.974Z","last_posted_at":"2021-12-03T17:53:10.844Z","bumped":true,"bumped_at":"2021-12-03T17:53:10.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":190,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7185,"title":"Update Ray ray direction","fancy_title":"Update Ray ray direction","slug":"update-ray-ray-direction","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-02-05T00:28:45.414Z","last_posted_at":"2022-02-05T20:19:51.238Z","bumped":true,"bumped_at":"2022-02-05T20:19:51.238Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":6931,"title":"Shader Register B6 vs B5 - cross-talk?","fancy_title":"Shader Register B6 vs B5 - cross-talk?","posts_count":5,"created_at":"2021-07-19T07:28:29.157Z","views":773,"reply_count":2,"like_count":1,"last_posted_at":"2022-03-09T19:35:51.722Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"shader-register-b6-vs-b5-cross-talk","category_id":10,"word_count":530,"deleted_at":null,"user_id":1334,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6931","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"},"last_poster":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}}