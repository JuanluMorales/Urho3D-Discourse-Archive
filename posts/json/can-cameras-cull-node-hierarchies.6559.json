{"post_stream":{"posts":[{"id":40826,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2020-11-21T20:09:37.222Z","cooked":"\u003cp\u003eI saw the “SetViewMask()” function for Drawables, as a way of filtering out content from a Camera.\u003c/p\u003e\n\u003cp\u003eNote that we have multiple cameras in the scene, rendering to multiple Viewports…  and we have this concept of “Layer Visibility” and each layer can have 1000’s of renderables.\u003c/p\u003e\n\u003cp\u003eSo in short, we want an efficient way to manage Visibility per Camera, other than having each camera sift through 1000’s of renderables that it’s not going to render.\u003c/p\u003e\n\u003cp\u003eIt would be much nicer to have this “ViewMask” set at the Node level, that way the Camera Culling Logic would be extremely efficient – it would see the Node’s Mask - and then not bother sifting through the content of this Node, if the mask doesn’t match.  Now we’ve just got one comparison to make, per Layer, rather than 1000’s!..\u003c/p\u003e\n\u003cp\u003eAny ideas on how to make this more efficient for Urho to manage?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2020-11-21T20:11:00.747Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":28,"readers_count":27,"score":15.6,"yours":false,"topic_id":6559,"topic_slug":"can-cameras-cull-node-hierarchies","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":40828,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2020-11-22T01:26:57.754Z","cooked":"\u003cp\u003eNodes aren’t stored in the octree, only the drawables themselves.\u003c/p\u003e\n\u003cp\u003eYou can bunch them up into \u003ccode\u003eStaticModelGroup\u003c/code\u003e components which will treat them as one whole but you’ll have to measure if you actually gain anything from it for how your objects are laid out.\u003c/p\u003e\n\u003cp\u003eIf occlusion culling is on then the \u003ccode\u003eOccludedFrustumOctreeQuery\u003c/code\u003e is used cull entire octants if they’re occluded. If you can, setup good occluders. Even without marking occludees you’ll gain from octant culling.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eIf you really really wanted to aggregate a mask for each Octant then you’d have to tag octants as they’re dirty and then visit every dirty octant and all of its drawables to update the mask … and then walk the tree OR’ing the masks together since you need to merge those masks upwards. That’s kind of silly.\u003c/p\u003e\n\u003cp\u003eIf messing with octants you’d probably win more by marking their “latest dirty frame” and using that to cache shadowmaps for reuse since shadowmaps have considerable cost in both view-setup and rendering.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2020-11-22T01:27:47.326Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":20.4,"yours":false,"topic_id":6559,"topic_slug":"can-cameras-cull-node-hierarchies","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":40844,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2020-11-22T11:34:26.040Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"najak3d\" data-post=\"1\" data-topic=\"6559\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/40.png\" class=\"avatar\"\u003e najak3d:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt would be much nicer to have this “ViewMask” set at the Node level, that way the Camera Culling Logic would be extremely efficient – it would see the Node’s Mask - and then not bother sifting through the content of this Node\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eUrho has exactly one \u003ccode\u003eOctree\u003c/code\u003e per \u003ccode\u003eScene\u003c/code\u003e, and \u003ccode\u003eNode\u003c/code\u003e hierarchy is not stored there.\u003cbr\u003e\nSo, at the time of culling you literally don’t have any information about node hierarchy and you \u003cem\u003ecannot add it\u003c/em\u003e because it contradicts current data layout.\u003cbr\u003e\nThe only way would be to group all stuff into one \u003ccode\u003eDrawable\u003c/code\u003e (e.g. \u003ccode\u003eStaticModelGroup\u003c/code\u003e or something custom), but you will lose an ability of partial culling. You either render whole \u003ccode\u003eDrawable\u003c/code\u003e or nothing.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2020-11-22T17:23:02.492Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":21,"readers_count":20,"score":39.2,"yours":false,"topic_id":6559,"topic_slug":"can-cameras-cull-node-hierarchies","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":true},{"id":40849,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2020-11-22T17:26:02.695Z","cooked":"\u003cp\u003eThank you JSandusky and Eugene – both of you alluded to the same answer – “StaticModelGroup”, which seems to be the right answer for me – I could at least group things in close proximity into these groups, and that would reduce overhead of the entire scene (at least the culling logic).  And would also mostly solve my issued.   Instead of having to use the ViewMask to cull 1000’s of renderables, we’d only be culling dozens, likely.    And that suffices for sure.\u003c/p\u003e\n\u003cp\u003eI selected Eugene’s solution, because it more succinctly describes the solution we’re going to choose.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2020-11-22T17:26:02.695Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":21,"readers_count":20,"score":4.2,"yours":false,"topic_id":6559,"topic_slug":"can-cameras-cull-node-hierarchies","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[40826,40828,40844,40849]},"timeline_lookup":[[1,731],[4,730]],"suggested_topics":[{"id":7107,"title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u003cSDL/SDL_gamecontroller.h\u003e","fancy_title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u0026lt;SDL/SDL_gamecontroller.h\u0026gt;","slug":"error-sdl-sdl-gamecontroller-h-no-such-file-or-directory-include-sdl-sdl-gamecontroller-h","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2021-12-21T15:29:52.810Z","last_posted_at":"2021-12-22T15:32:44.818Z","bumped":true,"bumped_at":"2021-12-22T15:32:44.818Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":271,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7115,"title":"Is it possbile to use one billboard for a lens flare?","fancy_title":"Is it possbile to use one billboard for a lens flare?","slug":"is-it-possbile-to-use-one-billboard-for-a-lens-flare","posts_count":17,"reply_count":4,"highest_post_number":17,"image_url":null,"created_at":"2022-01-02T03:10:48.953Z","last_posted_at":"2022-01-03T21:37:51.953Z","bumped":true,"bumped_at":"2022-01-03T21:37:51.953Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7129,"title":"Best Model Import Pipeline as of Jan 2022?","fancy_title":"Best Model Import Pipeline as of Jan 2022?","slug":"best-model-import-pipeline-as-of-jan-2022","posts_count":7,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2022-01-17T09:27:23.432Z","last_posted_at":"2022-01-17T20:37:59.458Z","bumped":true,"bumped_at":"2022-01-17T20:37:59.458Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":170,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]}],"tags_descriptions":{},"id":6559,"title":"Can Cameras Cull Node Hierarchies?","fancy_title":"Can Cameras Cull Node Hierarchies?","posts_count":4,"created_at":"2020-11-21T20:09:37.066Z","views":270,"reply_count":1,"like_count":3,"last_posted_at":"2020-11-22T17:26:02.695Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"can-cameras-cull-node-hierarchies","category_id":10,"word_count":550,"deleted_at":null,"user_id":1334,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6559","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":4,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"accepted_answer":{"post_number":3,"username":"Eugene","excerpt":"Urho has exactly one Octree per Scene, and Node hierarchy is not stored there. \nSo, at the time of culling you literally don’t have any information about node hierarchy and you cannot add it because it contradicts current data layout. \nThe only way would be to group all stuff into one Drawable (e.g\u0026hellip;"},"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0}],"created_by":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"},"last_poster":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}}