artgolf1000 | 2017-08-26 07:40:19 UTC | #1

Hi,

I found a tutorial [How to make a cloth sim rig](https://blender.stackexchange.com/questions/41235/rig-that-reacts-to-gravity), and it works!

I tried to simulate skirt movement of a character in blender, and baked the IK to FK, I must remove the physics from the skirt before I can export the animated model by the Urho3D-Blender plugin, the result is very good.

Vertex driven IK is a wonderful idea, you can do any realistic physics simulations in most 3d softwares, bake the simulations to bones and export to our game engines.

Cheers.

-------------------------

yushli1 | 2017-08-26 09:03:05 UTC | #2

Do you have any demo project that we can try out? either with source or  runnable would be good.

-------------------------

artgolf1000 | 2017-08-27 11:28:42 UTC | #3

I uploaded a very short demo(16.7 seconds, 1.2M): [http://www.mesh-online.net/Untitled.mp4](http://www.mesh-online.net/Untitled.mp4).

![ballet|640x480](upload://jhBZjedZZWBWnTqDLYjLOPBF5ck.png)

The demo is generated by baked FK, the movements of the ponytail and the skirt are driven by IK, where IK are driven by carefully chosen vertices on the ponytail and the skirt, and the ponytail and the skirt are driven by the built-in physics system in Blender.

I also manually fixed several frames, for I did not use collision detection to speed up the simulation.

-------------------------

yushli1 | 2017-08-26 14:09:25 UTC | #4

Thanks for sharing. THe skirt looks quite nice. Is it rendered inside Urho3d? How big is the animation file?

-------------------------

artgolf1000 | 2017-08-26 14:30:07 UTC | #5

No, I used Cheetah3D 6.0 to render the exported FBX file from Blender, for Blender's Cycles Renderer has an issue with transparent textures, I cannot figure out how to solve the issue.

The animation file(2017-8-20-19-10-38.ani) has 562k bytes.

I have successfully loaded the exported 'mdl' files in Urho3D Editor, because the FBX file only use standard skeleton and standard FK bones, the result in Urho3D should be the same as in Cheetah3D and Blender.

-------------------------

DrAlta | 2017-08-26 19:33:55 UTC | #6

This technique reminds me of [This](http://www.gamasutra.com/view/feature/132771/the_secrets_of_cloth_simulation_in_.php) article from Gamasutra

-------------------------

artgolf1000 | 2017-08-27 11:29:39 UTC | #7

I found a trick when setting up IK of a bone, I set IK's influence to 0.8 to keep the bone stable when doing cloth simulation.
![fk-ik-bones|502x500](upload://mbDBBRDVlqutKu8DMZBnWhUM1qX.png)

-------------------------

johnnycable | 2017-12-01 14:36:25 UTC | #8

You may want to play with [this](http://cheece.github.io/JiggleArmature/) to give it some more action...

-------------------------

