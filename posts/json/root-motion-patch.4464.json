{"post_stream":{"posts":[{"id":25648,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-08-16T14:11:59.634Z","cooked":"\u003cp\u003eI implemented root motion support in animations. Im not entirely sure of it’s correctness so be aware. Also i am not entirely happy with the API. Probably there is a better way to do it. This is why i am not submitting PR.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b09b219bcc3c54be6190c52f07b9a23401b512f2.gif\" alt=\"root-motion\" width=\"320\" height=\"349\"\u003e\u003c/p\u003e\n\u003cp\u003eEnable root motion:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-cpp\"\u003eanimCtrl-\u0026gt;PlayExclusive(\"walk.ani\", 0, true, 0.3f);  // play animation\nanimCtrl-\u0026gt;SetRootMotionMode(\"walk.ani\", ANIM_ROOT_MOTION_XZ);  // enable root motion\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eApply root motion:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-cpp\"\u003eSubscribeToEvent(E_POSTRENDERUPDATE, [](StringHash, VariantMap\u0026amp;){\n        const auto* state = animCtrl-\u0026gt;GetAnimationState(\"walk.ani\");\n        const Matrix3x4\u0026amp; motion = state-\u0026gt;GetRootMotion();\n        node-\u0026gt;Translate(motion.Translation() * GetNode()-\u0026gt;GetScale());\n        node-\u0026gt;Rotate(motion.Rotation());  // optional\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eMatrix retuned by \u003ccode\u003eGetRootMotion()\u003c/code\u003e contains motion delta. \u003ccode\u003eANIM_ROOT_MOTION_XZ\u003c/code\u003e means that returned matrix will contain translation delta for X and Z axis + rotation delta for Y axis.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-diff\"\u003ediff --git a/Source/Urho3D/Graphics/Animation.h b/Source/Urho3D/Graphics/Animation.h\nindex e7b98be20..07e9b5d11 100644\n--- a/Source/Urho3D/Graphics/Animation.h\n+++ b/Source/Urho3D/Graphics/Animation.h\n@@ -58,6 +58,12 @@ struct AnimationKeyFrame\n     Quaternion rotation_;\n     /// Bone scale.\n     Vector3 scale_;\n+\n+    /// Returns matrix which encodes position, rotation and scale of this keyframe.\n+    Matrix3x4 ToMatrix() const\n+    {\n+        return Matrix3x4(position_, rotation_, scale_);\n+    }\n };\n \n /// Skeletal animation track, stores keyframes of a single bone.\ndiff --git a/Source/Urho3D/Graphics/AnimationController.cpp b/Source/Urho3D/Graphics/AnimationController.cpp\nindex da073a236..49aee822d 100644\n--- a/Source/Urho3D/Graphics/AnimationController.cpp\n+++ b/Source/Urho3D/Graphics/AnimationController.cpp\n@@ -915,4 +915,27 @@ void AnimationController::HandleScenePostUpdate(StringHash eventType, VariantMap\n     Update(eventData[P_TIMESTEP].GetFloat());\n }\n \n+bool AnimationController::SetRootMotionMode(const String\u0026amp; name, AnimationRootMotionFlags flags)\n+{\n+    unsigned index;\n+    AnimationState* state;\n+    FindAnimation(name, index, state);\n+    if (index == M_MAX_UNSIGNED)\n+        return false;\n+\n+    state-\u0026gt;SetRootMotionMode(flags);\n+    return true;\n+}\n+\n+AnimationRootMotionFlags AnimationController::GetRootMotion(const String\u0026amp; name) const\n+{\n+    unsigned index;\n+    AnimationState* state;\n+    FindAnimation(name, index, state);\n+    if (index == M_MAX_UNSIGNED)\n+        return ANIM_ROOT_MOTION_NONE;\n+\n+    return state-\u0026gt;GetRootMotionMode();\n+}\n+\n }\ndiff --git a/Source/Urho3D/Graphics/AnimationController.h b/Source/Urho3D/Graphics/AnimationController.h\nindex 2ac391c82..833fd489b 100644\n--- a/Source/Urho3D/Graphics/AnimationController.h\n+++ b/Source/Urho3D/Graphics/AnimationController.h\n@@ -127,6 +127,8 @@ public:\n     bool SetSpeed(const String\u0026amp; name, float speed);\n     /// Set animation autofade at end (non-looped animations only.) Zero time disables. Return true on success.\n     bool SetAutoFade(const String\u0026amp; name, float fadeOutTime);\n+    /// Enable or disable root motion for specified animation.\n+    bool SetRootMotionMode(const String\u0026amp; name, AnimationRootMotionFlags flags);\n     /// Set whether an animation auto-removes on completion.\n     bool SetRemoveOnCompletion(const String\u0026amp; name, bool removeOnCompletion);\n     /// Set animation blending mode. Return true on success.\n@@ -166,6 +168,8 @@ public:\n     float GetFadeTime(const String\u0026amp; name) const;\n     /// Return animation autofade time.\n     float GetAutoFade(const String\u0026amp; name) const;\n+    /// Return default root motion status of specified animation.\n+    AnimationRootMotionFlags GetRootMotion(const String\u0026amp; name) const;\n     /// Return whether animation auto-removes on completion, or false if no such animation.\n     bool GetRemoveOnCompletion(const String\u0026amp; name) const;\n     /// Find an animation state by animation name.\n@@ -208,6 +212,8 @@ private:\n     Vector\u0026lt;SharedPtr\u0026lt;AnimationState\u0026gt; \u0026gt; nodeAnimationStates_;\n     /// Attribute buffer for network replication.\n     mutable VectorBuffer attrBuffer_;\n+    /// Default root motion state.\n+    AnimationRootMotionFlags defaultRootMotionFlags_{ANIM_ROOT_MOTION_NONE};\n };\n \n }\ndiff --git a/Source/Urho3D/Graphics/AnimationState.cpp b/Source/Urho3D/Graphics/AnimationState.cpp\nindex a6a22d16b..b3cc9133c 100644\n--- a/Source/Urho3D/Graphics/AnimationState.cpp\n+++ b/Source/Urho3D/Graphics/AnimationState.cpp\n@@ -93,7 +93,12 @@ AnimationState::AnimationState(Node* node, Animation* animation) :\n                 }\n \n                 if (stateTrack.node_)\n+                {\n+                    if (stateTrack.bone_ == model_-\u0026gt;GetSkeleton().GetRootBone())\n+                        previousRootTransform_ = stateTrack.track_-\u0026gt;keyFrames_.Front().ToMatrix();\n+\n                     stateTracks_.Push(stateTrack);\n+                }\n             }\n         }\n     }\n@@ -148,6 +153,9 @@ void AnimationState::SetStartBone(Bone* startBone)\n \n         if (trackBone \u0026amp;\u0026amp; trackBone-\u0026gt;node_)\n         {\n+            if (trackBone == model_-\u0026gt;GetSkeleton().GetRootBone())\n+                previousRootTransform_ = stateTrack.track_-\u0026gt;keyFrames_.Front().ToMatrix();\n+\n             stateTrack.bone_ = trackBone;\n             stateTrack.node_ = trackBone-\u0026gt;node_;\n             stateTracks_.Push(stateTrack);\n@@ -483,6 +491,7 @@ void AnimationState::ApplyTrack(AnimationStateTrack\u0026amp; stateTrack, float weight, b\n         return;\n \n     unsigned\u0026amp; frame = stateTrack.keyFrame_;\n+    unsigned previousFrame = frame;\n     track-\u0026gt;GetKeyFrameIndex(time_, frame);\n \n     // Check if next frame to interpolate to is valid, or if wrapping is needed (looping animation only)\n@@ -564,6 +573,58 @@ void AnimationState::ApplyTrack(AnimationStateTrack\u0026amp; stateTrack, float weight, b\n         }\n     }\n \n+    // Root motion\n+    if (rootMotionFlags_ \u0026amp; ANIM_ROOT_MOTION_XYZ \u0026amp;\u0026amp; channelMask \u0026amp; CHANNEL_POSITION \u0026amp;\u0026amp;\n+        stateTrack.bone_ == model_-\u0026gt;GetSkeleton().GetRootBone())\n+    {\n+        Matrix3x4 transform;\n+        if (channelMask \u0026amp; CHANNEL_POSITION)\n+            transform.SetRotation(newRotation.RotationMatrix());\n+        if (channelMask \u0026amp; CHANNEL_ROTATION)\n+            transform.SetTranslation(newPosition);\n+\n+        bool looped = frame \u0026lt; previousFrame;\n+        if (looped)\n+        {\n+            const Matrix3x4 animationStart = stateTrack.track_-\u0026gt;keyFrames_.Front().ToMatrix();\n+            const Matrix3x4 animationEnd = stateTrack.track_-\u0026gt;keyFrames_.Back().ToMatrix();\n+            rootMotion_ = (animationEnd * previousRootTransform_.Inverse()) * (transform * animationStart.Inverse());\n+        }\n+        else\n+            rootMotion_ = previousRootTransform_.Inverse() * transform;\n+\n+        Vector3 positionDelta = rootMotion_.Translation();\n+        Vector3 rotationDelta, newRotationEuler;\n+        rotationDelta = rootMotion_.Rotation().EulerAngles();\n+        newRotationEuler = newRotation.EulerAngles();\n+\n+        const auto\u0026amp; bonePosition = node-\u0026gt;GetPosition();\n+        const auto\u0026amp; boneRotation = node-\u0026gt;GetRotation();\n+\n+        for (auto i = 0; i \u0026lt; 3; i++)\n+        {\n+            auto axis = static_cast\u0026lt;AnimationRootMotionMode\u0026gt;(1 \u0026lt;\u0026lt; i);\n+            if (rootMotionFlags_ \u0026amp; axis)\n+            {\n+                // Axis is tracked. Position of root bone is locked, rotation is not provided in root motion delta and applied to the bone.\n+                (\u0026amp;newPosition.x_)[i] = bonePosition.Data()[i];\n+                (\u0026amp;rotationDelta.x_)[i] = 0;\n+            }\n+            else\n+            {\n+                // Axis is not tracked. Position is not provided in root motion delta, rotation is provided in root motion delta and not applied to the bone.\n+                (\u0026amp;positionDelta.x_)[i] = 0;\n+                (\u0026amp;newRotationEuler.x_)[i] = boneRotation.Data()[i];\n+            }\n+        }\n+\n+        newRotation = Quaternion(newRotationEuler);\n+        rootMotion_.SetRotation(Quaternion(rotationDelta).RotationMatrix());\n+        rootMotion_.SetTranslation(positionDelta);\n+\n+        previousRootTransform_ = transform;\n+    }\n+\n     if (silent)\n     {\n         if (channelMask \u0026amp; CHANNEL_POSITION)\ndiff --git a/Source/Urho3D/Graphics/AnimationState.h b/Source/Urho3D/Graphics/AnimationState.h\nindex 337708612..b23b70dea 100644\n--- a/Source/Urho3D/Graphics/AnimationState.h\n+++ b/Source/Urho3D/Graphics/AnimationState.h\n@@ -22,8 +22,10 @@\n \n #pragma once\n \n+#include \"../Container/FlagSet.h\"\n #include \"../Container/HashMap.h\"\n #include \"../Container/Ptr.h\"\n+#include \"../Math/Matrix3x4.h\"\n #include \"../Math/StringHash.h\"\n \n namespace Urho3D\n@@ -47,6 +49,24 @@ enum AnimationBlendMode\n     ABM_ADDITIVE\n };\n \n+/// %Animation root motion mode.\n+enum AnimationRootMotionMode : unsigned char\n+{\n+    /// Motion of the root bone is applied directly to that bone.\n+    ANIM_ROOT_MOTION_NONE,\n+    /// X motion of the root bone is applied to the parent of the bone.\n+    ANIM_ROOT_MOTION_X = 1,\n+    /// Y motion of the root bone is applied to the parent of the bone.\n+    ANIM_ROOT_MOTION_Y = 2,\n+    /// Z motion of the root bone is applied to the parent of the bone.\n+    ANIM_ROOT_MOTION_Z = 4,\n+    /// XZ motion of the root bone is applied to the parent of the bone.\n+    ANIM_ROOT_MOTION_XZ = ANIM_ROOT_MOTION_X | ANIM_ROOT_MOTION_Z,\n+    /// XYZ motion of the root bone is applied to the parent of the bone.\n+    ANIM_ROOT_MOTION_XYZ = ANIM_ROOT_MOTION_XZ | ANIM_ROOT_MOTION_Y,\n+};\n+URHO3D_FLAGSET(AnimationRootMotionMode, AnimationRootMotionFlags);\n+\n /// %Animation instance per-track data.\n struct AnimationStateTrack\n {\n@@ -147,6 +167,13 @@ public:\n     /// Apply the animation at the current time position.\n     void Apply();\n \n+    /// Return root motion status.\n+    AnimationRootMotionFlags GetRootMotionMode() const { return rootMotionFlags_; }\n+    /// Enable or disable root motion.\n+    void SetRootMotionMode(AnimationRootMotionFlags flags) { rootMotionFlags_ = flags; }\n+    /// Return last frame root motion delta.\n+    const Matrix3x4\u0026amp; GetRootMotion() const { return rootMotion_; };\n+\n private:\n     /// Apply animation to a skeleton. Transform changes are applied silently, so the model needs to dirty its root model afterward.\n     void ApplyToModel();\n@@ -175,6 +202,12 @@ private:\n     unsigned char layer_;\n     /// Blending mode.\n     AnimationBlendMode blendingMode_;\n+    /// Root motion state.\n+    AnimationRootMotionFlags rootMotionFlags_{ANIM_ROOT_MOTION_NONE};\n+    /// Previous transform of root bone.\n+    Matrix3x4 previousRootTransform_;\n+    /// Motion delta of root bone.\n+    Matrix3x4 rootMotion_;\n };\n \n }\n\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2018-08-17T06:29:51.742Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":150,"reads":66,"readers_count":65,"score":975.2,"yours":false,"topic_id":4464,"topic_slug":"root-motion-patch","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://discourse.urho3d.io/t/question-regarding-adding-root-bones-to-mixamo-animations/5112/2","internal":true,"reflection":true,"title":"Question regarding adding root bones to Mixamo animations","clicks":1},{"url":"https://discourse.urho3d.io/t/how-to-work-animations-with-root-motion/5829","internal":true,"reflection":true,"title":"How to work animations with root motion?","clicks":1},{"url":"https://discourse.urho3d.io/t/wip-everyone-loves-zombies-plus-occasional-screenshots/4892/92","internal":true,"reflection":true,"title":"Dishonourable Discharge - A Zombie Horror Survival Adventure","clicks":1}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":10}],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25649,"name":"Trevor Cash","username":"TrevorCash","avatar_template":"/user_avatar/discourse.urho3d.io/trevorcash/{size}/698_2.png","created_at":"2018-08-16T14:19:18.529Z","cooked":"\u003cp\u003eI like how it simply returns the motion matrix and doesn’t take over that control and leaves it to the implementer. Just A thought - It may be useful to enable other axis combinations - For example for a spider model animation crawling up a wall which would be motion in the YZ or XY plane. Although you could transform it on the outside as well I suppose\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-08-16T14:20:00.948Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":60,"readers_count":59,"score":17.0,"yours":false,"topic_id":4464,"topic_slug":"root-motion-patch","display_username":"Trevor Cash","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":792,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25650,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-08-16T14:20:20.602Z","cooked":"\u003cp\u003eYou can do that by freely combining flags in \u003ccode\u003eAnimationRootMotionMode\u003c/code\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-08-16T14:20:20.602Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":59,"readers_count":58,"score":31.8,"yours":false,"topic_id":4464,"topic_slug":"root-motion-patch","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"TrevorCash","name":"Trevor Cash","avatar_template":"/user_avatar/discourse.urho3d.io/trevorcash/{size}/698_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25651,"name":"Trevor Cash","username":"TrevorCash","avatar_template":"/user_avatar/discourse.urho3d.io/trevorcash/{size}/698_2.png","created_at":"2018-08-16T14:21:17.603Z","cooked":"\u003cp\u003eOh I see that now - nice\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-08-16T14:21:17.603Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":59,"readers_count":58,"score":11.8,"yours":false,"topic_id":4464,"topic_slug":"root-motion-patch","display_username":"Trevor Cash","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":792,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25659,"name":"","username":"S.L.C","avatar_template":"/user_avatar/discourse.urho3d.io/s.l.c/{size}/1016_2.png","created_at":"2018-08-16T23:36:50.957Z","cooked":"\u003cp\u003eThe video does not work. If that was supposed to be a video.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2018-08-16T23:36:50.957Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":53,"readers_count":52,"score":15.6,"yours":false,"topic_id":4464,"topic_slug":"root-motion-patch","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":180,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25664,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-08-17T06:46:28.122Z","cooked":"\u003cp\u003eYeah apparently streamable is not good for long-ish term hosting of videos. Replaced it with a gif.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-08-17T06:46:28.122Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":53,"readers_count":52,"score":10.6,"yours":false,"topic_id":4464,"topic_slug":"root-motion-patch","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"S.L.C","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/s.l.c/{size}/1016_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25683,"name":"","username":"smellymumbler","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ad7895/{size}.png","created_at":"2018-08-17T19:00:07.452Z","cooked":"\u003cp\u003eI don’t quite understand the use cases for this. Does this mean i can easily blend an upper body animation (waving a sword, for example) with a walking animation, in different directions?\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-08-17T19:00:07.452Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":48,"readers_count":47,"score":39.6,"yours":false,"topic_id":4464,"topic_slug":"root-motion-patch","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":674,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25692,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2018-08-18T09:26:30.208Z","cooked":"\u003cp\u003eI’d prefer to see full delta after all animation blends.\u003cbr\u003e\nEither way please send PR\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2018-08-18T09:26:30.208Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":28,"reads":44,"readers_count":43,"score":148.8,"yours":false,"topic_id":4464,"topic_slug":"root-motion-patch","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25697,"name":"","username":"rku","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","created_at":"2018-08-19T07:33:10.381Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/smellymumbler\"\u003e@smellymumbler\u003c/a\u003e this is useful for animations that do not have a linear movement speed. For instance animation for walking with injured leg - talking step is fast but then character goes to a stop before taking next step. Root motion allows to have perfectly synchronize scene \u003ccode\u003eNode\u003c/code\u003e motion with motion with such  animation having non-linear motion. Gif in the first post has two arrows. Lower red arrow is attached to hips of the character and displays location and rotation of hips. Arrow above character’s head is attached to a \u003ccode\u003eNode\u003c/code\u003e that has \u003ccode\u003eAnimatedModel\u003c/code\u003e and is playing animation. Notice how hips and parent node itself are in perfect sync. Without root motion upper arrow would always stay in place and not rotate while lower arrow + entire model animate forward and snap to the starting position.\u003c/p\u003e\n\u003cp\u003e\u003ca class=\"mention\" href=\"/u/slapin\"\u003e@slapin\u003c/a\u003e you are right, this kind of sucks and delta between all blends would definitely be more proper. I am not entirely sure how to accomplish it.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2018-08-19T07:35:11.956Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":18,"reads":42,"readers_count":41,"score":98.4,"yours":false,"topic_id":4464,"topic_slug":"root-motion-patch","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":246,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[25648,25649,25650,25651,25659,25664,25683,25692,25697]},"timeline_lookup":[[1,1560],[5,1559],[7,1558],[9,1557]],"suggested_topics":[{"id":7103,"title":":test_tube: DebugRenderer as GUI","fancy_title":":test_tube: DebugRenderer as GUI","slug":"debugrenderer-as-gui","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-17T02:25:06.606Z","last_posted_at":"2021-12-18T01:09:27.738Z","bumped":true,"bumped_at":"2021-12-18T01:09:27.738Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"🧪 DebugRenderer as GUI","tags_descriptions":{},"like_count":4,"views":267,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7110,"title":"Resource fetch define","fancy_title":"Resource fetch define","slug":"resource-fetch-define","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-27T12:28:55.126Z","last_posted_at":"2021-12-27T17:00:37.699Z","bumped":true,"bumped_at":"2021-12-27T17:00:37.699Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":7,"views":184,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7120,"title":"Log Error Once Macro","fancy_title":"Log Error Once Macro","slug":"log-error-once-macro","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-01-04T02:24:37.857Z","last_posted_at":"2022-01-04T02:24:37.925Z","bumped":true,"bumped_at":"2022-01-04T02:24:37.925Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":143,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7099,"title":":fallen_leaf: Polynomials \u0026 Harmonics","fancy_title":":fallen_leaf: Polynomials \u0026amp; Harmonics","slug":"polynomials-harmonics","posts_count":6,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2021-12-13T05:06:04.641Z","last_posted_at":"2021-12-27T23:27:39.489Z","bumped":true,"bumped_at":"2021-12-27T23:27:39.489Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"🍂 Polynomials \u0026 Harmonics","tags_descriptions":{},"like_count":6,"views":392,"category_id":13,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7221,"title":"While ParticleEmitter emitting how can i change color?","fancy_title":"While ParticleEmitter emitting how can i change color?","slug":"while-particleemitter-emitting-how-can-i-change-color","posts_count":7,"reply_count":4,"highest_post_number":8,"image_url":null,"created_at":"2022-03-18T15:49:19.164Z","last_posted_at":"2022-03-20T10:51:58.767Z","bumped":true,"bumped_at":"2022-03-20T10:51:58.767Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":196,"category_id":14,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1503,"username":"tianlv777","name":"zerrrrr","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/a4c791/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":4464,"title":"Root motion patch","fancy_title":"Root motion patch","posts_count":9,"created_at":"2018-08-16T14:11:59.539Z","views":1457,"reply_count":3,"like_count":11,"last_posted_at":"2018-08-19T07:33:10.381Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"root-motion-patch","category_id":13,"word_count":1417,"deleted_at":null,"user_id":246,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b09b219bcc3c54be6190c52f07b9a23401b512f2.gif","slow_mode_seconds":0,"draft":null,"draft_key":"topic_4464","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":9,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":5,"show_read_indicator":false,"thumbnails":[{"max_width":null,"max_height":null,"width":320,"height":349,"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b09b219bcc3c54be6190c52f07b9a23401b512f2.gif"}],"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":792,"username":"TrevorCash","name":"Trevor Cash","avatar_template":"/user_avatar/discourse.urho3d.io/trevorcash/{size}/698_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":180,"username":"S.L.C","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/s.l.c/{size}/1016_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":674,"username":"smellymumbler","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ad7895/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png"},"last_poster":{"id":246,"username":"rku","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png"},"links":[{"url":"https://discourse.urho3d.io/t/how-to-work-animations-with-root-motion/5829","title":"How to work animations with root motion?","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":1279,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"},{"url":"https://discourse.urho3d.io/t/question-regarding-adding-root-bones-to-mixamo-animations/5112/2","title":"Question regarding adding root bones to Mixamo animations","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":256,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"},{"url":"https://discourse.urho3d.io/t/wip-everyone-loves-zombies-plus-occasional-screenshots/4892/92","title":"Dishonourable Discharge - A Zombie Horror Survival Adventure","internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":1098,"domain":"discourse.urho3d.io","root_domain":"urho3d.io"}]}}