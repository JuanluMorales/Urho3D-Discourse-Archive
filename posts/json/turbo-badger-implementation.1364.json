{"post_stream": {"posts": [{"id": 7819, "name": "", "username": "thebluefish", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png", "created_at": "2015-09-14T16:00:10.000Z", "cooked": "<p>I\u2019ve had this for over a month now, and progress has been slow. I don\u2019t foresee any modifications that I need to do to the port itself, so I feel confident enough in releasing this. However this implementation makes several assumptions that will not be true for everyone, so some modification may be required to fit your specific needs.</p>\n<p>This is primarily based off the existing Urho3D UI implementation, so there will be a lot of similarities.</p>\n<p>It still uses Urho3D resources to load files, so turbobadger file paths are the same as loading any files through Urho3D. I did hard-code the skin and override skin paths in TBUI.cpp, so you may need to change these if you use different paths.</p>\n<p><a href=\"http://i.imgur.com/H7kQDU8.png\" data-bbcode=\"true\" rel=\"nofollow noopener\"><img src=\"http://i.imgur.com/H7kQDU8m.png\" alt=\"\" width=\"320\" height=\"240\"></a><br>\n[size=85]Turbo Badger running in Urho3D in a wxWidgets window.[/size]</p>\n<p>TBUI.h:</p>\n<pre><code class=\"lang-auto\">&gt;&gt;Removed&lt;&lt;</code></pre>\n<p>TBUI.cpp:</p>\n<pre><code class=\"lang-auto\">&gt;&gt;Removed&lt;&lt;</code></pre>\n<p>To setup the subsystem:</p>\n<pre><code class=\"lang-auto\">// Setup Turbo Badger UI\nUI::TBUI::RegisterSystem(_context);\n_context-&gt;RegisterSubsystem(new UI::TBUI(_context));\n_context-&gt;GetSubsystem&lt;UI::TBUI&gt;()-&gt;Init();</code></pre>\n<p>Adding an editor control that expands the entire window is easy:</p>\n<pre><code class=\"lang-auto\">_editorUI = ui-&gt;LoadWidget&lt;tb::TBWidget&gt;(\"UI/ui_resources/editor_tab_content.tb.txt\");\nui-&gt;SetRoot(_editorUI);</code></pre>", "post_number": 1, "post_type": 1, "updated_at": "2017-01-02T01:07:13.193Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 330, "reads": 66, "readers_count": 65, "score": 1665.2, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "http://i.imgur.com/H7kQDU8.png", "internal": false, "reflection": false, "title": "H7kQDU8.png", "clicks": 195}, {"url": "http://discourse.urho3d.io/t/atomic-game-engine-mit-urho3d-fork/643/32", "internal": true, "reflection": true, "title": "Atomic Game Engine (MIT Urho3D Fork)", "clicks": 15}, {"url": "http://discourse.urho3d.io/t/turbobadger-full-integration/1457/14", "internal": true, "reflection": true, "title": "TurboBadger full integration", "clicks": 13}, {"url": "https://discourse.urho3d.io/t/turbobadger-full-integration/1457/36", "internal": true, "reflection": true, "title": "TurboBadger full integration", "clicks": 0}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 80, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 7829, "name": "", "username": "rasteron", "avatar_template": "/user_avatar/discourse.urho3d.io/rasteron/{size}/55_2.png", "created_at": "2015-09-15T00:05:12.000Z", "cooked": "<p>Great share! <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>", "post_number": 2, "post_type": 1, "updated_at": "2017-01-02T01:07:14.044Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 55, "readers_count": 54, "score": 11.0, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 54, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 7885, "name": "Justin Miller", "username": "jmiller", "avatar_template": "/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png", "created_at": "2015-09-18T16:04:49.000Z", "cooked": "<p>Excellent, thanks blue <img src=\"https://emoji.discourse-cdn.com/twitter/sunglasses.png?v=5\" title=\":sunglasses:\" class=\"emoji\" alt=\":sunglasses:\"></p>\n<p>diff from tb_config.h</p>\n<pre><code class=\"lang-auto\">35c35\n&lt; #define TB_FONT_RENDERER_TBBF\n---\n&gt; //#define TB_FONT_RENDERER_TBBF\n38c38\n&lt; //#define TB_FONT_RENDERER_FREETYPE\n---\n&gt; #define TB_FONT_RENDERER_FREETYPE\n102c102\n&lt; #define TB_FILE_POSIX\n---\n&gt; //#define TB_FILE_POSIX\n107c107\n&lt; #define TB_FILE_POSIX\n---\n&gt; //#define TB_FILE_POSIX\n112c112\n&lt; #define TB_FILE_POSIX\n---\n&gt; //#define TB_FILE_POSIX</code></pre>\n<p>Initialize subsystem (assuming similar namespace setup):</p>\n<pre><code class=\"lang-auto\">  // Setup Turbo Badger UI\n  context_-&gt;RegisterSubsystem(new App::UI::TBUI(context_));\n  context_-&gt;GetSubsystem&lt;App::UI::TBUI&gt;()-&gt;Init();</code></pre>", "post_number": 3, "post_type": 1, "updated_at": "2017-01-02T01:07:17.937Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 1, "reads": 54, "readers_count": 53, "score": 15.8, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "Justin Miller", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": true, "admin": false, "staff": true, "user_id": 21, "hidden": false, "trust_level": 3, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 7886, "name": "", "username": "thebluefish", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png", "created_at": "2015-09-18T16:41:13.000Z", "cooked": "<p>A little example to working with events, including input.</p>\n<p>Working with Carnalis\u2019 example, your class needs to inherit from TBWidgetListener and set itself as a global event handler. This example is for clicking a button called \u201cfileMenu\u201d, and showing a popup window with the File menu options:</p>\n<pre><code class=\"lang-auto\">bool Editor::OnWidgetInvokeEvent(tb::TBWidget *widget, const tb::TBWidgetEvent &amp;ev)\n{\n\tif (ev.target-&gt;GetID() == tb::TBID(\"fileMenu\"))\n\t{\n\t\tif (ev.type == tb::EVENT_TYPE_CLICK)\n\t\t{\n\t\t\tstatic tb::TBGenericStringItemSource source;\n\t\t\tif (!source.GetNumItems())\n\t\t\t{\n\t\t\t\tsource.AddItem(new tb::TBGenericStringItem(\"New\", tb::TBID(\"default font\")));\n\t\t\t\tsource.AddItem(new tb::TBGenericStringItem(\"Open File\", tb::TBID(\"large font\")));\n\t\t\t\tsource.AddItem(new tb::TBGenericStringItem(\"-\"));\n\t\t\t\tsource.AddItem(new tb::TBGenericStringItem(\"Save\", tb::TBID(\"large font\")));\n\t\t\t\tsource.AddItem(new tb::TBGenericStringItem(\"Save All\", tb::TBID(\"large font\")));\n\t\t\t\tsource.AddItem(new tb::TBGenericStringItem(\"-\"));\n\t\t\t\tsource.AddItem(new tb::TBGenericStringItem(\"Exit\", tb::TBID(\"align left\")));\n\t\t\t}\n\n\t\t\tif (tb::TBMenuWindow *menu = new tb::TBMenuWindow(widget, tb::TBID(\"popup_menu\")))\n\t\t\t{\n\t\t\t\tmenu-&gt;Show(&amp;source, tb::TBPopupAlignment());\n\t\t\t}\n\t\t}\n\t}\n}</code></pre>", "post_number": 4, "post_type": 1, "updated_at": "2017-01-02T01:07:18.011Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 3, "reads": 44, "readers_count": 43, "score": 23.8, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 80, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 8011, "name": "Justin Miller", "username": "jmiller", "avatar_template": "/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png", "created_at": "2015-09-28T16:23:47.000Z", "cooked": "<p><a href=\"https://github.com/fruxo/turbobadger\">github.com/fruxo/turbobadger</a><br>\nVery slick UI <img src=\"https://emoji.discourse-cdn.com/twitter/smiley.png?v=5\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\"><br>\nCandidate for Urho3D? I really like the way TurboBadger does things, it seems rather complete, internationalized\u2026</p>", "post_number": 5, "post_type": 1, "updated_at": "2017-01-02T01:07:26.863Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 17, "reads": 35, "readers_count": 34, "score": 92.0, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "Justin Miller", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://github.com/fruxo/turbobadger", "internal": false, "reflection": false, "title": "GitHub - fruxo/turbobadger: Small footprint UI library for hardware accelerated games & applications", "clicks": 41}, {"url": "http://discourse.urho3d.io/t/doc-how-to-add-third-party-libraries/1412/2", "internal": true, "reflection": true, "title": "[Doc] How To Add Third Party Libraries", "clicks": 2}], "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": true, "admin": false, "staff": true, "user_id": 21, "hidden": false, "trust_level": 3, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 8251, "name": "Justin Miller", "username": "jmiller", "avatar_template": "/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png", "created_at": "2015-10-21T22:29:34.000Z", "cooked": "<p>A TurboBadger Console (Urho3D::Object, TBWidget) inspired by Urho3D::Console.</p>\n<p><a href=\"http://imgur.com/SBDcK9n\" data-bbcode=\"true\"><img src=\"http://i.imgur.com/SBDcK9nl.png\" alt=\"\" width=\"640\" height=\"98\"></a></p>\n<p>Still a couple rough edges\u2026<br>\nBeing a TBWidget, it\u2019s easily styled and modified. I did not implement SetNumLines() (calc the line height) but it shouldn\u2019t be hard.</p>\n<p>Besides Urho3D\u2019s Console, the TurboBadger Demo application was helpful in developing this, and can offer a lot of insight.</p>\n<p>After instantiating TBUI and creating a root widget\u2026</p>\n<pre><code class=\"lang-auto\">Console* console(new ::Console(context_, tbRoot));\nconsole-&gt;LoadResourceFile(\"UI/resources/console.txt\"); // required widgets\nconsole-&gt;Initialize();\n// Change custom styles for LOG_* constants (output widget in console.txt has 'styling 1')..\nconsole-&gt;styleMap_[LOG_ERROR] = Pair&lt;String, String&gt;(\"&lt;color #ff0000&gt;\", \"&lt;/color&gt;\");\nconsole-&gt;Toggle(); // It's invisible by default\n\nconsole-&gt;SetID(TBIDC(\"console\"));\n// Can be later retrieved by ID:\n// Console* console(static_cast&lt;Console*&gt;(tbRoot-&gt;GetWidgetByID(TBIDC(\"console\"))));</code></pre>\n<p>Console.h<br>\n<a href=\"https://gist.github.com/jforjustin/2761431647bda9c90b4d\">gist.github.com/jforjustin/2761431647bda9c90b4d</a></p>\n<p>Console.cc<br>\n<a href=\"https://gist.github.com/jforjustin/6fbc1202729f21f6c153\">gist.github.com/jforjustin/6fbc1202729f21f6c153</a></p>\n<p>console.txt<br>\nTurboBadger widget definition file; leading tabs are significant.<a href=\"https://gist.github.com/jforjustin/baa26a0943c684c4b8a9\">gist.github.com/jforjustin/baa26a0943c684c4b8a9</a></p>", "post_number": 6, "post_type": 1, "updated_at": "2019-04-20T15:19:48.811Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 5, "reads": 36, "readers_count": 35, "score": 32.2, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "Justin Miller", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "http://imgur.com/SBDcK9n", "internal": false, "reflection": false, "title": "Urho3D TurboBadger Console - Imgur", "clicks": 35}, {"url": "https://gist.github.com/jforjustin/baa26a0943c684c4b8a9", "internal": false, "reflection": false, "title": "TurboBadger widget definition file; note that leading tabs are significant \u00b7 GitHub", "clicks": 2}, {"url": "https://gist.github.com/jforjustin/2761431647bda9c90b4d", "internal": false, "reflection": false, "title": "Console.h \u00b7 GitHub", "clicks": 0}, {"url": "https://gist.github.com/jforjustin/6fbc1202729f21f6c153", "internal": false, "reflection": false, "title": "Console.cc \u00b7 GitHub", "clicks": 0}], "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": true, "admin": false, "staff": true, "user_id": 21, "hidden": false, "trust_level": 3, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 8393, "name": "", "username": "Lumak", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png", "created_at": "2015-11-01T09:52:47.000Z", "cooked": "<p>I\u2019m looking at your code and Atomic\u2019s code for the first time, and it looks like you copied and pasted Atomics code. From rendering process to key inputs, they\u2019re identical.</p>\n<p>Well, I guess it\u2019s ok if you gave him credit for his work.</p>\n<p>Wow, I\u2019m surprize to see Atomic\u2019s UIInput.cpp file is almost as long as my entire integration.</p>", "post_number": 7, "post_type": 1, "updated_at": "2017-01-02T01:07:53.990Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 35, "readers_count": 34, "score": 7.0, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 256, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 8406, "name": "", "username": "thebluefish", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png", "created_at": "2015-11-02T15:01:10.000Z", "cooked": "<p>[quote=\u201cLumak\u201d]I\u2019m looking at your code and Atomic\u2019s code for the first time, and it looks like you copied and pasted Atomics code. From rendering process to key inputs, they\u2019re identical.</p>\n<p>Well, I guess it\u2019s ok if you gave him credit for his work.</p>\n<p>Wow, I\u2019m surprize to see Atomic\u2019s UIInput.cpp file is almost as long as my entire integration.[/quote]</p>\n<p>Input stuff I got from Atomic. Rendering stuff was based on Urho3D\u2019s existing UI class. The reason our code base looks similar is because we both used UI as our base. However Atomic uses a functionally different batching process which I skipped altogether. I actually finished the rendering part before I took a look at Atomic, but I got stuck on \u201cproper\u201d input support and filesystem stuff.</p>", "post_number": 8, "post_type": 1, "updated_at": "2017-01-02T01:07:54.967Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 1, "incoming_link_count": 0, "reads": 34, "readers_count": 33, "score": 6.8, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 80, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 8424, "name": "", "username": "Lumak", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png", "created_at": "2015-11-03T15:44:42.000Z", "cooked": "<p>I see. It would\u2019ve been nice to see a reference.</p>", "post_number": 9, "post_type": 1, "updated_at": "2017-01-02T01:07:56.247Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 34, "readers_count": 33, "score": 6.8, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 256, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 8431, "name": "", "username": "jenge", "avatar_template": "/user_avatar/discourse.urho3d.io/jenge/{size}/88_2.png", "created_at": "2015-11-03T19:48:57.000Z", "cooked": "<p>I am glad that some of the Atomic code was useful.</p>\n<p>I don\u2019t really mind for snippets, though when sharing in the \u201cCode Exchange\u201d section for others to use, probably a good idea to leave copyright and license notifications in place  <img src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=5\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"></p>", "post_number": 10, "post_type": 1, "updated_at": "2017-01-02T01:07:56.706Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 32, "readers_count": 31, "score": 6.4, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 81, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 8433, "name": "", "username": "thebluefish", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png", "created_at": "2015-11-03T22:36:14.000Z", "cooked": "<aside class=\"quote\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/jenge/40/88_1.png\" class=\"avatar\"> jenge:</div>\n<blockquote>\n<p>probably a good idea to leave copyright and license notifications in place  <img src=\"https://emoji.discourse-cdn.com/twitter/wink.png?v=5\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"></p>\n</blockquote>\n</aside>\n<p>Granted, it\u2019s less \u201cleaving them in place\u201d and more \u201cadding them to the post\u201d. The Atomic MIT license is in the correct place for the next release, whenever that will be.</p>", "post_number": 11, "post_type": 1, "updated_at": "2017-01-02T01:07:56.832Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 1, "incoming_link_count": 0, "reads": 31, "readers_count": 30, "score": 6.2, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 80, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 8434, "name": "", "username": "jenge", "avatar_template": "/user_avatar/discourse.urho3d.io/jenge/{size}/88_2.png", "created_at": "2015-11-03T22:55:47.000Z", "cooked": "<p>There\u2019s no need from here to remove code from posts, I was just mentioning that when sharing code for others to use, good to cite sources and licenses of where pulling code from\u2026 even with the permissive MIT, in any event cheers <img src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"></p>", "post_number": 12, "post_type": 1, "updated_at": "2017-01-02T01:07:56.893Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 40, "readers_count": 39, "score": 8.0, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 81, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13398, "name": "Justin Miller", "username": "jmiller", "avatar_template": "/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png", "created_at": "2016-08-26T21:27:36.000Z", "cooked": "<p>I think the implementation that was posted still exists and I\u2019ll look to posting that when it\u2019s available.</p>\n<p>Here is my own working edition of the implementation.  Changes include a license header (let me know if it needs further changes), some private to protected members, various updates for Urho3D, formatting. no real API changes that I recall\u2026</p>\n<p>tb_Urho3D.h</p>\n<pre><code class=\"lang-auto\">/**\n  @license MIT License\n  @copyright\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n\n  Portions Copyright (c) 2008-2016 the Urho3D project.\n  Portions Copyright (c) Thebluefish\n  Portions Copyright (c) 2014-2015 THUNDERBEAST GAMES\n*/\n\n#pragma once\n\n#include &lt;Urho3D/Urho3D.h&gt;\n#include &lt;Urho3D/Core/Object.h&gt;\n#include &lt;Urho3D/Graphics/ShaderVariation.h&gt;\n\n#include &lt;tb_types.h&gt;\n#include &lt;tb_system.h&gt;\n#include &lt;tb_widgets_listener.h&gt;\n#include &lt;tb_window.h&gt;\n#include &lt;renderers/tb_renderer_batcher.h&gt;\n\nnamespace Urho3D {\nclass File;\nclass UIBatch;\nclass VertexBuffer;\nclass Texture2D;\nclass ResourceCache;\nclass Graphics;\nclass Input;\n}\n\nnamespace tb {\nextern Urho3D::Context* context_;\n}\n\nclass TBUrho3DBitmap: public Urho3D::Object, public tb::TBBitmap {\n  URHO3D_OBJECT(TBUrho3DBitmap, Urho3D::Object);\n\npublic:\n  TBUrho3DBitmap(Urho3D::Context* context);\n  ~TBUrho3DBitmap();\n\n  static void RegisterObject(Urho3D::Context* context);\n\n  void Init(int width, int height, tb::uint32* data);\n\n  virtual int Width() {\n    return size.x_;\n  }\n  virtual int Height() {\n    return size.y_;\n  }\n\n  virtual void SetData(tb::uint32* data);\n\n  Urho3D::Vector2 size;\n  Urho3D::SharedPtr&lt;Urho3D::Texture2D&gt; texture;\n};\n\n\nclass TBUrho3DFile: public tb::TBFile {\npublic:\n  TBUrho3DFile(Urho3D::File* file);\n  virtual ~TBUrho3DFile();\n\n  virtual long Size();\n  virtual size_t Read(void* buf, size_t elemSize, size_t count);\n\nprivate:\n  Urho3D::SharedPtr&lt;Urho3D::File&gt; file_;\n};\n\n// =====================================\n\nclass TBUI: public Urho3D::Object, public tb::TBRendererBatcher, public tb::TBWidgetListener {\n  URHO3D_OBJECT(TBUI, Urho3D::Object);\npublic:\n  TBUI(Urho3D::Context* context);\n  ~TBUI();\n\n  static void RegisterObject(Urho3D::Context* context);\n  static void RegisterSystem(Urho3D::Context* context);\n\n  void Init(const Urho3D::String&amp; languageFile);\n  void LoadSkin(const Urho3D::String&amp; skin, const Urho3D::String&amp; overrideSkin);\n  void AddFontInfo(const Urho3D::String&amp; fileName, const Urho3D::String&amp; fontName);\n  void SetDefaultFont(const Urho3D::String&amp; fontName, int size = 12);\n\n  void SetRoot(tb::TBWidget* widget);\n  tb::TBWidget* GetRoot() {\n    return root_;\n  }\n\n  tb::TBWidget* LoadWidget(const Urho3D::String&amp; fileName, tb::TBWidget* widget);\n  template&lt;class T&gt; T* LoadWidget(const Urho3D::String&amp; fileName) {\n    T* newWidget = new T();\n    return static_cast&lt;T*&gt;(LoadWidget(fileName, newWidget));\n  }\n\n  tb::TBWidget* GetWidget(const Urho3D::String&amp; name, tb::TBWidget* parent = 0);\n  template&lt;class T&gt; T* GetWidget(const Urho3D::String&amp; name, tb::TBWidget* parent = 0) {\n    if (!parent) {\n      parent = root_;\n    }\n\n    return static_cast&lt;T*&gt;(GetWidget(name, parent));\n  }\n\n  void ResizeWidgetToFitContent(tb::TBWidget* widget, tb::TBWindow::RESIZE_FIT fit = tb::TBWindow::RESIZE_FIT_PREFERRED);\n\n  // TB Renderer Batcher overrides\npublic:\n  tb::TBBitmap* CreateBitmap(int width, int height, tb::uint32* data) override;\n  void RenderBatch(Batch* batch) override;\n  void SetClipRect(const tb::TBRect&amp; rect) override;\n\nprotected:\n  void SetupTurboBadger();\n  void SubscribeToEvents();\n\nprotected:\n  void SetVertexData(Urho3D::VertexBuffer* dest, const Urho3D::PODVector&lt;float&gt;&amp; vertexData);\n\nprotected:\n  void HandleUpdate(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n  void HandleRenderUpdate(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n\n  void HandleScreenMode(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n  void HandleMouseButtonDown(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n  void HandleMouseButtonUp(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n  void HandleMouseMove(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n  void HandleMouseWheel(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n  void HandleKeyDown(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n  void HandleKeyUp(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n  void HandleTextInput(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n\nprotected:\n  tb::TBWidget* root_;\n  Urho3D::IntRect scissor_;\n  Urho3D::ResourceCache* cache_;\n  Urho3D::Graphics* graphics_;\n  Urho3D::Input* input_;\n};</code></pre>\n<p>tb_Urho3D.cpp</p>\n<pre><code class=\"lang-auto\">/**\n  @license MIT License\n  @copyright\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n\n  Portions Copyright (c) 2008-2016 the Urho3D project.\n  Portions Copyright (c) Thebluefish\n  Portions Copyright (c) 2014-2015 THUNDERBEAST GAMES\n*/\n\n#include \"tb_Urho3D.h\"\n\n#include &lt;Urho3D/Urho3D.h&gt;\n#include &lt;Urho3D/Core/Context.h&gt;\n#include &lt;Urho3D/Core/CoreEvents.h&gt;\n#include &lt;Urho3D/Graphics/Graphics.h&gt;\n#include &lt;Urho3D/Graphics/GraphicsEvents.h&gt;\n#include &lt;Urho3D/Graphics/VertexBuffer.h&gt;\n#include &lt;Urho3D/Graphics/Texture2D.h&gt;\n#include &lt;Urho3D/Input/Input.h&gt;\n#include &lt;Urho3D/Input/InputEvents.h&gt;\n#include &lt;Urho3D/IO/Log.h&gt;\n#include &lt;Urho3D/Resource/ResourceCache.h&gt;\n\n#include &lt;tb_core.h&gt;\n#include &lt;tb_debug.h&gt;\n#include &lt;tb_font_renderer.h&gt;\n#include &lt;tb_language.h&gt;\n#include &lt;tb_skin.h&gt;\n#include &lt;tb_widgets_reader.h&gt;\n#include &lt;tb_message_window.h&gt;\n#include &lt;tb_node_tree.h&gt;\n#include &lt;animation/tb_widget_animation.h&gt;\n\n#include &lt;assert.h&gt;\n\n// TB global functions\nvoid register_freetype_font_renderer();\n\nnamespace tb {\n\nUrho3D::Context* context_(nullptr);\n\nvoid TBSystem::RescheduleTimer(double fire_time) { }\n\nTBFile* TBFile::Open(const char* filename, TBFileMode mode) {\n  Urho3D::SharedPtr&lt;Urho3D::File&gt; file(context_-&gt;GetSubsystem&lt;Urho3D::ResourceCache&gt;()-&gt;GetFile(filename));\n\n  if (!file || !file-&gt;IsOpen()) {\n    return nullptr;\n  }\n\n  TBUrho3DFile* tbUrho3DFile(new TBUrho3DFile(file));\n\n  return tbUrho3DFile;\n}\n\n} // namespace tb\n\n\nTBUrho3DBitmap::TBUrho3DBitmap(Urho3D::Context* context) :\n  Urho3D::Object(context)\n{\n}\n\nTBUrho3DBitmap::~TBUrho3DBitmap() {\n}\n\nvoid TBUrho3DBitmap::RegisterObject(Urho3D::Context* context) {\n  context-&gt;RegisterFactory&lt;TBUrho3DBitmap&gt;();\n}\n\nvoid TBUrho3DBitmap::Init(int width, int height, tb::uint32* data) {\n  size = Urho3D::Vector2(width, height);\n  SetData(data);\n}\n\nvoid TBUrho3DBitmap::SetData(tb::uint32* data) {\n  TBUI* ui(GetSubsystem&lt;TBUI&gt;());\n\n  ui-&gt;FlushBitmap(this);\n\n  if (texture.Null()) {\n    texture = new Urho3D::Texture2D(context_);\n\n    // Needs to be called BEFORE Texture2D::SetSize\n    texture-&gt;SetAddressMode(Urho3D::COORD_U, Urho3D::ADDRESS_BORDER);\n    texture-&gt;SetAddressMode(Urho3D::COORD_V, Urho3D::ADDRESS_BORDER), texture-&gt;SetBorderColor(Urho3D::Color(0.0f, 0.0f, 0.0f, 0.0f));\n    texture-&gt;SetMipsToSkip(Urho3D::QUALITY_LOW, 0);\n    texture-&gt;SetNumLevels(1);\n\n    texture-&gt;SetSize(size.x_, size.y_, Urho3D::Graphics::GetRGBAFormat(), Urho3D::TEXTURE_STATIC);\n  }\n\n  texture-&gt;SetData(0, 0, 0, size.x_, size.y_, data);\n}\n\nTBUrho3DFile::TBUrho3DFile(Urho3D::File* file) :\n  file_(file)\n{\n}\n\nTBUrho3DFile::~TBUrho3DFile() {\n  file_-&gt;Close();\n}\n\nlong TBUrho3DFile::Size() {\n  return file_-&gt;GetSize();\n}\n\nsize_t TBUrho3DFile::Read(void* buf, size_t elemSize, size_t count) {\n  size_t size(elemSize * count);\n  size_t totalSize = 0;\n\n  totalSize += file_-&gt;Read(buf, size);\n\n  return totalSize;\n}\n\n// =====================================\n\nTBUI::TBUI(Urho3D::Context* context):\n  Urho3D::Object(context)\n  , root_(nullptr)\n  , cache_(GetSubsystem&lt;Urho3D::ResourceCache&gt;())\n  , graphics_(GetSubsystem&lt;Urho3D::Graphics&gt;())\n  , input_(GetSubsystem&lt;Urho3D::Input&gt;())\n{\n  tb::context_ = context;\n  tb::TBWidgetsAnimationManager::Init();\n  tb::TBWidgetListener::AddGlobalListener(this);\n}\n\nTBUI::~TBUI() {\n  TBWidgetListener::RemoveGlobalListener(this);\n  tb::TBWidgetsAnimationManager::Shutdown();\n  if (root_) delete root_;\n  tb::tb_core_shutdown();\n}\n\nvoid TBUI::RegisterObject(Urho3D::Context* context) {\n  context-&gt;RegisterFactory&lt;TBUI&gt;();\n}\n\nvoid TBUI::RegisterSystem(Urho3D::Context* context) {\n  TBUI::RegisterObject(context);\n  TBUrho3DBitmap::RegisterObject(context);\n}\n\nvoid TBUI::Init(const Urho3D::String&amp; languageFile) {\n  // Initialize Turbo Badger\n  tb::tb_core_init(this);\n\n  // Setup localization\n  tb::g_tb_lng = new tb::TBLanguage;\n  tb::g_tb_lng-&gt;Load(languageFile.CString());\n\n  register_freetype_font_renderer();\n\n  SubscribeToEvents();\n}\n\nvoid TBUI::LoadSkin(const Urho3D::String&amp; skin, const Urho3D::String&amp; overrideSkin) {\n  // Load the default skin, and override skin (if any)\n  tb::g_tb_skin-&gt;Load(skin.CString(), overrideSkin.CString());\n}\n\n\nvoid TBUI::SetDefaultFont(const Urho3D::String&amp; fontName, int size) {\n  tb::TBFontDescription fd;\n  fd.SetID(TBIDC(fontName.CString()));\n  fd.SetSize(tb::g_tb_skin-&gt;GetDimensionConverter()-&gt;DpToPx(size));\n  tb::g_font_manager-&gt;SetDefaultFontDescription(fd);\n  // Create the font now.\n  tb::TBFontFace* font(tb::g_font_manager-&gt;CreateFontFace(tb::g_font_manager-&gt;GetDefaultFontDescription()));\n\n  // Render some glyphs in one go now since we know we are going to use them. It would work fine\n  // without this since glyphs are rendered when needed, but with some extra updating of the glyph bitmap.\n  if (font)\n    font-&gt;RenderGlyphs(\" !\\\"#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~????????\");\n}\n\nvoid TBUI::AddFontInfo(const Urho3D::String&amp; fileName, const Urho3D::String&amp; fontName) {\n  tb::g_font_manager-&gt;AddFontInfo(fileName.CString(), fontName.CString());\n}\n\nvoid TBUI::SetRoot(tb::TBWidget* widget) {\n  root_ = widget;\n  root_-&gt;SetSize(graphics_-&gt;GetWidth(), graphics_-&gt;GetHeight());\n}\n\ntb::TBWidget* TBUI::GetWidget(const Urho3D::String&amp; name, tb::TBWidget* parent) {\n  return parent-&gt;GetWidgetByID(TBIDC(name.CString()));\n}\n\ntb::TBWidget* TBUI::LoadWidget(const Urho3D::String&amp; fileName, tb::TBWidget* widget) {\n  // Load widget\n  tb::TBNode node;\n  if (node.ReadFile(fileName.CString())) {\n    tb::g_widgets_reader-&gt;LoadNodeTree(widget, &amp;node);\n  }\n  return widget;\n}\n\nvoid TBUI::ResizeWidgetToFitContent(tb::TBWidget* widget, tb::TBWindow::RESIZE_FIT fit) {\n  assert(widget);\n  tb::PreferredSize ps(widget-&gt;GetPreferredSize());\n  int new_w(ps.pref_w);\n  int new_h(ps.pref_h);\n  if (fit == tb::TBWindow::RESIZE_FIT_MINIMAL) {\n    new_w = ps.min_w;\n    new_h = ps.min_h;\n  } else if (fit == tb::TBWindow::RESIZE_FIT_CURRENT_OR_NEEDED) {\n    new_w = tb::Clamp(widget-&gt;GetRect().w, ps.min_w, ps.max_w);\n    new_h = tb::Clamp(widget-&gt;GetRect().h, ps.min_h, ps.max_h);\n  }\n  if (widget-&gt;GetParent()) {\n    new_w = tb::Min(new_w, widget-&gt;GetParent()-&gt;GetRect().w);\n    new_h = tb::Min(new_h, widget-&gt;GetParent()-&gt;GetRect().h);\n  }\n  widget-&gt;SetRect(tb::TBRect(widget-&gt;GetRect().x, widget-&gt;GetRect().y, new_w, new_h));\n}\n\ntb::TBBitmap* TBUI::CreateBitmap(int width, int height, tb::uint32* data) {\n  TBUrho3DBitmap* bitmap(new TBUrho3DBitmap(context_));\n  bitmap-&gt;Init(width, height, data);\n\n  return bitmap;\n}\n\nvoid TBUI::RenderBatch(Batch* batch) {\n  if (!batch-&gt;vertex_count)\n    return;\n\n  Urho3D::Texture2D* texture(NULL);\n\n  if (batch-&gt;bitmap) {\n    TBUrho3DBitmap* tbuibitmap((TBUrho3DBitmap*)batch-&gt;bitmap);\n    texture = tbuibitmap-&gt;texture;\n  }\n\n  Urho3D::PODVector&lt;float&gt; vertexData;\n  Urho3D::SharedPtr&lt;Urho3D::VertexBuffer&gt; vertexBuffer(new Urho3D::VertexBuffer(context_));\n\n  Urho3D::UIBatch newBatch;\n  newBatch.blendMode_ = Urho3D::BLEND_ALPHA;\n  newBatch.scissor_ = scissor_;\n  newBatch.texture_ = texture;\n  newBatch.vertexData_ = &amp;vertexData;\n  newBatch.invTextureSize_ = (texture ? Urho3D::Vector2(1.0f / (float)texture-&gt;GetWidth(), 1.0f / (float)texture-&gt;GetHeight()) : Urho3D::Vector2::ONE);\n\n  unsigned begin(newBatch.vertexData_-&gt;Size());\n  newBatch.vertexData_-&gt;Resize(begin + batch-&gt;vertex_count * Urho3D::UI_VERTEX_SIZE);\n  float* dest(&amp;(newBatch.vertexData_-&gt;At(begin)));\n  newBatch.vertexEnd_ = newBatch.vertexData_-&gt;Size();\n\n  for (int i = 0; i &lt; batch-&gt;vertex_count; i++) {\n    Vertex* v = &amp;batch-&gt;vertex[i];\n    dest[0] = v-&gt;x;\n    dest[1] = v-&gt;y;\n    dest[2] = 0.0f;\n    ((unsigned&amp;)dest[3]) = v-&gt;col;\n    dest[4] = v-&gt;u;\n    dest[5] = v-&gt;v;\n    dest += Urho3D::UI_VERTEX_SIZE;\n  }\n\n  SetVertexData(vertexBuffer, vertexData);\n\n  Urho3D::Vector2 invScreenSize(1.0f / (float)graphics_-&gt;GetWidth(), 1.0f / (float)graphics_-&gt;GetHeight());\n  Urho3D::Vector2 scale(2.0f * invScreenSize.x_, -2.0f * invScreenSize.y_);\n  Urho3D::Vector2 offset(-1.0f, 1.0f);\n\n  Urho3D::Matrix4 projection(Urho3D::Matrix4::IDENTITY);\n  projection.m00_ = scale.x_;\n  projection.m03_ = offset.x_;\n  projection.m11_ = scale.y_;\n  projection.m13_ = offset.y_;\n  projection.m22_ = 1.0f;\n  projection.m23_ = 0.0f;\n  projection.m33_ = 1.0f;\n\n  graphics_-&gt;ClearParameterSources();\n  graphics_-&gt;SetColorWrite(true);\n  graphics_-&gt;SetCullMode(Urho3D::CULL_NONE);\n  graphics_-&gt;SetDepthTest(Urho3D::CMP_ALWAYS);\n  graphics_-&gt;SetDepthWrite(false);\n  graphics_-&gt;SetFillMode(Urho3D::FILL_SOLID);\n  graphics_-&gt;SetStencilTest(false);\n\n  graphics_-&gt;ResetRenderTargets();\n\n  graphics_-&gt;SetVertexBuffer(vertexBuffer);\n\n  Urho3D::ShaderVariation* noTextureVS(graphics_-&gt;GetShader(Urho3D::VS, \"Basic\", \"VERTEXCOLOR\"));\n  Urho3D::ShaderVariation* diffTextureVS(graphics_-&gt;GetShader(Urho3D::VS, \"Basic\", \"DIFFMAP VERTEXCOLOR\"));\n  Urho3D::ShaderVariation* noTexturePS(graphics_-&gt;GetShader(Urho3D::PS, \"Basic\", \"VERTEXCOLOR\"));\n  Urho3D::ShaderVariation* diffTexturePS(graphics_-&gt;GetShader(Urho3D::PS, \"Basic\", \"DIFFMAP VERTEXCOLOR\"));\n  Urho3D::ShaderVariation* diffMaskTexturePS(graphics_-&gt;GetShader(Urho3D::PS, \"Basic\", \"DIFFMAP ALPHAMASK VERTEXCOLOR\"));\n  Urho3D::ShaderVariation* alphaTexturePS(graphics_-&gt;GetShader(Urho3D::PS, \"Basic\", \"ALPHAMAP VERTEXCOLOR\"));\n\n  unsigned alphaFormat(Urho3D::Graphics::GetAlphaFormat());\n\n  if (newBatch.vertexStart_ == newBatch.vertexEnd_) {\n    return;\n  }\n\n  Urho3D::ShaderVariation* ps;\n  Urho3D::ShaderVariation* vs;\n\n  if (!newBatch.texture_) {\n    ps = noTexturePS;\n    vs = noTextureVS;\n  } else {\n    // If texture contains only an alpha channel, use alpha shader (for fonts)\n    vs = diffTextureVS;\n\n    if (newBatch.texture_-&gt;GetFormat() == alphaFormat) {\n      ps = alphaTexturePS;\n    } else if (newBatch.blendMode_ != Urho3D::BLEND_ALPHA &amp;&amp; newBatch.blendMode_ != Urho3D::BLEND_ADDALPHA &amp;&amp; newBatch.blendMode_ != Urho3D::BLEND_PREMULALPHA) {\n      ps = diffMaskTexturePS;\n    } else {\n      ps = diffTexturePS;\n    }\n  }\n\n  graphics_-&gt;SetShaders(vs, ps);\n  if (graphics_-&gt;NeedParameterUpdate(Urho3D::SP_OBJECT, this)) {\n    graphics_-&gt;SetShaderParameter(Urho3D::VSP_MODEL, Urho3D::Matrix3x4::IDENTITY);\n  }\n  if (graphics_-&gt;NeedParameterUpdate(Urho3D::SP_CAMERA, this)) {\n    graphics_-&gt;SetShaderParameter(Urho3D::VSP_VIEWPROJ, projection);\n  }\n  if (graphics_-&gt;NeedParameterUpdate(Urho3D::SP_MATERIAL, this)) {\n    graphics_-&gt;SetShaderParameter(Urho3D::PSP_MATDIFFCOLOR, Urho3D::Color(1.0f, 1.0f, 1.0f, 1.0f));\n  }\n\n  graphics_-&gt;SetBlendMode(newBatch.blendMode_);\n  graphics_-&gt;SetScissorTest(true, newBatch.scissor_);\n  graphics_-&gt;SetTexture(0, newBatch.texture_);\n  graphics_-&gt;Draw(Urho3D::TRIANGLE_LIST, newBatch.vertexStart_ / Urho3D::UI_VERTEX_SIZE, (newBatch.vertexEnd_ - newBatch.vertexStart_) / Urho3D::UI_VERTEX_SIZE);\n}\n\nvoid TBUI::SetClipRect(const tb::TBRect&amp; rect) {\n  scissor_.top_ = rect.y;\n  scissor_.left_ = rect.x;\n  scissor_.bottom_ = rect.y + rect.h;\n  scissor_.right_ = rect.x + rect.w;\n}\n\nvoid TBUI::SubscribeToEvents() {\n  SubscribeToEvent(Urho3D::E_UPDATE, URHO3D_HANDLER(TBUI, HandleUpdate));\n  SubscribeToEvent(Urho3D::E_ENDRENDERING, URHO3D_HANDLER(TBUI, HandleRenderUpdate));\n\n  SubscribeToEvent(Urho3D::E_SCREENMODE, URHO3D_HANDLER(TBUI, HandleScreenMode));\n  SubscribeToEvent(Urho3D::E_MOUSEBUTTONDOWN, URHO3D_HANDLER(TBUI, HandleMouseButtonDown));\n  SubscribeToEvent(Urho3D::E_MOUSEBUTTONUP, URHO3D_HANDLER(TBUI, HandleMouseButtonUp));\n  SubscribeToEvent(Urho3D::E_MOUSEMOVE, URHO3D_HANDLER(TBUI, HandleMouseMove));\n  SubscribeToEvent(Urho3D::E_MOUSEWHEEL, URHO3D_HANDLER(TBUI, HandleMouseWheel));\n  SubscribeToEvent(Urho3D::E_KEYDOWN, URHO3D_HANDLER(TBUI, HandleKeyDown));\n  SubscribeToEvent(Urho3D::E_KEYUP, URHO3D_HANDLER(TBUI, HandleKeyUp));\n  SubscribeToEvent(Urho3D::E_TEXTINPUT, URHO3D_HANDLER(TBUI, HandleTextInput));\n}\n\nvoid TBUI::SetVertexData(Urho3D::VertexBuffer* dest, const Urho3D::PODVector&lt;float&gt;&amp; vertexData) {\n  if (vertexData.Empty()) {\n    return;\n  }\n\n  // Update quad geometry into the vertex buffer\n  // Resize the vertex buffer first if too small or much too large\n  unsigned numVertices(vertexData.Size() / Urho3D::UI_VERTEX_SIZE);\n  if (dest-&gt;GetVertexCount() &lt; numVertices || dest-&gt;GetVertexCount() &gt; numVertices * 2) {\n    dest-&gt;SetSize(numVertices, Urho3D::MASK_POSITION | Urho3D::MASK_COLOR | Urho3D::MASK_TEXCOORD1, true);\n  }\n\n  dest-&gt;SetData(&amp;vertexData[0]);\n}\n\nvoid TBUI::HandleUpdate(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  tb::TBMessageHandler::ProcessMessages();\n}\n\nvoid TBUI::HandleRenderUpdate(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  // Setup scissor\n  tb::TBRect rect(root_-&gt;GetRect());\n  scissor_ = Urho3D::IntRect(0, 0, rect.w, rect.h);\n\n  tb::TBAnimationManager::Update();\n\n  // Update all widgets\n  root_-&gt;InvokeProcessStates();\n  root_-&gt;InvokeProcess();\n\n  // Render UI\n  tb::g_renderer-&gt;BeginPaint(rect.w, rect.h);\n\n  root_-&gt;InvokePaint(tb::TBWidget::PaintProps());\n\n  tb::g_renderer-&gt;EndPaint();\n\n  //_root-&gt;Invalidate();\n}\n\nvoid TBUI::HandleScreenMode(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  using namespace Urho3D::ScreenMode;\n\n  int width(eventData[P_WIDTH].GetInt());\n  int height(eventData[P_HEIGHT].GetInt());\n\n  root_-&gt;SetSize(width, height);\n}\n\nvoid TBUI::HandleMouseButtonDown(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  using namespace Urho3D::MouseButtonDown;\n\n  unsigned button(eventData[P_BUTTON].GetUInt());\n  unsigned qualifiers(eventData[P_QUALIFIERS].GetUInt());\n\n  Urho3D::IntVector2 mousePosition(input_-&gt;GetMousePosition());\n\n  tb::MODIFIER_KEYS modifiers(tb::TB_MODIFIER_NONE);\n  if (qualifiers &amp; Urho3D::QUAL_CTRL) {\n    modifiers |= tb::TB_CTRL;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_SHIFT) {\n    modifiers |= tb::TB_SHIFT;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_ALT) {\n    modifiers |= tb::TB_ALT;\n  }\n\n  switch (button) {\n  case Urho3D::MOUSEB_LEFT:\n    root_-&gt;InvokePointerDown(mousePosition.x_, mousePosition.y_, 1, modifiers, false);\n    break;\n  }\n\n}\n\nvoid TBUI::HandleMouseButtonUp(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  using namespace Urho3D::MouseButtonUp;\n\n  unsigned button(eventData[P_BUTTON].GetUInt());\n  unsigned qualifiers(eventData[P_QUALIFIERS].GetUInt());\n\n  Urho3D::IntVector2 mousePosition(input_-&gt;GetMousePosition());\n\n  tb::MODIFIER_KEYS modifiers(tb::TB_MODIFIER_NONE);\n  if (qualifiers &amp; Urho3D::QUAL_CTRL) {\n    modifiers |= tb::TB_CTRL;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_SHIFT) {\n    modifiers |= tb::TB_SHIFT;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_ALT) {\n    modifiers |= tb::TB_ALT;\n  }\n\n  switch (button) {\n  case Urho3D::MOUSEB_LEFT:\n    root_-&gt;InvokePointerUp(mousePosition.x_, mousePosition.y_, modifiers, false);\n    break;\n  case Urho3D::MOUSEB_RIGHT:\n    tb::TBWidgetEvent ev(tb::EVENT_TYPE_CONTEXT_MENU, mousePosition.x_, mousePosition.y_, false, modifiers);\n    root_-&gt;InvokeEvent(ev);\n    break;\n  }\n}\n\nvoid TBUI::HandleMouseMove(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  using namespace Urho3D::MouseMove;\n\n/*\n  int x(eventData[P_X].GetInt());\n  int y(eventData[P_Y].GetInt());\n*/\n\n  unsigned qualifiers(eventData[P_QUALIFIERS].GetUInt());\n  Urho3D::IntVector2 mousePosition(input_-&gt;GetMousePosition());\n\n  tb::MODIFIER_KEYS modifiers(tb::TB_MODIFIER_NONE);\n  if (qualifiers &amp; Urho3D::QUAL_CTRL)\n    modifiers |= tb::TB_CTRL;\n  if (qualifiers &amp; Urho3D::QUAL_SHIFT)\n    modifiers |= tb::TB_SHIFT;\n  if (qualifiers &amp; Urho3D::QUAL_ALT)\n    modifiers |= tb::TB_ALT;\n\n  root_-&gt;InvokePointerMove(mousePosition.x_, mousePosition.y_, modifiers, false);\n}\n\nvoid TBUI::HandleMouseWheel(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  using namespace Urho3D::MouseWheel;\n\n  int wheel(eventData[P_WHEEL].GetInt());\n  unsigned qualifiers(eventData[P_QUALIFIERS].GetInt());\n\n  Urho3D::Input* input_(GetSubsystem&lt;Urho3D::Input&gt;());\n  Urho3D::IntVector2 mousePosition(input_-&gt;GetMousePosition());\n\n  tb::MODIFIER_KEYS modifiers(tb::TB_MODIFIER_NONE);\n  if (qualifiers &amp; Urho3D::QUAL_CTRL) {\n    modifiers |= tb::TB_CTRL;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_SHIFT) {\n    modifiers |= tb::TB_SHIFT;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_ALT) {\n    modifiers |= tb::TB_ALT;\n  }\n\n  root_-&gt;InvokeWheel(mousePosition.x_, mousePosition.y_, 0, -wheel, tb::TB_MODIFIER_NONE);\n}\n\nvoid TBUI::HandleKeyDown(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  using namespace Urho3D::KeyDown;\n\n  int key(eventData[P_KEY].GetInt());\n  unsigned qualifiers(eventData[P_QUALIFIERS].GetUInt());\n\n  Urho3D::Input* input_(GetSubsystem&lt;Urho3D::Input&gt;());\n  Urho3D::IntVector2 mousePosition(input_-&gt;GetMousePosition());\n\n  tb::MODIFIER_KEYS modifiers(tb::TB_MODIFIER_NONE);\n  if (qualifiers &amp; Urho3D::QUAL_CTRL) {\n    modifiers |= tb::TB_CTRL;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_SHIFT) {\n    modifiers |= tb::TB_SHIFT;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_ALT) {\n    modifiers |= tb::TB_ALT;\n  }\n\n  switch (key) {\n  case Urho3D::KEY_RETURN:\n  case Urho3D::KEY_RETURN2:\n  case Urho3D::KEY_KP_ENTER:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_ENTER, modifiers, true);\n    break;\n  case Urho3D::KEY_F1:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F1, modifiers, true);\n    break;\n  case Urho3D::KEY_F2:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F2, modifiers, true);\n    break;\n  case Urho3D::KEY_F3:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F3, modifiers, true);\n    break;\n  case Urho3D::KEY_F4:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F4, modifiers, true);\n    break;\n  case Urho3D::KEY_F5:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F5, modifiers, true);\n    break;\n  case Urho3D::KEY_F6:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F6, modifiers, true);\n    break;\n  case Urho3D::KEY_F7:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F7, modifiers, true);\n    break;\n  case Urho3D::KEY_F8:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F8, modifiers, true);\n    break;\n  case Urho3D::KEY_F9:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F9, modifiers, true);\n    break;\n  case Urho3D::KEY_F10:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F10, modifiers, true);\n    break;\n  case Urho3D::KEY_F11:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F11, modifiers, true);\n    break;\n  case Urho3D::KEY_F12:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F12, modifiers, true);\n    break;\n  case Urho3D::KEY_LEFT:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_LEFT, modifiers, true);\n    break;\n  case Urho3D::KEY_UP:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_UP, modifiers, true);\n    break;\n  case Urho3D::KEY_RIGHT:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_RIGHT, modifiers, true);\n    break;\n  case Urho3D::KEY_DOWN:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_DOWN, modifiers, true);\n    break;\n  case Urho3D::KEY_PAGEUP:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_PAGE_UP, modifiers, true);\n    break;\n  case Urho3D::KEY_PAGEDOWN:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_PAGE_DOWN, modifiers, true);\n    break;\n  case Urho3D::KEY_HOME:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_HOME, modifiers, true);\n    break;\n  case Urho3D::KEY_END:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_END, modifiers, true);\n    break;\n  case Urho3D::KEY_INSERT:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_INSERT, modifiers, true);\n    break;\n  case Urho3D::KEY_TAB:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_TAB, modifiers, true);\n    break;\n  case Urho3D::KEY_DELETE:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_DELETE, modifiers, true);\n    break;\n  case Urho3D::KEY_BACKSPACE:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_BACKSPACE, modifiers, true);\n    break;\n  case Urho3D::KEY_ESCAPE:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_ESC, modifiers, true);\n    break;\n  default:\n    if (modifiers &amp; tb::TB_SUPER) {\n      root_-&gt;InvokeKey(key, tb::TB_KEY_UNDEFINED, modifiers, true);\n    }\n  }\n}\n\nvoid TBUI::HandleKeyUp(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  using namespace Urho3D::KeyUp;\n\n  int key(eventData[P_KEY].GetInt());\n  unsigned qualifiers(eventData[P_QUALIFIERS].GetUInt());\n\n  Urho3D::Input* input_(GetSubsystem&lt;Urho3D::Input&gt;());\n  Urho3D::IntVector2 mousePosition(input_-&gt;GetMousePosition());\n\n  tb::MODIFIER_KEYS modifiers(tb::TB_MODIFIER_NONE);\n  if (qualifiers &amp; Urho3D::QUAL_CTRL) {\n    modifiers |= tb::TB_CTRL;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_SHIFT) {\n    modifiers |= tb::TB_SHIFT;\n  }\n  if (qualifiers &amp; Urho3D::QUAL_ALT) {\n    modifiers |= tb::TB_ALT;\n  }\n\n  switch (key) {\n  case Urho3D::KEY_RETURN:\n  case Urho3D::KEY_RETURN2:\n  case Urho3D::KEY_KP_ENTER:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_ENTER, modifiers, false);\n    break;\n  case Urho3D::KEY_F1:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F1, modifiers, false);\n    break;\n  case Urho3D::KEY_F2:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F2, modifiers, false);\n    break;\n  case Urho3D::KEY_F3:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F3, modifiers, false);\n    break;\n  case Urho3D::KEY_F4:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F4, modifiers, false);\n    break;\n  case Urho3D::KEY_F5:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F5, modifiers, false);\n    break;\n  case Urho3D::KEY_F6:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F6, modifiers, false);\n    break;\n  case Urho3D::KEY_F7:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F7, modifiers, false);\n    break;\n  case Urho3D::KEY_F8:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F8, modifiers, false);\n    break;\n  case Urho3D::KEY_F9:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F9, modifiers, false);\n    break;\n  case Urho3D::KEY_F10:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F10, modifiers, false);\n    break;\n  case Urho3D::KEY_F11:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F11, modifiers, false);\n    break;\n  case Urho3D::KEY_F12:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_F12, modifiers, false);\n    break;\n  case Urho3D::KEY_LEFT:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_LEFT, modifiers, false);\n    break;\n  case Urho3D::KEY_UP:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_UP, modifiers, false);\n    break;\n  case Urho3D::KEY_RIGHT:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_RIGHT, modifiers, false);\n    break;\n  case Urho3D::KEY_DOWN:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_DOWN, modifiers, false);\n    break;\n  case Urho3D::KEY_PAGEUP:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_PAGE_UP, modifiers, false);\n    break;\n  case Urho3D::KEY_PAGEDOWN:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_PAGE_DOWN, modifiers, false);\n    break;\n  case Urho3D::KEY_HOME:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_HOME, modifiers, false);\n    break;\n  case Urho3D::KEY_END:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_END, modifiers, false);\n    break;\n  case Urho3D::KEY_INSERT:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_INSERT, modifiers, false);\n    break;\n  case Urho3D::KEY_TAB:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_TAB, modifiers, false);\n    break;\n  case Urho3D::KEY_DELETE:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_DELETE, modifiers, false);\n    break;\n  case Urho3D::KEY_BACKSPACE:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_BACKSPACE, modifiers, false);\n    break;\n  case Urho3D::KEY_ESCAPE:\n    root_-&gt;InvokeKey(0, tb::TB_KEY_ESC, modifiers, false);\n    break;\n  default:\n    if (modifiers &amp; tb::TB_SUPER) {\n      root_-&gt;InvokeKey(key, tb::TB_KEY_UNDEFINED, modifiers, false);\n    }\n  }\n}\n\nvoid TBUI::HandleTextInput(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData) {\n  using namespace Urho3D::TextInput;\n\n  Urho3D::String text(eventData[P_TEXT].GetString());\n\n  for (unsigned i = 0; i &lt; text.Length(); i++) {\n    root_-&gt;InvokeKey(text[i], tb::TB_KEY_UNDEFINED, tb::TB_MODIFIER_NONE, true);\n    root_-&gt;InvokeKey(text[i], tb::TB_KEY_UNDEFINED, tb::TB_MODIFIER_NONE, false);\n  }\n}</code></pre>", "post_number": 13, "post_type": 1, "updated_at": "2018-02-23T20:05:29.604Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 9, "reads": 41, "readers_count": 40, "score": 53.2, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "Justin Miller", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "http://discourse.urho3d.io/t/how-to-integrate-third-party-gui/3848/4", "internal": true, "reflection": true, "title": "How to integrate third party GUI?", "clicks": 0}], "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": true, "admin": false, "staff": true, "user_id": 21, "hidden": false, "trust_level": 3, "deleted_at": null, "user_deleted": false, "edit_reason": "Remove unused bbcode", "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13400, "name": "", "username": "sabotage3d", "avatar_template": "/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png", "created_at": "2016-08-26T23:40:40.000Z", "cooked": "<p>Thanks a lot.</p>", "post_number": 14, "post_type": 1, "updated_at": "2017-01-02T01:13:57.063Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 35, "readers_count": 34, "score": 7.0, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 151, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13613, "name": "", "username": "rku", "avatar_template": "/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png", "created_at": "2016-09-16T10:53:07.000Z", "cooked": "<p>[quote=\u201ccarnalis\u201d]I think the implementation that was posted still exists and I\u2019ll look to posting that when it\u2019s available.</p>\n<p>Here is my own working edition of the implementation.  Changes include a license header (let me know if it needs further changes), some private to protected members, various updates for Urho3D, formatting. no real API changes that I recall\u2026</p>\n<p>tb_Urho3D.h</p>\n<div class=\"spoiler\">\n<p><code></code></p>\n</div>\n<p>tb_Urho3D.cpp</p>\n<div class=\"spoiler\">\n<p><code></code></p>\n</div>\n<p>Is this really complete? Because i can not get it working.</p>\n<p>Edit:<br>\nFor the next poor soul that bumps into same thing here is working example:</p>\n<p><code>    TurboBadgerUI::RegisterSystem(context_);\n    tbui.Init(\"TBUI/language/lng_en.tb.txt\");\n    tbui.LoadSkin(\"TBUI/default_skin/skin.tb.txt\");\n    tbui.AddFontInfo(\"TBUI/vera.ttf\", \"Vera\");\n    tbui.SetDefaultFont(\"Vera\", 14);\n    tbui.SetRoot(new tb::TBWidget());\n    auto window = tbui.LoadWidget&lt;tb::TBWindow&gt;(\"TBUI/ui_resources/test_layout01.tb.txt\");\n    tbui.GetRoot()-&gt;AddChild(window);\n    tbui.ResizeWidgetToFitContent(window);\n</code></p>\n<p>For some reason default fotns (.tb.txt) did not work however ttf fonts work fine. Also trick was to call tbui.ResizeWidgetToFitContent(window); because for some reason widget size initially seems to be 0;0.</p>\n<p>Really nice class by the way. I love it how its two files handling all the integration. Thanks.</p>", "post_number": 15, "post_type": 1, "updated_at": "2017-01-02T01:14:12.804Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 1, "incoming_link_count": 0, "reads": 45, "readers_count": 44, "score": 9.0, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 246, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13619, "name": "Justin Miller", "username": "jmiller", "avatar_template": "/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png", "created_at": "2016-09-16T17:25:04.000Z", "cooked": "<p>To configure tb/tb_config.h for Linux, I enable <span class=\"hashtag\">#define</span> TB_FONT_RENDERER_TBBF, enable TB_FONT_RENDERER_FREETYPE, undefine TB_FILE_POSIX (we\u2019re using TBUrho3DFile), and it was similar for MSWindows.</p>\n<p>And yes, to solve a problem we all had: ResizeWidgetToFitContent() was written to size widgets which are <span class=\"bbcode-i\">not</span> within a top-level widget like TBWindow (TB docs did not make this clear at the time).</p>\n<p>Here is my TB-Urho3D setup code <span class=\"bbcode-b\">*edit: added more context</span><br>\ncfg_ refers to the config file parser here: <a href=\"http://discourse.urho3d.io/t/a-more-advanced-ini-parser/1449/1\">topic1502.html</a></p>\n<pre><code class=\"lang-auto\">#include &lt;tb_widgets.h&gt;\n#include &lt;tb_widgets_listener.h&gt;\n#include &lt;tb_widgets_common.h&gt;\n\nclass UIManager : public Urho3D::Object, public tb::TBWidgetListener {\n//...\n  TBUI* tbui_;\n  tb::TBWidget* tbRoot_;\n  bool OnWidgetInvokeEvent(tb::TBWidget* widget, const tb::TBWidgetEvent&amp; ev);\n//...\n};\n\n// in UIManager::Initialize()\n\nif (!tbui_) {\n  TBUI::RegisterSystem(context_); // TBBitmap &amp; TBUI RegisterObject()\n  context_-&gt;RegisterSubsystem(new TBUI(context_));\n  tbui_ = GetSubsystem&lt;TBUI&gt;(); }\nif (!tbui_) {\n  URHO3D_LOGERROR(\"TBUI subsystem unregistered.\");\n  return false; }\n\nconst String langFileName(cfg_-&gt;GetString(\"ui\", \"languageFile\", \"UI/language/lng_en.tb.txt\"));\ntbui_-&gt;Init(langFileName);\n\n// Load skin(s).\nconst String skinOverrideFile(cfg_-&gt;GetString(\"ui\", \"skinOverrideFile\"));\nconst String skinDefaultFile(cfg_-&gt;GetString(\"ui\", \"skinDefaultFile\"));\nLoadSkins(skinDefaultFile, skinOverrideFile);\n\n// Setup default font.\nconst String fontName(cfg_-&gt;GetString(\"ui\", \"fontName\", \"NotoMono-Regular\"));\nconst String fontFile(cfg_-&gt;GetString(\"ui\", \"fontFile\", \"Fonts/NotoMono-Regular.ttf\"));\n\nif (cache_-&gt;Exists(fontFile)) {\n  tbui_-&gt;AddFontInfo(fontFile, fontName);\n  tbui_-&gt;SetDefaultFont(fontName); }\nelse {\n  URHO3D_LOGERROR(\"UIManager: cannot find default font: \" + fontFile); }\n\nTBWidgetListener::AddGlobalListener(this); // Remember to RemoveGlobalListener(this) on delete.\n\ntbRoot_ = new TBWidget(); // TBUI deletes the tree itself.\ntbui_-&gt;SetRoot(tbRoot_);\n\n//////////////////\n\nbool UIManager::LoadSkins(const String&amp; skinDefaultFile, const String&amp; skinOverrideFile/*= String::EMPTY */) {\n  bool loaded(false);\n  if (skinDefaultFile == String::EMPTY) {\n    URHO3D_LOGERROR(\"UIManager::LoadSkins: skinDefaultFile empty\");\n    return false; }\n  if (!cache_-&gt;Exists(skinDefaultFile)) {\n    URHO3D_LOGERROR(\"UIManager: Skin file not found: \" + skinDefaultFile);\n    return false; }\n\n  if (skinOverrideFile != String::EMPTY) {\n    if (!cache_-&gt;Exists(skinOverrideFile)) {\n      URHO3D_LOGWARNING(\"UIManager: Skin override file not found: \" + skinOverrideFile); }\n    loaded = tb::g_tb_skin-&gt;Load(skinDefaultFile.CString(), skinOverrideFile.CString()); }\n  else {\n    loaded = tb::g_tb_skin-&gt;Load(skinDefaultFile.CString()); }\n  if (!loaded) {\n    URHO3D_LOGERROR(\"UIManager: Skin file load failed: \" + skinDefaultFile + \"  override: \" + skinOverrideFile); }\n  return loaded;\n}</code></pre>\n<p>If it is help to someone, here is the tb_Urho3D originally posted by Thebluefish. Note that it does not include my updates; I only added the license header.</p>\n<aside class=\"quote no-group\" data-username=\"Thebluefish\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/t/f04885/40.png\" class=\"avatar\"> Thebluefish:</div>\n<blockquote>\n<p>TBUI.h</p>\n<pre><code class=\"lang-auto\">/**\n  @license MIT License\n  @copyright\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n\n  Portions Copyright (c) 2008-2016 the Urho3D project.\n  Portions Copyright (c) Thebluefish\n  Portions Copyright (c) 2014-2015 THUNDERBEAST GAMES\n*/\n\n#ifndef _TBUI_TBUI_H\n#define _TBUI_TBUI_H\n\n#include &lt;Urho3D/Urho3D.h&gt;\n#include &lt;Urho3D/Core/Object.h&gt;\n#include &lt;Urho3D/Graphics/ShaderVariation.h&gt;\n\n#include &lt;tb_types.h&gt;\n#include &lt;tb_system.h&gt;\n#include &lt;tb_widgets_listener.h&gt;\n#include &lt;tb_window.h&gt;\n#include &lt;renderers/tb_renderer_batcher.h&gt;\n\nnamespace Urho3D\n{\n   class File;\n   class UIBatch;\n   class VertexBuffer;\n   class Texture2D;\n}\n\nnamespace JRPG\n{\n   namespace UI\n   {\n      class Bitmap : public Urho3D::Object, public tb::TBBitmap\n      {\n         OBJECT(Bitmap);\n\n      public:\n         Bitmap(Urho3D::Context* context);\n         ~Bitmap();\n\n         static void RegisterObject(Urho3D::Context* context);\n\n         void Init(int width, int height, tb::uint32 *data);\n\n         virtual int Width() { return size.x_; }\n         virtual int Height() { return size.y_; }\n\n         virtual void SetData(tb::uint32 *data);\n\n         Urho3D::Vector2 size;\n         Urho3D::SharedPtr&lt;Urho3D::Texture2D&gt; texture;\n      };\n\n      class TBUrho3DFile : public tb::TBFile\n      {\n      public:\n         TBUrho3DFile(Urho3D::File* file);\n         virtual ~TBUrho3DFile();\n\n         virtual long Size();\n         virtual size_t Read(void *buf, size_t elemSize, size_t count);\n\n      private:\n         Urho3D::SharedPtr&lt;Urho3D::File&gt; _file;\n      };\n\n      // Turbo Badger UI subsystem\n      class TBUI : public Urho3D::Object, public tb::TBRendererBatcher, public tb::TBWidgetListener\n      {\n         OBJECT(TBUI);\n\n      public:\n         TBUI(Urho3D::Context* context);\n         ~TBUI();\n\n         static void RegisterObject(Urho3D::Context* context);\n         static void RegisterSystem(Urho3D::Context* context);\n\n         void Init();\n\n         void AddFontInfo(const Urho3D::String&amp; fileName, const Urho3D::String&amp; fontName);\n         void SetFont(const Urho3D::String&amp; fontName, int size = 12);\n\n         tb::TBWidget* GetRoot() { return _root; }\n         void SetRoot(tb::TBWidget* widget);\n\n         tb::TBWidget* GetWidget(const Urho3D::String&amp; name, tb::TBWidget* parent = 0);\n         template&lt;class T&gt; T* GetWidget(const Urho3D::String&amp; name, tb::TBWidget* parent = 0)\n         {\n            if (!parent)\n               parent = _root;\n\n            return static_cast&lt;T*&gt;(GetWidget(name, parent));\n         }\n\n         tb::TBWidget* LoadWidget(const Urho3D::String&amp; fileName, tb::TBWidget* widget);\n         template&lt;class T&gt; T* LoadWidget(const Urho3D::String&amp; fileName)\n         {\n            T* newWidget = new T();\n            return (T*)LoadWidget(fileName, newWidget);\n         }\n         \n         void ResizeWidgetToFitContent(tb::TBWidget* widget, tb::TBWindow::RESIZE_FIT fit = tb::TBWindow::RESIZE_FIT_PREFERRED);\n\n         // TB Renderer Batcher overrides\n      public:\n\n         tb::TBBitmap *CreateBitmap(int width, int height, tb::uint32* data) override;\n         void RenderBatch(Batch* batch) override;\n         void SetClipRect(const tb::TBRect&amp; rect) override;\n\n         // Internal functions\n      protected:\n\n         void SetupTurboBadger();\n\n         void SubscribeToEvents();\n\n         \n      protected:\n\n         void SetVertexData(Urho3D::VertexBuffer* dest, const Urho3D::PODVector&lt;float&gt;&amp; vertexData);\n\n      protected:\n\n         void HandleUpdate(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n         void HandleRenderUpdate(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n\n         void HandleScreenMode(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n         void HandleMouseButtonDown(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n         void HandleMouseButtonUp(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n         void HandleMouseMove(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n         void HandleMouseWheel(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n         void HandleKeyDown(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n         void HandleKeyUp(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n         void HandleTextInput(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);\n\n      private:\n\n         tb::TBWidget* _root;\n\n         Urho3D::IntRect _scissor;\n      };\n   }\n}\n#endif</code></pre>\n<p>TBUI.cpp</p>\n<pre><code class=\"lang-auto\">/**\n  @license MIT License\n  @copyright\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n\n  Portions Copyright (c) 2008-2016 the Urho3D project.\n  Portions Copyright (c) Thebluefish\n  Portions Copyright (c) 2014-2015 THUNDERBEAST GAMES\n*/\n\n#include \"TBUI.h\"\n\n#include &lt;Urho3D/Urho3D.h&gt;\n#include &lt;Urho3D/Core/Context.h&gt;\n#include &lt;Urho3D/Core/CoreEvents.h&gt;\n#include &lt;Urho3D/Graphics/Graphics.h&gt;\n#include &lt;Urho3D/Graphics/GraphicsEvents.h&gt;\n#include &lt;Urho3D/Graphics/VertexBuffer.h&gt;\n#include &lt;Urho3D/Graphics/Texture2D.h&gt;\n#include &lt;Urho3D/Input/Input.h&gt;\n#include &lt;Urho3D/Input/InputEvents.h&gt;\n#include &lt;Urho3D/Resource/ResourceCache.h&gt;\n\n\n\n\n#include &lt;tb_core.h&gt;\n#include &lt;tb_debug.h&gt;\n#include &lt;tb_font_renderer.h&gt;\n#include &lt;tb_language.h&gt;\n#include &lt;tb_skin.h&gt;\n#include &lt;tb_widgets_reader.h&gt;\n\n#include &lt;tb_message_window.h&gt;\n#include &lt;tb_node_tree.h&gt;\n#include &lt;animation/tb_widget_animation.h&gt;\n\n// TB global functions\nvoid register_freetype_font_renderer();\n\nnamespace tb\n{\n   static Urho3D::WeakPtr&lt;Urho3D::Context&gt; _context;\n\n   void TBSystem::RescheduleTimer(double fire_time) { }\n\n   TBFile* TBFile::Open(const char *filename, TBFileMode mode)\n   {\n      auto cache = _context-&gt;GetSubsystem&lt;Urho3D::ResourceCache&gt;();\n\n      Urho3D::SharedPtr&lt;Urho3D::File&gt; file = cache-&gt;GetFile(filename);\n\n      if (!file || !file-&gt;IsOpen())\n      {\n         //LOGERRORF(\"TBUI: Unable to load file: %s\", filename);\n         return 0;\n      }\n\n      JRPG::UI::TBUrho3DFile* tbUrho3DFile = new JRPG::UI::TBUrho3DFile(file);\n\n      return tbUrho3DFile;\n   }\n}\n\nnamespace JRPG\n{\n   namespace UI\n   {\n      Bitmap::Bitmap(Urho3D::Context* context) :\n         Urho3D::Object(context)\n      {\n      }\n\n      Bitmap::~Bitmap()\n      {\n\n      }\n\n      void Bitmap::RegisterObject(Urho3D::Context* context)\n      {\n         context-&gt;RegisterFactory&lt;Bitmap&gt;();\n      }\n\n      void Bitmap::Init(int width, int height, tb::uint32 *data)\n      {\n         size = Urho3D::Vector2(width, height);\n\n         SetData(data);\n      }\n\n      void Bitmap::SetData(tb::uint32 *data)\n      {\n         auto ui = GetSubsystem&lt;TBUI&gt;();\n\n         ui-&gt;FlushBitmap(this);\n\n         if (texture.Null())\n         {\n            texture = new Urho3D::Texture2D(context_);\n\n            // Needs to be called BEFORE Texture2D::SetSize\n            texture-&gt;SetAddressMode(Urho3D::COORD_U, Urho3D::ADDRESS_BORDER);\n            texture-&gt;SetAddressMode(Urho3D::COORD_V, Urho3D::ADDRESS_BORDER),\n               texture-&gt;SetBorderColor(Urho3D::Color(0.0f, 0.0f, 0.0f, 0.0f));\n            texture-&gt;SetMipsToSkip(Urho3D::QUALITY_LOW, 0);\n            texture-&gt;SetNumLevels(1);\n\n            texture-&gt;SetSize(size.x_, size.y_, Urho3D::Graphics::GetRGBAFormat(), Urho3D::TEXTURE_STATIC);\n         }\n\n         texture-&gt;SetData(0, 0, 0, size.x_, size.y_, data);\n      }\n\n      TBUrho3DFile::TBUrho3DFile(Urho3D::File* file) :\n         _file(file)\n      {\n\n      }\n      TBUrho3DFile::~TBUrho3DFile()\n      {\n         _file-&gt;Close();\n      }\n\n      long TBUrho3DFile::Size()\n      {\n         return _file-&gt;GetSize();\n      }\n\n      size_t TBUrho3DFile::Read(void *buf, size_t elemSize, size_t count)\n      {\n         size_t size = elemSize * count;\n         size_t totalSize = 0;\n\n         totalSize += _file-&gt;Read(buf, size);\n\n         return totalSize;\n      }\n\n      TBUI::TBUI(Urho3D::Context* context) :\n         Urho3D::Object(context),\n         _root(0)\n      {\n         tb::_context = context;\n      }\n\n      TBUI::~TBUI()\n      {\n         TBWidgetListener::RemoveGlobalListener(this);\n         tb::TBWidgetsAnimationManager::Shutdown();\n\n         delete _root;\n\n         tb::tb_core_shutdown();\n      }\n\n      void TBUI::RegisterObject(Urho3D::Context* context)\n      {\n         context-&gt;RegisterFactory&lt;TBUI&gt;();\n      }\n\n      void TBUI::RegisterSystem(Urho3D::Context* context)\n      {\n         TBUI::RegisterObject(context);\n\n         UI::Bitmap::RegisterObject(context);\n      }\n\n      void TBUI::Init()\n      {\n         SetupTurboBadger();\n         SubscribeToEvents();\n      }\n\n      void TBUI::AddFontInfo(const Urho3D::String&amp; fileName, const Urho3D::String&amp; fontName)\n      {\n         tb::g_font_manager-&gt;AddFontInfo(fileName.CString(), fontName.CString());\n      }\n\n      void TBUI::SetFont(const Urho3D::String&amp; fontName, int size)\n      {\n         tb::TBFontDescription fd;\n         fd.SetID(tb::TBID(fontName.CString()));\n         fd.SetSize(tb::g_tb_skin-&gt;GetDimensionConverter()-&gt;DpToPx(12));\n\n         tb::g_font_manager-&gt;SetDefaultFontDescription(fd);\n         tb::g_font_manager-&gt;CreateFontFace(tb::g_font_manager-&gt;GetDefaultFontDescription());\n      }\n\n      void TBUI::SetRoot(tb::TBWidget* widget)\n      {\n         auto graphics = GetSubsystem&lt;Urho3D::Graphics&gt;();\n\n         _root = widget;\n         _root-&gt;SetSize(graphics-&gt;GetWidth(), graphics-&gt;GetHeight());\n      }\n\n      tb::TBWidget* TBUI::GetWidget(const Urho3D::String&amp; name, tb::TBWidget* parent)\n      {\n         return parent-&gt;GetWidgetByID(tb::TBID(name.CString()));\n      }\n\n      tb::TBWidget* TBUI::LoadWidget(const Urho3D::String&amp; fileName, tb::TBWidget* widget)\n      {\n         auto cache = GetSubsystem&lt;Urho3D::ResourceCache&gt;();\n\n         // Load widget\n         tb::TBNode node;\n         if (node.ReadFile(fileName.CString()))\n         {\n            tb::g_widgets_reader-&gt;LoadNodeTree(widget, &amp;node);\n         }\n\n         return widget;\n      }\n\n      void TBUI::ResizeWidgetToFitContent(tb::TBWidget* widget, tb::TBWindow::RESIZE_FIT fit)\n      {\n         tb::PreferredSize ps = widget-&gt;GetPreferredSize();\n         int new_w = ps.pref_w;\n         int new_h = ps.pref_h;\n         if (fit == tb::TBWindow::RESIZE_FIT_MINIMAL)\n         {\n            new_w = ps.min_w;\n            new_h = ps.min_h;\n         }\n         else if (fit == tb::TBWindow::RESIZE_FIT_CURRENT_OR_NEEDED)\n         {\n            new_w = tb::Clamp(widget-&gt;GetRect().w, ps.min_w, ps.max_w);\n            new_h = tb::Clamp(widget-&gt;GetRect().h, ps.min_h, ps.max_h);\n         }\n         if (widget-&gt;GetParent())\n         {\n            new_w = tb::Min(new_w, widget-&gt;GetParent()-&gt;GetRect().w);\n            new_h = tb::Min(new_h, widget-&gt;GetParent()-&gt;GetRect().h);\n         }\n         widget-&gt;SetRect(tb::TBRect(widget-&gt;GetRect().x, widget-&gt;GetRect().y, new_w, new_h));\n      }\n\n      tb::TBBitmap* TBUI::CreateBitmap(int width, int height, tb::uint32* data)\n      {\n         auto bitmap = new Bitmap(context_);\n         bitmap-&gt;Init(width, height, data);\n\n         return bitmap;\n      }\n\n      void TBUI::RenderBatch(Batch* batch)\n      {\n         if (!batch-&gt;vertex_count)\n            return;\n\n         Urho3D::Texture2D* texture = NULL;\n\n         if (batch-&gt;bitmap)\n         {\n            Bitmap* tbuibitmap = (Bitmap*)batch-&gt;bitmap;\n            texture = tbuibitmap-&gt;texture;\n         }\n\n         Urho3D::PODVector&lt;float&gt; vertexData;\n         Urho3D::SharedPtr&lt;Urho3D::VertexBuffer&gt; vertexBuffer(new Urho3D::VertexBuffer(context_));\n\n         Urho3D::UIBatch newBatch;\n         newBatch.blendMode_ = Urho3D::BLEND_ALPHA;\n         newBatch.scissor_ = _scissor;\n         newBatch.texture_ = texture;\n         newBatch.vertexData_ = &amp;vertexData;\n         newBatch.invTextureSize_ = (texture ? Urho3D::Vector2(1.0f / (float)texture-&gt;GetWidth(), 1.0f / (float)texture-&gt;GetHeight()) : Urho3D::Vector2::ONE);\n\n         unsigned begin = newBatch.vertexData_-&gt;Size();\n         newBatch.vertexData_-&gt;Resize(begin + batch-&gt;vertex_count * Urho3D::UI_VERTEX_SIZE);\n         float* dest = &amp;(newBatch.vertexData_-&gt;At(begin));\n         newBatch.vertexEnd_ = newBatch.vertexData_-&gt;Size();\n\n         for (int i = 0; i &lt; batch-&gt;vertex_count; i++)\n         {\n            Vertex* v = &amp;batch-&gt;vertex[i];\n            dest[0] = v-&gt;x; dest[1] = v-&gt;y; dest[2] = 0.0f;\n            ((unsigned&amp;)dest[3]) = v-&gt;col;\n            dest[4] = v-&gt;u; dest[5] = v-&gt;v;\n            dest += Urho3D::UI_VERTEX_SIZE;\n         }\n\n         SetVertexData(vertexBuffer, vertexData);\n\n         auto graphics = GetSubsystem&lt;Urho3D::Graphics&gt;();\n\n         Urho3D::Vector2 invScreenSize(1.0f / (float)graphics-&gt;GetWidth(), 1.0f / (float)graphics-&gt;GetHeight());\n         Urho3D::Vector2 scale(2.0f * invScreenSize.x_, -2.0f * invScreenSize.y_);\n         Urho3D::Vector2 offset(-1.0f, 1.0f);\n\n         Urho3D::Matrix4 projection(Urho3D::Matrix4::IDENTITY);\n         projection.m00_ = scale.x_;\n         projection.m03_ = offset.x_;\n         projection.m11_ = scale.y_;\n         projection.m13_ = offset.y_;\n         projection.m22_ = 1.0f;\n         projection.m23_ = 0.0f;\n         projection.m33_ = 1.0f;\n\n         graphics-&gt;ClearParameterSources();\n         graphics-&gt;SetColorWrite(true);\n         graphics-&gt;SetCullMode(Urho3D::CULL_NONE);\n         graphics-&gt;SetDepthTest(Urho3D::CMP_ALWAYS);\n         graphics-&gt;SetDepthWrite(false);\n         graphics-&gt;SetFillMode(Urho3D::FILL_SOLID);\n         graphics-&gt;SetStencilTest(false);\n\n         graphics-&gt;ResetRenderTargets();\n\n         graphics-&gt;SetVertexBuffer(vertexBuffer);\n\n         Urho3D::ShaderVariation* noTextureVS = graphics-&gt;GetShader(Urho3D::VS, \"Basic\", \"VERTEXCOLOR\");\n         Urho3D::ShaderVariation* diffTextureVS = graphics-&gt;GetShader(Urho3D::VS, \"Basic\", \"DIFFMAP VERTEXCOLOR\");\n         Urho3D::ShaderVariation* noTexturePS = graphics-&gt;GetShader(Urho3D::PS, \"Basic\", \"VERTEXCOLOR\");\n         Urho3D::ShaderVariation* diffTexturePS = graphics-&gt;GetShader(Urho3D::PS, \"Basic\", \"DIFFMAP VERTEXCOLOR\");\n         Urho3D::ShaderVariation* diffMaskTexturePS = graphics-&gt;GetShader(Urho3D::PS, \"Basic\", \"DIFFMAP ALPHAMASK VERTEXCOLOR\");\n         Urho3D::ShaderVariation* alphaTexturePS = graphics-&gt;GetShader(Urho3D::PS, \"Basic\", \"ALPHAMAP VERTEXCOLOR\");\n\n         unsigned alphaFormat = Urho3D::Graphics::GetAlphaFormat();\n\n         if (newBatch.vertexStart_ == newBatch.vertexEnd_)\n            return;\n\n         Urho3D::ShaderVariation* ps;\n         Urho3D::ShaderVariation* vs;\n\n         if (!newBatch.texture_)\n         {\n            ps = noTexturePS;\n            vs = noTextureVS;\n         }\n         else\n         {\n            // If texture contains only an alpha channel, use alpha shader (for fonts)\n            vs = diffTextureVS;\n\n            if (newBatch.texture_-&gt;GetFormat() == alphaFormat)\n               ps = alphaTexturePS;\n            else if (newBatch.blendMode_ != Urho3D::BLEND_ALPHA &amp;&amp; newBatch.blendMode_ != Urho3D::BLEND_ADDALPHA &amp;&amp; newBatch.blendMode_ != Urho3D::BLEND_PREMULALPHA)\n               ps = diffMaskTexturePS;\n            else\n               ps = diffTexturePS;\n         }\n\n         graphics-&gt;SetShaders(vs, ps);\n         if (graphics-&gt;NeedParameterUpdate(Urho3D::SP_OBJECT, this))\n            graphics-&gt;SetShaderParameter(Urho3D::VSP_MODEL, Urho3D::Matrix3x4::IDENTITY);\n         if (graphics-&gt;NeedParameterUpdate(Urho3D::SP_CAMERA, this))\n            graphics-&gt;SetShaderParameter(Urho3D::VSP_VIEWPROJ, projection);\n         if (graphics-&gt;NeedParameterUpdate(Urho3D::SP_MATERIAL, this))\n            graphics-&gt;SetShaderParameter(Urho3D::PSP_MATDIFFCOLOR, Urho3D::Color(1.0f, 1.0f, 1.0f, 1.0f));\n\n         graphics-&gt;SetBlendMode(newBatch.blendMode_);\n         graphics-&gt;SetScissorTest(true, newBatch.scissor_);\n         graphics-&gt;SetTexture(0, newBatch.texture_);\n         graphics-&gt;Draw(Urho3D::TRIANGLE_LIST, newBatch.vertexStart_ / Urho3D::UI_VERTEX_SIZE, (newBatch.vertexEnd_ - newBatch.vertexStart_) /\n            Urho3D::UI_VERTEX_SIZE);\n      }\n\n      void TBUI::SetClipRect(const tb::TBRect&amp; rect)\n      {\n         _scissor.top_ = rect.y;\n         _scissor.left_ = rect.x;\n         _scissor.bottom_ = rect.y + rect.h;\n         _scissor.right_ = rect.x + rect.w;\n      }\n\n      void TBUI::SetupTurboBadger()\n      {\n         auto cache = GetSubsystem&lt;Urho3D::ResourceCache&gt;();\n         auto graphics = GetSubsystem&lt;Urho3D::Graphics&gt;();\n\n         tb::TBWidgetsAnimationManager::Init();\n         tb::TBWidgetListener::AddGlobalListener(this);\n\n         // Initialize Turbo Badger\n         tb::tb_core_init(this);\n\n         // Setup localization\n         tb::g_tb_lng = new tb::TBLanguage;\n         tb::g_tb_lng-&gt;Load(\"UI/Language/lng_en.tb.txt\");\n\n         // Setup font\n         register_freetype_font_renderer();\n         AddFontInfo(\"UI/vera.ttf\", \"Vera\");\n         SetFont(\"Vera\");\n\n         if (cache-&gt;Exists(\"UI/override_skin/skin.tb.txt\"))\n         {\n            tb::g_tb_skin-&gt;Load(\"UI/default_skin/skin.tb.txt\", \"UI/override_skin/skin.tb.txt\");\n         }\n         else\n         {\n            tb::g_tb_skin-&gt;Load(\"UI/default_skin/skin.tb.txt\");\n         }\n      }\n\n      void TBUI::SubscribeToEvents()\n      {\n         SubscribeToEvent(Urho3D::E_UPDATE, HANDLER(TBUI, HandleUpdate));\n         SubscribeToEvent(Urho3D::E_ENDRENDERING, HANDLER(TBUI, HandleRenderUpdate));\n\n         SubscribeToEvent(Urho3D::E_SCREENMODE, HANDLER(TBUI, HandleScreenMode));\n         SubscribeToEvent(Urho3D::E_MOUSEBUTTONDOWN, HANDLER(TBUI, HandleMouseButtonDown));\n         SubscribeToEvent(Urho3D::E_MOUSEBUTTONUP, HANDLER(TBUI, HandleMouseButtonUp));\n         SubscribeToEvent(Urho3D::E_MOUSEMOVE, HANDLER(TBUI, HandleMouseMove));\n         SubscribeToEvent(Urho3D::E_MOUSEWHEEL, HANDLER(TBUI, HandleMouseWheel));\n         SubscribeToEvent(Urho3D::E_KEYDOWN, HANDLER(TBUI, HandleKeyDown));\n         SubscribeToEvent(Urho3D::E_KEYUP, HANDLER(TBUI, HandleKeyUp));\n         SubscribeToEvent(Urho3D::E_TEXTINPUT, HANDLER(TBUI, HandleTextInput));\n      }\n\n      void TBUI::SetVertexData(Urho3D::VertexBuffer* dest, const Urho3D::PODVector&lt;float&gt;&amp; vertexData)\n      {\n         if (vertexData.Empty())\n            return;\n\n         // Update quad geometry into the vertex buffer\n         // Resize the vertex buffer first if too small or much too large\n         unsigned numVertices = vertexData.Size() / Urho3D::UI_VERTEX_SIZE;\n         if (dest-&gt;GetVertexCount() &lt; numVertices || dest-&gt;GetVertexCount() &gt; numVertices * 2)\n            dest-&gt;SetSize(numVertices, Urho3D::MASK_POSITION | Urho3D::MASK_COLOR | Urho3D::MASK_TEXCOORD1, true);\n\n         dest-&gt;SetData(&amp;vertexData[0]);\n      }\n\n      void TBUI::HandleUpdate(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         tb::TBMessageHandler::ProcessMessages();\n      }\n\n      void TBUI::HandleRenderUpdate(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         // Setup scissor\n         tb::TBRect rect = _root-&gt;GetRect();\n         _scissor = Urho3D::IntRect(0, 0, rect.w, rect.h);\n\n         tb::TBAnimationManager::Update();\n\n         // Update all widgets\n         _root-&gt;InvokeProcessStates();\n         _root-&gt;InvokeProcess();\n\n         // Render UI\n         tb::g_renderer-&gt;BeginPaint(rect.w, rect.h);\n\n         _root-&gt;InvokePaint(tb::TBWidget::PaintProps());\n         \n         tb::g_renderer-&gt;EndPaint();\n\n         //_root-&gt;Invalidate();\n      }\n\n      void TBUI::HandleScreenMode(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         using namespace Urho3D::ScreenMode;\n\n         int width = eventData[P_WIDTH].GetInt();\n         int height = eventData[P_HEIGHT].GetInt();\n\n         _root-&gt;SetSize(width, height);\n      }\n\n      void TBUI::HandleMouseButtonDown(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         using namespace Urho3D::MouseButtonDown;\n\n         unsigned button = eventData[P_BUTTON].GetUInt();\n         unsigned qualifiers = eventData[P_QUALIFIERS].GetUInt();\n\n         auto input = GetSubsystem&lt;Urho3D::Input&gt;();\n         auto mousePosition = input-&gt;GetMousePosition();\n\n         tb::MODIFIER_KEYS modifiers = tb::TB_MODIFIER_NONE;\n         if (qualifiers &amp; Urho3D::QUAL_CTRL)\n            modifiers |= tb::TB_CTRL;\n         if (qualifiers &amp; Urho3D::QUAL_SHIFT)\n            modifiers |= tb::TB_SHIFT;\n         if (qualifiers &amp; Urho3D::QUAL_ALT)\n            modifiers |= tb::TB_ALT;\n\n         switch (button)\n         {\n         case Urho3D::MOUSEB_LEFT:\n            _root-&gt;InvokePointerDown(mousePosition.x_, mousePosition.y_, 1, modifiers, false);\n            break;\n         }\n\n      }\n\n      void TBUI::HandleMouseButtonUp(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         using namespace Urho3D::MouseButtonUp;\n\n         unsigned button = eventData[P_BUTTON].GetUInt();\n         unsigned qualifiers = eventData[P_QUALIFIERS].GetUInt();\n\n         auto input = GetSubsystem&lt;Urho3D::Input&gt;();\n         auto mousePosition = input-&gt;GetMousePosition();\n\n         tb::MODIFIER_KEYS modifiers = tb::TB_MODIFIER_NONE;\n         if (qualifiers &amp; Urho3D::QUAL_CTRL)\n            modifiers |= tb::TB_CTRL;\n         if (qualifiers &amp; Urho3D::QUAL_SHIFT)\n            modifiers |= tb::TB_SHIFT;\n         if (qualifiers &amp; Urho3D::QUAL_ALT)\n            modifiers |= tb::TB_ALT;\n\n         switch (button)\n         {\n         case Urho3D::MOUSEB_LEFT:\n            _root-&gt;InvokePointerUp(mousePosition.x_, mousePosition.y_, modifiers, false);\n            break;\n         case Urho3D::MOUSEB_RIGHT:\n            _root-&gt;InvokeEvent(tb::TBWidgetEvent(tb::EVENT_TYPE_CONTEXT_MENU, mousePosition.x_, mousePosition.y_, false, modifiers));\n            break;\n         }\n      }\n\n      void TBUI::HandleMouseMove(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         using namespace Urho3D::MouseMove;\n\n         int x = eventData[P_X].GetInt();\n         int y = eventData[P_Y].GetInt();\n\n         _root-&gt;InvokeEvent(tb::TBWidgetEvent(tb::EVENT_TYPE_POINTER_MOVE, x, y, false));\n      }\n\n      void TBUI::HandleMouseWheel(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         using namespace Urho3D::MouseWheel;\n\n         int wheel = eventData[P_WHEEL].GetInt();\n         unsigned qualifiers = eventData[P_QUALIFIERS].GetInt();\n\n         auto input = GetSubsystem&lt;Urho3D::Input&gt;();\n         auto mousePosition = input-&gt;GetMousePosition();\n\n         tb::MODIFIER_KEYS modifiers = tb::TB_MODIFIER_NONE;\n         if (qualifiers &amp; Urho3D::QUAL_CTRL)\n            modifiers |= tb::TB_CTRL;\n         if (qualifiers &amp; Urho3D::QUAL_SHIFT)\n            modifiers |= tb::TB_SHIFT;\n         if (qualifiers &amp; Urho3D::QUAL_ALT)\n            modifiers |= tb::TB_ALT;\n\n         _root-&gt;InvokeWheel(mousePosition.x_, mousePosition.y_, 0, -wheel, tb::TB_MODIFIER_NONE);\n      }\n\n      void TBUI::HandleKeyDown(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         using namespace Urho3D::KeyDown;\n\n         int key = eventData[P_KEY].GetInt();\n         unsigned qualifiers = eventData[P_QUALIFIERS].GetUInt();\n\n         auto input = GetSubsystem&lt;Urho3D::Input&gt;();\n         auto mousePosition = input-&gt;GetMousePosition();\n\n         tb::MODIFIER_KEYS modifiers = tb::TB_MODIFIER_NONE;\n         if (qualifiers &amp; Urho3D::QUAL_CTRL)\n            modifiers |= tb::TB_CTRL;\n         if (qualifiers &amp; Urho3D::QUAL_SHIFT)\n            modifiers |= tb::TB_SHIFT;\n         if (qualifiers &amp; Urho3D::QUAL_ALT)\n            modifiers |= tb::TB_ALT;\n\n         switch (key)\n         {\n         case Urho3D::KEY_RETURN:\n         case Urho3D::KEY_RETURN2:\n         case Urho3D::KEY_KP_ENTER:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_ENTER, modifiers, true);\n            break;\n         case Urho3D::KEY_F1:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F1, modifiers, true);\n            break;\n         case Urho3D::KEY_F2:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F2, modifiers, true);\n            break;\n         case Urho3D::KEY_F3:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F3, modifiers, true);\n            break;\n         case Urho3D::KEY_F4:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F4, modifiers, true);\n            break;\n         case Urho3D::KEY_F5:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F5, modifiers, true);\n            break;\n         case Urho3D::KEY_F6:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F6, modifiers, true);\n            break;\n         case Urho3D::KEY_F7:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F7, modifiers, true);\n            break;\n         case Urho3D::KEY_F8:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F8, modifiers, true);\n            break;\n         case Urho3D::KEY_F9:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F9, modifiers, true);\n            break;\n         case Urho3D::KEY_F10:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F10, modifiers, true);\n            break;\n         case Urho3D::KEY_F11:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F11, modifiers, true);\n            break;\n         case Urho3D::KEY_F12:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F12, modifiers, true);\n            break;\n         case Urho3D::KEY_LEFT:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_LEFT, modifiers, true);\n            break;\n         case Urho3D::KEY_UP:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_UP, modifiers, true);\n            break;\n         case Urho3D::KEY_RIGHT:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_RIGHT, modifiers, true);\n            break;\n         case Urho3D::KEY_DOWN:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_DOWN, modifiers, true);\n            break;\n         case Urho3D::KEY_PAGEUP:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_PAGE_UP, modifiers, true);\n            break;\n         case Urho3D::KEY_PAGEDOWN:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_PAGE_DOWN, modifiers, true);\n            break;\n         case Urho3D::KEY_HOME:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_HOME, modifiers, true);\n            break;\n         case Urho3D::KEY_END:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_END, modifiers, true);\n            break;\n         case Urho3D::KEY_INSERT:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_INSERT, modifiers, true);\n            break;\n         case Urho3D::KEY_TAB:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_TAB, modifiers, true);\n            break;\n         case Urho3D::KEY_DELETE:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_DELETE, modifiers, true);\n            break;\n         case Urho3D::KEY_BACKSPACE:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_BACKSPACE, modifiers, true);\n            break;\n         case Urho3D::KEY_ESC:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_ESC, modifiers, true);\n            break;\n         default:\n            if (modifiers &amp; tb::TB_SUPER)\n               _root-&gt;InvokeKey(key, tb::TB_KEY_UNDEFINED, modifiers, true);\n         }\n      }\n\n      void TBUI::HandleKeyUp(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         using namespace Urho3D::KeyUp;\n\n         int key = eventData[P_KEY].GetInt();\n         unsigned qualifiers = eventData[P_QUALIFIERS].GetUInt();\n\n         auto input = GetSubsystem&lt;Urho3D::Input&gt;();\n         auto mousePosition = input-&gt;GetMousePosition();\n\n         tb::MODIFIER_KEYS modifiers = tb::TB_MODIFIER_NONE;\n         if (qualifiers &amp; Urho3D::QUAL_CTRL)\n            modifiers |= tb::TB_CTRL;\n         if (qualifiers &amp; Urho3D::QUAL_SHIFT)\n            modifiers |= tb::TB_SHIFT;\n         if (qualifiers &amp; Urho3D::QUAL_ALT)\n            modifiers |= tb::TB_ALT;\n\n         switch (key)\n         {\n         case Urho3D::KEY_RETURN:\n         case Urho3D::KEY_RETURN2:\n         case Urho3D::KEY_KP_ENTER:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_ENTER, modifiers, false);\n            break;\n         case Urho3D::KEY_F1:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F1, modifiers, false);\n            break;\n         case Urho3D::KEY_F2:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F2, modifiers, false);\n            break;\n         case Urho3D::KEY_F3:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F3, modifiers, false);\n            break;\n         case Urho3D::KEY_F4:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F4, modifiers, false);\n            break;\n         case Urho3D::KEY_F5:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F5, modifiers, false);\n            break;\n         case Urho3D::KEY_F6:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F6, modifiers, false);\n            break;\n         case Urho3D::KEY_F7:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F7, modifiers, false);\n            break;\n         case Urho3D::KEY_F8:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F8, modifiers, false);\n            break;\n         case Urho3D::KEY_F9:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F9, modifiers, false);\n            break;\n         case Urho3D::KEY_F10:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F10, modifiers, false);\n            break;\n         case Urho3D::KEY_F11:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F11, modifiers, false);\n            break;\n         case Urho3D::KEY_F12:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_F12, modifiers, false);\n            break;\n         case Urho3D::KEY_LEFT:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_LEFT, modifiers, false);\n            break;\n         case Urho3D::KEY_UP:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_UP, modifiers, false);\n            break;\n         case Urho3D::KEY_RIGHT:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_RIGHT, modifiers, false);\n            break;\n         case Urho3D::KEY_DOWN:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_DOWN, modifiers, false);\n            break;\n         case Urho3D::KEY_PAGEUP:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_PAGE_UP, modifiers, false);\n            break;\n         case Urho3D::KEY_PAGEDOWN:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_PAGE_DOWN, modifiers, false);\n            break;\n         case Urho3D::KEY_HOME:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_HOME, modifiers, false);\n            break;\n         case Urho3D::KEY_END:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_END, modifiers, false);\n            break;\n         case Urho3D::KEY_INSERT:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_INSERT, modifiers, false);\n            break;\n         case Urho3D::KEY_TAB:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_TAB, modifiers, false);\n            break;\n         case Urho3D::KEY_DELETE:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_DELETE, modifiers, false);\n            break;\n         case Urho3D::KEY_BACKSPACE:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_BACKSPACE, modifiers, false);\n            break;\n         case Urho3D::KEY_ESC:\n            _root-&gt;InvokeKey(0, tb::TB_KEY_ESC, modifiers, false);\n            break;\n         default:\n            if (modifiers &amp; tb::TB_SUPER)\n               _root-&gt;InvokeKey(key, tb::TB_KEY_UNDEFINED, modifiers, false);\n         }\n      }\n\n      void TBUI::HandleTextInput(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData)\n      {\n         using namespace Urho3D::TextInput;\n\n         auto text = eventData[P_TEXT].GetString();\n\n         for (unsigned i = 0; i &lt; text.Length(); i++)\n         {\n            _root-&gt;InvokeKey(text[i], tb::TB_KEY_UNDEFINED, tb::TB_MODIFIER_NONE, true);\n            _root-&gt;InvokeKey(text[i], tb::TB_KEY_UNDEFINED, tb::TB_MODIFIER_NONE, false);\n         }\n      }\n   }\n}</code></pre>\n<p>To setup the subsystem:</p>\n<pre><code class=\"lang-auto\">// Setup Turbo Badger UI\nUI::TBUI::RegisterSystem(_context);\n_context-&gt;RegisterSubsystem(new UI::TBUI(_context));\n_context-&gt;GetSubsystem&lt;UI::TBUI&gt;()-&gt;Init();</code></pre>\n<p>Adding an editor control that expands the entire window is easy:</p>\n<pre><code class=\"lang-auto\">_editorUI = ui-&gt;LoadWidget&lt;tb::TBWidget&gt;(\"UI/ui_resources/editor_tab_content.tb.txt\");\nui-&gt;SetRoot(_editorUI);</code></pre>\n</blockquote>\n</aside>", "post_number": 16, "post_type": 1, "updated_at": "2017-01-02T01:14:13.292Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 1, "incoming_link_count": 362, "reads": 41, "readers_count": 40, "score": 1818.2, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "Justin Miller", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://discourse.urho3d.io/t/a-more-advanced-ini-parser/1449", "internal": true, "reflection": false, "title": "A more advanced ini parser", "clicks": 0}], "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": true, "admin": false, "staff": true, "user_id": 21, "hidden": false, "trust_level": 3, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13707, "name": "", "username": "djmig", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/e274bd/{size}.png", "created_at": "2016-09-21T21:27:41.000Z", "cooked": "<p>Hi,<br>\nTurbo Badger looks great and I want to use it as the UI for my application. So, a few minutes ago<br>\nI git clone Turbo Badger from Github and followed the instruction to clone GLFW as a submodule. All went well including its compilation, but unfortunately TurboBadgerDemo appear as an image cornered to the lower left side of the window.</p>\n<p><img src=\"https://i.imgsafe.org/2fbf8b3424.png\" alt=\"\" width=\"\" height=\"\"></p>\n<p>BTW, I\u2019m on OS X El Capitan.</p>\n<p>Don.</p>", "post_number": 17, "post_type": 1, "updated_at": "2017-01-02T01:14:19.883Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 36, "readers_count": 35, "score": 7.2, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 555, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13708, "name": "", "username": "sabotage3d", "avatar_template": "/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png", "created_at": "2016-09-21T22:58:50.000Z", "cooked": "<p>Hey guys it seems that GetSubsystem()-&gt;SetTouchEmulation(true) is blocking the mouse events from Turbo Badger. Is there anyway around this?</p>", "post_number": 18, "post_type": 1, "updated_at": "2017-01-02T01:14:19.952Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 2, "reads": 33, "readers_count": 32, "score": 16.6, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 151, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13715, "name": "Justin Miller", "username": "jmiller", "avatar_template": "/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png", "created_at": "2016-09-22T13:11:28.000Z", "cooked": "<aside class=\"quote no-group\" data-username=\"djmig\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/d/e274bd/40.png\" class=\"avatar\"> djmig:</div>\n<blockquote>\n<p>unfortunately TurboBadgerDemo appear as an image cornered to the lower left side of the window.</p>\n</blockquote>\n</aside>\n<p>I have not seen that yet\u2026 If this is just with TB\u2019s own demo, maybe there is some issue there? <a href=\"https://github.com/fruxo/turbobadger/issues\">github.com/fruxo/turbobadger/issues</a></p>\n<aside class=\"quote no-group\" data-username=\"sabotage3d\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/sabotage3d/40/87_2.png\" class=\"avatar\"> sabotage3d:</div>\n<blockquote>\n<p>Hey guys it seems that GetSubsystem()-&gt;SetTouchEmulation(true) is blocking the mouse events from Turbo Badger. Is there anyway around this?</p>\n</blockquote>\n</aside>\n<p>Urho (<span class=\"bbcode-b\">rokups</span>) recently added some events that allow us to hook the raw events and consume them. I have not yet worked this into the tb_Urho3D implementation, so if anyone has a good way to suggest, that\u2019s welcome.</p>\n<pre><code class=\"lang-auto\">E_INPUTBEGIN : input handling starts.\nE_INPUTEND : input handling ends.\nE_SDLRAWINPUT\n    URHO3D_PARAM(P_SDL_EVENT, SdlEvent);           // SDL_Event*\n    URHO3D_PARAM(P_CONSUMED, Consumed);            // bool</code></pre>\n<p><a href=\"https://github.com/urho3d/Urho3D/blob/a44c0a7a43e9b3e344aff50f8c13469d8ec8a98c/Source/Urho3D/Input/InputEvents.h#L224\">github.com/urho3d/Urho3D/blob/a \u2026 nts.h#L224</a></p>", "post_number": 19, "post_type": 1, "updated_at": "2017-01-02T01:14:20.441Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 1, "incoming_link_count": 2, "reads": 32, "readers_count": 31, "score": 16.4, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "Justin Miller", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://github.com/fruxo/turbobadger/issues", "internal": false, "reflection": false, "title": "Issues \u00b7 fruxo/turbobadger \u00b7 GitHub", "clicks": 7}, {"url": "https://github.com/urho3d/Urho3D/blob/a44c0a7a43e9b3e344aff50f8c13469d8ec8a98c/Source/Urho3D/Input/InputEvents.h#L224", "internal": false, "reflection": false, "title": "Urho3D/InputEvents.h at a44c0a7a43e9b3e344aff50f8c13469d8ec8a98c \u00b7 urho3d/Urho3D \u00b7 GitHub", "clicks": 5}], "read": true, "user_title": "", "bookmarked": false, "actions_summary": [], "moderator": true, "admin": false, "staff": true, "user_id": 21, "hidden": false, "trust_level": 3, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13717, "name": "Lasse \u00d6\u00f6rni", "username": "cadaver", "avatar_template": "/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png", "created_at": "2016-09-22T14:19:05.000Z", "cooked": "<p>In touch emulation mode mouse events are intentionally not sent, so that you can see the effect of only touch events and not get them mixed. Touch events should be hooked to TB too to make it work correctly with touch.</p>", "post_number": 20, "post_type": 1, "updated_at": "2017-01-02T01:14:20.587Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 31, "readers_count": 30, "score": 6.2, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "Lasse \u00d6\u00f6rni", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Urho3D Author", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": true, "staff": true, "user_id": 3, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13718, "name": "", "username": "Dave82", "avatar_template": "/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png", "created_at": "2016-09-22T14:46:00.000Z", "cooked": "<p>I think this is great and a really good implementation however i would rather see a version that is more urho compatible.Instead of implementing it as an external subsystem why not wrap it like the other libraries ? So the default Urho3D::UI should use TurboBadger ? Im not familiar with TurboBadger but i think it would be even possible to add some CMake configuration to build Urho3d with the default UI or with TurboBadger.<br>\nSo this way :<br>\n1 will work out of box (at some point)<br>\n2 the Urho3D Editor would work with TurboBadger widgets without any major code modifications<br>\n3 Without code modifications it is automatically exposed to Scripts too.</p>", "post_number": 21, "post_type": 1, "updated_at": "2017-01-02T01:14:20.659Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 28, "readers_count": 27, "score": 5.6, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 247, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13721, "name": "Lasse \u00d6\u00f6rni", "username": "cadaver", "avatar_template": "/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png", "created_at": "2016-09-22T15:10:14.000Z", "cooked": "<p>I don\u2019t think you can reasonably expect to code to the same API if you switch the underlying UI library, except by simplifying a lot, and that wouldn\u2019t benefit the good parts of either UI library.</p>\n<p>This has been discussed before and I do think the ideal would be for the UI library to be wrapped so that you use e.g. Urho events and Urho resources instead of the UI library\u2019s native ones. However in practice it\u2019s a very difficult ideal, since either you have a lot of wrapping/adaptation work to do, or lose features. Compare to Bullet: Urho\u2019s physics components don\u2019t expose Bullet nearly completely so for a physics power user using Bullet directly could actually make more sense.</p>", "post_number": 22, "post_type": 1, "updated_at": "2017-01-02T01:14:20.893Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 29, "readers_count": 28, "score": 5.8, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "Lasse \u00d6\u00f6rni", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": "Urho3D Author", "title_is_group": false, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": true, "staff": true, "user_id": 3, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 13741, "name": "", "username": "Dave82", "avatar_template": "/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png", "created_at": "2016-09-22T20:03:13.000Z", "cooked": "<aside class=\"quote no-group\">\n<blockquote>\n<p>I don\u2019t think you can reasonably expect to code to the same API if you switch the underlying UI library, except by simplifying a lot, and that wouldn\u2019t benefit the good parts of either UI library.</p>\n</blockquote>\n</aside>\n<p>Yes , these are the modifications i mention , but yes this would require a lot lot work ,when probably after TurboBadger integration the default UI would be obsolete anyway.So maybe it would be better just switching to TurboBadger as the UI (by using the existing UI unterface and expanding it).Maybe it worth a new branch for testing this.</p>\n<aside class=\"quote no-group\">\n<blockquote>\n<p>This has been discussed before and I do think the ideal would be for the UI library to be wrapped so that you use e.g. Urho events and Urho resources instead of the UI library\u2019s native ones. However in practice it\u2019s a very difficult ideal, since either you have a lot of wrapping/adaptation work to do, or lose features. Compare to Bullet: Urho\u2019s physics components don\u2019t expose Bullet nearly completely so for a physics power user using Bullet directly could actually make more sense.</p>\n</blockquote>\n</aside>\n<p>Well i would rather lose features than using api\u2019s directly.Thats the main reason i like Urho3d.It\u2019s clear and easily understandable interface.Once you learned the coding workflow you don\u2019t need extra tutorials to get into other features.By using apis directly you always have to learn the new library first\u2026Which isn\u2019t really attractive for new users</p>\n<p>here\u2019s a screen shot of my modified gui skin.I added some shadows , highlights to buttons and switched to monochrome style.I think it is more pleasant for the eyes than the deafult blue style.<br>\n<img src=\"http://s20.postimg.org/uwx8jsfcd/editor_shot.jpg\" alt=\"\" width=\"\" height=\"\"></p>", "post_number": 23, "post_type": 1, "updated_at": "2017-01-02T01:14:22.227Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 6, "reads": 27, "readers_count": 26, "score": 35.4, "yours": false, "topic_id": 1364, "topic_slug": "turbo-badger-implementation", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 247, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}], "stream": [7819, 7829, 7885, 7886, 8011, 8251, 8393, 8406, 8424, 8431, 8433, 8434, 13398, 13400, 13613, 13619, 13707, 13708, 13715, 13717, 13718, 13721, 13741]}, "timeline_lookup": [[1, 2627], [2, 2626], [3, 2623], [5, 2613], [6, 2589], [7, 2579], [8, 2578], [9, 2577], [10, 2576], [13, 2279], [15, 2259], [16, 2258], [17, 2253], [23, 2252]], "tags_descriptions": {}, "id": 1364, "title": "Turbo Badger implementation", "fancy_title": "Turbo Badger implementation", "posts_count": 23, "created_at": "2015-09-14T16:00:10.000Z", "views": 5037, "reply_count": 0, "like_count": 0, "last_posted_at": "2016-09-22T20:03:13.000Z", "visible": true, "closed": false, "archived": false, "has_summary": false, "archetype": "regular", "slug": "turbo-badger-implementation", "category_id": 13, "word_count": 8965, "deleted_at": null, "user_id": 80, "featured_link": null, "pinned_globally": false, "pinned_at": null, "pinned_until": null, "image_url": null, "slow_mode_seconds": 0, "draft": null, "draft_key": "topic_1364", "draft_sequence": null, "unpinned": null, "pinned": false, "current_post_number": 1, "highest_post_number": 23, "deleted_by": null, "actions_summary": [{"id": 4, "count": 0, "hidden": false, "can_act": false}, {"id": 8, "count": 0, "hidden": false, "can_act": false}, {"id": 7, "count": 0, "hidden": false, "can_act": false}], "chunk_size": 20, "bookmarked": false, "bookmarks": [], "topic_timer": null, "message_bus_last_id": 0, "participant_count": 10, "show_read_indicator": false, "thumbnails": null, "slow_mode_enabled_until": null, "tags_disable_ads": false, "details": {"can_edit": false, "notification_level": 1, "participants": [{"id": 21, "username": "jmiller", "name": "Justin Miller", "avatar_template": "/user_avatar/discourse.urho3d.io/jmiller/{size}/2367_2.png", "post_count": 6, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "moderator": true, "trust_level": 3}, {"id": 80, "username": "thebluefish", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png", "post_count": 4, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 1}, {"id": 3, "username": "cadaver", "name": "Lasse \u00d6\u00f6rni", "avatar_template": "/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png", "post_count": 2, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "admin": true, "trust_level": 2}, {"id": 151, "username": "sabotage3d", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/sabotage3d/{size}/87_2.png", "post_count": 2, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}, {"id": 247, "username": "Dave82", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png", "post_count": 2, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}, {"id": 256, "username": "Lumak", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/l/8491ac/{size}.png", "post_count": 2, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}, {"id": 81, "username": "jenge", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/jenge/{size}/88_2.png", "post_count": 2, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 1}, {"id": 54, "username": "rasteron", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/rasteron/{size}/55_2.png", "post_count": 1, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}, {"id": 246, "username": "rku", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/rku/{size}/3200_2.png", "post_count": 1, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}, {"id": 555, "username": "djmig", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/d/e274bd/{size}.png", "post_count": 1, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 1}], "created_by": {"id": 80, "username": "thebluefish", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png"}, "last_poster": {"id": 247, "username": "Dave82", "name": "", "avatar_template": "/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}, "links": [{"url": "https://github.com/fruxo/turbobadger", "title": "GitHub - fruxo/turbobadger: Small footprint UI library for hardware accelerated games & applications", "internal": false, "attachment": false, "reflection": false, "clicks": 41, "user_id": 21, "domain": "github.com", "root_domain": "github.com"}, {"url": "http://imgur.com/SBDcK9n", "title": "Urho3D TurboBadger Console - Imgur", "internal": false, "attachment": false, "reflection": false, "clicks": 35, "user_id": 21, "domain": "imgur.com", "root_domain": "imgur.com"}, {"url": "http://discourse.urho3d.io/t/atomic-game-engine-mit-urho3d-fork/643/32", "title": "Atomic Game Engine (MIT Urho3D Fork)", "internal": true, "attachment": false, "reflection": true, "clicks": 15, "user_id": 80, "domain": "discourse.urho3d.io", "root_domain": "urho3d.io"}, {"url": "http://discourse.urho3d.io/t/turbobadger-full-integration/1457/14", "title": "TurboBadger full integration", "internal": true, "attachment": false, "reflection": true, "clicks": 13, "user_id": 21, "domain": "discourse.urho3d.io", "root_domain": "urho3d.io"}, {"url": "https://github.com/fruxo/turbobadger/issues", "title": "Issues \u00b7 fruxo/turbobadger \u00b7 GitHub", "internal": false, "attachment": false, "reflection": false, "clicks": 7, "user_id": 21, "domain": "github.com", "root_domain": "github.com"}, {"url": "https://github.com/urho3d/Urho3D/blob/a44c0a7a43e9b3e344aff50f8c13469d8ec8a98c/Source/Urho3D/Input/InputEvents.h#L224", "title": "Urho3D/InputEvents.h at a44c0a7a43e9b3e344aff50f8c13469d8ec8a98c \u00b7 urho3d/Urho3D \u00b7 GitHub", "internal": false, "attachment": false, "reflection": false, "clicks": 5, "user_id": 21, "domain": "github.com", "root_domain": "github.com"}, {"url": "https://gist.github.com/jforjustin/baa26a0943c684c4b8a9", "title": "TurboBadger widget definition file; note that leading tabs are significant \u00b7 GitHub", "internal": false, "attachment": false, "reflection": false, "clicks": 2, "user_id": 21, "domain": "gist.github.com", "root_domain": "github.com"}, {"url": "http://discourse.urho3d.io/t/doc-how-to-add-third-party-libraries/1412/2", "title": "[Doc] How To Add Third Party Libraries", "internal": true, "attachment": false, "reflection": true, "clicks": 2, "user_id": 21, "domain": "discourse.urho3d.io", "root_domain": "urho3d.io"}]}, "suggested_topics": [{"id": 7099, "title": ":fallen_leaf: Polynomials & Harmonics", "fancy_title": ":fallen_leaf: Polynomials &amp; Harmonics", "slug": "polynomials-harmonics", "posts_count": 6, "reply_count": 0, "highest_post_number": 7, "image_url": null, "created_at": "2021-12-13T05:06:04.641Z", "last_posted_at": "2021-12-27T23:27:39.489Z", "bumped": true, "bumped_at": "2021-12-27T23:27:39.489Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "unicode_title": "\ud83c\udf42 Polynomials & Harmonics", "tags_descriptions": {}, "like_count": 6, "views": 392, "category_id": 13, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": "latest single", "description": "Original Poster, Most Recent Poster", "user": {"id": 192, "username": "Modanung", "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]}, {"id": 7103, "title": ":test_tube: DebugRenderer as GUI", "fancy_title": ":test_tube: DebugRenderer as GUI", "slug": "debugrenderer-as-gui", "posts_count": 4, "reply_count": 1, "highest_post_number": 4, "image_url": null, "created_at": "2021-12-17T02:25:06.606Z", "last_posted_at": "2021-12-18T01:09:27.738Z", "bumped": true, "bumped_at": "2021-12-18T01:09:27.738Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "unicode_title": "\ud83e\uddea DebugRenderer as GUI", "tags_descriptions": {}, "like_count": 4, "views": 267, "category_id": 13, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": "latest", "description": "Original Poster, Most Recent Poster", "user": {"id": 192, "username": "Modanung", "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 861, "username": "GodMan", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]}, {"id": 7110, "title": "Resource fetch define", "fancy_title": "Resource fetch define", "slug": "resource-fetch-define", "posts_count": 2, "reply_count": 0, "highest_post_number": 2, "image_url": null, "created_at": "2021-12-27T12:28:55.126Z", "last_posted_at": "2021-12-27T17:00:37.699Z", "bumped": true, "bumped_at": "2021-12-27T17:00:37.699Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 7, "views": 184, "category_id": 13, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": null, "description": "Original Poster", "user": {"id": 192, "username": "Modanung", "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}, {"extras": "latest", "description": "Most Recent Poster", "user": {"id": 1304, "username": "lebrewer", "name": "lebrewer", "avatar_template": "/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]}, {"id": 7120, "title": "Log Error Once Macro", "fancy_title": "Log Error Once Macro", "slug": "log-error-once-macro", "posts_count": 1, "reply_count": 0, "highest_post_number": 1, "image_url": null, "created_at": "2022-01-04T02:24:37.857Z", "last_posted_at": "2022-01-04T02:24:37.925Z", "bumped": true, "bumped_at": "2022-01-04T02:24:37.925Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 3, "views": 143, "category_id": 13, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": "latest single", "description": "Original Poster, Most Recent Poster", "user": {"id": 628, "username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}, {"id": 7075, "title": "How pre-calculate tangents on vertices - model built in code?", "fancy_title": "How pre-calculate tangents on vertices - model built in code?", "slug": "how-pre-calculate-tangents-on-vertices-model-built-in-code", "posts_count": 4, "reply_count": 2, "highest_post_number": 4, "image_url": "https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/0/0e9c502d8d186f6e73e694514a63271e59fe1909.jpeg", "created_at": "2021-12-01T18:50:44.369Z", "last_posted_at": "2021-12-02T04:50:34.440Z", "bumped": true, "bumped_at": "2021-12-02T04:50:34.440Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 3, "views": 130, "category_id": 7, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": "latest", "description": "Original Poster, Most Recent Poster", "user": {"id": 1488, "username": "ToolmakerSteve", "name": "ToolmakerSteve", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 484, "username": "Eugene", "name": "Eugene Kozlov", "avatar_template": "/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]}]}