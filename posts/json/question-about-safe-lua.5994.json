{"post_stream":{"posts":[{"id":36751,"name":"evol","username":"evolgames","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","created_at":"2020-03-15T17:20:01.563Z","cooked":"\u003cp\u003eIf I build with URHO3D_SAFE_LUA=1, the resulting Urho3DPlayer binary in /bin/ should be different, right?\u003c/p\u003e\n\u003cp\u003eI followed the getting started on linux guide to rebuild and when doing cmake I do:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003ecmake . -DURHO3D_SAFE_LUA=1\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://urho3d.github.io/documentation/1.6/_building.html\" rel=\"nofollow noopener\"\u003eHere\u003c/a\u003e it says to put -DOPTION=value. I don’t know why the D, though.\u003c/p\u003e\n\u003cp\u003eHowever, with the resulting Urho3dPlayer binary, I still get segmentation faults without any other information as to why. With certain errors, I’ll be told via the console, or in a terminal, about the error. But other times I just get segmentation fault, core dumped and nothing else. It’s too time consuming to track everything down and guess why it’s crashing.\u003c/p\u003e\n\u003cp\u003eWhat is Safe_Lua supposed to do here? I don’t see any real difference. Or, did I build incorrectly? What’s the best way to troubleshoot this?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2020-03-15T17:20:01.563Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":15,"reads":30,"readers_count":29,"score":81.0,"yours":false,"topic_id":5994,"topic_slug":"question-about-safe-lua","display_username":"evol","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://urho3d.github.io/documentation/1.6/_building.html","internal":false,"reflection":false,"title":"Urho3D - Documentation - Building Urho3D","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1292,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36752,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2020-03-15T19:33:43.913Z","cooked":"\u003cp\u003eMy understanding (as someone who doesn’t use Lua) is that the Safe Lua flag builds Lua with certain safety checks about types and such, which gives you the error messages in the console you describe. However, if there was are not in the Lua side but the c++ side you’ll still get errors. Of course, there seems to me to be areas that could be considered overlapping - null function arguments, for example - is that a Lua error, a c++ error, or not an error, which may break things even with the Safe Lua flag. Possible example: doing something with an empty vector’s Front() element.\u003c/p\u003e\n\u003cp\u003eTo assist in tracking down errors:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCheck the log for any unexpected error/warning messages\u003c/li\u003e\n\u003cli\u003eRun your program in a debugger so you see where it’s actually having the segmentation fault and can go up there stack a bit too find the source (hopefully - this may be very hard using Lua/Angel Script.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eOthers may have more/better suggestions. I focus on c++ for my projects, so my go-to solution to find the problem is just run it in a debugger, which has worked 99% of the time.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2020-03-15T19:33:43.913Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":5.4,"yours":false,"topic_id":5994,"topic_slug":"question-about-safe-lua","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36861,"name":"","username":"Avagrande","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png","created_at":"2020-03-20T20:03:05.959Z","cooked":"\u003cp\u003eAs opposed to many other people here I work with Lua primarily. almost all of my code-base for urho3d is in lua.  I do use safe lua and I must warn that if you are going to use it, you may get errors which are almost impossible to resolve due to the unnecessary const values in some of the package bindings so its usage is experimental for the most part and as a result of that you may want to familiarise yourself with how tolua++ works and the .pkg format so you can easily fix it. its not that difficult.\u003c/p\u003e\n\u003cp\u003eIf you want a quick test that Safe Lua works, you can try giving incorrect parameter such as a int to a function which expects a vector and it should give you an error, under normal circumstances it will not.  This sadly also affects some functions who’s parameters have annotations such as const and causes frivolous errors.\u003c/p\u003e\n\u003cp\u003eDon’t expect safe lua to cover you for memory issues, if you don’t properly manage memory such as not using :new() when you are passing things created in Lua to C++ structures. Memory management between Urho3D C++ and Lua is tricky but doable if you keep the rules in mind. Safe Lua will mostly provide simple type checking but beyond that its not much use.\u003c/p\u003e\n\u003cp\u003eAdditionally you may want to build in debug mode so you can use gdb to see where things go wrong as opposed to relying on safe lua to do it. if you see pointer related issues its probably because the C++ structures decided to delete something you are still using in Lua, this is often the majority of errors that I get, and its sometimes guess work to determine if everything is deleted properly, but generally if you pass something to a C++ structure then it has control over it and Lua must not interfere otherwise its double deleted.\u003c/p\u003e\n\u003cp\u003eFor GDB I advise creating a script so it should be as simple as running a debug.sh in your project directory. you can execute a script in gdb with \u003ccode\u003egdb -x \u0026lt;script\u0026gt;.cgdb\u003c/code\u003e\u003cbr\u003e\nPersonally mine looks like\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003efile \"/Projects/Tools/Urho3d/build/bin/Urho3DPlayer\"\nr '/Projects/\u0026lt;project\u0026gt;/uroh3d.lua' -w -p 'Data;CoreData;urho_ext;' -pp '/Projects/Tools/Urho3d/build/bin/Urho3DPlayer;/Projects/\u0026lt;project\u0026gt;;'\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI have an additional local path added urho_ext I use to manage project specific data such as shaders, render paths etc.\u003c/p\u003e\n\u003cp\u003eGood luck! and if you want better support for lua and can’t have it any other way you can try using sol2 which has a binding converter from tolua++ pkg to its own format. I haven’t tried it but its on my todo list.\u003c/p\u003e\n\u003cp\u003eFor your cmake question:\u003cbr\u003e\nIf I recall correctly the D value is for Debug.  so -DURHO3D_SAFE_LUA=1 unpacks to “when building in debug mode build with safe lua”\u003cbr\u003e\nPersonally I would suggest using the cmake gui, which works on both linux and windows for the ease of use as you can simply tick the options you want.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2020-03-20T20:03:05.959Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":19,"readers_count":18,"score":8.8,"yours":false,"topic_id":5994,"topic_slug":"question-about-safe-lua","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1201,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36863,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2020-03-20T20:14:36.747Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Avagrande\" data-post=\"3\" data-topic=\"5994\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/avagrande/40/2686_2.png\" class=\"avatar\"\u003e Avagrande:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf I recall correctly the D value is for Debug. so -DURHO3D_SAFE_LUA=1 unpacks to “when building in debug mode build with safe lua”\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’m not certain, but I thought it was just how you set it for any build type, and that it meant something along the lines of define (e.g. define URHO3D_SAFELUA = 1 when generating the build files).\u003c/p\u003e\n\u003cp\u003eAgreed about cmake-gui, though. Generally it makes things a lot easier, and keeps you from misspelling the flags.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2020-03-20T20:15:11.299Z","reply_count":1,"reply_to_post_number":3,"quote_count":1,"incoming_link_count":0,"reads":17,"readers_count":16,"score":8.4,"yours":false,"topic_id":5994,"topic_slug":"question-about-safe-lua","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":36864,"name":"","username":"Avagrande","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png","created_at":"2020-03-20T20:21:57.268Z","cooked":"\u003cp\u003eYep thank you, you are right. Just checked in the manual.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e-D \u0026lt;var\u0026gt;:\u0026lt;type\u0026gt;=\u0026lt;value\u0026gt;, -D \u0026lt;var\u0026gt;=\u0026lt;value\u0026gt;\nCreate a cmake cache entry.\n\nWhen cmake is first run in an empty build tree, it creates a CMakeCache.txt file and populates it with customizable settings for the project. This option may be used to specify a setting that takes priority over the project’s default value. The option may be repeated for as many cache entries as desired.\n\u003c/code\u003e\u003c/pre\u003e","post_number":5,"post_type":1,"updated_at":"2020-03-20T20:21:57.268Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":17,"readers_count":16,"score":18.4,"yours":false,"topic_id":5994,"topic_slug":"question-about-safe-lua","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1201,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[36751,36752,36861,36863,36864]},"timeline_lookup":[[1,982],[3,977]],"suggested_topics":[{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7104,"title":"Bug in my partial-model copying code","fancy_title":"Bug in my partial-model copying code","slug":"bug-in-my-partial-model-copying-code","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5367e370779d64989e5c3ff2c1ebfb0689908c87.png","created_at":"2021-12-17T03:50:19.405Z","last_posted_at":"2021-12-17T13:50:49.662Z","bumped":true,"bumped_at":"2021-12-17T13:50:49.662Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7129,"title":"Best Model Import Pipeline as of Jan 2022?","fancy_title":"Best Model Import Pipeline as of Jan 2022?","slug":"best-model-import-pipeline-as-of-jan-2022","posts_count":7,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2022-01-17T09:27:23.432Z","last_posted_at":"2022-01-17T20:37:59.458Z","bumped":true,"bumped_at":"2022-01-17T20:37:59.458Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":170,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"}}]},{"id":7098,"title":"Cartoon Fire Effect","fancy_title":"Cartoon Fire Effect","slug":"cartoon-fire-effect","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2021-12-10T04:08:49.887Z","last_posted_at":"2021-12-12T02:49:51.076Z","bumped":true,"bumped_at":"2021-12-12T02:49:51.076Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":274,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7209,"title":"Need Compute Shader for Heightmap Normals Calculation","fancy_title":"Need Compute Shader for Heightmap Normals Calculation","slug":"need-compute-shader-for-heightmap-normals-calculation","posts_count":14,"reply_count":5,"highest_post_number":14,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f3699392311fc006b02311f4ac539017ce2ba760.jpeg","created_at":"2022-02-26T04:46:13.776Z","last_posted_at":"2022-03-10T00:07:52.127Z","bumped":true,"bumped_at":"2022-03-10T00:07:52.127Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":410,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]}],"tags_descriptions":{},"id":5994,"title":"Question about Safe Lua","fancy_title":"Question about Safe Lua","posts_count":5,"created_at":"2020-03-15T17:20:01.484Z","views":245,"reply_count":2,"like_count":1,"last_posted_at":"2020-03-20T20:21:57.268Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"question-about-safe-lua","category_id":10,"word_count":1025,"deleted_at":null,"user_id":1292,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_5994","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1201,"username":"Avagrande","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1292,"username":"evolgames","name":"evol","avatar_template":"/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png"},"last_poster":{"id":1201,"username":"Avagrande","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/avagrande/{size}/2686_2.png"}}}