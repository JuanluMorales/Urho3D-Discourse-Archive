{"post_stream":{"posts":[{"id":18011,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2017-05-23T18:53:48.338Z","cooked":"\u003cp\u003eHi, all!\u003c/p\u003e\n\u003cp\u003eHow would you implement “closest visible item” query for NPC in Urho?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-05-23T18:53:48.338Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":7,"reads":39,"readers_count":38,"score":42.8,"yours":false,"topic_id":3145,"topic_slug":"building-of-influence-map","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":18015,"name":"魔大农 𝞍𝞎𝝳 現招蜍","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2017-05-24T06:12:59.204Z","cooked":"\u003cp\u003eWrote \u003ca href=\"https://github.com/LucKeyProductions/OGTatt/blob/master/mastercontrol.h#L111-L153\"\u003ethis\u003c/a\u003e for \u003ca href=\"https://github.com/LucKeyProductions/OGTatt\"\u003eOG Tatt\u003c/a\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003etemplate \u0026lt;class T\u0026gt; T* GetNearestInstanceOf(Vector3 location)\n{\n    T* nearest{ nullptr };\n    float nearestDistance{ M_INFINITY };\n\n    PODVector\u0026lt;T*\u0026gt; components{};\n    world.scene-\u0026gt;GetDerivedComponents\u0026lt;T\u0026gt;(components, true);\n\n    for (T* c : components) {\n\n        Node* node{ static_cast\u0026lt;Component*\u0026gt;(c)-\u0026gt;GetNode() };\n        float distance{ (location - node-\u0026gt;GetWorldPosition()).LengthSquared() };\n\n        if (distance \u0026lt; nearestDistance) {\n\n            nearest = c;\n            nearestDistance = distance;\n        }\n    }\n    return nearest;\n}\n\u003c/code\u003e\u003c/pre\u003e","post_number":2,"post_type":1,"updated_at":"2017-05-25T12:20:26.198Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":37,"readers_count":36,"score":47.4,"yours":false,"topic_id":3145,"topic_slug":"building-of-influence-map","display_username":"魔大农 𝞍𝞎𝝳 現招蜍","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/LucKeyProductions/OGTatt","internal":false,"reflection":false,"title":"GitHub - LucKeyProductions/OGTatt: Respect is only the beginning...","clicks":11},{"url":"https://github.com/LucKeyProductions/OGTatt/blob/master/mastercontrol.h#L111-L153","internal":false,"reflection":false,"title":"OGTatt/mastercontrol.h at master · LucKeyProductions/OGTatt · GitHub","clicks":4}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":18069,"name":"","username":"smellymumbler","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ad7895/{size}.png","created_at":"2017-05-24T18:34:13.972Z","cooked":"\u003cp\u003eThat’s absurdly useful for my game. Thank you so much sir.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-05-24T18:34:13.972Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":29,"readers_count":28,"score":20.8,"yours":false,"topic_id":3145,"topic_slug":"building-of-influence-map","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":674,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":18085,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2017-05-24T22:15:11.640Z","cooked":"\u003cp\u003eSome more thing about influence map.\u003c/p\u003e\n\u003cp\u003eImagine an NPC. He have\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e“awareness radius” - he knows of extistence of objects in this radius and can enumerate it.\u003c/li\u003e\n\u003cli\u003eCan separate things by type (which means tag). So it can answer “where is closest taxi?” “where is closest vehicle?”\u003cbr\u003e\n“where is a toilet?” “where i can eat?” questions.\u003c/li\u003e\n\u003cli\u003eCan only consider the target details on close radius, i.e. “is this bus full so I can not fit?”, “is there someone in vehicle\u003cbr\u003e\non driver seat?” “is this shitty restaurant closed?”. BUT NPC should do risk management, i.e. collect data so he can\u003cbr\u003e\nconsider on distance. So to not constantly repeat failed action of previous NPCs, i.e. he “sees” that a man before\u003cbr\u003e\nfailed accessing the restaurant which scores this target -50, which allows selecting another restaurant nearby, if any.\u003cbr\u003e\nSo kind of messaging failures to directly visible NPCs so they select different targets for some time, but\u003cbr\u003e\nwears off after a few minutes and do not affect nearby NPCs which did not “see” what happened.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eSo the role for influence map is to accelerate all these considerations for many NPCs.\u003cbr\u003e\nWhich is wat I want to eventually get to. as I see, there are a few data sets there.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eWe need layering system which allows to access all spatial data or by criteria.\u003cbr\u003e\n\u003ca href=\"https://github.com/jlblancoc/nanoflann\" rel=\"nofollow noopener\"\u003ehttps://github.com/jlblancoc/nanoflann\u003c/a\u003e allows quick spatial searches, but we also need some way to request tag as key.\u003cbr\u003e\nThis probably can be done by using structure like VariantMap with tags as key, and separate K-D trees,\u003cbr\u003e\nwith main K-D tree for storing all data. Wihch looks like extreme data duplication, but I can’t think of anything else.\u003c/li\u003e\n\u003cli\u003eThe layering system should be quick and dynamic, i.e. change of tag should allow migration. I did not test nanoflann\u003cbr\u003e\nwith this, but I really hope it will work.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAny ideas on where to look for inspiration and code?\u003c/p\u003e\n\u003cp\u003eThanks!\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-05-24T22:15:11.640Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":29,"readers_count":28,"score":20.8,"yours":false,"topic_id":3145,"topic_slug":"building-of-influence-map","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/jlblancoc/nanoflann","internal":false,"reflection":false,"title":"GitHub - jlblancoc/nanoflann: nanoflann: a C++ header-only library for Nearest Neighbor (NN) search wih KD-trees","clicks":5}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":18095,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2017-05-25T11:59:58.066Z","cooked":"\u003cp\u003eSince you don’t need the actual distance value for the comparison, you can improve the performance by using LengthSquared() instead.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-05-25T11:59:58.066Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":9.4,"yours":false,"topic_id":3145,"topic_slug":"building-of-influence-map","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"reply_to_user":{"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":18096,"name":"魔大农 𝞍𝞎𝝳 現招蜍","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2017-05-25T12:19:07.341Z","cooked":"\u003cp\u003eAh, thanks. Saves a Sqrt() I guess?\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-05-25T12:19:07.341Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":23,"readers_count":22,"score":4.6,"yours":false,"topic_id":3145,"topic_slug":"building-of-influence-map","display_username":"魔大农 𝞍𝞎𝝳 現招蜍","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[18011,18015,18069,18085,18095,18096]},"timeline_lookup":[[1,2009],[3,2008]],"suggested_topics":[{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7107,"title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u003cSDL/SDL_gamecontroller.h\u003e","fancy_title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u0026lt;SDL/SDL_gamecontroller.h\u0026gt;","slug":"error-sdl-sdl-gamecontroller-h-no-such-file-or-directory-include-sdl-sdl-gamecontroller-h","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2021-12-21T15:29:52.810Z","last_posted_at":"2021-12-22T15:32:44.818Z","bumped":true,"bumped_at":"2021-12-22T15:32:44.818Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":271,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7104,"title":"Bug in my partial-model copying code","fancy_title":"Bug in my partial-model copying code","slug":"bug-in-my-partial-model-copying-code","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5367e370779d64989e5c3ff2c1ebfb0689908c87.png","created_at":"2021-12-17T03:50:19.405Z","last_posted_at":"2021-12-17T13:50:49.662Z","bumped":true,"bumped_at":"2021-12-17T13:50:49.662Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7105,"title":"Multiple Application.UI Roots?","fancy_title":"Multiple Application.UI Roots?","slug":"multiple-application-ui-roots","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/7/74b10ce575f1b69fe43be4abcb07605d74a1d27c_2_1024x544.jpeg","created_at":"2021-12-20T08:55:14.707Z","last_posted_at":"2021-12-22T02:33:05.795Z","bumped":true,"bumped_at":"2021-12-22T02:33:05.795Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":243,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]}],"tags_descriptions":{},"id":3145,"title":"Building of influence map","fancy_title":"Building of influence map","posts_count":6,"created_at":"2017-05-23T18:53:48.271Z","views":491,"reply_count":2,"like_count":3,"last_posted_at":"2017-05-25T12:19:07.341Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"building-of-influence-map","category_id":10,"word_count":453,"deleted_at":null,"user_id":554,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_3145","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":4},{"id":674,"username":"smellymumbler","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ad7895/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png"},"last_poster":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"},"links":[{"url":"https://github.com/LucKeyProductions/OGTatt","title":"GitHub - LucKeyProductions/OGTatt: Respect is only the beginning...","internal":false,"attachment":false,"reflection":false,"clicks":11,"user_id":192,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/jlblancoc/nanoflann","title":"GitHub - jlblancoc/nanoflann: nanoflann: a C++ header-only library for Nearest Neighbor (NN) search wih KD-trees","internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":554,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/LucKeyProductions/OGTatt/blob/master/mastercontrol.h#L111-L153","title":"OGTatt/mastercontrol.h at master · LucKeyProductions/OGTatt · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":192,"domain":"github.com","root_domain":"github.com"}]}}