{"post_stream":{"posts":[{"id":24912,"name":"","username":"slapin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","created_at":"2018-06-11T12:20:09.141Z","cooked":"\u003cp\u003eHi all!\u003c/p\u003e\n\u003cp\u003eIt looks like I become lazy and stupid. The concept of global to local and backwards\u003cbr\u003e\ntends to be overwhelming to me at times.\u003cbr\u003e\nSo while I was working on character appearance editor\u003cbr\u003e\nI use approach which looks simpler - change bones so that overall character appearance changes.\u003cbr\u003e\nThis works OKish, but has obvious problems.\u003cbr\u003e\nI implemented this class which is at core of things:\u003c/p\u003e\n\u003caside class=\"onebox githubgist\"\u003e\n  \u003cheader class=\"source\"\u003e\n      \u003ca href=\"https://gist.github.com/slapin/6cfbfe4852cc2d9809f0b5ff7c9dcb36\" target=\"_blank\" rel=\"nofollow noopener\"\u003egist.github.com\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ch4\u003e\u003ca href=\"https://gist.github.com/slapin/6cfbfe4852cc2d9809f0b5ff7c9dcb36\" target=\"_blank\" rel=\"nofollow noopener\"\u003ehttps://gist.github.com/slapin/6cfbfe4852cc2d9809f0b5ff7c9dcb36\u003c/a\u003e\u003c/h4\u003e\n\u003ch5\u003eBGroup.h\u003c/h5\u003e\n\u003cpre\u003e\u003ccode class=\"C++\"\u003eclass BGroup {\n\tstruct BoneData {\n\t\tUrho3D::Node *node;\n\t\tUrho3D::Vector3 scale;\n\t\tUrho3D::Vector3 translation;\n\t\tUrho3D::Vector3 default_loc;\n\t\tUrho3D::Vector3 default_scale;\n\t};\n\tUrho3D::Vector\u0026lt;BoneData\u0026gt; modifiers;\n\tstruct PreserveData {\u003c/code\u003e\u003c/pre\u003e\nThis file has been truncated. \u003ca href=\"https://gist.github.com/slapin/6cfbfe4852cc2d9809f0b5ff7c9dcb36\" target=\"_blank\" rel=\"nofollow noopener\"\u003eshow original\u003c/a\u003e\n\n\u003cp\u003e\n\u003c/p\u003e\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\n\u003cp\u003eWhen changing bone we need to counter-change child bones if we don‚Äôt want them changed.\u003cbr\u003e\nFor example, we change nech width but do not want to change head width at the same time, so we need\u003cbr\u003e\nto have head width back.\u003c/p\u003e\n\u003cp\u003eManually changing that is really not nice, not nice at all. That is too much. So I implemented the following code (see gist above for context):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e                void SetSliderValue(float value)\n \t\t{\n\t\t\tslider_cur = value;\n\t\t\t/* Save original transforms for bones we want to keep sizes */\n\t\t\tfor (int i = 0; i \u0026lt; preserve.Size(); i++) {\n\t\t\t\tpreserve[i].orig_scale = preserve[i].node-\u0026gt;GetWorldScale();\n\t\t\t\tpreserve[i].orig_pos = modifiers[i].node-\u0026gt;GetWorldPosition();\n\t\t\t\tpreserve[i].orig_rot = modifiers[i].node-\u0026gt;GetWorldRotation();\n\t\t\t}\n\t\t\tfor (int i = 0; i \u0026lt; modifiers.Size(); i++) {\n\t\t\t\tUrho3D::Vector3 orig_scale = modifiers[i].node-\u0026gt;GetScale();\n\t\t\t\tUrho3D::Vector3 orig_pos = modifiers[i].node-\u0026gt;GetPosition();\n\t\t\t\tmodifiers[i].node-\u0026gt;SetScale(orig_scale + modifiers[i].scale * value);\n\t\t\t\tmodifiers[i].node-\u0026gt;SetPosition(orig_pos + modifiers[i].translation * value);\n\t\t\t}\n\t\t\t/* Restore original transforms for bones we want to keep sizes */\n\t\t\tfor (int i = 0; i \u0026lt; preserve.Size(); i++) {\n\t\t\t\tif (preserve[i].flags \u0026amp; SCALE)\n\t\t\t\t\tpreserve[i].node-\u0026gt;SetWorldScale(preserve[i].orig_scale);\n\t\t\t\tif (preserve[i].flags \u0026amp; TRANS)\n\t\t\t\t\tpreserve[i].node-\u0026gt;SetWorldPosition(preserve[i].orig_pos);\n\t\t\t\tif (preserve[i].flags \u0026amp; ROT)\n\t\t\t\t\tpreserve[i].node-\u0026gt;SetWorldRotation(preserve[i].orig_rot);\n\t\t\t}\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo here we save global transform, then do our slider work then restore global transform (of bones we do not want to change by this slider)\u003c/p\u003e\n\u003cp\u003eI thought it should work like this, but it looks like it won‚Äôt. If I hardcode values of stored transform, it works fine, which makes me think that idea is not entirely stupid, but something is not right. Any ideas?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-06-11T12:20:09.141Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":50,"readers_count":49,"score":15.0,"yours":false,"topic_id":4307,"topic_slug":"am-i-stupid-or-what","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://gist.github.com/slapin/6cfbfe4852cc2d9809f0b5ff7c9dcb36","internal":false,"reflection":false,"title":"BGroup.h ¬∑ GitHub","clicks":5}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":554,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[24912]},"timeline_lookup":[[1,1626]],"suggested_topics":[{"id":7123,"title":"Character hitboxes","fancy_title":"Character hitboxes","slug":"character-hitboxes","posts_count":24,"reply_count":16,"highest_post_number":24,"image_url":null,"created_at":"2022-01-10T19:34:24.617Z","last_posted_at":"2022-01-12T22:44:20.744Z","bumped":true,"bumped_at":"2022-01-12T22:44:20.744Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":275,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}]},{"id":7160,"title":"RayCast trouble","fancy_title":"RayCast trouble","slug":"raycast-trouble","posts_count":17,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-01-29T00:06:00.367Z","last_posted_at":"2022-01-30T00:29:39.356Z","bumped":true,"bumped_at":"2022-01-30T00:29:39.356Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":260,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]},{"id":7182,"title":"How install landscape in the format (.tor or .obj)?","fancy_title":"How install landscape in the format (.tor or .obj)?","slug":"how-install-landscape-in-the-format-tor-or-obj","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-02-03T16:58:20.976Z","last_posted_at":"2022-02-04T16:34:09.663Z","bumped":true,"bumped_at":"2022-02-04T16:34:09.663Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":151,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":"latest","description":"Most Recent Poster, Accepted Answer","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7212,"title":"Shadow Gap between Feet and Plane","fancy_title":"Shadow Gap between Feet and Plane","slug":"shadow-gap-between-feet-and-plane","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/8/897538cff25de49fafa7aa77574f822e99576b67_2_1024x686.jpeg","created_at":"2022-03-07T00:04:17.351Z","last_posted_at":"2022-03-07T00:17:57.413Z","bumped":true,"bumped_at":"2022-03-07T00:17:57.413Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}]},{"id":7254,"title":"Android :android:urho3d-lib:generateJsonModelDebug failed task","fancy_title":"Android :android:urho3d-lib:generateJsonModelDebug failed task","slug":"android-urho3d-lib-generatejsonmodeldebug-failed-task","posts_count":14,"reply_count":8,"highest_post_number":14,"image_url":null,"created_at":"2022-05-07T08:16:09.637Z","last_posted_at":"2022-08-31T13:37:02.824Z","bumped":true,"bumped_at":"2022-08-31T13:37:02.824Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"unicode_title":"Android :android:urho3d-lib:generateJsonModelDebug failed task","tags_descriptions":{},"like_count":2,"views":344,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1518,"username":"Joshua-PotatoMan","name":"Joshua","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/e9c0ed/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1522,"username":"tungts1101","name":"tungts1101","avatar_template":"/user_avatar/discourse.urho3d.io/tungts1101/{size}/3803_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":4307,"title":"Am I stupid or what?","fancy_title":"Am I stupid or what?","posts_count":1,"created_at":"2018-06-11T12:20:09.021Z","views":356,"reply_count":0,"like_count":0,"last_posted_at":"2018-06-11T12:20:09.141Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"am-i-stupid-or-what","category_id":10,"word_count":347,"deleted_at":null,"user_id":554,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_4307","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":1,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png"},"last_poster":{"id":554,"username":"slapin","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/dfb087/{size}.png"},"links":[{"url":"https://gist.github.com/slapin/6cfbfe4852cc2d9809f0b5ff7c9dcb36","title":"BGroup.h ¬∑ GitHub","internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":554,"domain":"gist.github.com","root_domain":"github.com"}]}}