csteaderman | 2022-01-03 23:01:43 UTC | #1

I have been provided an FBX file, generated with Autodesk 3ds, that contains two Morph Targets that I would like to control in my application. I have managed to get the models generated using AssetImporter (needed to import FBX into Blender and then export FBX in order to get past “FBX-Tokenize (offset 0x34) block offset is out of range” error). Unfortunately, I do not see any Components in my DOM that allow me to change the Morph Targets. Some investigation leads me to think that AssetImporter does not support Morph Targets? Is that correct? If it does support them, how can I reference the Morph Target in my code.

-------------------------

Modanung | 2022-01-03 23:11:40 UTC | #2

I think you're looking for `AnimatedModel::SetMorphWeight`.

Also; welcome! :confetti_ball: :slightly_smiling_face:

-------------------------

csteaderman | 2022-01-03 23:21:35 UTC | #3

Thanks for the response, and the warm Welcome!

I thought I should use that, but when I load my model/scene (using `Scene.InstantiateXml(...)`) none of the models are of type AnimatedModel, only StaticModel. That is part of what is making me think that perhaps AssetImporter is stripping the Morph Targets from my FBX file.

Charlie

-------------------------

Modanung | 2022-01-03 23:22:15 UTC | #4

Then they must be defined as `StaticModel`s in the scene's XML.
I don't use AssetImporter, maybe it has parameters to specify this, but I don't know. I'd say you could either edit the scene file, or ignore it altogether.

-------------------------

csteaderman | 2022-01-03 23:25:05 UTC | #5

OK. I'm done for the day, but will continue looking into it tomorrow morning.

FYI - I just looked in the XML file and, sure enough, they are StaticModel.

-------------------------

Modanung | 2022-01-03 23:29:59 UTC | #6

Btw, the [Developer Talk](/c/developer-talk) category is meant for discussing development _of_ the engine, not _with_. For questions about its use, there's the [Discussions -> Support](/c/discussions/support) section.

-------------------------

Eugene | 2022-01-04 08:13:22 UTC | #7

For a record, FBX AssetImporter is a trash that cannot properly load half of FBX files, [issue tracker be my witness](https://github.com/assimp/assimp/labels/FBX).
I had to manually make GLTF importer in order to actually load complex models correctly.

So, there is always a possibility that AssImp just failed to import your model, and there isn’t much you can do besides trying to debug AssImp or just importing stuff yourself.

-------------------------

Modanung | 2022-01-04 09:12:24 UTC | #8

FBX _is_ a proprietary file format.

-------------------------

csteaderman | 2022-01-04 18:31:20 UTC | #9

Well, I have made progress. I do believe that the Scene/Models generated by AssetImporter ***do not*** have the Morph Targets in them. So I installed an older version of Blender (2.79) so that I could use the Urho-Blender Add-on. By playing with the export options, I was finally able to get an exported Scene/Models that present the Morph Targets and am able to manipulate them via code as I needed.

Thanks for all your guidance. It is unfortunate that there is not a more robust method to get 3D assets converted into Urho format. The 3D assets that I am using are being provided by an external resource, and I don't have the ability to control his workflow (Autodesk 3ds).

-------------------------

SirNate0 | 2022-01-04 23:17:08 UTC | #10

[quote="csteaderman, post:9, topic:7119"]
So I installed an older version of Blender (2.79) so that I could use the Urho-Blender Add-on.
[/quote]

I've had plenty of success with the addon with Blender 2.83, you just have to make sure you use the correct branch from GitHub (I think it's 2_80 or something like that). Though I don't use vertex morphs, so no comment on that aspect.

-------------------------

Modanung | 2022-01-05 01:22:29 UTC | #11

Simply check the _Morphs (shape keys)_ box.

---

I never know which add-on repository to link to since I stopped updating Blender. :slight_smile:
2.79b is still the best Blender version out there, as far as I'm concerned.

-------------------------

Eugene | 2022-01-05 11:02:37 UTC | #12

[quote="Modanung, post:8, topic:7119, full:true"]
FBX *is* a proprietary file format.
[/quote]
Yes, and damn I hate so much that FBX became de-facto standard for 3d assets.

It's just so dumb in the grand scheme of things. Imagine having old `*.doc` format instead of Markdown as documentation standard :expressionless: On the other hand, open 3d formats were always either trash or insufficient until GLTF.

I only hope that FBX will get replaced with GLTF in time.

-------------------------

Modanung | 2022-01-05 11:55:31 UTC | #13

[quote="Eugene, post:12, topic:7119"]
I only hope that FBX will get replaced with GLTF in time.
[/quote]

I tend to take it from scratch, but [Poly Haven](https://polyhaven.com/models) keeps growing, and provides glTF.

-------------------------

