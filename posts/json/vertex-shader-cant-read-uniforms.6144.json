{"post_stream":{"posts":[{"id":37628,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2020-05-06T21:33:13.092Z","cooked":"\u003cp\u003eWe have a simple custom shader for drawing lines on a flat map.  Each line layer has a different fixed Y value, so that it’ll appear “on top” of other layers (this is how we z-order).  So we want to set the “Y” position value inside of a Uniform value.\u003c/p\u003e\n\u003cp\u003eThe Uniform Value can be read just fine from the Pixel Shader, but from the Vertex Shader, it’s treated the value as “always default/zero”.\u003c/p\u003e\n\u003cp\u003eHere is our HLSL:\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"hashtag\"\u003e#include\u003c/span\u003e “Uniforms.hlsl”\u003cbr\u003e\n\u003cspan class=\"hashtag\"\u003e#include\u003c/span\u003e “Transform.hlsl”\u003c/p\u003e\n\u003cp\u003euniform float cYPos;\u003c/p\u003e\n\u003cp\u003evoid VS(float4 iPos : POSITION,\u003cbr\u003e\nout float4 oPos : OUTPOSITION)\u003cbr\u003e\n{\u003cbr\u003e\niPos.y = cYPos; // \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; THIS IS ALWAYS ZERO!!!\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003efloat4x3 modelMatrix = iModelMatrix;\nfloat3 worldPos = GetWorldPos(modelMatrix);\noPos = GetClipPos(worldPos);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e}\u003c/p\u003e\n\u003cp\u003evoid PS(\u003cbr\u003e\nout float4 oColor : OUTCOLOR0)\u003cbr\u003e\n{\u003cbr\u003e\nfloat color = 0.05 * cYPos; // \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; Here it reads YPos just fine\u003cbr\u003e\noColor = float4(color, color, color, 1.0);\u003cbr\u003e\n}\u003c/p\u003e\n\u003cp\u003e==\u003cbr\u003e\nWe are using UrhoSharp, to set the Shader parameter as follows:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\t\tfloat yPos = 1f;\n\t\tforeach (var layer in _lineLayers.Values)\n\t\t{\n\t\t\tlayer.Material.SetShaderParameter(\"YPos\", yPos);\n\t\t\tyPos += 1f;\n\t\t}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI have tried reading the YPos, and it is always Zero within the VertexShader, while works fine for the PixelShader.\u003c/p\u003e\n\u003cp\u003eThe Urho Samples do not have any examples where a Vertex Shader accesses the Uniforms (that I can find), to prove that this works.\u003c/p\u003e\n\u003cp\u003eHelp would be greatly appreciated here.  Has anyone else gotten Vertex Shaders to access the Uniform values?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2020-05-06T22:23:20.138Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":12,"reads":35,"readers_count":34,"score":67.0,"yours":false,"topic_id":6144,"topic_slug":"vertex-shader-cant-read-uniforms","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37629,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2020-05-06T21:50:41.580Z","cooked":"\u003cp\u003eI recommend using constant (aka uniform) buffers for DX11 API.\u003cbr\u003e\nOrphan parameters were never really tested and, looking at the code, I don’t see how they can work (so they probably cannot).\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2020-05-06T21:50:41.580Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":33,"readers_count":32,"score":16.6,"yours":false,"topic_id":6144,"topic_slug":"vertex-shader-cant-read-uniforms","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37630,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2020-05-06T22:30:22.511Z","cooked":"\u003cp\u003eSo we have 10 line layers, each uses the same shader, but with a different Uniform setting for YPos, so that each layer will draw to a different Y-positioned flat/horizontal plane (they are stacked).   So I add these as 10 instances of dynamic Geometry.\u003c/p\u003e\n\u003cp\u003eIf I use a Constant DX buffer to store an array of YPos[], then how does each layer know it’s “layer index”?   I need a way to tell ALL VERTICES for a single layer “You are Index 1” or “Your YPosition is 1.0”.    I’m trying to avoid passing in “YPos = 1.0” to all N vertices.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2020-05-06T22:30:22.511Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":11.0,"yours":false,"topic_id":6144,"topic_slug":"vertex-shader-cant-read-uniforms","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37631,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2020-05-06T22:46:15.587Z","cooked":"\u003cp\u003eIn order to take advantage of this efficiency, it looks like I’ll have yet another hurdle to clear, in that “POSITION” always comes in as “float4”, but I’m wanting to ONLY pass in the XZ coordinates (per vertex), and skip the “Y” component.\u003c/p\u003e\n\u003cp\u003eWill Urho permit me to define Position as a “Vector2” in the Vertex Buffer? (saving 4 bytes per vertex).\u003c/p\u003e\n\u003cp\u003eI’m also wanting to pack in ONLY the “U” coordinate (of a UV TEXCOORD), and omit the “V” coordinate, so that each vertex will instead only be 12 bytes total:    X, Z, and U.\u003c/p\u003e\n\u003cp\u003e(we don’t need “Y” or “V”, assuming I can read the fixed-Y value from the Uniform values)\u003c/p\u003e\n\u003cp\u003eBefore this optimization, we’ve got 20-bytes per vertex;  we’re trying to reduce this to 12 bytes.   It technically could be 8 bytes + 1 bit (65 bits).   The “U” coordinate is EITHER 0 or 1, nothing in between.\u003c/p\u003e\n\u003cp\u003eWe could encode the “U” coordinate into a single bit of the X or Z coordinates and make this be 8 bytes per vertex.\u003c/p\u003e\n\u003cp\u003eFor our next step, we’d be happy just to reduce 20 bytes to 12 bytes.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2020-05-06T22:46:15.587Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":6.0,"yours":false,"topic_id":6144,"topic_slug":"vertex-shader-cant-read-uniforms","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":37632,"name":"Brian Knox","username":"najak3d","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","created_at":"2020-05-07T12:27:18.295Z","cooked":"\u003cp\u003eBTW, although the issue remains that Vertex Shaders can’t see Uniforms (a big bug, IMO), I am going to resolve our specific problem simply by changing the Node Position Y value for each layer, which works just fine.  And to keep it simple (yet kludgy), we’re going to pack the “U” value into the Vertex “Y” value, so that we’ll achieve our 12 bytes per vertex goal.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2020-05-07T12:27:18.295Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":23,"readers_count":22,"score":4.6,"yours":false,"topic_id":6144,"topic_slug":"vertex-shader-cant-read-uniforms","display_username":"Brian Knox","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1334,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[37628,37629,37630,37631,37632]},"timeline_lookup":[[1,930]],"suggested_topics":[{"id":7067,"title":"Can the latest Urho3D version be built with VS2013?","fancy_title":"Can the latest Urho3D version be built with VS2013?","slug":"can-the-latest-urho3d-version-be-built-with-vs2013","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2021-11-25T18:00:24.336Z","last_posted_at":"2021-11-26T17:22:21.878Z","bumped":true,"bumped_at":"2021-11-26T17:22:21.878Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":157,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7160,"title":"RayCast trouble","fancy_title":"RayCast trouble","slug":"raycast-trouble","posts_count":17,"reply_count":9,"highest_post_number":19,"image_url":null,"created_at":"2022-01-29T00:06:00.367Z","last_posted_at":"2022-01-30T00:29:39.356Z","bumped":true,"bumped_at":"2022-01-30T00:29:39.356Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":260,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]},{"id":7186,"title":"Best way to do Blob Shadows in Urho","fancy_title":"Best way to do Blob Shadows in Urho","slug":"best-way-to-do-blob-shadows-in-urho","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/2/22e3dc1892512375cae09bf84fd92071a1ae27d8.png","created_at":"2022-02-05T04:59:31.388Z","last_posted_at":"2022-02-05T13:29:22.054Z","bumped":true,"bumped_at":"2022-02-05T13:31:44.299Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":179,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7112,"title":"What is the proper way to add more source files(.cpp and .h) to a project?","fancy_title":"What is the proper way to add more source files(.cpp and .h) to a project?","slug":"what-is-the-proper-way-to-add-more-source-files-cpp-and-h-to-a-project","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2021-12-27T18:18:21.946Z","last_posted_at":"2021-12-28T12:19:43.514Z","bumped":true,"bumped_at":"2021-12-28T12:19:43.514Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":195,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1498,"username":"Tryout","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/85f322/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7268,"title":"Get vertex position before Morph in shader","fancy_title":"Get vertex position before Morph in shader","slug":"get-vertex-position-before-morph-in-shader","posts_count":8,"reply_count":6,"highest_post_number":8,"image_url":null,"created_at":"2022-05-15T19:44:19.139Z","last_posted_at":"2022-05-16T06:11:07.099Z","bumped":true,"bumped_at":"2022-08-12T22:38:31.553Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":5,"views":209,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1205,"username":"Askhento","name":"Askhento","avatar_template":"/user_avatar/discourse.urho3d.io/askhento/{size}/3849_2.png"}},{"extras":"latest","description":"Most Recent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]}],"tags_descriptions":{},"id":6144,"title":"Vertex Shader can't read Uniforms...?","fancy_title":"Vertex Shader can\u0026rsquo;t read Uniforms\u0026hellip;?","posts_count":5,"created_at":"2020-05-06T21:33:12.962Z","views":293,"reply_count":2,"like_count":0,"last_posted_at":"2020-05-07T12:27:18.295Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"vertex-shader-cant-read-uniforms","category_id":10,"word_count":635,"deleted_at":null,"user_id":1334,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6144","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"},"last_poster":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}}