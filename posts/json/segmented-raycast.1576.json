{"post_stream":{"posts":[{"id":9001,"name":"","username":"Enhex","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","created_at":"2015-12-13T15:12:39.000Z","cooked":"\u003cp\u003eIn my project I noticed that if I have a big scene with a lot of bodies (100’s) a raycast from one end of the level to another becomes very expensive (in my case AI line of sight check).\u003cbr\u003e\nI assume that the raycast implementation uses AABB to get all the bodies it needs to test against for intersection.\u003cbr\u003e\nA possible way to optimize it is to segment the ray into several rays, so the sum of the volumes of the smaller AABBs is smaller than the single big AABB, so it will test against much less bodies.\u003cbr\u003e\nIn the case of returning the closest result, when a ray segment hits something there’s no need to test the rest of the segments.\u003cbr\u003e\n\u003cimg src=\"http://i.imgur.com/On8MNSg.png\" alt=\"\" width=\"524\" height=\"286\"\u003e\u003c/p\u003e\n\u003cp\u003eSince it’s quite a general case (any big scene with many bodies), if I implement it would u accept a pull request?\u003c/p\u003e\n\u003cp\u003eEDIT:\u003cbr\u003e\nI implemented it and in my case it \u003cspan class=\"bbcode-b\"\u003emore than doubled\u003c/span\u003e the game framerate, and the performance relation is non-linear.\u003c/p\u003e\n\u003cp\u003eMade a pull request:\u003cbr\u003e\n\u003ca href=\"https://github.com/urho3d/Urho3D/pull/1093\" rel=\"nofollow noopener\"\u003egithub.com/urho3d/Urho3D/pull/1093\u003c/a\u003e\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:08:37.502Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":21,"reads":10,"readers_count":9,"score":107.0,"yours":false,"topic_id":1576,"topic_slug":"segmented-raycast","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/pull/1093","internal":false,"reflection":false,"title":"Added PhysicsWorld::RaycastSingleSegmented() by Enhex · Pull Request #1093 · urho3d/Urho3D · GitHub","clicks":3}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":184,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9009,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2015-12-14T09:21:46.000Z","cooked":"\u003cp\u003eCertainly, it will be added.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:08:38.054Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":1576,"topic_slug":"segmented-raycast","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9062,"name":"","username":"Enhex","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","created_at":"2015-12-16T11:56:25.000Z","cooked":"\u003cp\u003eOnly PhysicsWorld::RaycastSingleSegmented(), a version of RaycastSingle, was part of the PR.\u003c/p\u003e\n\u003cp\u003eA RaycastSegmented should have 2 versions:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOne that returns all the intersections\u003c/li\u003e\n\u003cli\u003eOne that for each segment passes the results to a callback, and that callback can abort the rest of the segments by returning false.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe second version is useful for things like “RaycastSingle” that filters specific nodes, instead of using layer = 0 that will cause the body to be re-added to world.\u003cbr\u003e\nAnother example is getting the first N nodes.\u003cbr\u003e\nAnother example is penetrating bullets.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:08:41.738Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":9,"readers_count":8,"score":6.8,"yours":false,"topic_id":1576,"topic_slug":"segmented-raycast","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":184,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[9001,9009,9062]},"timeline_lookup":[[1,2537],[2,2536],[3,2534]],"suggested_topics":[{"id":7085,"title":"Blender 3 Asset Browser","fancy_title":"Blender 3 Asset Browser","slug":"blender-3-asset-browser","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2021-12-03T17:39:10.192Z","last_posted_at":"2021-12-03T17:39:10.252Z","bumped":true,"bumped_at":"2021-12-03T17:39:10.252Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":149,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7125,"title":"Android mobile shows jaggies in the instersection plane-terrain","fancy_title":"Android mobile shows jaggies in the instersection plane-terrain","slug":"android-mobile-shows-jaggies-in-the-instersection-plane-terrain","posts_count":5,"reply_count":3,"highest_post_number":5,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d36aedb4e8cf5409efca6c976aae7e4a5c499eb9.png","created_at":"2022-01-11T11:59:18.993Z","last_posted_at":"2022-01-11T21:27:40.692Z","bumped":true,"bumped_at":"2022-01-12T07:36:41.695Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":129,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7277,"title":"MessageBox issue when building for Windows","fancy_title":"MessageBox issue when building for Windows","slug":"messagebox-issue-when-building-for-windows","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2022-06-05T07:25:41.629Z","last_posted_at":"2022-06-11T08:37:06.685Z","bumped":true,"bumped_at":"2022-06-11T08:45:09.060Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":152,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":527,"username":"zedraken","name":"Charles","avatar_template":"/user_avatar/discourse.urho3d.io/zedraken/{size}/328_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]},{"id":7308,"title":"Tolua++ hook for lua vscode plugin","fancy_title":"Tolua++ hook for lua vscode plugin","slug":"tolua-hook-for-lua-vscode-plugin","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/6/65709c5db2af2a0d964b2c0ea751039f57cec462.png","created_at":"2022-08-01T00:24:30.267Z","last_posted_at":"2022-08-01T00:24:30.335Z","bumped":true,"bumped_at":"2022-08-01T00:24:30.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":101,"category_id":17,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1533,"username":"lucasvinbr","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/3da27b/{size}.png"}}]},{"id":7324,"title":"3D Particle Emitter Liquid Effects","fancy_title":"3D Particle Emitter Liquid Effects","slug":"3d-particle-emitter-liquid-effects","posts_count":5,"reply_count":2,"highest_post_number":5,"image_url":null,"created_at":"2022-09-08T13:59:16.260Z","last_posted_at":"2022-09-14T08:38:38.762Z","bumped":true,"bumped_at":"2022-09-14T08:38:38.762Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":185,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]}],"tags_descriptions":{},"id":1576,"title":"Segmented Raycast","fancy_title":"Segmented Raycast","posts_count":3,"created_at":"2015-12-13T15:12:39.000Z","views":377,"reply_count":0,"like_count":0,"last_posted_at":"2015-12-16T11:56:25.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"segmented-raycast","category_id":11,"word_count":291,"deleted_at":null,"user_id":184,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1576","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2}],"created_by":{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png"},"last_poster":{"id":184,"username":"Enhex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/enhex/{size}/81_2.png"},"links":[{"url":"https://github.com/urho3d/Urho3D/pull/1093","title":"Added PhysicsWorld::RaycastSingleSegmented() by Enhex · Pull Request #1093 · urho3d/Urho3D · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":3,"user_id":184,"domain":"github.com","root_domain":"github.com"}]}}