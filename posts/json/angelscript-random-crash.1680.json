{"post_stream":{"posts":[{"id":9687,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2016-01-17T11:41:23.000Z","cooked":"\u003cp\u003eHi , so i can’t tell whats exacly happening but in some cases calling ScriptInstance::CrateObject crashes. I couldn’t figure out why…\u003cbr\u003e\nThe script works fine until i add another method then the game starts crashing afterwards.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eif (!scriptName.Empty())\n{\n\tUrho3D::ScriptInstance * scrInst = this-\u0026gt;CreateComponent\u0026lt;Urho3D::ScriptInstance\u0026gt;();\n              // Cript instance is successfully created\n\tscrInst-\u0026gt;CreateObject(GetSubsystem\u0026lt;Urho3D::ResourceCache\u0026gt;()-\u0026gt;GetResource\u0026lt;Urho3D::ScriptFile\u0026gt;(scriptName + \".as\") , \"INFScript\");\n              // The program never reaches this part !\n}\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003ei think that (i suppose) there’s a dangling pointer somewhere in either anglescript’s or Urho’s CreateObject function…\u003c/p\u003e\n\u003cp\u003eHere’s the latest test i ran :\u003c/p\u003e\n\u003cp\u003eThis works :\u003c/p\u003e\n\u003cp\u003e[code]class INFScript : ScriptObject\u003cbr\u003e\n{\u003cbr\u003e\nvoid onPick()\u003cbr\u003e\n{\u003cbr\u003e\nINFGame@ game = getGame();\u003cbr\u003e\nNode@ key = node.GetChild(“Security Key” , true);\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\tif (key !is null) game.switchToPuzzleMode();\n\telse game.enableDialog(\"The security panel is turned off.There's a keyhole on the panel\" , 0 , 0 , null);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e}[/code]\u003c/p\u003e\n\u003cp\u003echanging to this and it just keeps crashing.\u003c/p\u003e\n\u003cp\u003e[code]class INFScript : ScriptObject\u003cbr\u003e\n{\u003cbr\u003e\nvoid onPick()\u003cbr\u003e\n{\u003cbr\u003e\nINFGame@ game = getGame();\u003cbr\u003e\nNode@ key = node.GetChild(“Security Key” , true);\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\tif (key !is null) game.switchToPuzzleMode();\n\telse game.enableDialog(\"The security panel is turned off.There's a keyhole on the panel\" , 0 , 0 , null);\n}\n     \nOverloaded function with a Node as a parameter\nvoid onPick(Node@ inNode)\n{\n          \n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e}[/code]\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"bbcode-b\"\u003eEDIT:\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003enow thats strange… deleting few lines remove empty lines and now it works again…\u003cbr\u003e\nThe crash is totally unpredictable…\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:09:27.943Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":19,"reads":2,"readers_count":1,"score":95.4,"yours":false,"topic_id":1680,"topic_slug":"angelscript-random-crash","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9808,"name":"","username":"TheComet","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","created_at":"2016-01-25T00:24:55.000Z","cooked":"\u003cp\u003eCan you give us a backtrace? Otherwise it’s just guess work.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf CreateObject() fails (for some reason) it could explain the crash.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:09:36.693Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":2,"readers_count":1,"score":0.4,"yours":false,"topic_id":1680,"topic_slug":"angelscript-random-crash","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Community repository maintainer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":37,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9821,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2016-01-25T12:59:09.000Z","cooked":"\u003caside class=\"quote\"\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf CreateObject() fails (for some reason) it could explain the crash.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eHi ! Yes the crash happens somewhere inside CreateObject (like i stated in my first post).When the crash happens the program never leaves the CreateObject function\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003einst-\u0026gt;CreateObject(blahblah);\nLOGDEBUG(\"This line will never be written in the console if the program crashed...\")\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThe problem is the crash is sooo rare i couldn’t investigate it \u003ca href=\"http://yet.It\" rel=\"nofollow noopener\"\u003eyet.It\u003c/a\u003e could be a dangling pointer or null pointer access but could be some *.as file parsing error… i have no idea.\u003cbr\u003e\nI didn’t modified my scripts for a week (i’m working on level design right now). So now the crash doesn’t happen at all. The crash only happens if i add/remove some code to the script. But after a bit modifying (removing empty lines , swap function definitions in the script file etc) then the SAME code just works without crashing.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T01:09:37.640Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":1680,"topic_slug":"angelscript-random-crash","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://yet.It","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9869,"name":"Yao Wei Tjong","username":"weitjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","created_at":"2016-01-27T09:09:36.000Z","cooked":"\u003cp\u003e[quote=“Dave82”]now thats strange… deleting few lines remove empty lines and now it works again…\u003cbr\u003e\nThe crash is totally unpredictable…[/quote]\u003cbr\u003e\nIt does not make any sense. IMHO, AngelScript should not be the root cause of your problem. Let me guess. You are using MSVC as your compiler toolchain and your project is 64-bit using DetourCrowd? If so, I think the root cause of the problem is with our integration of DetourCrowd into Urho3D. I have not done any investigation yet, but since we have enabled AppVeyor (our CI server using VS2015) to test run all the sample apps as part of the CI jobs, we have observed random segfault on 64-bit build of 39_CrowdNavigation for both STATIC and SHARED lib types. Note this is just a wild guess that your problem is related to this observation. You should probably log this as an issue to our GitHub issue tracker.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-01-02T01:09:41.242Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":2,"readers_count":1,"score":0.4,"yours":false,"topic_id":1680,"topic_slug":"angelscript-random-crash","display_username":"Yao Wei Tjong","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Admin","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":4,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":9871,"name":"","username":"Dave82","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","created_at":"2016-01-27T10:13:40.000Z","cooked":"\u003cp\u003e[quote=“weitjong”]\u003cbr\u003e\nIt does not make any sense. IMHO, AngelScript should not be the root cause of your problem. Let me guess. You are using MSVC as your compiler toolchain and your project is 64-bit using DetourCrowd? If so, I think the root cause of the problem is with our integration of DetourCrowd into Urho3D. I have not done any investigation yet, but since we have enabled AppVeyor (our CI server using VS2015) to test run all the sample apps as part of the CI jobs, we have observed random segfault on 64-bit build of 39_CrowdNavigation for both STATIC and SHARED lib types. Note this is just a wild guess that your problem is related to this observation. You should probably log this as an issue to our GitHub issue tracker.[/quote]\u003c/p\u003e\n\u003cp\u003eThanks weitjong ! Yes i use MSVC but on a 32 bit system. I found some issues with DetourCrowd but only in the previous (1.4) version of Urho. Since 1.5 these issues were gone (Crashes in CrowdManager, and NavigationMesh-\u0026gt;Build()). It seems that this is working now.\u003cbr\u003e\nThe problem is that the program never leaves the ScriptInstance’s CreateObject function after the crash. But i only tested it like this :\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\nURHO3D_LOGINFO(\"The program reaches this point\");\nscrInst-\u0026gt;CreateObject(cache-\u0026gt;GetResource\u0026lt;ScriptFile\u0026gt;(\"Scripts/\" + scriptName + \".as\") , \"INFScript\");\nURHO3D_LOGINFO(\"If the program crashes this will not print\");\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThats just my experience but ofcourse i could be wrong… I didn’t have time to examine ScriptInstance’s source code yet , i’m busy with job and life , all my free time goes into level design and modelling.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-01-02T01:09:41.367Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":3,"readers_count":2,"score":0.6,"yours":false,"topic_id":1680,"topic_slug":"angelscript-random-crash","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":247,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[9687,9808,9821,9869,9871]},"timeline_lookup":[[1,2502],[2,2494],[4,2492]],"suggested_topics":[{"id":7200,"title":"Urho3D just building if I check \"use SHARED libraries\"","fancy_title":"Urho3D just building if I check \u0026ldquo;use SHARED libraries\u0026rdquo;","slug":"urho3d-just-building-if-i-check-use-shared-libraries","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-02-22T20:02:48.835Z","last_posted_at":"2022-02-23T15:38:33.698Z","bumped":true,"bumped_at":"2022-02-23T15:54:07.879Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":165,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1508,"username":"killinbassou","name":"killin","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/k/848f3c/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7081,"title":"Install Urho3D Library - Windows 10 - rake build - \"project does not exist\"","fancy_title":"Install Urho3D Library - Windows 10 - rake build - \u0026ldquo;project does not exist\u0026rdquo;","slug":"install-urho3d-library-windows-10-rake-build-project-does-not-exist","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-03T03:06:40.974Z","last_posted_at":"2021-12-03T17:53:10.844Z","bumped":true,"bumped_at":"2021-12-03T17:53:10.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":190,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]},{"id":7129,"title":"Best Model Import Pipeline as of Jan 2022?","fancy_title":"Best Model Import Pipeline as of Jan 2022?","slug":"best-model-import-pipeline-as-of-jan-2022","posts_count":7,"reply_count":0,"highest_post_number":7,"image_url":null,"created_at":"2022-01-17T09:27:23.432Z","last_posted_at":"2022-01-17T20:37:59.458Z","bumped":true,"bumped_at":"2022-01-17T20:37:59.458Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":170,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7250,"title":"CMake freezes with -D options","fancy_title":"CMake freezes with -D options","slug":"cmake-freezes-with-d-options","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2022-05-02T16:47:01.579Z","last_posted_at":"2022-05-06T08:26:07.285Z","bumped":true,"bumped_at":"2022-05-06T08:26:07.285Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":138,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":856,"username":"feresmu","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/f/f08c70/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":809,"username":"elix22","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/elix22/{size}/1437_2.png"}}]}],"tags_descriptions":{},"id":1680,"title":"AngelScript random crash","fancy_title":"AngelScript random crash","posts_count":5,"created_at":"2016-01-17T11:41:23.000Z","views":295,"reply_count":0,"like_count":0,"last_posted_at":"2016-01-27T10:13:40.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"angelscript-random-crash","category_id":10,"word_count":843,"deleted_at":null,"user_id":247,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1680","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":4},{"id":37,"username":"TheComet","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/thecomet/{size}/1493_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"},"last_poster":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}}}