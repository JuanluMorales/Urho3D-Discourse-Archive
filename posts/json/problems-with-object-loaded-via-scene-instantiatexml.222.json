{"post_stream":{"posts":[{"id":1225,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-04-30T03:33:31.000Z","cooked":"\u003cp\u003eHi,\u003c/p\u003e\n\u003cp\u003eI am having some difficulty loading game objects via Scene::InstantiateXML. Consider the following snippet from the Character Demo:\u003c/p\u003e\n\u003cp\u003e[code]// Create movable boxes. Let them fall from the sky at first\u003cbr\u003e\nconst unsigned NUM_BOXES = 100;\u003cbr\u003e\nfor (unsigned i = 0; i \u0026lt; NUM_BOXES; ++i)\u003cbr\u003e\n{\u003cbr\u003e\nfloat scale = Urho3D::Random(2.0f) + 0.5f;\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e    Urho3D::Node* objectNode = _scene-\u0026gt;CreateChild(\"Box\");\n    objectNode-\u0026gt;SetPosition(Urho3D::Vector3(Urho3D::Random(180.0f) - 90.0f, Urho3D::Random(10.0f) + 10.0f, Urho3D::Random(180.0f) - 90.0f));\n    objectNode-\u0026gt;SetRotation(Urho3D::Quaternion(Urho3D::Random(360.0f), Urho3D::Random(360.0f), Urho3D::Random(360.0f)));\n    objectNode-\u0026gt;SetScale(scale);\n    Urho3D::StaticModel* object = objectNode-\u0026gt;CreateComponent\u0026lt;Urho3D::StaticModel\u0026gt;();\n    object-\u0026gt;SetModel(cache-\u0026gt;GetResource\u0026lt;Urho3D::Model\u0026gt;(\"Models/Box.mdl\"));\n    object-\u0026gt;SetMaterial(cache-\u0026gt;GetResource\u0026lt;Urho3D::Material\u0026gt;(\"Materials/Stone.xml\"));\n    object-\u0026gt;SetCastShadows(true);\n    \n    Urho3D::RigidBody* body = objectNode-\u0026gt;CreateComponent\u0026lt;Urho3D::RigidBody\u0026gt;();\n    body-\u0026gt;SetCollisionLayer(2);\n    // Bigger boxes will be heavier and harder to move\n    body-\u0026gt;SetMass(scale * 2.0f);\n    Urho3D::CollisionShape* shape = objectNode-\u0026gt;CreateComponent\u0026lt;Urho3D::CollisionShape\u0026gt;();\n    shape-\u0026gt;SetBox(Urho3D::Vector3::ONE);\n}[/code]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis creates 100 boxes that fall due to gravity. Now consider the following modified snippet:\u003c/p\u003e\n\u003cp\u003e[code]const unsigned NUM_KEYS = 200;\u003cbr\u003e\nUrho3D::XMLFile* keyFile = GetSubsystem\u003ca\u003eUrho3D::ResourceCache\u003c/a\u003e()-\u0026gt;GetResource\u003ca\u003eUrho3D::XMLFile\u003c/a\u003e(“Objects/key.xml”);\u003cbr\u003e\nfor (unsigned i = 0; i \u0026lt; NUM_KEYS; ++i)\u003cbr\u003e\n{\u003cbr\u003e\nUrho3D::Vector3 position = Urho3D::Vector3(Urho3D::Random(180.0f) - 90.0f, Urho3D::Random(1.0f) + 1.0f, Urho3D::Random(180.0f) - 90.0f);\u003cbr\u003e\nUrho3D::Quaternion rotation = Urho3D::Quaternion(Urho3D::Random(360.0f), Urho3D::Random(360.0f), Urho3D::Random(360.0f));\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\t_scene-\u0026gt;InstantiateXML(keyFile-\u0026gt;GetRoot(), position, rotation);\n}[/code]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere is my key.xml file:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;?xml version=\"1.0\"?\u0026gt;\n\u0026lt;node id=\"2\"\u0026gt;\n\t\u0026lt;attribute name=\"Is Enabled\" value=\"true\" /\u0026gt;\n\t\u0026lt;attribute name=\"Name\" value=\"Cylinder01\" /\u0026gt;\n\t\u0026lt;attribute name=\"Position\" value=\"0 0 0\" /\u0026gt;\n\t\u0026lt;attribute name=\"Rotation\" value=\"1 0 0 0\" /\u0026gt;\n\t\u0026lt;attribute name=\"Scale\" value=\"1 1 1\" /\u0026gt;\n\t\u0026lt;attribute name=\"Variables\" /\u0026gt;\n\t\u0026lt;component type=\"StaticModel\" id=\"3\"\u0026gt;\n\t\t\u0026lt;attribute name=\"Model\" value=\"Model;Models/Cylinder01.mdl\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Material\" value=\"Material;Materials/key_01.xml\" /\u0026gt;\n\t\u0026lt;/component\u0026gt;\n\t\u0026lt;component type=\"RigidBody\" id=\"4\"\u0026gt;\n\t\t\u0026lt;attribute name=\"Mass\" value=\"1\" /\u0026gt;\n\t\u0026lt;/component\u0026gt;\n\t\u0026lt;component type=\"CollisionShape\" id=\"5\"\u0026gt;\n\t\t\u0026lt;attribute name=\"Shape Type\" value=\"ConvexHull\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Model\" value=\"Model;Models/Cylinder01.mdl\" /\u0026gt;\n\t\u0026lt;/component\u0026gt;\n\u0026lt;/node\u0026gt;\n\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThis spawns the keys correctly, however they do not respect gravity. For example:\u003cbr\u003e\n\u003ca href=\"http://i.imgur.com/49HqtCj.jpg\" data-bbcode=\"true\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"http://i.imgur.com/49HqtCjl.jpg\" alt=\"\" width=\"640\" height=\"480\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eEdit: Something definitely seems odd. Consider the following changes:\u003c/p\u003e\n\u003cp\u003e[code]const unsigned NUM_KEYS = 200;\u003cbr\u003e\nUrho3D::XMLFile* keyFile = GetSubsystem\u003ca\u003eUrho3D::ResourceCache\u003c/a\u003e()-\u0026gt;GetResource\u003ca\u003eUrho3D::XMLFile\u003c/a\u003e(“Objects/key.xml”);\u003cbr\u003e\nfor (unsigned i = 0; i \u0026lt; NUM_KEYS; ++i)\u003cbr\u003e\n{\u003cbr\u003e\nUrho3D::Vector3 position = Urho3D::Vector3(Urho3D::Random(180.0f) - 90.0f, Urho3D::Random(1.0f) + 1.0f, Urho3D::Random(180.0f) - 90.0f);\u003cbr\u003e\nUrho3D::Quaternion rotation = Urho3D::Quaternion(Urho3D::Random(360.0f), Urho3D::Random(360.0f), Urho3D::Random(360.0f));\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\tUrho3D::Node* objectNode = _scene-\u0026gt;InstantiateXML(keyFile-\u0026gt;GetRoot(), position, rotation);\n\n\tUrho3D::RigidBody* body = objectNode-\u0026gt;CreateComponent\u0026lt;Urho3D::RigidBody\u0026gt;();\n    body-\u0026gt;SetCollisionLayer(2);\n    body-\u0026gt;SetMass(2.0f);\n    Urho3D::CollisionShape* shape = objectNode-\u0026gt;CreateComponent\u0026lt;Urho3D::CollisionShape\u0026gt;();\n    shape-\u0026gt;SetBox(Urho3D::Vector3::ONE);\n}[/code]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand my new key.xml:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;?xml version=\"1.0\"?\u0026gt;\n\u0026lt;node id=\"2\"\u0026gt;\n\t\u0026lt;attribute name=\"Is Enabled\" value=\"true\" /\u0026gt;\n\t\u0026lt;attribute name=\"Name\" value=\"Cylinder01\" /\u0026gt;\n\t\u0026lt;attribute name=\"Position\" value=\"0 0 0\" /\u0026gt;\n\t\u0026lt;attribute name=\"Rotation\" value=\"1 0 0 0\" /\u0026gt;\n\t\u0026lt;attribute name=\"Scale\" value=\"1 1 1\" /\u0026gt;\n\t\u0026lt;attribute name=\"Variables\" /\u0026gt;\n\t\u0026lt;component type=\"StaticModel\" id=\"3\"\u0026gt;\n\t\t\u0026lt;attribute name=\"Model\" value=\"Model;Models/Cylinder01.mdl\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Material\" value=\"Material;Materials/key_01.xml\" /\u0026gt;\n\t\u0026lt;/component\u0026gt;\n\u0026lt;/node\u0026gt;\n\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eIt should just load the StaticModel via the xml file, then setup the RigidBody and CollisionShape as how the boxes are setup. This time they do respect gravity, however now they are simply falling through the ground! Very weird indeed.\u003c/p\u003e\n\u003cp\u003eAny ideas?\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T00:58:59.002Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":45,"reads":11,"readers_count":10,"score":227.2,"yours":false,"topic_id":222,"topic_slug":"problems-with-object-loaded-via-scene-instantiatexml","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://i.imgur.com/49HqtCj.jpg","internal":false,"reflection":false,"title":"49HqtCj.jpg","clicks":1}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":1230,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2014-04-30T07:01:51.000Z","cooked":"\u003cp\u003eIf I can reproduce this reliably, it sounds like bugs in adding the physics components correctly when using the Instantiate…() functions. Will check. NinjaSnowWar example should be successfully instantiating physical object prefabs.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T00:58:59.377Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":222,"topic_slug":"problems-with-object-loaded-via-scene-instantiatexml","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":1238,"name":"","username":"thebluefish","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","created_at":"2014-04-30T16:55:19.000Z","cooked":"\u003cp\u003eAlright, I figured it out. It turns out that the editor had put in some undesirable default values:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\t\u0026lt;attribute name=\"Anisotropic Friction\" value=\"0 0 0\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Linear Factor\" value=\"0 0 0\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Angular Factor\" value=\"0 0 0\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Linear Rest Threshold\" value=\"0\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Angular Rest Threshold\" value=\"0\" /\u0026gt;\n\t\t\u0026lt;attribute name=\"Contact Threshold\" value=\"0\" /\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eI didn’t even realize that I had a post-build step in my Visual Studio solution to automatically sync data from my Data folder, so all of my changes when testing were being reversed. Wow that took me way too long last night and I figured it out in 30 minutes after waking up  \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/laughing.png?v=5\" title=\":laughing:\" class=\"emoji\" alt=\":laughing:\"\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-01-02T00:58:59.909Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":10,"readers_count":9,"score":2.0,"yours":false,"topic_id":222,"topic_slug":"problems-with-object-loaded-via-scene-instantiatexml","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[1225,1230,1238]},"timeline_lookup":[[1,3129]],"suggested_topics":[{"id":7212,"title":"Shadow Gap between Feet and Plane","fancy_title":"Shadow Gap between Feet and Plane","slug":"shadow-gap-between-feet-and-plane","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/8/897538cff25de49fafa7aa77574f822e99576b67_2_1024x686.jpeg","created_at":"2022-03-07T00:04:17.351Z","last_posted_at":"2022-03-07T00:17:57.413Z","bumped":true,"bumped_at":"2022-03-07T00:17:57.413Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}]},{"id":7081,"title":"Install Urho3D Library - Windows 10 - rake build - \"project does not exist\"","fancy_title":"Install Urho3D Library - Windows 10 - rake build - \u0026ldquo;project does not exist\u0026rdquo;","slug":"install-urho3d-library-windows-10-rake-build-project-does-not-exist","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-03T03:06:40.974Z","last_posted_at":"2021-12-03T17:53:10.844Z","bumped":true,"bumped_at":"2021-12-03T17:53:10.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":190,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]},{"id":7086,"title":"Handling CrowdAgents that get stuck","fancy_title":"Handling CrowdAgents that get stuck","slug":"handling-crowdagents-that-get-stuck","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-04T01:26:23.062Z","last_posted_at":"2021-12-05T04:37:54.143Z","bumped":true,"bumped_at":"2021-12-05T04:37:54.143Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7210,"title":"Shadow Map Coverage Skewed to the Side","fancy_title":"Shadow Map Coverage Skewed to the Side","slug":"shadow-map-coverage-skewed-to-the-side","posts_count":8,"reply_count":5,"highest_post_number":8,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/6/640dc6184f3d70ce00e656555c22db772ea941a4_2_1024x545.jpeg","created_at":"2022-02-28T15:02:02.662Z","last_posted_at":"2022-03-06T04:51:22.096Z","bumped":true,"bumped_at":"2022-03-06T04:51:22.096Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":211,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster, Accepted Answer","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}}]},{"id":7215,"title":"How to build rbfx?","fancy_title":"How to build rbfx?","slug":"how-to-build-rbfx","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-03-11T01:28:40.314Z","last_posted_at":"2022-03-12T19:16:39.360Z","bumped":true,"bumped_at":"2022-03-12T19:16:39.360Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":268,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1510,"username":"SoNewBee","name":"So New Bee","avatar_template":"/user_avatar/discourse.urho3d.io/sonewbee/{size}/3755_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1447,"username":"Batch","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/f17d59/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":222,"title":"Problems with object loaded via Scene::InstantiateXML","fancy_title":"Problems with object loaded via Scene::InstantiateXML","posts_count":3,"created_at":"2014-04-30T03:33:31.000Z","views":322,"reply_count":0,"like_count":0,"last_posted_at":"2014-04-30T16:55:19.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"problems-with-object-loaded-via-scene-instantiatexml","category_id":10,"word_count":759,"deleted_at":null,"user_id":80,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_222","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":3,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":2,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":80,"username":"thebluefish","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2}],"created_by":{"id":80,"username":"thebluefish","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png"},"last_poster":{"id":80,"username":"thebluefish","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/f04885/{size}.png"}}}