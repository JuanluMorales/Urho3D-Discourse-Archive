{"post_stream":{"posts":[{"id":22752,"name":"","username":"LuoZHipeng","avatar_template":"/user_avatar/discourse.urho3d.io/luozhipeng/{size}/1204_2.png","created_at":"2018-01-05T09:46:54.096Z","cooked":"\u003cp\u003eHello, I am using Urho3D recently on a little project.\u003cbr\u003e\nI encountered some data races problems in the below situations:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eWhen different drawables from the same node are putted into different WorkItem that  working in different threads.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThis is kind of rare, when different drawables from different nodes but those nodes have relationships are putted into different WorkItems that working in different threads .\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eUpdateDrawableGeometriesWork from these different threads may access the same node, sometimes one thread is calling MarkDirty() of that node but another thread is calling UpdateWorldTransform(). When this happens, the precondition in Node::MarkDirty() is broken(MarkDirty() can’t mark all children dirty).\u003cbr\u003e\nHere is a sample picture showing what this problem causes.\u003cbr\u003e\n\u003cimg src=\"//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/b/be8cf664322bb33b9099027a6a4c6c363c1b30fb.jpg\" alt=\"Untitled\" width=\"690\" height=\"388\"\u003e\u003cbr\u003e\nI tried to fix this by arrange the workitems , making all drawables from same node always added to the same workitem. This fixed the first situation but not works in situation 2.\u003cbr\u003e\nI don’t really want to have a lock or disable the multithread calculation.\u003cbr\u003e\nI really need some suggestions.!\u003cbr\u003e\nThank you.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-01-05T09:54:22.100Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":12,"reads":57,"readers_count":56,"score":78.4,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://discourse.urho3d.io/t/rebel-fork-framework-aka-rbfx-intermediate-release/7351","internal":true,"reflection":true,"title":"Rebel Fork Framework aka rbfx: Intermediate Release","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":906,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22753,"name":"ab4daa","username":"ab4daa","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/d26b3c/{size}.png","created_at":"2018-01-05T10:59:28.859Z","cooked":"\u003cp\u003eHi, did you read \u003ca href=\"https://urho3d.github.io/documentation/1.7/_multithreading.html\" rel=\"nofollow noopener\"\u003ethis\u003c/a\u003e?\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhen making your own work functions or threads, observe that the following things are unsafe and will result in undefined behavior and crashes, if done outside the main thread:\u003cbr\u003e\nModifying scene or UI content\u003cbr\u003e\nModifying GPU resources\u003cbr\u003e\nExecuting script functions\u003cbr\u003e\nPointing SharedPtr’s or WeakPtr’s to the same RefCounted object from multiple threads simultaneously\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eFor my understanding, one should not modify node/drawable in multi-threading.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-01-05T10:59:28.859Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":52,"readers_count":51,"score":25.4,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"ab4daa","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://urho3d.github.io/documentation/1.7/_multithreading.html","internal":false,"reflection":false,"title":"Urho3D - Documentation - Multithreading","clicks":6}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":867,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22769,"name":"","username":"LuoZHipeng","avatar_template":"/user_avatar/discourse.urho3d.io/luozhipeng/{size}/1204_2.png","created_at":"2018-01-06T17:44:05.190Z","cooked":"\u003cp\u003eI didn’t make my own work functions.\u003cbr\u003e\nMy main post was not clear, I meant the 2 funcitons below:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003evoid Octree::Update(const FrameInfo\u0026amp; frame)\u003c/li\u003e\n\u003cli\u003evoid View::UpdateGeometries()\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe multithreaded works in these functions could have data races when same they eventually call same nodes’ MarkDirty() and UpdateWorldTransform() function.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-01-06T17:45:34.992Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":1,"reads":49,"readers_count":48,"score":19.8,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"ab4daa","name":"ab4daa","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/d26b3c/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":906,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22770,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-01-06T19:32:32.023Z","cooked":"\u003caside class=\"quote\" data-post=\"3\" data-topic=\"3913\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/luozhipeng/40/1204_1.png\" class=\"avatar\"\u003e LuoZHipeng:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe multithreaded works in these functions could have data races when same they eventually call same nodes’ MarkDirty() and UpdateWorldTransform() function.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhat \u003ccode\u003eDrawable\u003c/code\u003es are you talking about?\u003cbr\u003e\nThere is single node, and there are different \u003ccode\u003eDrawable\u003c/code\u003e components with non-trivial \u003ccode\u003eUpdateGeometry\u003c/code\u003e that belong to this node, am I right?\u003cbr\u003e\nPlease provide actual Node layout: what the node is and what components does it contain.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-01-06T19:32:32.023Z","reply_count":1,"reply_to_post_number":3,"quote_count":1,"incoming_link_count":0,"reads":49,"readers_count":48,"score":14.8,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22776,"name":"","username":"LuoZHipeng","avatar_template":"/user_avatar/discourse.urho3d.io/luozhipeng/{size}/1204_2.png","created_at":"2018-01-07T12:10:00.746Z","cooked":"\u003cp\u003eI got some nodes with multiple AnimatedModels like:\u003cbr\u003e\nnode id=“2”\u003cbr\u003e\n…\u003cbr\u003e\nomponent type=“AnimatedModel” id=“16777216”\u003cbr\u003e\n…\u003cbr\u003e\n/component\u003cbr\u003e\ncomponent type=“AnimatedModel” id=“16777216”\u003cbr\u003e\n…\u003cbr\u003e\n/component\u003cbr\u003e\n…\u003cbr\u003e\n/node\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2018-01-07T12:10:41.128Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":46,"readers_count":45,"score":9.2,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":906,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22779,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-01-07T13:20:19.835Z","cooked":"\u003cp\u003eHaaa, I see…\u003cbr\u003e\nMaybe the node of the Drawable shall always be un-dirty-ed if it has update job in worker thread.\u003c/p\u003e\n\u003cp\u003eIt’s time to summon some experts…\u003cbr\u003e\n\u003ca class=\"mention\" href=\"/u/cadaver\"\u003e@cadaver\u003c/a\u003e ?\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-01-07T13:20:19.835Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":47,"readers_count":46,"score":39.4,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22785,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2018-01-08T09:06:39.029Z","cooked":"\u003cp\u003eI remember the original intention was that MarkDirty / UpdateWorldTransform would be safe even from multiple threads simultaneously, and no dirtyings would be missed. However I believe the update by clb in 2015 has changed that. You could check the version of MarkDirty from before that (hash 7db65a8). It will however perform potentially worse, e.g. for animations.\u003c/p\u003e\n\u003cp\u003eManually undirtying before could be another solution.\u003c/p\u003e\n\u003cp\u003eActually inserting locks there to add proper safety would likely degrade performance further.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-01-08T09:06:39.029Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":45,"readers_count":44,"score":59.0,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22801,"name":"","username":"LuoZHipeng","avatar_template":"/user_avatar/discourse.urho3d.io/luozhipeng/{size}/1204_2.png","created_at":"2018-01-09T07:47:19.162Z","cooked":"\u003cp\u003eThank you for your advice, i’ll have a look at it.\u003cbr\u003e\nAny chance we have a fix in the engine?\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2018-01-09T07:47:19.162Z","reply_count":0,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":0,"reads":44,"readers_count":43,"score":8.8,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":906,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22802,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-01-09T11:48:01.047Z","cooked":"\u003caside class=\"quote\" data-post=\"7\" data-topic=\"3913\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/cadaver/40/3_1.png\" class=\"avatar\"\u003e cadaver:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI remember the original intention was that MarkDirty / UpdateWorldTransform would be safe even from multiple threads simultaneously, and no dirtyings would be missed\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIt doesn’t sound like healthy approach… There is no guarantee that read/write ops are ordered in the intuitive way unless atomics are used. For example, dirty flag may be removed before updating transforms.\u003c/p\u003e\n\u003cp\u003eThere is one suspicious thing… What nodes are you talking about, \u003ca class=\"mention\" href=\"/u/luozhipeng\"\u003e@LuoZHipeng\u003c/a\u003e ?\u003c/p\u003e\n\u003cp\u003eAs I can see, the only threaded code of \u003ccode\u003eAnimatedModel\u003c/code\u003e is \u003ccode\u003eAnimatedModel::UpdateSkinning\u003c/code\u003e. It couldn’t call \u003ccode\u003eMarkDirty\u003c/code\u003e in any way because it only grabs transforms from nodes.\u003cbr\u003e\nHow could you get dirtying and undirtying simultaneously?\u003c/p\u003e\n\u003caside class=\"quote\" data-post=\"1\" data-topic=\"3913\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/luozhipeng/40/1204_1.png\" class=\"avatar\"\u003e LuoZHipeng:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003esometimes one thread is calling MarkDirty() of that node but another thread is calling UpdateWorldTransform().\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIn other words, I’m interested in \u003ccode\u003eMarkDirty()\u003c/code\u003e callstack. Any ideas?\u003c/p\u003e\n\u003cp\u003eMy only idea is that some main-threaded \u003ccode\u003eUpdateGeometry\u003c/code\u003e is touching same nodes… Doesn’t sound believable at first glance.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2018-01-09T12:00:57.999Z","reply_count":0,"reply_to_post_number":7,"quote_count":2,"incoming_link_count":0,"reads":44,"readers_count":43,"score":23.8,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22803,"name":"Lasse Öörni","username":"cadaver","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","created_at":"2018-01-09T12:14:05.192Z","cooked":"\u003cp\u003eBefore the update geometry phase (which can be threaded where applicable), there is the animation update itself (kicked off by Octree as the UpdateDrawables profiling block) which \u003cem\u003ecan\u003c/em\u003e move around scene nodes threaded. Though this and the geometry update should be strictly separated, ie. the animation update always finishes first.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2018-01-09T12:14:05.192Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":42,"readers_count":41,"score":33.4,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"Lasse Öörni","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Urho3D Author","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":true,"staff":true,"user_id":3,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22807,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-01-09T15:50:07.109Z","cooked":"\u003caside class=\"quote\" data-post=\"10\" data-topic=\"3913\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/cadaver/40/3_1.png\" class=\"avatar\"\u003e cadaver:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ewhich can move around scene nodes threaded\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAahh, I missed that \u003ccode\u003eAnimatedModel::ApplyAnimation\u003c/code\u003e is threaded too.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eApplyAnimation\u003c/code\u003e is dirtying the node. \u003ccode\u003eUpdateBoneBoundingBox\u003c/code\u003e is un-dirty-ing the same node. So, \u003ccode\u003eApplyAnimation\u003c/code\u003e for two \u003ccode\u003eAnimatedModel\u003c/code\u003es for single \u003ccode\u003eNode\u003c/code\u003e will likely cause the descibed problem.\u003c/p\u003e\n\u003cp\u003eProbably \u003ccode\u003eMarkDirty\u003c/code\u003e shall be called only for node’s children and \u003ccode\u003eNode\u003c/code\u003e shall be undirtyed for each \u003ccode\u003eDrawable\u003c/code\u003e. It shan’t be performance issue because all drawables need world transforms for rendering anyway.\u003c/p\u003e\n\u003cp\u003eHowever, it will work only if drawables aren’t moved during drawable updates. BUT they are, damn. Drawable could be attached to the bone of \u003ccode\u003eAnimatedModel\u003c/code\u003e\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2018-01-09T15:58:46.055Z","reply_count":0,"reply_to_post_number":10,"quote_count":1,"incoming_link_count":7,"reads":39,"readers_count":38,"score":57.8,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22977,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-01-19T10:39:36.815Z","cooked":"\u003cp\u003eJust to make things clear:\u003c/p\u003e\n\u003cp\u003eI confirm the problem with races. I’m looking for good solution, but it’s not so easy.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2018-01-19T10:39:36.815Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":31,"readers_count":30,"score":26.2,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22991,"name":"","username":"LuoZHipeng","avatar_template":"/user_avatar/discourse.urho3d.io/luozhipeng/{size}/1204_2.png","created_at":"2018-01-22T01:15:12.231Z","cooked":"\u003cp\u003eThank you. I tried to solve it myself but no luck.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2018-01-22T01:15:12.231Z","reply_count":1,"reply_to_post_number":12,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":11.0,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":906,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":22992,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2018-01-22T06:48:25.403Z","cooked":"\u003cp\u003eYou could temporarily disable threading or try to split your node into two until I figure out some good fix.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2018-01-22T06:48:25.403Z","reply_count":0,"reply_to_post_number":13,"quote_count":0,"incoming_link_count":0,"reads":28,"readers_count":27,"score":20.6,"yours":false,"topic_id":3913,"topic_slug":"data-races-in-octree-update-and-view-updategeometries","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"LuoZHipeng","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/luozhipeng/{size}/1204_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[22752,22753,22769,22770,22776,22779,22785,22801,22802,22803,22807,22977,22991,22992]},"timeline_lookup":[[1,1783],[3,1781],[7,1780],[8,1779],[12,1769],[13,1766]],"suggested_topics":[{"id":7086,"title":"Handling CrowdAgents that get stuck","fancy_title":"Handling CrowdAgents that get stuck","slug":"handling-crowdagents-that-get-stuck","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-04T01:26:23.062Z","last_posted_at":"2021-12-05T04:37:54.143Z","bumped":true,"bumped_at":"2021-12-05T04:37:54.143Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7081,"title":"Install Urho3D Library - Windows 10 - rake build - \"project does not exist\"","fancy_title":"Install Urho3D Library - Windows 10 - rake build - \u0026ldquo;project does not exist\u0026rdquo;","slug":"install-urho3d-library-windows-10-rake-build-project-does-not-exist","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-03T03:06:40.974Z","last_posted_at":"2021-12-03T17:53:10.844Z","bumped":true,"bumped_at":"2021-12-03T17:53:10.844Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":190,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1488,"username":"ToolmakerSteve","name":"ToolmakerSteve","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ba9def/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}}]},{"id":7097,"title":"View Physics event for ConvexCast","fancy_title":"View Physics event for ConvexCast","slug":"view-physics-event-for-convexcast","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2021-12-09T23:56:27.507Z","last_posted_at":"2021-12-12T20:20:02.788Z","bumped":true,"bumped_at":"2021-12-12T20:20:02.788Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":6,"views":206,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":192,"username":"Modanung","name":"魔大农 𝞍𝞎𝝳 現招蜍","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7104,"title":"Bug in my partial-model copying code","fancy_title":"Bug in my partial-model copying code","slug":"bug-in-my-partial-model-copying-code","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5367e370779d64989e5c3ff2c1ebfb0689908c87.png","created_at":"2021-12-17T03:50:19.405Z","last_posted_at":"2021-12-17T13:50:49.662Z","bumped":true,"bumped_at":"2021-12-17T13:50:49.662Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]}],"tags_descriptions":{},"id":3913,"title":"Data races in Octree::Update() and View::UpdateGeometries()","fancy_title":"Data races in Octree::Update() and View::UpdateGeometries()","posts_count":14,"created_at":"2018-01-05T09:46:54.023Z","views":1099,"reply_count":8,"like_count":9,"last_posted_at":"2018-01-22T06:48:25.403Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"data-races-in-octree-update-and-view-updategeometries","category_id":10,"word_count":913,"deleted_at":null,"user_id":906,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/be8cf664322bb33b9099027a6a4c6c363c1b30fb_2_1024x576.jpg","slow_mode_seconds":0,"draft":null,"draft_key":"topic_3913","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":14,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":4,"show_read_indicator":false,"thumbnails":[{"max_width":null,"max_height":null,"width":1920,"height":1080,"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/be8cf664322bb33b9099027a6a4c6c363c1b30fb.jpg"},{"max_width":1024,"max_height":1024,"width":1024,"height":576,"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/be8cf664322bb33b9099027a6a4c6c363c1b30fb_2_1024x576.jpg"}],"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":6,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":906,"username":"LuoZHipeng","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/luozhipeng/{size}/1204_2.png","post_count":5,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":3,"username":"cadaver","name":"Lasse Öörni","avatar_template":"/user_avatar/discourse.urho3d.io/cadaver/{size}/3_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"admin":true,"trust_level":2},{"id":867,"username":"ab4daa","name":"ab4daa","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/a/d26b3c/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":906,"username":"LuoZHipeng","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/luozhipeng/{size}/1204_2.png"},"last_poster":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"links":[{"url":"https://urho3d.github.io/documentation/1.7/_multithreading.html","title":"Urho3D - Documentation - Multithreading","internal":false,"attachment":false,"reflection":false,"clicks":6,"user_id":867,"domain":"urho3d.github.io","root_domain":"urho3d.github.io"}]}}