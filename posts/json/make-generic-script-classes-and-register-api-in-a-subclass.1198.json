{"post_stream":{"posts":[{"id":6830,"name":"","username":"setzer22","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","created_at":"2015-07-17T11:00:06.000Z","cooked":"\u003cp\u003eFor this thread I‚Äôll talk about the Lua implementation but I think everything applies to AngelScript as well.\u003c/p\u003e\n\u003cp\u003eMy idea is making multiple LuaScript subsystems at the same time possible. A very useful use case for this is allowing the programmer to create two separate script APIs, one for the Lua parts of the game code (This one would have all the Urho3D API available) and another one targeted to mod scripts, with a custom-defined API and no access to Urho3D whatsoever.\u003c/p\u003e\n\u003cp\u003eIt‚Äôs not an option to use the current LuaScript subsystem to create a mod API for a game because having access to the context and the scene makes cheating incredibly easy, and unless that‚Äôs the intended behaviour, the mod API should be clearly a sandboxed environment.\u003c/p\u003e\n\u003cp\u003eMy idea in order to implement this into Urho is to create a base class LuaScriptAbstract from which LuaScript would inherit its functionality, moving all the generic stuff in the base class, and leaving just the Urho API registration in LuaScript. After that, anyone can subclass LuaScriptAbstract and inherit functionality such as ExecuteFile or FindFunction, without having to worry about the lua_State having all the Urho3D types and classes already bound.\u003c/p\u003e\n\u003cp\u003eWith this, the programmer can easily register LuaScript and ModLuaScript as two sepparate subsystems and use both as needed, so programming the game in Lua remains an option while being able to create a Lua mod API.\u003c/p\u003e\n\u003cp\u003eI‚Äôm going to implement this and submit a pull request if I manage to do it alright. Comments are welcome!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-01-02T01:06:01.426Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":6,"readers_count":5,"score":31.2,"yours":false,"topic_id":1198,"topic_slug":"make-generic-script-classes-and-register-api-in-a-subclass","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":125,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":6835,"name":"","username":"setzer22","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","created_at":"2015-07-17T14:19:19.000Z","cooked":"\u003cp\u003eAs a quick fix, a simpler way to do it is just to add an optional boolean (defaulting to true) telling LuaScript‚Äôs constructor whether to register Urho3D‚Äôs functions. Then, one could simply subclass LuaScript and call the parent‚Äôs constructor with false as a parameter, something like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eclass ModLuaScript : public LuaScript {\n    OBJECT(ModLuaScript);\npublic:\n    ModLuaScript(Context* context) : LuaScript(context, false) { }\n    virtual ~ModLuaScript() { };\n};\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWith this, all the code already using LuaScript remains untoched. But I‚Äôm not actually sure if LuaScript would fit the requirements for being a subsystem with this (i.e. Having a constructor that only takes one parameter, the context). I‚Äôm assuming optional parameters don‚Äôt count in this case. Anyway I‚Äôve done it and it certainly works for me.\u003c/p\u003e\n\u003cp\u003eWhat are your thoughts on this guys? It would be good to hear from someone who knows the Lua subsystem better than myself in order to make a proper fix, this feels hack-ish.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-01-02T01:06:01.750Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":6,"readers_count":5,"score":1.2,"yours":false,"topic_id":1198,"topic_slug":"make-generic-script-classes-and-register-api-in-a-subclass","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":125,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[6830,6835]},"timeline_lookup":[[1,2686]],"suggested_topics":[{"id":7197,"title":"Does Urho3D support multithreaded rendering?","fancy_title":"Does Urho3D support multithreaded rendering?","slug":"does-urho3d-support-multithreaded-rendering","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-02-21T08:07:57.726Z","last_posted_at":"2022-02-21T08:42:15.358Z","bumped":true,"bumped_at":"2022-02-21T08:42:15.358Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":156,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7122,"title":"Faster allocations with PMR","fancy_title":"Faster allocations with PMR","slug":"faster-allocations-with-pmr","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2022-01-10T16:23:15.053Z","last_posted_at":"2022-01-10T16:42:29.752Z","bumped":true,"bumped_at":"2022-01-10T17:55:02.117Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":209,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1363,"username":"vmost","name":null,"avatar_template":"https://avatars.discourse-cdn.com/v4/letter/v/5f9b8f/{size}.png"}}]},{"id":7119,"title":"How to programmatically access Morph Target in FBX file?","fancy_title":"How to programmatically access Morph Target in FBX file?","slug":"how-to-programmatically-access-morph-target-in-fbx-file","posts_count":13,"reply_count":8,"highest_post_number":13,"image_url":null,"created_at":"2022-01-03T23:01:43.070Z","last_posted_at":"2022-01-05T11:55:31.130Z","bumped":true,"bumped_at":"2022-01-05T11:55:31.130Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":214,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1499,"username":"csteaderman","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/b487fb/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7192,"title":"What are avaliable options to create custom meshes?","fancy_title":"What are avaliable options to create custom meshes?","slug":"what-are-avaliable-options-to-create-custom-meshes","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-02-11T21:27:42.365Z","last_posted_at":"2022-02-12T01:12:47.814Z","bumped":true,"bumped_at":"2022-02-12T01:12:47.814Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":156,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1507,"username":"Kest","name":"Kest","avatar_template":"/user_avatar/discourse.urho3d.io/kest/{size}/3734_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7262,"title":"iOS build cannot be installed on sim or device","fancy_title":"iOS build cannot be installed on sim or device","slug":"ios-build-cannot-be-installed-on-sim-or-device","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/d/d889ae74b8b75bfe705a15b4cee71e82faea0f4d.png","created_at":"2022-05-12T15:33:33.531Z","last_posted_at":"2022-05-12T16:13:22.078Z","bumped":true,"bumped_at":"2022-05-12T16:13:22.078Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":95,"category_id":16,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1340,"username":"KatekovAnton","name":"KatekovAnton","avatar_template":"/user_avatar/discourse.urho3d.io/katekovanton/{size}/2988_2.png"}}]}],"tags_descriptions":{},"id":1198,"title":"Make generic Script classes and register API in a subclass","fancy_title":"Make generic Script classes and register API in a subclass","posts_count":2,"created_at":"2015-07-17T11:00:06.000Z","views":351,"reply_count":0,"like_count":0,"last_posted_at":"2015-07-17T14:19:19.000Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"make-generic-script-classes-and-register-api-in-a-subclass","category_id":16,"word_count":424,"deleted_at":null,"user_id":125,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_1198","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png"},"last_poster":{"id":125,"username":"setzer22","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/ce7236/{size}.png"}}}