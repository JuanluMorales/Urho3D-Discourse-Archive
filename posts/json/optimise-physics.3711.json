{"post_stream":{"posts":[{"id":21565,"name":"","username":"nergal","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/7c8e57/{size}.png","created_at":"2017-11-04T10:36:16.249Z","cooked":"\u003cp\u003eHow can I optimise physics so that it might be a little more blunt but more performant?\u003c/p\u003e\n\u003cp\u003eI’m creating a voxel-engine and exploding parts are small physics blocks. But on my macbook pro (2x3.2GHz, 16GB RAM) I can only create like 800 blocks before the frame-rate drops heavily.\u003c/p\u003e\n\u003cp\u003eThis is how I do it…\u003c/p\u003e\n\u003cp\u003eI’m creating a pool of blocks like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003enode = context-\u0026gt;GetSubsystem\u0026lt;Game\u0026gt;()-\u0026gt;scene_-\u0026gt;CreateChild(\"Box\");\nnode-\u0026gt;SetPosition(Vector3((float)(rand()%1000+1000), (float)(rand()%1000)+1000, (float)(rand()%1000+1000)));\nnode-\u0026gt;SetScale(1.0f);\nmodel = node-\u0026gt;CreateComponent\u0026lt;StaticModel\u0026gt;();\nmodel-\u0026gt;SetModel(cache-\u0026gt;GetResource\u0026lt;Model\u0026gt;(\"Models/Box.mdl\"));\nmodel-\u0026gt;SetMaterial(cache-\u0026gt;GetResource\u0026lt;Material\u0026gt;(\"Materials/vcolors2.xml\"));\nmodel-\u0026gt;SetCastShadows(true);\n\nshape = node-\u0026gt;CreateComponent\u0026lt;CollisionShape\u0026gt;();\nshape-\u0026gt;SetBox(Vector3::ONE);\n\nbody = node-\u0026gt;CreateComponent\u0026lt;RigidBody\u0026gt;();\nbody-\u0026gt;SetCollisionEventMode(COLLISION_NEVER);\nbody-\u0026gt;SetMass(10.1f);\nbody-\u0026gt;SetFriction(30.0f);\nbody-\u0026gt;SetRollingFriction(20.0f);\nmodel-\u0026gt;SetEnabled(false);\nfree = true;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen I initiate a new block from the pool like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e    node-\u0026gt;SetPosition(pos);\n    SharedPtr\u0026lt;Material\u0026gt; m = model-\u0026gt;GetMaterial()-\u0026gt;Clone();\n    m-\u0026gt;SetShaderParameter(\"MatDiffColor\",Vector4(color.x_/255.0f, color.y_/255.0f, color.z_/255.0f, 0.2f));\n    model-\u0026gt;SetMaterial(m);\n    body-\u0026gt;SetLinearVelocity(velocity*(float)OBJECT_VELOCITY);\n    model-\u0026gt;SetEnabled(true);\n    free = false;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAny suggestions how to increase performance so that I might add more than just 800 blocks (in this case).\u003c/p\u003e\n\u003cp\u003eThanks in advance!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-11-04T10:36:16.249Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":23,"reads":62,"readers_count":61,"score":127.4,"yours":false,"topic_id":3711,"topic_slug":"optimise-physics","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://discourse.urho3d.io/t/using-gpu-for-physics/3808/3","internal":true,"reflection":true,"title":"Using GPU for physics?","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":825,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21571,"name":"","username":"Bananaft","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","created_at":"2017-11-05T10:33:52.978Z","cooked":"\u003cp\u003eIf you want this blocks all fly around simultaneously, collide with static geometry and each other. 800 seems like a reasonable ceiling.\u003c/p\u003e\n\u003cp\u003eNow things you can try:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eUsing collision layers you can set up it so they will collide with static geometry and not eachother.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eUse sphere collison shape. It could be faster.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMake it so only small ammount of all dynamic objects in the scene are active, and the rest are sleeping. I belive you can tweak sleeping parameters in bullet physics, making them more greedy.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":2,"post_type":1,"updated_at":"2017-11-05T10:33:52.978Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":55,"readers_count":54,"score":61.0,"yours":false,"topic_id":3711,"topic_slug":"optimise-physics","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21580,"name":"","username":"nergal","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/7c8e57/{size}.png","created_at":"2017-11-05T21:31:38.204Z","cooked":"\u003cp\u003eThanks for your suggestions, I will try them out \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-11-05T21:31:38.204Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":48,"readers_count":47,"score":9.6,"yours":false,"topic_id":3711,"topic_slug":"optimise-physics","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Bananaft","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":825,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21581,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2017-11-05T22:31:12.110Z","cooked":"\u003cp\u003ePhysics performance highly depends on number of simultaneoutly collided objects.\u003cbr\u003e\nSo, you keep thousands of objects somewhere, but if you make even ~1k objects activated at the moment, you will lag. Sample 12 called “PhysicsStress” for a reason.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-11-05T22:31:12.110Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":48,"readers_count":47,"score":29.6,"yours":false,"topic_id":3711,"topic_slug":"optimise-physics","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":21583,"name":"","username":"nergal","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/7c8e57/{size}.png","created_at":"2017-11-06T07:11:27.768Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/eugene\"\u003e@Eugene\u003c/a\u003e yepp, I get that, but I just wanted to make sure that I didn’t do something wrong that made my phys object limit low. And also to get some tips\u0026amp;trix to optimise \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e I think layered approach would be good in my case.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-11-06T07:11:27.768Z","reply_count":0,"reply_to_post_number":4,"quote_count":0,"incoming_link_count":0,"reads":40,"readers_count":39,"score":8.0,"yours":false,"topic_id":3711,"topic_slug":"optimise-physics","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":825,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[21565,21571,21580,21581,21583]},"timeline_lookup":[[1,1845],[2,1844],[3,1843]],"suggested_topics":[{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7127,"title":"Switching ribbon trails emission glitches transparent materials","fancy_title":"Switching ribbon trails emission glitches transparent materials","slug":"switching-ribbon-trails-emission-glitches-transparent-materials","posts_count":8,"reply_count":3,"highest_post_number":8,"image_url":null,"created_at":"2022-01-13T17:17:46.847Z","last_posted_at":"2022-02-10T08:10:49.330Z","bumped":true,"bumped_at":"2022-02-10T08:10:49.330Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":323,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1188,"username":"Taqer","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7107,"title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u003cSDL/SDL_gamecontroller.h\u003e","fancy_title":"Error: SDL/SDL_gamecontroller.h: No such file or directory #include \u0026lt;SDL/SDL_gamecontroller.h\u0026gt;","slug":"error-sdl-sdl-gamecontroller-h-no-such-file-or-directory-include-sdl-sdl-gamecontroller-h","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2021-12-21T15:29:52.810Z","last_posted_at":"2021-12-22T15:32:44.818Z","bumped":true,"bumped_at":"2021-12-22T15:32:44.818Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":271,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1497,"username":"timob256","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7209,"title":"Need Compute Shader for Heightmap Normals Calculation","fancy_title":"Need Compute Shader for Heightmap Normals Calculation","slug":"need-compute-shader-for-heightmap-normals-calculation","posts_count":14,"reply_count":5,"highest_post_number":14,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f3699392311fc006b02311f4ac539017ce2ba760.jpeg","created_at":"2022-02-26T04:46:13.776Z","last_posted_at":"2022-03-10T00:07:52.127Z","bumped":true,"bumped_at":"2022-03-10T00:07:52.127Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":410,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]}],"tags_descriptions":{},"id":3711,"title":"Optimise physics","fancy_title":"Optimise physics","posts_count":5,"created_at":"2017-11-04T10:36:16.188Z","views":744,"reply_count":2,"like_count":1,"last_posted_at":"2017-11-06T07:11:27.768Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"optimise-physics","category_id":10,"word_count":403,"deleted_at":null,"user_id":825,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_3711","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":825,"username":"nergal","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/7c8e57/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":165,"username":"Bananaft","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/bananaft/{size}/222_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":825,"username":"nergal","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/7c8e57/{size}.png"},"last_poster":{"id":825,"username":"nergal","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/7c8e57/{size}.png"}}}