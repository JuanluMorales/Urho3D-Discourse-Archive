{"post_stream":{"posts":[{"id":45753,"name":"","username":"Jens","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","created_at":"2022-10-13T11:17:10.260Z","cooked":"\u003cp\u003eHi,\u003c/p\u003e\n\u003cp\u003eEvery time SphereCast() gets a hit, the returned distance (and HitFraction) is zero. RaycastSingle() does return the correct distance, so the problem just seems to be with SphereCast().\u003cbr\u003e\nThis is on UrhoSharp so, unless I’ve made some sort of error, the problem is in UrhoSharp or Urho3D or Bullet. My bet is Urho3D or Bullet, I cannot believe UrhoSharp forgets to fill a var it gets from Urho3D.\u003cbr\u003e\nRegardless the correct distance can be calculated from the sphereRes.Position, but wondered if anyone can confirm it is working in Urho3D?\u003cbr\u003e\nThanks.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003ePhysicsRaycastResult sphereRes = new PhysicsRaycastResult();\nfloat sphereRadius = 2;\nfloat sphereMaxDist = 7; \nRay sphereSend = new Ray(ReverseForWPosOffset, -ammoVelNorm);\nphysicsComp.SphereCast(ref sphereRes, sphereSend, sphereRadius, sphereMaxDist, collisionMask);\n\n   if (sphereRes.Body != null)\n   {\n     initialRayDist = sphereRes.Distance;//always zero\n     initialRayPos = sphereRes.Position;\n     float distance = Vector3.Subtract(raySend.Origin,sphereRes.Position).Length; //works\n    }\n\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2022-10-13T15:13:14.998Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":17,"readers_count":16,"score":3.4,"yours":false,"topic_id":7337,"topic_slug":"spherecast-always-returns-with-distance-0-solved","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1456,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45754,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2022-10-13T13:36:17.293Z","cooked":"\u003cp\u003eWorks for me using C++. I am seeing distances of 0, 0.453, and inf from a spherecast that I had in my code already. So more than just 0.0.\u003c/p\u003e\n\u003cp\u003eAt distance 0, is your sphere already intersecting an object? (The character, maybe?) And/or are the bodies that are being hit already within the radius 2 sphere when it is at position 0? Though it seems odd to me that the Position works correctly if that is the case…\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2022-10-13T13:36:17.293Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":17,"readers_count":16,"score":23.4,"yours":false,"topic_id":7337,"topic_slug":"spherecast-always-returns-with-distance-0-solved","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45755,"name":"","username":"George1","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png","created_at":"2022-10-13T13:38:05.186Z","cooked":"\u003cp\u003eJust a side note, UrhoSharp is too old.\u003c/p\u003e\n\u003cp\u003eYou should try:  \u003ca href=\"https://github.com/Urho-Net/Urho.Net\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\"\u003eGitHub - Urho-Net/Urho.Net: Multiplatform C# Game development framework\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e[elix22]  seems to work on .net 6 support atm and this is based on a more recent version of Urho3D.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2022-10-13T13:39:17.831Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":16,"readers_count":15,"score":8.2,"yours":false,"topic_id":7337,"topic_slug":"spherecast-always-returns-with-distance-0-solved","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/Urho-Net/Urho.Net","internal":false,"reflection":false,"title":"GitHub - Urho-Net/Urho.Net: Multiplatform C# Game development framework","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":627,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45756,"name":"","username":"Jens","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","created_at":"2022-10-13T14:59:15.291Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"2\" data-topic=\"7337\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg loading=\"lazy\" alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"\u003e SirNate0:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAt distance 0, is your sphere already intersecting an object?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThanks, Sir Nat0!\u003cbr\u003e\nThe problem is not completely solved, but at least with your suggestion I do get non-zero distances returned.\u003cbr\u003e\nReducing the radius from 2.0f, which admittedly was way too large, to 0.025f now only gives zero for around 1/3 of the hits.\u003cbr\u003e\nI agree, it is strange that the body, normal and position are filled whilst distance and HitFraction are zero.\u003c/p\u003e\n\u003cp\u003eAs this is not a problem for Urho3D, this should probably be counted as solved. Anyway, it does not matter so much, as I only use the position point going forward - I just find it disconcerting. Still, not as disconcerting as the Collision Event arguments often returning zero for the obj.Contacts[0].ContactImpulse, even though all other CollisionData vars are filled. AFAIK, though, it is a bullet problem. At least it is reasonably easy to do a workaround for that.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2022-10-13T15:00:09.617Z","reply_count":1,"reply_to_post_number":2,"quote_count":1,"incoming_link_count":0,"reads":15,"readers_count":14,"score":8.0,"yours":false,"topic_id":7337,"topic_slug":"spherecast-always-returns-with-distance-0-solved","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1456,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45757,"name":"","username":"Jens","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","created_at":"2022-10-13T15:08:22.905Z","cooked":"\u003cp\u003eThanks for the info George1.\u003cbr\u003e\nThing is, I’d rather leave it until the game is finished and working perfectly, or as perfectly as possible, before booting UrhoSharp. There have been no showstoppers up to now, and I just need to plough on until finished.\u003cbr\u003e\nDo you know if UrhoSharp have stopped developing? It might be they will still come with an update.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2022-10-13T15:08:22.905Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":15,"readers_count":14,"score":3.0,"yours":false,"topic_id":7337,"topic_slug":"spherecast-always-returns-with-distance-0-solved","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1456,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45758,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2022-10-13T16:07:59.696Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Jens\" data-post=\"4\" data-topic=\"7337\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg loading=\"lazy\" alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/40.png\" class=\"avatar\"\u003e Jens:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe problem is not completely solved, but at least with your suggestion I do get non-zero distances returned.\u003cbr\u003e\nReducing the radius from 2.0f, which admittedly was way too large, to 0.025f now only gives zero for around 1/3 of the hits.\u003cbr\u003e\nI agree, it is strange that the body, normal and position are filled whilst distance and HitFraction are zero.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’m not certain, but I think the hit fraction is the fraction of the total distance the sphere has traversed before hitting the other body. So if the sphere, when placed, hits anything, (including something “behind” it along the ray) the hitFraction will be 0. Since the \u003ca href=\"https://github.com/urho3d/Urho3D/blob/796802f595472a414fd9815f9c3dfde7d350d9f4/Source/Urho3D/Physics/PhysicsWorld.cpp#L491\" rel=\"noopener nofollow ugc\"\u003edistance is calculated from the hitFraction\u003c/a\u003e, it is unsurprising that the distance is 0 when the hitfraction is 0 (hitfraction is also set to 0 for the case of no hit, while distance is M_INFINITY, so there is an exception to that).\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2022-10-13T16:07:59.696Z","reply_count":0,"reply_to_post_number":4,"quote_count":1,"incoming_link_count":0,"reads":14,"readers_count":13,"score":2.8,"yours":false,"topic_id":7337,"topic_slug":"spherecast-always-returns-with-distance-0-solved","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/urho3d/Urho3D/blob/796802f595472a414fd9815f9c3dfde7d350d9f4/Source/Urho3D/Physics/PhysicsWorld.cpp#L491","internal":false,"reflection":false,"title":"Urho3D/PhysicsWorld.cpp at 796802f595472a414fd9815f9c3dfde7d350d9f4 · urho3d/Urho3D · GitHub","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[45753,45754,45755,45756,45757,45758]},"timeline_lookup":[[1,41]],"suggested_topics":[{"id":7299,"title":"Urho3d UI - best way to create \"Iconview\"","fancy_title":"Urho3d UI - best way to create \u0026ldquo;Iconview\u0026rdquo;","slug":"urho3d-ui-best-way-to-create-iconview","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2022-07-19T19:45:42.897Z","last_posted_at":"2022-07-19T19:45:42.961Z","bumped":true,"bumped_at":"2022-07-19T19:45:42.961Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":92,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1213,"username":"HappyWeasel","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/h/ecb155/{size}.png"}}]},{"id":7324,"title":"3D Particle Emitter Liquid Effects","fancy_title":"3D Particle Emitter Liquid Effects","slug":"3d-particle-emitter-liquid-effects","posts_count":5,"reply_count":2,"highest_post_number":5,"image_url":null,"created_at":"2022-09-08T13:59:16.260Z","last_posted_at":"2022-09-14T08:38:38.762Z","bumped":true,"bumped_at":"2022-09-14T08:38:38.762Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":185,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7088,"title":"What Compiler is recommended for building Urho3D under Windows 7 32 bit?","fancy_title":"What Compiler is recommended for building Urho3D under Windows 7 32 bit?","slug":"what-compiler-is-recommended-for-building-urho3d-under-windows-7-32-bit","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-06T07:50:47.867Z","last_posted_at":"2021-12-06T13:55:20.901Z","bumped":true,"bumped_at":"2021-12-06T13:55:20.901Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":152,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":4,"username":"weitjong","name":"Yao Wei Tjong","avatar_template":"/user_avatar/discourse.urho3d.io/weitjong/{size}/4_2.png"}}]},{"id":7085,"title":"Blender 3 Asset Browser","fancy_title":"Blender 3 Asset Browser","slug":"blender-3-asset-browser","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":null,"created_at":"2021-12-03T17:39:10.192Z","last_posted_at":"2021-12-03T17:39:10.252Z","bumped":true,"bumped_at":"2021-12-03T17:39:10.252Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":149,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7087,"title":"Android how to get error message sometimes little change gives me just crash","fancy_title":"Android how to get error message sometimes little change gives me just crash","slug":"android-how-to-get-error-message-sometimes-little-change-gives-me-just-crash","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-05T16:59:59.376Z","last_posted_at":"2021-12-05T18:17:02.335Z","bumped":true,"bumped_at":"2021-12-05T18:17:02.335Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":153,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1436,"username":"Maco","name":"Maco","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/m/90ced4/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]}],"tags_descriptions":{},"id":7337,"title":"SphereCast() always returns with Distance=0 [SOLVED]","fancy_title":"SphereCast() always returns with Distance=0 [SOLVED]","posts_count":6,"created_at":"2022-10-13T11:17:10.195Z","views":76,"reply_count":3,"like_count":1,"last_posted_at":"2022-10-13T16:07:59.696Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"spherecast-always-returns-with-distance-0-solved","category_id":7,"word_count":660,"deleted_at":null,"user_id":1456,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_7337","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":6,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":3,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":627,"username":"George1","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"},"last_poster":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}}