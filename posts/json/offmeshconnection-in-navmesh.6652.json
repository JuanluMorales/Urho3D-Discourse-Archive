{"post_stream":{"posts":[{"id":41458,"name":"","username":"CE184","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","created_at":"2021-01-05T01:49:26.006Z","cooked":"\u003cp\u003eThe off-mesh connection usage in the crowd navigation example is quite primitive. The agent goes to one end of the connection and instantly appears on the other end.\u003cbr\u003e\nI subscribed the \u003ccode\u003eE_CROWD_AGENT_STATE_CHANGED\u003c/code\u003e and found it never sends any event related to off-mesh link. Then I found \u003ccode\u003eCA_STATE_OFFMESH\u003c/code\u003e is just a place-holder in \u003ccode\u003eCrowdAgentState\u003c/code\u003e and never used anywhere in the code. So I suppose it’s not supported yet in Urho3D?\u003cbr\u003e\n\u003cstrong\u003eAnyone has done something similar in real project how to get information about agent reaching start/end side of the connection and trigger related animation, etc?\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eMy ultimate goal is that the character can:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eclimb up/down a vertical ladder;\u003c/li\u003e\n\u003cli\u003ejump up/down within given height diff;\u003c/li\u003e\n\u003cli\u003ejump horizontally between a gap.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIt should be very similar to this \u003ca href=\"https://www.reddit.com/r/Unity3D/comments/5mg3lk/first_test_of_offmesh_links_with_custom_animations/\" rel=\"noopener nofollow ugc\"\u003evideo\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eThere it looks easier since we can disable the Auto Traverse Offmesh Links in Unity, and it should be firing enough events to detailed agent state information too.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eHow should I do it in the framework of Urho3D? Does the Raycast\u0026amp;Detour lib itself support these and just need to implement them into Urho3d?\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003eAnother question\u003c/strong\u003e is about the shape of OffMeshConnection triggering area. From current implementation, it looks like the end of each connection is only a circle given a radius. What I would like to have, is to have a narrow rectangle as the triggering area. For example, the whole edge of the wall, can be the start of the connection, and the ground under the wall can be the end of the connection. So the agent can “jump” off the wall \u003cstrong\u003eat ANY place\u003c/strong\u003e near the wall edge, instead of manually set different points everywhere.\u003cbr\u003e\n\u003cstrong\u003eIs this even possible with the Raycast\u0026amp;Detour lib too?\u003c/strong\u003e\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2021-01-05T01:49:26.006Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":34,"readers_count":33,"score":11.8,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.reddit.com/r/Unity3D/comments/5mg3lk/first_test_of_offmesh_links_with_custom_animations/","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1384,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41459,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2021-01-05T03:28:21.356Z","cooked":"\u003cp\u003eThe path corridor in the \u003ccode\u003edtCrowdAgent\u003c/code\u003e contains polyrefs you can use to get the \u003ccode\u003edtPoly\u003c/code\u003e and then check if the first poly in the corridor is an offmesh-connection with \u003ccode\u003egetType()\u003c/code\u003e (they’re just degenerate polys as far as Detour is concerned). You’ll have to keep the 0th polys’ type buffer for old vs new checks to identify the change.\u003c/p\u003e\n\u003cp\u003eIdentifying specific kinds of offmesh connections is tricky but doable. I wanted to expand the userID to 64bits and just store a pointer, arguably the navmesh could index all offmesh connections with unique ids … which goes to hell when you have tiles and runtime updates. So it never happened. Probably updating the dtOffmesh’s userID to a uint64_t would go fine.\u003c/p\u003e\n\u003cp\u003eYou can’t assume that DetourCrowd is ready to go out of the box and have to be prepared to break out the elbow grease. Crowds also raise so many events that they penalize scripting making C++ use mandatory if you’re going to use very large ones, as well as possibly refactoring somewhat to jobify it (fairly easy but adds errors to agent actions). I had to compromise somewhere during that part (\u003ca class=\"mention\" href=\"/u/scorvi\"\u003e@scorvi\u003c/a\u003e and \u003ca class=\"mention\" href=\"/u/jtippetts\"\u003e@JTippetts\u003c/a\u003e are the other large scale contributors on navigation, lots of handoffs were involved) and opted towards flexibility in the general case and not optimal for more than ~100 agents (150 agents in Angelscript on an Ivy-Bridge mobile chip [SurfacePro1] was my test target).\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2021-01-05T03:33:56.486Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":31,"readers_count":30,"score":26.2,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41461,"name":"","username":"CE184","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","created_at":"2021-01-06T01:22:33.674Z","cooked":"\u003cp\u003eThanks for the input!\u003c/p\u003e\n\u003cp\u003eI know it’s not an easy task to support all my requirements, just wondering if it’s doable in the framework of Racast\u0026amp;Detour library. If so, I can dig deeper later since it’s a long term plan in my head. I checked a little bit about Unity and Unreal but could not find what lib they are using, do they have their own implementation other than Recast\u0026amp;Detour?\u003c/p\u003e\n\u003cp\u003eAs you also mentioned the num of agents ~100 for general use. I was wondering what kind of improvement I can do if I want to support several hundreds agents? I was aiming for ~1000 agents on mainstream PC hardware but I am not sure if it’s realistic in current framework. I do see lots of games can do that though, for example, Mount\u0026amp;Blade now can support 1024 + 1024 battle size on main stream PC. That also includes a lot of AI and animation computation there. My game would be much simpler so I assume it’s doable though.\u003cbr\u003e\nOne thing in my mind for such a large system is that, I could use flocking behavior to reduce the computation. For example, within those ~1000 agents, only ~100 do crowd nav computation, and the rest would simply follow/copy their path. I am not sure if the flocking mechanism is included in Reycast\u0026amp;Detour lib too.\u003c/p\u003e\n\u003cp\u003eAnyway, given all my requirements. I only have very limited knowledge on navigation algorithm now. Do you have any links or papers related to how the algorithm is implemented in Raycast\u0026amp;Detour? So I start to learn something.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2021-01-06T01:22:33.674Z","reply_count":1,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":0,"reads":28,"readers_count":27,"score":10.6,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1384,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41462,"name":"J Tippetts","username":"JTippetts1","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png","created_at":"2021-01-06T05:02:10.635Z","cooked":"\u003cp\u003eThe current implementation of navigation and crowds definitely could use some work. In my own stuff, my tendency is to bypass the engine wrappings and interact with detour and crowd directly. If you want to learn more about the workings, you could check out the old (defunct) blog of R/D’s creator at \u003ca href=\"http://digestingduck.blogspot.com/?m=1\"\u003ehttp://digestingduck.blogspot.com/?m=1\u003c/a\u003e for some info. Its pretty old stuff, but it should help a little.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2021-01-06T05:02:10.635Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":26,"readers_count":25,"score":5.2,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"J Tippetts","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://digestingduck.blogspot.com/?m=1","internal":false,"reflection":false,"title":"Digesting Duck","clicks":7}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":631,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41466,"name":"QB'k Games","username":"QBkGames","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png","created_at":"2021-01-06T23:54:21.794Z","cooked":"\u003cp\u003e1000s of units are not realistic with general purpose engines like Urho (and most other). The best you can hope for is 100-200.\u003c/p\u003e\n\u003cp\u003eGames that have units in the 1000s most likely use custom inhouse engines optimized for large number of units, designed around the Data-Oriented, Entity-Component-System, which use struct-of-array rather than array-of-struct design patterns that make them very CPU cache friendly (and thus very fast).\u003c/p\u003e\n\u003cp\u003eThere is an article on Godot design philosophy (you can search for) which clearly states that Godot (which represents a general purpose engine, just like Urho) is designed to make a good compromise between performance and ease of use. For most game types where cutting edge performance is not that critical, ease of use is preferred (also ease of maintenance, etc).\u003c/p\u003e\n\u003cp\u003eSo, if you want 1000 of agents you have to roll your own engine, and good luck with that \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/stuck_out_tongue.png?v=9\" title=\":stuck_out_tongue:\" class=\"emoji\" alt=\":stuck_out_tongue:\"\u003e (although not impossible, it does take a long time, believe me I’ve tried (and still haven’t finished): \u003ca href=\"https://www.youtube.com/watch?v=lcy-12kMQJE\u0026amp;t=45s\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\"\u003eBattle of 1000 spaceships - YouTube\u003c/a\u003e  ).\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2021-01-06T23:54:21.794Z","reply_count":1,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":27,"readers_count":26,"score":40.4,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"QB'k Games","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.youtube.com/watch?v=lcy-12kMQJE\u0026t=45s","internal":false,"reflection":false,"title":"Battle of 1000 spaceships - YouTube","clicks":3}],"read":true,"user_title":null,"reply_to_user":{"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":780,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41468,"name":"","username":"CE184","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","created_at":"2021-01-07T03:03:39.453Z","cooked":"\u003cp\u003eVery interesting video! Thanks for sharing!\u003c/p\u003e\n\u003cp\u003eSeveral followup questions:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWhat is the most computational expensive part for your game when you have 1000 spaceships?\u003c/li\u003e\n\u003cli\u003eFrom the video, I guess there is no physics collision stuff? so it would be easier?\u003c/li\u003e\n\u003cli\u003eThere is no animation system per spaceship neither? so another performance saver?\u003c/li\u003e\n\u003cli\u003eWhat kind of AI are you using? find nearest and attack? since there is no any nav mesh involved, I would assume it’s easier too. Probably some k-d tree update for a N*lg N would be enough.\u003c/li\u003e\n\u003cli\u003eFor those laser beam, are you using just a infinite long raycast hit detection and only show those beam as effect? or you are using the beam actually moving with raycast detection every frame? For former, you save lots of computation but you don’t have that latency effect (you hit instantly when you press fire).\u003c/li\u003e\n\u003cli\u003eWhen you write your own engine, what is your start point? purely from scratch? like opengl/directx with everything? or at least based on some framework?\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI don’t think it’s realistic for me to write my own engine at this time. The rendering stuff alone cross platform will drive me crazy.\u003c/p\u003e\n\u003cp\u003eBTW: I think Urho3D is extremely good at performance compared to other engines. For example, Sample_12 physics stress test can generate 1000 cubes in the scene, and the framerate ~60 after all cubes become static. So I think Urho has the ability to deal with ~1000 entities within the framework if the entity is simple enough.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2021-01-07T03:45:05.531Z","reply_count":1,"reply_to_post_number":5,"quote_count":0,"incoming_link_count":0,"reads":26,"readers_count":25,"score":10.2,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"QBkGames","name":"QB'k Games","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1384,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41469,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2021-01-07T03:59:33.664Z","cooked":"\u003cp\u003eThere’s a number of things that eat away at crowds (in Urho).\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe volume of events they send is pretty massive, so just by ditching script for C++ when it comes to crowds will be a win.\n\u003cul\u003e\n\u003cli\u003eIt’d probably be good to add “\u003cem\u003ebinned\u003c/em\u003e” events that roll up everything for all agents like physics does for contacts\u003c/li\u003e\n\u003cli\u003eExecuteFunction beneath update crowd is probably in the thousands in the profiler\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eThey update as part of scene subsystem updates and not fixed update so they’re ticking constantly and sending those events constantly (making it worse)\u003c/li\u003e\n\u003cli\u003eAgents are processed one-by-one in the callback instead of doing it in bulk after crowd update where they could split it up for the thread-tasks\n\u003cul\u003e\n\u003cli\u003eadding binned events requires addressing this\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eDetourCrowd is single-threaded, parts of it you can split up to jobify but it’s not that much\n\u003cul\u003e\n\u003cli\u003eUrho using a callback during that update probably doesn’t help the update loop’s perf either … another reason to bin things up afterwards\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eThe easiest way to check offmesh connections is to check the agent state for DT_CROWDAGENT_STATE_OFFMESH, then you can test the path-corridor to find out which offmesh connection it’s actually on (it’ll be index 0 or 1 in the corridor depending on time in the internal animation). The hard part is just how to map detour’s view of an offmesh-connection back to Urho3Ds in a way that doesn’t become a mess with tile regeneration and the like … probably by checking out IDs from the NavigationMesh and having it keey a \u003ccode\u003eHashMap\u0026lt;unsigned, WeakPtr\u0026lt;OffmeshConnection\u0026gt; \u0026gt;\u003c/code\u003e or such.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2021-01-07T03:59:33.664Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":28,"readers_count":27,"score":10.6,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41472,"name":"Actually Permanent","username":"throwawayerino","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png","created_at":"2021-01-07T11:51:49.187Z","cooked":"\u003cp\u003eBy “binned” do you mean each agent sends only one event with everything that happened to it, or the crowd controller collects the state of each agent and sends a single event with everything in the \u003ccode\u003eeventData\u003c/code\u003e ?\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2021-01-07T11:51:49.187Z","reply_count":1,"reply_to_post_number":7,"quote_count":0,"incoming_link_count":0,"reads":26,"readers_count":25,"score":10.2,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"Actually Permanent","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1165,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41475,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2021-01-07T17:11:27.300Z","cooked":"\u003cp\u003eThe latter, sending them all means you can do it in a tight loop instead of jumping-around or split it up into thread-jobs (which is only really applicable to C++). Script invocations aren’t free.\u003c/p\u003e\n\u003cp\u003eI binned up the basic update at one point in my own fork and it helped, still wasn’t a magic bullet.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2021-01-07T17:15:38.111Z","reply_count":1,"reply_to_post_number":9,"quote_count":0,"incoming_link_count":0,"reads":26,"readers_count":25,"score":10.2,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41476,"name":"Eugene Kozlov","username":"Eugene","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","created_at":"2021-01-07T20:18:16.645Z","cooked":"\u003cp\u003eSpeaking of D/R, do you know any nice way to keep agents grounded?\u003cbr\u003e\nI know that in theory Recast can generate “detail” mesh for positioning, but in practice this mesh is coarse enough to have significant gaps between feet and ground.\u003c/p\u003e\n\u003cp\u003eMaybe I should just keep all walkable geometry in some acceleration structure and do final raycast on each agent reposition to snap them to ground. Is this the only way?\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2021-01-07T20:18:16.645Z","reply_count":2,"reply_to_post_number":10,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":14.8,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"Eugene Kozlov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Core developer","title_is_group":false,"reply_to_user":{"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":484,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41477,"name":"","username":"JSandusky","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","created_at":"2021-01-08T02:01:50.597Z","cooked":"\u003cp\u003eNope, I’ve done it with physics masks in spherecast.\u003c/p\u003e\n\u003cp\u003eIf static you could map dtPolyRefs to a list of triangles to check (if totally static that can just be a offset and count into one big list of triangle-\u003cspan class=\"hashtag\"\u003e#s\u003c/span\u003e) just linking tris inside a bounds around the dtPoly. Or map dtPolyRefs to to a cell in an acceleration structure. There’s obvious limits there with navmesh updates and how large you could go.\u003c/p\u003e\n\u003cp\u003eBeing n-gons makes the dtPolys a headache.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eThough this has all been about Detour it’s still worth noting that rendering the agents isn’t free. You start pushing several hundred and UpdateDrawables/skinning gets expensive too. If you really want to push that number you’re going to have to get creative.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2021-01-08T02:01:50.597Z","reply_count":0,"reply_to_post_number":11,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":4.8,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1358,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41478,"name":"J Tippetts","username":"JTippetts1","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png","created_at":"2021-01-08T06:15:04.712Z","cooked":"\u003cp\u003eThe best success I’ve had in this, without a lot of work, is to build your level geometry pieces such that horizontal walking surfaces lie as near the top of a nav volume voxel as possible. For example, if your volume voxels at navmesh generation are set at 0.5 units high, then any ground plane with a y value between 0 and 0.5 will result in a y value of 0.5 in the navmesh. If your ground plane is 0, that means units will float 0.5 units above the ground. It is a bit of a pain, but with care you can edit your ground planes to fall on the 0.5-interval (or whatever) voxel boundaries, and eliminate the worst of the floating.\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2021-01-08T06:15:04.712Z","reply_count":0,"reply_to_post_number":11,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":4.8,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"J Tippetts","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":631,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":41488,"name":"QB'k Games","username":"QBkGames","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png","created_at":"2021-01-09T06:41:30.554Z","cooked":"\u003cp\u003eThe 1000 ship battle is a minimalistic tech demo that does not count as either an engine nor a game, as such, as you’ve guessed from the video, it has no physics (just simple ray-sphere intersection between laser beams and other objects), no skeletal animation, not even shadows. Laser beams a short line segments that move every frame and are checked for collision with other objects.\u003c/p\u003e\n\u003cp\u003eIf you do want to try the crazy idea of writing your own game/engine optimized for large number of objects, you want to adopt the philosophy of simplify and optimize as low level as possible so you do want to try and write as much as possible yourself, starting with low level API such as OpenGL (which up to about 5 years ago used to mean cross-platform). However, you can use low level libraries such as SDL for windowing/input, some texture loading lib (jpglib, pnglib, etc), and maybe a sound mixer lib and a physics lib. With physics you might want to write your own simplified and optimized library, especially if all you need is collision detection and maybe some simple acceleration.\u003c/p\u003e\n\u003cp\u003eOther things you want to consider (which are lacking in most general-purpose engines) is some low level memory manager/allocator that combines paging and caching to minimize calls to new/delete.\u003cbr\u003e\nA simpler scene manager instead of the oct-tree which for most scenarios is overkill and slows down more than helps (I used a static uniform 2D grid for my demo, which I think is a better solution for most games).\u003c/p\u003e\n\u003cp\u003eAnd last and most important, moving away form Object Oriented design to Data oriented design based on the struct-of-arrays pattern, which, for large number of dynamic objects can give up up to 10x performance boost over traditional OO design.\u003c/p\u003e\n\u003cp\u003eThere are lots of things that can be done, but everything takes time, and time is our most precious resource which gets less and less as days go by into eternity.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2021-01-09T06:42:51.543Z","reply_count":0,"reply_to_post_number":6,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":4.8,"yours":false,"topic_id":6652,"topic_slug":"offmeshconnection-in-navmesh","display_username":"QB'k Games","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":780,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[41458,41459,41461,41462,41466,41468,41469,41472,41475,41476,41477,41478,41488]},"timeline_lookup":[[1,687],[3,686],[5,685],[9,684],[13,683]],"suggested_topics":[{"id":7074,"title":"First Person and 3rd person camera and water reflections","fancy_title":"First Person and 3rd person camera and water reflections","slug":"first-person-and-3rd-person-camera-and-water-reflections","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-12-01T18:37:28.669Z","last_posted_at":"2021-12-01T21:19:51.519Z","bumped":true,"bumped_at":"2021-12-01T21:19:51.519Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":158,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7138,"title":"Build fails (linking phase) on Linux","fancy_title":"Build fails (linking phase) on Linux","slug":"build-fails-linking-phase-on-linux","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-01-20T03:08:29.663Z","last_posted_at":"2022-01-21T15:27:41.192Z","bumped":true,"bumped_at":"2022-01-21T15:27:41.192Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":3,"views":178,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1502,"username":"jasperry","name":"Jason Perry","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/5fc32e/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1038,"username":"dertom","name":"Thomas Trocha","avatar_template":"/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1304,"username":"lebrewer","name":"lebrewer","avatar_template":"/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}]},{"id":7105,"title":"Multiple Application.UI Roots?","fancy_title":"Multiple Application.UI Roots?","slug":"multiple-application-ui-roots","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/7/74b10ce575f1b69fe43be4abcb07605d74a1d27c_2_1024x544.jpeg","created_at":"2021-12-20T08:55:14.707Z","last_posted_at":"2021-12-22T02:33:05.795Z","bumped":true,"bumped_at":"2021-12-22T02:33:05.795Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":243,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7209,"title":"Need Compute Shader for Heightmap Normals Calculation","fancy_title":"Need Compute Shader for Heightmap Normals Calculation","slug":"need-compute-shader-for-heightmap-normals-calculation","posts_count":14,"reply_count":5,"highest_post_number":14,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f3699392311fc006b02311f4ac539017ce2ba760.jpeg","created_at":"2022-02-26T04:46:13.776Z","last_posted_at":"2022-03-10T00:07:52.127Z","bumped":true,"bumped_at":"2022-03-10T00:07:52.127Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":410,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7212,"title":"Shadow Gap between Feet and Plane","fancy_title":"Shadow Gap between Feet and Plane","slug":"shadow-gap-between-feet-and-plane","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/8/897538cff25de49fafa7aa77574f822e99576b67_2_1024x686.jpeg","created_at":"2022-03-07T00:04:17.351Z","last_posted_at":"2022-03-07T00:17:57.413Z","bumped":true,"bumped_at":"2022-03-07T00:17:57.413Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster, Accepted Answer","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}]}],"tags_descriptions":{},"id":6652,"title":"OffMeshConnection in NavMesh","fancy_title":"OffMeshConnection in NavMesh","posts_count":13,"created_at":"2021-01-05T01:49:25.819Z","views":333,"reply_count":10,"like_count":3,"last_posted_at":"2021-01-09T06:41:30.554Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"offmeshconnection-in-navmesh","category_id":10,"word_count":2378,"deleted_at":null,"user_id":1384,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_6652","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":14,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":6,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":1384,"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1},{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":780,"username":"QBkGames","name":"QB'k Games","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1165,"username":"throwawayerino","name":"Actually Permanent","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/da6949/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1384,"username":"CE184","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/a88e4f/{size}.png"},"last_poster":{"id":780,"username":"QBkGames","name":"QB'k Games","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png"},"links":[{"url":"http://digestingduck.blogspot.com/?m=1","title":"Digesting Duck","internal":false,"attachment":false,"reflection":false,"clicks":7,"user_id":631,"domain":"digestingduck.blogspot.com","root_domain":"digestingduck.blogspot.com"},{"url":"https://www.youtube.com/watch?v=lcy-12kMQJE\u0026t=45s","title":"Battle of 1000 spaceships - YouTube","internal":false,"attachment":false,"reflection":false,"clicks":3,"user_id":780,"domain":"www.youtube.com","root_domain":"youtube.com"}]}}