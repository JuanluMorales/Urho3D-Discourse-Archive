{"post_stream": {"posts": [{"id": 43258, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-07-30T12:35:26.754Z", "cooked": "<p><em>I am sure this is answered somewhere in the forums but I could not find it. Sorry if (when) this is a repeat.</em></p>\n<p>I have been re-jiggering my entire approach to the architecture of my game. I decided to rely more on the built-in/Bullet engine.</p>\n<p>I have:</p>\n<pre><code class=\"lang-auto\">this-&gt;terrainNode_ = this-&gt;scene_-&gt;CreateChild( Terrain );\nthis-&gt;terrainNode_-&gt;SetPosition( Urho3D::Vector3::ZERO );\nauto* terrain = this-&gt;terrainNode_-&gt;CreateComponent&lt; Urho3D::Terrain &gt;();\nterrain-&gt;SetPatchSize( 64 );\nterrain-&gt;SetSpacing( Urho3D::Vector3( 5.0f, 1.0f, 5.0f ) );\nterrain-&gt;SetSmoothing( true );\nterrain-&gt;SetHeightMap( cache-&gt;GetResource&lt; Urho3D::Image &gt;( Textures/HeightMap.png ) );\nterrain-&gt;SetMaterial( cache-&gt;GetResource&lt; Urho3D::Material &gt;( Materials/Terrain.xml ) );\nterrain-&gt;SetOccluder( true );\n\nauto* rigidBody = this-&gt;terrainNode_-&gt;CreateComponent&lt; Urho3D::RigidBody &gt;();\nauto* collisionShape = this-&gt;terrainNode_-&gt;CreateComponent&lt; Urho3D::CollisionShape &gt;();\ncollisionShape-&gt;SetTerrain();\n</code></pre>\n<p>for my terrain.</p>\n<p>My height map is as so:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b00f9cbd2f3260795ee4022b4369c44ed82f9162.png\" data-download-href=\"/uploads/short-url/p7vu0aCcmVm9RzdL3Fn8FUaRAYi.png?dl=1\" title=\"HeightMap\" rel=\"noopener nofollow ugc\"><img src=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/b00f9cbd2f3260795ee4022b4369c44ed82f9162_2_500x500.png\" alt=\"HeightMap\" data-base62-sha1=\"p7vu0aCcmVm9RzdL3Fn8FUaRAYi\" width=\"500\" height=\"500\" srcset=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/b00f9cbd2f3260795ee4022b4369c44ed82f9162_2_500x500.png, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/b00f9cbd2f3260795ee4022b4369c44ed82f9162_2_750x750.png 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/b00f9cbd2f3260795ee4022b4369c44ed82f9162_2_1000x1000.png 2x\" data-small-upload=\"https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/b/b00f9cbd2f3260795ee4022b4369c44ed82f9162_2_10x10.png\"><div class=\"meta\">\n<svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#far-image\"></use></svg><span class=\"filename\">HeightMap</span><span class=\"informations\">1024\u00d71024 40.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use xlink:href=\"#discourse-expand\"></use></svg>\n</div></a></div></p>\n<p>I have for my player creation:</p>\n<pre><code class=\"lang-auto\">for ( short int i = 0 ; i &lt; PLAYER_COUNT ; i++ ) {\n\tthis-&gt;players_[ i ] = this-&gt;scene_-&gt;CreateChild( \"Player\" );\n\tUrho3D::Vector3 position( effolkronium::random_static::get( -1000, 1000 ), 0.0f, effolkronium::random_static::get( -1000, 1000 ) );\n\tposition.y_ = this-&gt;terrainNode_-&gt;GetComponent&lt; Urho3D::Terrain &gt;()-&gt;GetHeight( position ) + 50.0f;\n\tthis-&gt;players_[ i ]-&gt;SetPosition( position );\n\tthis-&gt;players_[ i ]-&gt;SetScale( Urho3D::Vector3( 100.0f, 50.0f, 100.0f ) );\n\tauto* object = this-&gt;players_[ i ]-&gt;CreateComponent&lt; Urho3D::StaticModel &gt;();\n\tobject-&gt;SetModel( cache-&gt;GetResource&lt; Urho3D::Model &gt;( \"Models/Box.mdl\" ) );\n\tobject-&gt;SetMaterial( cache-&gt;GetResource&lt; Urho3D::Material &gt;( \"Materials/Stone.xml\" ) );\n\tobject-&gt;SetCastShadows( true );\n\n\tauto* rigidBody = this-&gt;players_[ i ]-&gt;CreateComponent&lt; Urho3D::RigidBody &gt;();\n\trigidBody-&gt;SetMass( 5.0f );\n\trigidBody-&gt;SetFriction( 1.0f );\n\trigidBody-&gt;SetCollisionEventMode( Urho3D::COLLISION_ALWAYS );\n\tauto* collisionShape = this-&gt;players_[ i ]-&gt;CreateComponent&lt; Urho3D::CollisionShape &gt;();\n\tcollisionShape-&gt;SetBox( Urho3D::Vector3::ONE );\n\n\tthis-&gt;players_[ i ]-&gt;CreateComponent&lt; Player &gt;();\n...\n}\n</code></pre>\n<p>I have for my player movement:</p>\n<pre><code class=\"lang-auto\">for ( short int i = 0 ; i &lt; PLAYER_COUNT ; i++ ) {\n\tauto position = this-&gt;players_[ i ]-&gt;GetPosition();\n\tposition.x_ += this-&gt;players_[ i ]-&gt;GetComponent&lt; Player &gt;()-&gt;GetX();\n\tposition.z_ += this-&gt;players_[ i ]-&gt;GetComponent&lt; Player &gt;()-&gt;GetZ();\n\tthis-&gt;players_[ i ]-&gt;SetTransform( position, Urho3D::Quaternion( Urho3D::Vector3( 0.0f, 1.0f, 0.0f ), this-&gt;terrainNode_-&gt;GetComponent&lt; Urho3D::Terrain &gt;()-&gt;GetNormal( position ) ) );\n}\n</code></pre>\n<p>for my players.</p>\n<p>At the 90\u00b0 wall, instead of stopping/not being allowed to pass, the player just clips through the wall (after some jittering). Even at the 45\u00b0 angle (up the hill) the player eventually just falls through the floor. I have tried using <code>ApplyForce()</code> instead but it does not seem to do anything.</p>\n<p>I am pretty sure I am supposed to be using <code>ApplyForce()</code> instead of manipulating the position myself but I can not make it work. I have been studying <em>19_VehicleDemo</em> but what works there does not seem to work for me.</p>\n<p>If I add <code>position.y_ = this-&gt;terrainNode_-&gt;GetComponent&lt; Urho3D::Terrain &gt;()-&gt;GetHeight( position ) + 25.0f</code> to the player movement it solves my clipping problem but I lose physics (obviously). Plus the player can now climb vertical walls (obviously, again).</p>\n<p>How am I supposed to be moving the player around or is Bullet just not good with this kind of thing?</p>", "post_number": 1, "post_type": 1, "updated_at": "2021-07-30T12:47:04.425Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 1, "reads": 29, "readers_count": 28, "score": 10.8, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b00f9cbd2f3260795ee4022b4369c44ed82f9162.png", "internal": false, "reflection": false, "title": "b00f9cbd2f3260795ee4022b4369c44ed82f9162.png", "clicks": 0}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43263, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-07-31T11:41:29.545Z", "cooked": "<div class=\"onebox lazyYT lazyYT-container\" data-youtube-id=\"eRQhoxFbItY\" data-youtube-title=\"Movement - Test 1\" data-parameters=\"feature=oembed&amp;wmode=opaque\">\n  <a href=\"https://www.youtube.com/watch?v=eRQhoxFbItY\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n    <img class=\"ytp-thumbnail-image\" src=\"https://img.youtube.com/vi/eRQhoxFbItY/hqdefault.jpg\" title=\"Movement - Test 1\" width=\"480\" height=\"360\">\n  </a>\n</div>\n\n<p>I got the player moving around (it was me being dumb) using:</p>\n<pre><code class=\"lang-auto\">for ( short int i = 0 ; i &lt; PLAYER_COUNT ; i++ ) {\n\tconst auto&amp; player = this-&gt;players_[ i ];\n\tauto* playerComponent = player-&gt;GetComponent&lt; Player &gt;();\n\tauto* rigidBody = player-&gt;GetComponent&lt; Urho3D::RigidBody &gt;();\n\n\trigidBody-&gt;ApplyForce( Urho3D::Vector3( 1, 0, 0 ) * playerComponent-&gt;GetX() );\n\trigidBody-&gt;ApplyForce( Urho3D::Vector3( 0, 0, 1 ) * playerComponent-&gt;GetZ() );\n...\n}\n</code></pre>\n<p>Now it no longer goes through walls (my bad) but flips and spins uncontrollably almost like a top. It also does not have the \u201cpep\u201d it used to have (takes a few moments to get going and stop) which is not desirable.</p>", "post_number": 2, "post_type": 1, "updated_at": "2021-08-01T23:16:31.087Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 23, "readers_count": 22, "score": 9.6, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 10, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://www.youtube.com/watch?v=eRQhoxFbItY", "internal": false, "reflection": false, "title": "Simple Tanks Movement Test 1 - YouTube", "clicks": 0}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43264, "name": "evol", "username": "evolgames", "avatar_template": "/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png", "created_at": "2021-07-31T18:04:20.411Z", "cooked": "<p>Set angular factor vector to prevent unwanted rotations. In your case, you probably want only Y-axis rotations. So SetAngularFactor(Vector3(0,1,0))</p>", "post_number": 3, "post_type": 1, "updated_at": "2021-07-31T18:04:20.411Z", "reply_count": 1, "reply_to_post_number": 2, "quote_count": 0, "incoming_link_count": 0, "reads": 20, "readers_count": 19, "score": 24.0, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "evol", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "nickwebha", "name": "Nicholas J Ingrassellino", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png"}, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 1292, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43272, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-08-01T23:47:40.820Z", "cooked": "<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"3\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>Set angular factor vector to prevent unwanted rotations.</p>\n</blockquote>\n</aside>\n<p>Ooohhh, now I understand how it all fits together. Thank you, that was the bit I was missing in my head.</p>\n<p>My code now looks like:</p>\n<pre><code class=\"lang-auto\">for ( short int i = 0 ; i &lt; PLAYER_COUNT ; i++ ) {\n\tconst auto&amp; player = this-&gt;players_[ i ];\n\tauto* playerComponent = player-&gt;GetComponent&lt; Player &gt;();\n\tauto* rigidBody = player-&gt;GetComponent&lt; Urho3D::RigidBody &gt;();\n\tauto* node = rigidBody-&gt;GetNode();\n\n\tconst auto playerXVelocity = playerComponent-&gt;GetX();\n\tconst auto playerZVelocity = playerComponent-&gt;GetZ();\n\n\tconst auto velocity = rigidBody-&gt;GetLinearVelocity();\n\tif ( playerXVelocity == 0 &amp;&amp; playerZVelocity == 0 )\n\t\trigidBody-&gt;SetLinearVelocity( Urho3D::Vector3( 0, velocity.y_, 0 ) );\n\telse\n\t\trigidBody-&gt;SetLinearVelocity( Urho3D::Vector3( playerXVelocity, velocity.y_, playerZVelocity ) );\n\n\tnode-&gt;SetRotation( Urho3D::Quaternion( Urho3D::Vector3( 0.0f, 1.0f, 0.0f ), this-&gt;terrainNode_-&gt;GetComponent&lt; Urho3D::Terrain &gt;()-&gt;GetNormal( node-&gt;GetPosition() ) ) );\n...\n}\n</code></pre>\n<p>It allows me to move with the gamepad precisely while still working within the physics system. I use <code>ApplyForce()</code> in other places (like for a jumping power-up).</p>\n<div class=\"onebox lazyYT lazyYT-container\" data-youtube-id=\"HKnlFtOUDJo\" data-youtube-title=\"Movement - Test 2\" data-parameters=\"feature=oembed&amp;wmode=opaque\">\n  <a href=\"https://www.youtube.com/watch?v=HKnlFtOUDJo\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n    <img class=\"ytp-thumbnail-image\" src=\"https://img.youtube.com/vi/HKnlFtOUDJo/hqdefault.jpg\" title=\"Movement - Test 2\" width=\"480\" height=\"360\">\n  </a>\n</div>\n<p>\n(In the video I am always holding the stick is some direction. It just refuses to move some of the time. I wiggle it a lot and that seems to help.)</p>\n<p>Now I am running into this issue where (with and without <code>ApplyForce()</code> instead of <code>SetLinearVelocity()</code>) the player seems to get stuck on the ground a little. You can see in the video it mostly happens when moving up or right, less so-- but still-- down or left. I ruled out issues with the gamepad.</p>\n<p>When I look for <code>E_NODECOLLISIONSTART</code> events I see lots of them. The player is moving across flat ground but triggering repeated collisions with the terrain. I assume this is due to gravity but I am not sure if it is related to my problem.</p>", "post_number": 4, "post_type": 1, "updated_at": "2021-08-02T00:05:45.136Z", "reply_count": 1, "reply_to_post_number": 3, "quote_count": 1, "incoming_link_count": 0, "reads": 19, "readers_count": 18, "score": 8.8, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 4, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://www.youtube.com/watch?v=HKnlFtOUDJo", "internal": false, "reflection": false, "title": "Movement - Test 2 - YouTube", "clicks": 0}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43273, "name": "evol", "username": "evolgames", "avatar_template": "/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png", "created_at": "2021-08-02T01:15:39.296Z", "cooked": "<p>What\u2019s your gravity set at? Default should be fine though I use slightly stronger. You shouldn\u2019t set linear velocity to move a character. Same as you wouldn\u2019t set position of rigid bodies as it messes with the physics.<br>\nDoes the issue happen with apply force too?<br>\nWhat collision shape is on your character? Try a capsule.</p>", "post_number": 5, "post_type": 1, "updated_at": "2021-08-02T01:15:39.296Z", "reply_count": 1, "reply_to_post_number": 4, "quote_count": 0, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 8.0, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "evol", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "nickwebha", "name": "Nicholas J Ingrassellino", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1292, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43287, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-08-03T11:52:33.922Z", "cooked": "<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"5\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>What\u2019s your gravity set at?</p>\n</blockquote>\n</aside>\n<p>Now it is <code>physicsWorld-&gt;SetGravity( Urho3D::Vector3::DOWN * LEVEL_GRAVITY );\t// LEVEL_GRAVITY = 1.5</code>.</p>\n<p>It was 1,000 which I did not even realize. Thank you for that. Not sure how that happened; I must have been trying to change some other value and accidentally changed that one.</p>\n<p>A problem with the default gravity-- or near to it-- is that players do not fall nearly quickly enough. The top of the slightest ramp sends them slowly flying into space or very, very slowly falling towards the ground after running off a ledge. I have tried playing with higher mass values (5-25) but then they climb 45\u00b0 ramps very, very slowly if at all and I still have the flying-into-space problem.</p>\n<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"5\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>You shouldn\u2019t set linear velocity to move a character.</p>\n</blockquote>\n</aside>\n<p>That is unfortunate because it was the type of movement I wanted for the player. I am aiming for a <em>Smash TV</em>/classic twin-stick shooter kind of movement (responsive right away and there is no \u201cfloatyness\u201d or \u201clag\u201d in the movement). I want the player to be able to move on a dime regardless of currently velocity in any direction. <code>ApplyForce()</code> simply does not give me that as far as I can see.</p>\n<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"5\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>What collision shape is on your character? Try a capsule.</p>\n</blockquote>\n</aside>\n<p>I am experimenting with <code>SetCapsule()</code> but honestly not seeing any difference.</p>\n<p>Thank you for your help in this. There are so many values to play with that getting the right combination on my own is proving suuuper difficult. I tried finding a tutorial in addition to the documentation, source, and samples but no luck there.</p>\n<p><strong>Edit</strong><br>\nOnce I get everything working right enough I am going to come back to these old threads and write some blogs about \u201cthe right way\u201d to do these things. Maybe someone else does not have to experiment as much I as I am right now in the future.</p>", "post_number": 6, "post_type": 1, "updated_at": "2021-08-03T12:47:18.033Z", "reply_count": 0, "reply_to_post_number": 5, "quote_count": 1, "incoming_link_count": 0, "reads": 14, "readers_count": 13, "score": 2.8, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 5, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43288, "name": "evol", "username": "evolgames", "avatar_template": "/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png", "created_at": "2021-08-03T12:37:00.278Z", "cooked": "<p>Well, for responsiveness you could definitely try low mass, higher forces, and then messing with linear damping and setting velocity limits (so they have a max speed). My gravity is like -25 for Y.<br>\nWhat is your friction set for the player and the terrain? And mass for player?</p>\n<p>By limiting velocity I mean using setlinearvelocity to an upper limit if the player exceeds it, though usually damping is enough.</p>\n<p>Basically, low mass and a high force will move the body quickly, then a good damping will stop it when you let go of the control. Should be possible to get it how you want. I think the curve of the capsule helps it to not get stuck on things, especially slopes, so try that again at the same time.</p>", "post_number": 7, "post_type": 1, "updated_at": "2021-08-03T12:37:20.086Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 13, "readers_count": 12, "score": 22.6, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "evol", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 1292, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43290, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-08-03T15:40:01.213Z", "cooked": "<p>Thanks to you the players are moving around nearly perfectly (some tweaks here and there but I will get to that in the polish stage).</p>\n<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"7\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>What is your friction set for the player and the terrain? And mass for player?</p>\n</blockquote>\n</aside>\n<p>Terrain friction is <code>SetFriction( 0.0f )</code>. Player mass is <code>SetMass( 1.0f )</code>. Player friction is <code>SetFriction( 0.0f )</code>. I have my gravity set to -25.</p>\n<p>My players look like this:</p>\n<pre><code class=\"lang-auto\">auto* rigidBody = player-&gt;CreateComponent&lt; Urho3D::RigidBody &gt;();\nrigidBody-&gt;SetMass( 1.0f );\nrigidBody-&gt;SetFriction( 0.0f );\nrigidBody-&gt;SetLinearDamping( 1.0f );\nrigidBody-&gt;SetAngularFactor( Urho3D::Vector3::ZERO );\n</code></pre>\n<p>Everything is looking great except for one thing: The gravity/player mass combination results in falling happening very, very, <em>very</em> slowly (even driving down a ramp the player clears the whole thing with tons of room to spare without ever touching it). If I increase the players mass too much then it will not move no matter how much force I apply. If I increase the gravity then the players start getting stuck on the terrain.</p>\n<p>I am toying with the idea of some additional logic: If the player should be falling temporarily set <code>SetGravityOverride()</code> to something high. That seems hacky as hell though and there must be a better way.</p>", "post_number": 8, "post_type": 1, "updated_at": "2021-08-03T17:40:27.823Z", "reply_count": 1, "reply_to_post_number": 7, "quote_count": 1, "incoming_link_count": 0, "reads": 16, "readers_count": 15, "score": 8.2, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43291, "name": "evol", "username": "evolgames", "avatar_template": "/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png", "created_at": "2021-08-03T15:47:21.404Z", "cooked": "<p>Glad it\u2019s starting to work.<br>\nWhat size is this player?<br>\nSo, try a lower linear damping. At 1 it\u2019s going to seriously slow down the player, even fighting gravity. Basically, think of it as \u201cdrag,\u201d and put it at like .2 or so.</p>\n<p>1 would basically reduce almost all linear velocity every frame, which is why it\u2019s slowing down like crazy.</p>", "post_number": 9, "post_type": 1, "updated_at": "2021-08-03T15:48:46.334Z", "reply_count": 1, "reply_to_post_number": 8, "quote_count": 0, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 8.0, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "evol", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "nickwebha", "name": "Nicholas J Ingrassellino", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1292, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43293, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-08-03T18:34:31.837Z", "cooked": "<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"9\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>What size is this player?</p>\n</blockquote>\n</aside>\n<p><code>SetScale( Urho3D::Vector3( 100.0f, 50.0f, 100.0f ) )</code>. This will eventually be replaced by an actual model. It has a turret on top with <code>SetPosition( Urho3D::Vector3( 0, .5, .5 ) )</code> and <code>SetScale( Urho3D::Vector3( .25, .5, 1 ) )</code> but there is no <code>RigidBody</code> on the turret.</p>\n<p>I am going to spend-- probably alot of-- time playing with the variables and taking notes. Thank you for your help so far!</p>", "post_number": 10, "post_type": 1, "updated_at": "2021-08-03T18:34:31.837Z", "reply_count": 0, "reply_to_post_number": 9, "quote_count": 1, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 3.0, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43294, "name": "evol", "username": "evolgames", "avatar_template": "/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png", "created_at": "2021-08-03T21:31:31.796Z", "cooked": "<p>Oh that\u2019s huge. That and the other reasons are why it would fall slowly. Imagine a skyscraper falling over. I mean, you <em>can</em> do that, but seriously just make your character between 1-3 units tall.<br>\nHave you seen the character demo sample? Might be easy to start with that as a template.</p>", "post_number": 11, "post_type": 1, "updated_at": "2021-08-03T21:31:31.796Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 12, "readers_count": 11, "score": 7.4, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "evol", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1292, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43295, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-08-03T22:00:04.645Z", "cooked": "<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"11\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>Oh that\u2019s huge.</p>\n</blockquote>\n</aside>\n<p>Is it? I will have to rejigger the terrain and heightmap sizes and camera placements. Come to think of it, I have to readjust the scale and speed of everything.</p>\n<p>This is going to take me a little while. Be back later.</p>\n<p><strong>Note to self for later</strong><br>\nInclude scale notes in future blog posts.</p>", "post_number": 12, "post_type": 1, "updated_at": "2021-08-03T22:22:34.563Z", "reply_count": 0, "reply_to_post_number": 11, "quote_count": 1, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 3.0, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43296, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-08-03T23:20:15.423Z", "cooked": "<p>So I shrunk <em>everything</em> down.</p>\n<p>The player is now at <code>SetScale( Urho3D::Vector3( 3.0f, 1.5f, 3.0f ) )</code>. The terrain is at <em>257</em>x<em>257</em>, <code>SetSpacing( Urho3D::Vector3( 1.0f, 0.05f, 1.0f ) )</code> (1/4th its original size). The camera went from <em>3000</em> units away to <em>150</em> units away. Gravity is <em>1</em>, players are at <em>1</em> mass, <em>1</em> friction, and <em>0.2</em> linear damping.</p>\n<div class=\"onebox lazyYT lazyYT-container\" data-youtube-id=\"ur3RWV3M4NQ\" data-youtube-title=\"Movement - Test 3\" data-parameters=\"feature=oembed&amp;wmode=opaque\">\n  <a href=\"https://www.youtube.com/watch?v=ur3RWV3M4NQ\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n    <img class=\"ytp-thumbnail-image\" src=\"https://img.youtube.com/vi/ur3RWV3M4NQ/hqdefault.jpg\" title=\"Movement - Test 3\" width=\"480\" height=\"360\">\n  </a>\n</div>\n\n<p>The players are hopping all the time. I tried different gravity and mass and linear damping but they always hop.</p>", "post_number": 13, "post_type": 1, "updated_at": "2021-08-03T23:20:15.423Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 16, "readers_count": 15, "score": 8.2, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://www.youtube.com/watch?v=ur3RWV3M4NQ", "internal": false, "reflection": false, "title": "Movement - Test 3 - YouTube", "clicks": 0}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43298, "name": "evol", "username": "evolgames", "avatar_template": "/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png", "created_at": "2021-08-03T23:42:08.913Z", "cooked": "<p>That should be good with gravity at Vector3(0, -25, 0). Hmm<br>\nCan I see the whole set up?</p>", "post_number": 14, "post_type": 1, "updated_at": "2021-08-03T23:42:08.913Z", "reply_count": 1, "reply_to_post_number": 13, "quote_count": 0, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 8.0, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "evol", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "nickwebha", "name": "Nicholas J Ingrassellino", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1292, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43299, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-08-03T23:58:53.547Z", "cooked": "<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"14\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>Can I see the whole set up?</p>\n</blockquote>\n</aside>\n<p>At <em>-25</em> it both gets stuck <em>and</em> hops. A little adorable. Adorable or I am losing my mind.</p>\n<p>Creating the players:</p>\n<pre><code class=\"lang-auto\">for ( short int i = 0 ; i &lt; PLAYER_COUNT ; i++ ) {\n\tthis-&gt;players_[ i ] = this-&gt;scene_-&gt;CreateChild( \"Player\" );\n\tconst auto&amp; player = this-&gt;players_[ i ];\n\n\tUrho3D::Vector3 position( effolkronium::random_static::get( -50, 50 ), 0.0f, effolkronium::random_static::get( -50, 50 ) );\n\tposition.y_ = this-&gt;terrainNode_-&gt;GetComponent&lt; Urho3D::Terrain &gt;()-&gt;GetHeight( position ) + 1.0f;\n\tplayer-&gt;SetPosition( position );\n\tplayer-&gt;SetScale( Urho3D::Vector3( 3.0f, 1.5f, 3.0f ) );\n\tauto* object = player-&gt;CreateComponent&lt; Urho3D::StaticModel &gt;();\n\tobject-&gt;SetModel( cache-&gt;GetResource&lt; Urho3D::Model &gt;( \"Models/Box.mdl\" ) );\n\tobject-&gt;SetMaterial( cache-&gt;GetResource&lt; Urho3D::Material &gt;( \"Materials/Stone.xml\" ) );\n\tobject-&gt;SetCastShadows( true );\n\n\tauto* rigidBody = player-&gt;CreateComponent&lt; Urho3D::RigidBody &gt;();\n\trigidBody-&gt;SetMass( 1.0f );\n\trigidBody-&gt;SetFriction( 1.0f );\n\trigidBody-&gt;SetLinearDamping( 0.2f );\n\trigidBody-&gt;SetAngularFactor( Urho3D::Vector3::ZERO );\n\trigidBody-&gt;SetCollisionEventMode( Urho3D::COLLISION_ALWAYS );\n\n\tauto* collisionShape = player-&gt;CreateComponent&lt; Urho3D::CollisionShape &gt;();\n\tcollisionShape-&gt;SetSphere( 1 );\n...\n}\n</code></pre>\n<p>Updating the player each tick:</p>\n<pre><code class=\"lang-auto\">for ( short int i = 0 ; i &lt; PLAYER_COUNT ; i++ ) {\n\tconst auto&amp; player = this-&gt;players_[ i ];\n\tauto* playerComponent = player-&gt;GetComponent&lt; Player &gt;();\n\tauto* rigidBody = player-&gt;GetComponent&lt; Urho3D::RigidBody &gt;();\n\tauto* node = rigidBody-&gt;GetNode();\n\n\trigidBody-&gt;ApplyForce( Urho3D::Vector3( 1, 0, 0 ) * playerComponent-&gt;GetX() );\n\trigidBody-&gt;ApplyForce( Urho3D::Vector3( 0, 0, 1 ) * playerComponent-&gt;GetZ() );\n\n\tnode-&gt;SetRotation( Urho3D::Quaternion( Urho3D::Vector3( 0.0f, 1.0f, 0.0f ), this-&gt;terrainNode_-&gt;GetComponent&lt; Urho3D::Terrain &gt;()-&gt;GetNormal( node-&gt;GetPosition() ) ) );\n...\n}\n</code></pre>\n<p>Playing with gravity anywhere from <em>-1</em> to <em>-25</em>.</p>\n<p>I have been staring at this since 6:00AM and it is now 8:00PM. Going to get some sleep and pick up in the morning\u2026 are water and food still a thing?</p>", "post_number": 15, "post_type": 1, "updated_at": "2021-08-04T00:09:18.934Z", "reply_count": 1, "reply_to_post_number": 14, "quote_count": 1, "incoming_link_count": 0, "reads": 18, "readers_count": 17, "score": 8.6, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43300, "name": "evol", "username": "evolgames", "avatar_template": "/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png", "created_at": "2021-08-04T04:17:17.742Z", "cooked": "<p>Maybe it\u2019s the rotation. Why are you setting the node\u2019s rotation to the terrain normal? To me it seems unnecessary if you\u2019re using physics. If I were making a game without physics for the player, I would do something like that (to keep the player <em>on</em> the ground in the right way), and I would also set the player\u2019s Y height to the terrain height as you did initially because you <em>can</em> manually set positions without physics. Well you can try to do it with physics, but you shouldn\u2019t.</p>\n<p>If you have gravity and collision shapes on the player and terrain the rotation will be correct by the physics alone. I\u2019m not sure if that\u2019s why, but I would try commenting that out.</p>\n<p>Gravity at -1 I would expect that they would be floaty. What kind of game is this going to be? Also, try commenting out the player friction (for now). Maybe it\u2019s bumping a lip in the terrain or something.</p>\n<p>Do you use the debug renderer? I always have mine set up so that I can toggle it with a key and check everything mid-game.</p>\n<p>Sleep helps!</p>", "post_number": 16, "post_type": 1, "updated_at": "2021-08-04T04:17:35.345Z", "reply_count": 1, "reply_to_post_number": 15, "quote_count": 0, "incoming_link_count": 0, "reads": 17, "readers_count": 16, "score": 8.4, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "evol", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "nickwebha", "name": "Nicholas J Ingrassellino", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1292, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43301, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-08-04T12:22:45.192Z", "cooked": "<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"16\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>Why are you setting the node\u2019s rotation to the terrain normal?</p>\n</blockquote>\n</aside>\n<p>I think that was just an old line from when I was not using the physics engine at first and I just never removed it. Gone now.</p>\n<aside class=\"quote no-group\" data-username=\"evolgames\" data-post=\"16\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/evolgames/40/3169_2.png\" class=\"avatar\"> evolgames:</div>\n<blockquote>\n<p>What kind of game is this going to be?</p>\n</blockquote>\n</aside>\n<p>Think <a href=\"https://www.youtube.com/watch?v=WIPn7RZJ4vg&amp;t=300s\" rel=\"noopener nofollow ugc\">Smash TV</a> except PvP with four players and competitive. Many particles effects, many weapons and power-ups. Just mindlessly shooting at each other. This is my first game so I would like to shoot a little higher than Pong but not as high as my dream project. So far I am happy with the results, as difficult as they are proving.</p>\n<p>I have been planning to play with the <code>DebugRenderer</code> but never got around to it. I think I will dedicate some more time to that today.</p>", "post_number": 17, "post_type": 1, "updated_at": "2021-08-06T14:00:26.996Z", "reply_count": 0, "reply_to_post_number": 16, "quote_count": 1, "incoming_link_count": 0, "reads": 18, "readers_count": 17, "score": 3.6, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 4, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "link_counts": [{"url": "https://www.youtube.com/watch?v=WIPn7RZJ4vg&t=300s", "internal": false, "reflection": false, "title": "Smash TV Longplay (Arcade) [4K] - YouTube", "clicks": 1}], "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43330, "name": "", "username": "grokko", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/22d042/{size}.png", "created_at": "2021-08-10T02:50:34.618Z", "cooked": "<p>You can set the normal for your players rotation Quaternion to be the terrains direction cosines\u2026</p>\n<pre><code>    float acosA = acos(norm.x_);\n\tfloat acosB = acos(norm.y_);\n\tfloat acosC = acos(norm.z_);\n        \n\tfloat _x = acosA*180/3.14 - 90;\n\tfloat _y = acosB*180/3.14 - 90;\n\tfloat _z = acosC*180/3.14 - 90;\n    \n    Vector3 spine = Vector3(_x,_y,_z);\n    Quaternion _ion;\n    _ion.FromAngleAxis(angle, spine);\t\t\n    pNode()-&gt;SetRotation(_ion); \n</code></pre>\n<p>That should oriient your player on top of the terrain all the time directed along angle\u2026</p>\n<p>Michael</p>", "post_number": 18, "post_type": 1, "updated_at": "2021-08-10T02:52:26.967Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 16, "readers_count": 15, "score": 23.2, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 1394, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43339, "name": "Nicholas J Ingrassellino", "username": "nickwebha", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "created_at": "2021-08-10T14:15:20.738Z", "cooked": "<aside class=\"quote no-group\" data-username=\"grokko\" data-post=\"18\" data-topic=\"6938\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/g/22d042/40.png\" class=\"avatar\"> grokko:</div>\n<blockquote>\n<p>You can set the normal for your players rotation Quaternion to be the terrains direction cosines</p>\n</blockquote>\n</aside>\n<p>How does this differ from something like:</p>\n<pre><code class=\"lang-auto\">auto position = this-&gt;players_[ i ]-&gt;GetPosition();|\nposition.x_ += this-&gt;players_[ i ]-&gt;GetComponent&lt; Player &gt;()-&gt;GetX();|\nposition.z_ += this-&gt;players_[ i ]-&gt;GetComponent&lt; Player &gt;()-&gt;GetZ();|\nthis-&gt;players_[ i ]-&gt;SetTransform( position, Urho3D::Quaternion( Urho3D::Vector3( 0.0f, 1.0f, 0.0f ), this-&gt;terrainNode_-&gt;GetComponent&lt; Urho3D::Terrain &gt;()-&gt;GetNormal( position ) ) );|\n</code></pre>\n<p>?</p>\n<p>(Besides also setting the position).</p>\n<p><strong>Edit</strong><br>\nI do not have the math background. I need to learn more about quaternions.</p>", "post_number": 19, "post_type": 1, "updated_at": "2021-08-11T11:25:48.122Z", "reply_count": 2, "reply_to_post_number": 18, "quote_count": 1, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 13.0, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "Nicholas J Ingrassellino", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 3, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 1256, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43350, "name": "", "username": "George1", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png", "created_at": "2021-08-11T03:31:35.496Z", "cooked": "<p>I think you need to use impulse or velocity to control physics entity.  Otherwise the physics engine is overriding your manual position control.</p>", "post_number": 20, "post_type": 1, "updated_at": "2021-08-11T03:31:35.496Z", "reply_count": 0, "reply_to_post_number": 19, "quote_count": 0, "incoming_link_count": 0, "reads": 15, "readers_count": 14, "score": 3.0, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "nickwebha", "name": "Nicholas J Ingrassellino", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png"}, "bookmarked": false, "actions_summary": [], "moderator": false, "admin": false, "staff": false, "user_id": 627, "hidden": false, "trust_level": 2, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}, {"id": 43363, "name": "", "username": "grokko", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/22d042/{size}.png", "created_at": "2021-08-11T16:18:29.000Z", "cooked": "<blockquote>\n<p>this-&gt;players_[ i ]-&gt;SetTransform( position, Urho3D::Quaternion( Urho3D::Vector3( 0.0f, 1.0f, 0.0f ),</p>\n</blockquote>\n<p>The Quaternion has to have a spine vector wherein the character places his feet on the surface, 90 degrees from the ground plane.</p>", "post_number": 21, "post_type": 1, "updated_at": "2021-08-11T16:21:41.058Z", "reply_count": 0, "reply_to_post_number": 19, "quote_count": 0, "incoming_link_count": 0, "reads": 13, "readers_count": 12, "score": 17.6, "yours": false, "topic_id": 6938, "topic_slug": "collisionshape-setterrain", "display_username": "", "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_bg_color": null, "flair_color": null, "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_wiki": false, "read": true, "user_title": null, "reply_to_user": {"username": "nickwebha", "name": "Nicholas J Ingrassellino", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png"}, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1}], "moderator": false, "admin": false, "staff": false, "user_id": 1394, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "via_email": true, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false}], "stream": [43258, 43263, 43264, 43272, 43273, 43287, 43288, 43290, 43291, 43293, 43294, 43295, 43296, 43298, 43299, 43300, 43301, 43330, 43339, 43350, 43363]}, "timeline_lookup": [[1, 481], [2, 480], [3, 479], [4, 478], [6, 477], [10, 476], [18, 470], [20, 469]], "tags_descriptions": {}, "id": 6938, "title": "CollisionShape SetTerrain()", "fancy_title": "CollisionShape SetTerrain()", "posts_count": 21, "created_at": "2021-07-30T12:35:26.660Z", "views": 341, "reply_count": 15, "like_count": 4, "last_posted_at": "2021-08-11T16:18:29.000Z", "visible": true, "closed": false, "archived": false, "has_summary": false, "archetype": "regular", "slug": "collisionshape-setterrain", "category_id": 10, "word_count": 2884, "deleted_at": null, "user_id": 1256, "featured_link": null, "pinned_globally": false, "pinned_at": null, "pinned_until": null, "image_url": "https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b00f9cbd2f3260795ee4022b4369c44ed82f9162.png", "slow_mode_seconds": 0, "draft": null, "draft_key": "topic_6938", "draft_sequence": null, "unpinned": null, "pinned": false, "current_post_number": 1, "highest_post_number": 21, "deleted_by": null, "actions_summary": [{"id": 4, "count": 0, "hidden": false, "can_act": false}, {"id": 8, "count": 0, "hidden": false, "can_act": false}, {"id": 7, "count": 0, "hidden": false, "can_act": false}], "chunk_size": 20, "bookmarked": false, "bookmarks": [], "topic_timer": null, "message_bus_last_id": 0, "participant_count": 4, "show_read_indicator": false, "thumbnails": [{"max_width": null, "max_height": null, "width": 1024, "height": 1024, "url": "https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/b/b00f9cbd2f3260795ee4022b4369c44ed82f9162.png"}], "slow_mode_enabled_until": null, "tags_disable_ads": false, "details": {"can_edit": false, "notification_level": 1, "participants": [{"id": 1256, "username": "nickwebha", "name": "Nicholas J Ingrassellino", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png", "post_count": 11, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 1}, {"id": 1292, "username": "evolgames", "name": "evol", "avatar_template": "/user_avatar/discourse.urho3d.io/evolgames/{size}/3169_2.png", "post_count": 7, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}, {"id": 1394, "username": "grokko", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/22d042/{size}.png", "post_count": 2, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 1}, {"id": 627, "username": "George1", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png", "post_count": 1, "primary_group_name": null, "flair_name": null, "flair_url": null, "flair_color": null, "flair_bg_color": null, "trust_level": 2}], "created_by": {"id": 1256, "username": "nickwebha", "name": "Nicholas J Ingrassellino", "avatar_template": "/user_avatar/discourse.urho3d.io/nickwebha/{size}/2672_2.png"}, "last_poster": {"id": 1394, "username": "grokko", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/22d042/{size}.png"}, "links": [{"url": "https://www.youtube.com/watch?v=WIPn7RZJ4vg&t=300s", "title": "Smash TV Longplay (Arcade) [4K] - YouTube", "internal": false, "attachment": false, "reflection": false, "clicks": 1, "user_id": 1256, "domain": "www.youtube.com", "root_domain": "youtube.com"}]}, "suggested_topics": [{"id": 7127, "title": "Switching ribbon trails emission glitches transparent materials", "fancy_title": "Switching ribbon trails emission glitches transparent materials", "slug": "switching-ribbon-trails-emission-glitches-transparent-materials", "posts_count": 8, "reply_count": 3, "highest_post_number": 8, "image_url": null, "created_at": "2022-01-13T17:17:46.847Z", "last_posted_at": "2022-02-10T08:10:49.330Z", "bumped": true, "bumped_at": "2022-02-10T08:10:49.330Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 0, "views": 323, "category_id": 10, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": "latest", "description": "Original Poster, Most Recent Poster", "user": {"id": 1188, "username": "Taqer", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/d2c977/{size}.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 628, "username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 631, "username": "JTippetts1", "name": "J Tippetts", "avatar_template": "/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}]}, {"id": 7132, "title": "How to Draw Anti-Aliased Outlined Line on the UI layer?", "fancy_title": "How to Draw Anti-Aliased Outlined Line on the UI layer?", "slug": "how-to-draw-anti-aliased-outlined-line-on-the-ui-layer", "posts_count": 8, "reply_count": 5, "highest_post_number": 8, "image_url": "https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/c/c040fdbc2f1856c238ba6328fd7f5ff80b15858f_2_782x1024.jpeg", "created_at": "2022-01-17T22:08:06.874Z", "last_posted_at": "2022-01-20T20:13:30.614Z", "bumped": true, "bumped_at": "2022-01-20T20:13:30.614Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 3, "views": 173, "category_id": 10, "featured_link": null, "has_accepted_answer": true, "posters": [{"extras": "latest", "description": "Original Poster, Most Recent Poster", "user": {"id": 1334, "username": "najak3d", "name": "Brian Knox", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}, {"extras": null, "description": "Frequent Poster, Accepted Answer", "user": {"id": 631, "username": "JTippetts1", "name": "J Tippetts", "avatar_template": "/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 628, "username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 192, "username": "Modanung", "name": "\u9b54\u5927\u519c \ud835\udf8d\ud835\udf8e\ud835\udf73 \u73fe\u62db\u870d", "avatar_template": "/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]}, {"id": 7146, "title": "How create affordable comfortable and modern terrain?", "fancy_title": "How create affordable comfortable and modern terrain?", "slug": "how-create-affordable-comfortable-and-modern-terrain", "posts_count": 5, "reply_count": 1, "highest_post_number": 5, "image_url": null, "created_at": "2022-01-21T15:20:08.910Z", "last_posted_at": "2022-01-21T21:51:58.799Z", "bumped": true, "bumped_at": "2022-01-21T22:03:14.896Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 4, "views": 193, "category_id": 10, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": null, "description": "Original Poster", "user": {"id": 1497, "username": "timob256", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/t/b782af/{size}.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 1304, "username": "lebrewer", "name": "lebrewer", "avatar_template": "/user_avatar/discourse.urho3d.io/lebrewer/{size}/2811_2.png"}}, {"extras": "latest", "description": "Most Recent Poster", "user": {"id": 230, "username": "Nerrik", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]}, {"id": 7156, "title": "Manual Mesh Part Animation (e.g. Rotate a propeller)", "fancy_title": "Manual Mesh Part Animation (e.g. Rotate a propeller)", "slug": "manual-mesh-part-animation-e-g-rotate-a-propeller", "posts_count": 4, "reply_count": 1, "highest_post_number": 4, "image_url": null, "created_at": "2022-01-26T23:50:29.343Z", "last_posted_at": "2022-01-27T05:31:02.766Z", "bumped": true, "bumped_at": "2022-01-27T05:31:02.766Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 4, "views": 155, "category_id": 10, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": "latest", "description": "Original Poster, Most Recent Poster", "user": {"id": 1334, "username": "najak3d", "name": "Brian Knox", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 631, "username": "JTippetts1", "name": "J Tippetts", "avatar_template": "/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 1038, "username": "dertom", "name": "Thomas Trocha", "avatar_template": "/user_avatar/discourse.urho3d.io/dertom/{size}/1815_2.png"}}]}, {"id": 7208, "title": "ScreenSpace Y - Inverted for View3D and RTT", "fancy_title": "ScreenSpace Y - Inverted for View3D and RTT", "slug": "screenspace-y-inverted-for-view3d-and-rtt", "posts_count": 14, "reply_count": 11, "highest_post_number": 15, "image_url": "https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/506273b200a2f3337a69438a7989218d599e587b_2_823x1024.png", "created_at": "2022-02-24T23:11:35.590Z", "last_posted_at": "2022-03-09T12:27:07.577Z", "bumped": true, "bumped_at": "2022-03-09T12:27:07.577Z", "archetype": "regular", "unseen": false, "pinned": false, "unpinned": null, "visible": true, "closed": false, "archived": false, "bookmarked": null, "liked": null, "tags_descriptions": {}, "like_count": 4, "views": 268, "category_id": 10, "featured_link": null, "has_accepted_answer": false, "posters": [{"extras": null, "description": "Original Poster", "user": {"id": 1334, "username": "najak3d", "name": "Brian Knox", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 1004, "username": "GoldenThumbs", "name": "Golden Thumbs", "avatar_template": "/user_avatar/discourse.urho3d.io/goldenthumbs/{size}/1669_2.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 627, "username": "George1", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/g/9e8a1a/{size}.png"}}, {"extras": null, "description": "Frequent Poster", "user": {"id": 1335, "username": "justanotherdev", "name": "", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/j/e8c25b/{size}.png"}}, {"extras": "latest", "description": "Most Recent Poster", "user": {"id": 628, "username": "SirNate0", "name": "SirNate0", "avatar_template": "https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}]}