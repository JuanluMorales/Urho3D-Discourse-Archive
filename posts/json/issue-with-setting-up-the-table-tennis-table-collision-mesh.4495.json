{"post_stream":{"posts":[{"id":25751,"name":"Thomas","username":"tni711","avatar_template":"/user_avatar/discourse.urho3d.io/tni711/{size}/3342_2.png","created_at":"2018-08-26T19:45:22.147Z","cooked":"\u003cp\u003eI am working on my first Urho3D game using the Character Demo as the starting point.\u003cbr\u003e\nI have the basic scene setup and some logic to shoot some table tennis balls to the table tennis table surface. The problem is, some balls just get stuck on the tables, some balls can bounce over to the other side of the table and some just pass through the table surface and drop tot he floor.\u003c/p\u003e\n\u003cp\u003eIt seems like the collision mesh of the table is not setup correctly but I could not figure where is the problem. Any advise here is appreciated.\u003c/p\u003e\n\u003cp\u003eBelow are the source code for the setup:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e   // set this one up manually to explore the parameters of these functions\n    Node* tableNode = scene_-\u0026gt;CreateChild(\"Table\");\n    tableNode-\u0026gt;SetPosition(Vector3(0.0f, 0.8f, 0.0f));\n    tableNode-\u0026gt;SetRotation(Quaternion(0.0f, 90.0f, 90.0f));\n    tableNode-\u0026gt;SetScale(1.0f);\n\n    auto* tableObject = tableNode-\u0026gt;CreateComponent\u0026lt;StaticModel\u0026gt;();\n    tableObject-\u0026gt;SetModel(cache-\u0026gt;GetResource\u0026lt;Model\u0026gt;(\"Models/Table3D.mdl\"));\n    tableObject-\u0026gt;SetMaterial(cache-\u0026gt;GetResource\u0026lt;Material\u0026gt;(\"Materials/Table.xml\"));\n\n    auto* tableBody = tableNode-\u0026gt;CreateComponent\u0026lt;RigidBody\u0026gt;();\n    tableBody-\u0026gt;SetMass(10.0f);\n    tableBody-\u0026gt;SetRestitution(0.6f);\n    tableBody-\u0026gt;SetKinematic(false);\n\n    auto* tableShape = tableNode-\u0026gt;CreateComponent\u0026lt;CollisionShape\u0026gt;();\n    tableShape-\u0026gt;SetTriangleMesh(tableObject-\u0026gt;GetModel(), 0);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe function which instantiates the balls and shoot at the table based on the camera direction:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid TableTennisDemo::SpawnObject()\n{\n    auto* cache = GetSubsystem\u0026lt;ResourceCache\u0026gt;();\n    Node* boxNode = scene_-\u0026gt;CreateChild(\"Ball\");\n    boxNode-\u0026gt;SetPosition(cameraNode_-\u0026gt;GetPosition());\n    boxNode-\u0026gt;SetRotation(cameraNode_-\u0026gt;GetRotation());\n    boxNode-\u0026gt;SetScale(1.00f);\n\n    auto* boxObject = boxNode-\u0026gt;CreateComponent\u0026lt;StaticModel\u0026gt;();\n    boxObject-\u0026gt;SetModel(cache-\u0026gt;GetResource\u0026lt;Model\u0026gt;(\"Models/ball.mdl\"));\n    boxObject-\u0026gt;SetMaterial(cache-\u0026gt;GetResource\u0026lt;Material\u0026gt;(\"Materials/Ball.xml\"));\n    boxObject-\u0026gt;SetCastShadows(true);\n\n    auto* body = boxNode-\u0026gt;CreateComponent\u0026lt;RigidBody\u0026gt;();\n    body-\u0026gt;SetMass(0.027f);\n    body-\u0026gt;SetRollingFriction(0.05f);\n    body-\u0026gt;SetRestitution(0.8f);\n    body-\u0026gt;SetLinearDamping(0.2f);\n\n    auto* shape = boxNode-\u0026gt;CreateComponent\u0026lt;CollisionShape\u0026gt;();\n    shape-\u0026gt;SetSphere(0.04f);\n\n    const float OBJECT_VELOCITY = 6.0f;\n\n    // Set initial velocity for the RigidBody based on camera forward vector. Add also a slight up component\n    // to overcome gravity better\n    body-\u0026gt;SetLinearVelocity(cameraNode_-\u0026gt;GetRotation() * Vector3(0.0f, 0.25f, 1.0f) * OBJECT_VELOCITY);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eA snapshot of the game scene:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/6/68cab2623c9b4ba5e6a5a58bb109b60f9486fb75.jpeg\" alt=\"Game%20Scene%20Screenshot\" width=\"632\" height=\"500\"\u003e\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2018-08-26T20:52:30.391Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":17,"reads":34,"readers_count":33,"score":91.8,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"Thomas","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1016,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25752,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2018-08-26T21:00:43.578Z","cooked":"\u003cp\u003eFrom the \u003ca href=\"http://www.cs.kent.edu/~ruttan/GameEngines/lectures/Bullet_User_Manual.pdf\"\u003eBullet Physics Manual\u003c/a\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003ch4\u003eAvoid very small and very large collision shapes\u003c/h4\u003e\n\u003cp\u003eThe minimum object size for moving objects is about 0.2 units, 20 centimeters for Earth gravity. If smaller objects or bigger gravity are manipulated, reduce the internal simulation frequency accordingly, using the third argument of btDiscreteDynamicsWorld::stepSimulation. By default it is 60Hz. For instance, simulating a dice throw (1cm wide box with a gravity of 9.8m/s2) requires a frequency of at least 300Hz (1./300.). It is recommended to keep the maximum size of moving objects smaller then about 5 units/meters.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIn Urho3D the simulation frequency can be changed using \u003ccode\u003ePhysicsWorld::SetFps(int)\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eAlso, did you know you can enable debug rendering of collision shapes? This is done by calling \u003ccode\u003eDrawDebugGeometry(true)\u003c/code\u003e on the \u003ccode\u003ePhysicsWorld\u003c/code\u003e during the \u003ccode\u003ePostRenderUpdate\u003c/code\u003e.\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2018-08-26T21:06:03.809Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":33,"readers_count":32,"score":16.6,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://www.cs.kent.edu/~ruttan/GameEngines/lectures/Bullet_User_Manual.pdf","internal":false,"reflection":false,"clicks":2}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25753,"name":"Thomas","username":"tni711","avatar_template":"/user_avatar/discourse.urho3d.io/tni711/{size}/3342_2.png","created_at":"2018-08-27T01:37:35.817Z","cooked":"\u003caside class=\"quote no-group\" data-post=\"2\" data-topic=\"4495\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt width=\"20\" height=\"20\" src=\"https://sjc6.discourse-cdn.com/standard17/user_avatar/discourse.urho3d.io/modanung/40/1637_1.png\" class=\"avatar\"\u003e Modanung:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e60Hz\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThanks a lot! I am aware of the DrawDebugGeometry function but not able to get it to work. Maybe that is the best path to get a better handle of the collision mesh problem. The Bullet Physics manual reference definitely helps. Lets me dig a bit more in it. Thanks again.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2018-08-27T01:37:35.817Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":31,"readers_count":30,"score":11.2,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"Thomas","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1016,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25754,"name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","username":"Modanung","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","created_at":"2018-08-27T06:51:55.048Z","cooked":"\u003cp\u003eTo draw the debug geometry you‚Äôll need to subscribe to the PostRenderUpdate event as such:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eSubscribeToEvent(E_POSTRENDERUPDATE, URHO3D_HANDLER(TableTennisDemo, HandlePostRenderUpdate));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe function itself should look something like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid TableTennisDemo::HandlePostRenderUpdate(StringHash eventType, VariantMap\u0026amp; eventData)\n{\n    scene_-\u0026gt;GetComponent\u0026lt;PhysicsWorld\u0026gt;()-\u0026gt;DrawDebugGeometry(true);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd you‚Äôre welcome! \u003cimg src=\"https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=6\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2018-08-27T07:41:32.150Z","reply_count":0,"reply_to_post_number":3,"quote_count":0,"incoming_link_count":0,"reads":30,"readers_count":29,"score":21.0,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","reply_to_user":{"username":"tni711","name":"Thomas","avatar_template":"/user_avatar/discourse.urho3d.io/tni711/{size}/3342_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":192,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"user_suspended":true,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25755,"name":"QB'k Games","username":"QBkGames","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png","created_at":"2018-08-27T10:24:10.002Z","cooked":"\u003cp\u003eI had a similar problem starting with Urho and Bullet physics and I‚Äôm also pretty sure it‚Äôs the size of the objects being too small. I suggest scaling everything up, i.e. making the balls 1m in diameter and scale the table and everything else accordingly.\u003c/p\u003e\n\u003cp\u003eYou could also increase the simulation rate, but if you are aiming for low power devices (mobiles), it could take a toll on performance.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2018-08-27T10:24:10.002Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":28,"readers_count":27,"score":20.6,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"QB'k Games","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":780,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25757,"name":"SirNate0","username":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","created_at":"2018-08-27T14:44:10.136Z","cooked":"\u003cp\u003eAnother thing that might help is to not use triangle meshes - break the table into components like convex hulls, cubes, cylinders, etc. The triangle meshes aren‚Äôt actually filled - they behave like rigid shells, but if an object (say the ball) passes through the skin it can get stuck in the table, whereas the other shapes will push the ball out.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2018-08-27T14:44:10.136Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":24.4,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"SirNate0","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":628,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25758,"name":"Thomas","username":"tni711","avatar_template":"/user_avatar/discourse.urho3d.io/tni711/{size}/3342_2.png","created_at":"2018-08-27T14:46:09.833Z","cooked":"\u003cp\u003eThanks for both of your replies!\u003c/p\u003e\n\u003cp\u003eI increased the scale of the ball from 1.0f to 2.0f. It resolved the problem.\u003cbr\u003e\nI also got the debug render working.\u003c/p\u003e\n\u003cp\u003eI want to try to set the FPS to a higher rate if it can support the real life scale of table tennis models.\u003cbr\u003e\nHowever my program crashes with a core dumped. I tried different value such as 10, 60, 300, 600 with no success yet.\u003c/p\u003e\n\u003cp\u003eI add the SetFps logic during the CreateScene function as below:\u003c/p\u003e\n\u003cp\u003evoid TableTennisDemo::CreateScene()\u003cbr\u003e\n{\u003cbr\u003e\nauto* cache = GetSubsystem();\u003cbr\u003e\nscene_ = new Scene(context_);\u003cbr\u003e\nscene_-\u0026gt;CreateComponent();\u003cbr\u003e\nscene_-\u0026gt;CreateComponent();\u003cbr\u003e\nscene_-\u0026gt;GetComponent()-\u0026gt;SetFps(10);\u003c/p\u003e\n\u003cp\u003eThe work in progress so far:\u003cbr\u003e\n\u003ca href=\"https://www.youtube.com/watch?v=YMEBHLqOYH8\" rel=\"nofollow noopener\"\u003ehttps://www.youtube.com/watch?v=YMEBHLqOYH8\u003c/a\u003e\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2018-08-27T15:05:22.756Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":24,"readers_count":23,"score":19.8,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"Thomas","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.youtube.com/watch?v=YMEBHLqOYH8","internal":false,"reflection":false,"title":"YouTube","clicks":8}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1016,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25759,"name":"Thomas","username":"tni711","avatar_template":"/user_avatar/discourse.urho3d.io/tni711/{size}/3342_2.png","created_at":"2018-08-27T14:51:03.818Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"SirNate0\" data-post=\"6\" data-topic=\"4495\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/40.png\" class=\"avatar\"\u003e SirNate0:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ebreak the table into components like convex hulls, cubes, cylinders, etc. T\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThanks for the advise. I would try that if the SetFPS does not work for me. To break up the model is more effort for me.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2018-08-27T14:51:03.818Z","reply_count":0,"reply_to_post_number":6,"quote_count":1,"incoming_link_count":0,"reads":24,"readers_count":23,"score":4.8,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"Thomas","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1016,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25760,"name":"","username":"guk_alex","avatar_template":"/user_avatar/discourse.urho3d.io/guk_alex/{size}/1929_2.png","created_at":"2018-08-27T16:17:44.140Z","cooked":"\u003cp\u003eYou can also use information from node collision for visualising forces that affects the ball.\u003c/p\u003e\n\u003cp\u003eIn the setup function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e    float lineHeightMultiplier = 0.1f; // depends on mass\n    int maxLines = 1000; // = physics fps * seconds to display lines\n    SubscribeToEvent(ballNode_, E_NODECOLLISION, [=](auto eventType, auto\u0026amp; eventData) {            \n\n        using namespace NodeCollision;\n\n        MemoryBuffer contacts(eventData[P_CONTACTS].GetBuffer());\n\n        while (!contacts.IsEof()) {\n            Vector3 contactPosition = contacts.ReadVector3();\n            Vector3 contactNormal = contacts.ReadVector3();\n            float contactDistance = contacts.ReadFloat();\n            float contactImpulse = contacts.ReadFloat();\n            \n            lines_.push_back({ contactPosition, contactPosition + contactNormal*contactImpulse*lineHeightMultiplier });\n            if (lines_.size() \u0026gt; maxLines) // erase old lines\n                lines_.pop_front();\n        }\n\n    });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhere \u003ccode\u003elines_\u003c/code\u003e is:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003estruct DebugLines {\n    Vector3 from;\n    Vector3 to;\n};\nstd::deque\u0026lt;DebugLines\u0026gt; lines_;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd add these lines to \u003ccode\u003eHandlePostRenderUpdate\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eDebugRenderer* debug = scene_-\u0026gt;GetComponent\u0026lt;DebugRenderer\u0026gt;();\nfor (const auto\u0026amp; it : lines_)\n    debug-\u0026gt;AddLine(it.from, it.to, Color::BLUE);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBlue lines will show position of impulses and their strength.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2018-08-27T16:20:44.506Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":22,"readers_count":21,"score":51.4,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":1015,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":25763,"name":"Thomas","username":"tni711","avatar_template":"/user_avatar/discourse.urho3d.io/tni711/{size}/3342_2.png","created_at":"2018-08-28T03:29:33.411Z","cooked":"\u003cp\u003eHi, thanks for the tips. I implemented the logic you suggested with minor modification to fit in the sample program structure. It actually works! I can see the ball force and impact directions visualized with yellow lines in my setup. It is really cool to have this feature handy to help debugging the game.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe collision update handler:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid TableTennisDemo::HandleBallCollisionUpdate(StringHash eventType, VariantMap\u0026amp; eventData)\n{\n  using namespace NodeCollision;\n\n  // subscribe to ball collision node data\n  float lineHeightMultiplier = 0.5f; // depends on mass\n  int maxLines = 1000; // = physics fps * seconds to display lines\n\n  MemoryBuffer contacts(eventData[P_CONTACTS].GetBuffer());\n  while (!contacts.IsEof()) {\n    Vector3 contactPosition = contacts.ReadVector3();\n    Vector3 contactNormal = contacts.ReadVector3();\n    float contactDistance = contacts.ReadFloat();\n    float contactImpulse = contacts.ReadFloat();\n    lines_.push_back({ contactPosition, contactPosition + contactNormal * contactImpulse * lineHeightMultiplier });\n    if (lines_.size() \u0026gt; maxLines) // erase old lines\n      lines_.pop_front();\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003esubscribe the event for each ball instantiated\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eSubscribeToEvent(ballNode, E_NODECOLLISION, URHO3D_HANDLER(TableTennisDemo, HandleBallCollisionUpdate));\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003eDraw the debug geometry\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003evoid TableTennisDemo::HandlePostRenderUpdate(StringHash eventType, VariantMap\u0026amp; eventData)\n{\n    // If draw debug mode is enabled, draw physics debug geometry. Use depth test to make the result easier to interpret\n  if (drawDebug_) {\n    DebugRenderer* debug = scene_-\u0026gt;GetComponent\u0026lt;DebugRenderer\u0026gt;();\n    //Blue lines will show position of impulses and their strength.\n    for (const auto\u0026amp; it : lines_) {\n      debug-\u0026gt;AddLine(it.from, it.to, Color::YELLOW);\n    }\n    scene_-\u0026gt;GetComponent\u0026lt;PhysicsWorld\u0026gt;()-\u0026gt;DrawDebugGeometry(debug, false);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e","post_number":10,"post_type":1,"updated_at":"2018-08-28T07:11:34.980Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":20,"readers_count":19,"score":19.0,"yours":false,"topic_id":4495,"topic_slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","display_username":"Thomas","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1016,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[25751,25752,25753,25754,25755,25757,25758,25759,25760,25763]},"timeline_lookup":[[1,1549],[10,1548]],"suggested_topics":[{"id":7179,"title":"Need help with cusomized PBR renderpath","fancy_title":"Need help with cusomized PBR renderpath","slug":"need-help-with-cusomized-pbr-renderpath","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2022-02-01T09:04:58.692Z","last_posted_at":"2022-02-03T17:35:34.174Z","bumped":true,"bumped_at":"2022-02-03T17:35:34.174Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":13,"views":205,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":null,"description":"Original Poster, Accepted Answer","user":{"id":247,"username":"Dave82","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/dave82/{size}/2369_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7086,"title":"Handling CrowdAgents that get stuck","fancy_title":"Handling CrowdAgents that get stuck","slug":"handling-crowdagents-that-get-stuck","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":null,"created_at":"2021-12-04T01:26:23.062Z","last_posted_at":"2021-12-05T04:37:54.143Z","bumped":true,"bumped_at":"2021-12-05T04:37:54.143Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":137,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}}]},{"id":7065,"title":"Angelscript: Loading a char file into a 2D array: how?","fancy_title":"Angelscript: Loading a char file into a 2D array: how?","slug":"angelscript-loading-a-char-file-into-a-2d-array-how","posts_count":7,"reply_count":4,"highest_post_number":7,"image_url":null,"created_at":"2021-11-24T09:20:05.420Z","last_posted_at":"2021-11-28T11:19:39.689Z","bumped":true,"bumped_at":"2021-11-28T11:26:00.375Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":4,"views":239,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1491,"username":"xlat","name":"Alex Kuch","avatar_template":"/user_avatar/discourse.urho3d.io/xlat/{size}/3620_2.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":983,"username":"tarzeron","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/t/ecae2f/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png"}}]},{"id":7178,"title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","fancy_title":"Medium-Quality Technique for Semi-Reflective/Specular Glass in Urho","slug":"medium-quality-technique-for-semi-reflective-specular-glass-in-urho","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/51408fe152ba02eb8b92237cc9a9411c8ee922e6.jpeg","created_at":"2022-01-31T22:57:50.134Z","last_posted_at":"2022-02-01T04:32:37.418Z","bumped":true,"bumped_at":"2022-02-01T04:32:37.418Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":154,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1317,"username":"Lys0gen","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/l/57b2e6/{size}.png"}}]},{"id":7185,"title":"Update Ray ray direction","fancy_title":"Update Ray ray direction","slug":"update-ray-ray-direction","posts_count":5,"reply_count":1,"highest_post_number":5,"image_url":null,"created_at":"2022-02-05T00:28:45.414Z","last_posted_at":"2022-02-05T20:19:51.238Z","bumped":true,"bumped_at":"2022-02-05T20:19:51.238Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":144,"category_id":10,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":861,"username":"GodMan","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/g/e79b87/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]}],"tags_descriptions":{},"id":4495,"title":"Issue with setting up the table tennis table collision mesh","fancy_title":"Issue with setting up the table tennis table collision mesh","posts_count":10,"created_at":"2018-08-26T19:45:22.079Z","views":583,"reply_count":2,"like_count":7,"last_posted_at":"2018-08-28T03:29:33.411Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"issue-with-setting-up-the-table-tennis-table-collision-mesh","category_id":10,"word_count":1240,"deleted_at":null,"user_id":1016,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/6/68cab2623c9b4ba5e6a5a58bb109b60f9486fb75.jpeg","slow_mode_seconds":0,"draft":null,"draft_key":"topic_4495","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":10,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":5,"show_read_indicator":false,"thumbnails":[{"max_width":null,"max_height":null,"width":1014,"height":802,"url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/6/68cab2623c9b4ba5e6a5a58bb109b60f9486fb75.jpeg"}],"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1016,"username":"tni711","name":"Thomas","avatar_template":"/user_avatar/discourse.urho3d.io/tni711/{size}/3342_2.png","post_count":5,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":192,"username":"Modanung","name":"È≠îÂ§ßÂÜú ùûçùûéùù≥ ÁèæÊãõËúç","avatar_template":"/user_avatar/discourse.urho3d.io/modanung/{size}/3290_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":0},{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":780,"username":"QBkGames","name":"QB'k Games","avatar_template":"/user_avatar/discourse.urho3d.io/qbkgames/{size}/646_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2},{"id":1015,"username":"guk_alex","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/guk_alex/{size}/1929_2.png","post_count":1,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":2}],"created_by":{"id":1016,"username":"tni711","name":"Thomas","avatar_template":"/user_avatar/discourse.urho3d.io/tni711/{size}/3342_2.png"},"last_poster":{"id":1016,"username":"tni711","name":"Thomas","avatar_template":"/user_avatar/discourse.urho3d.io/tni711/{size}/3342_2.png"},"links":[{"url":"https://www.youtube.com/watch?v=YMEBHLqOYH8","title":"YouTube","internal":false,"attachment":false,"reflection":false,"clicks":8,"user_id":1016,"domain":"www.youtube.com","root_domain":"youtube.com"},{"url":"http://www.cs.kent.edu/~ruttan/GameEngines/lectures/Bullet_User_Manual.pdf","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":192,"domain":"www.cs.kent.edu","root_domain":"kent.edu"}]}}