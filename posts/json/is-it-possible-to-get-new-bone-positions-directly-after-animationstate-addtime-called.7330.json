{"post_stream":{"posts":[{"id":45740,"name":"","username":"Jens","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","created_at":"2022-09-22T11:18:00.289Z","cooked":"\u003cp\u003eHi forum dwellers,\u003cbr\u003e\nThe problem is I have an animation driven character who is holding a non-animated object. The object has a collision shape which interacts with other objects in the game. At the end of OnUpdate() the object is manually moved so that it follows the animated character. However, the bone positions at this point are those prior to the added x seconds, so the object lags the animated character. At the very latest the object should be moved to the new position before collision physics is employed for the timeStep, but maybe this is just not possible?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e    protected override void OnUpdate(float timeStep)\n        {\n            AnimationState AniState.AddTime(x);\n//bone positions here are from previous timeStep\n        }\n\u003c/code\u003e\u003c/pre\u003e","post_number":1,"post_type":1,"updated_at":"2022-09-22T11:18:00.289Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":18,"readers_count":17,"score":8.6,"yours":false,"topic_id":7330,"topic_slug":"is-it-possible-to-get-new-bone-positions-directly-after-animationstate-addtime-called","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://discourse.urho3d.io/t/any-expense-if-setting-animationstate-time-to-previous-value/7328/5","internal":true,"reflection":true,"title":"Any Expense if Setting AnimationState.Time to Previous Value?","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1456,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":45742,"name":"","username":"Jens","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","created_at":"2022-09-22T13:40:17.428Z","cooked":"\u003cp\u003eLooks like it is possible after all. Previously I had tried call Apply() on the AnimationState, but the bone positions were not updated:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e                AntiClkWiseAniState.Apply();\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOn reflection, I shouldâ€™ve looked closer at the AnimatedModel, since ApplyAnimation() does immediately update the bone positions:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003eAniModelObject.ApplyAnimation();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHave only just tried this, and the animations look ok; however, I vaguely remember a while back when there was trouble with an animation jerking as it moved. At that time I tried Apply() on the AnimationState and the animation went completely crazy. (In fact, the jerking was caused by the Blender fbx exporter with this particular model - it had worked fine with other models. The issue was fixed by using the excellent \u003ca href=\"https://github.com/dertom95/Urho3D-Blender\" rel=\"noopener nofollow ugc\"\u003eUrho3D Exporter by Dertom95\u003c/a\u003e).\u003c/p\u003e\n\u003cp\u003eWhat I am trying to say is that from that point I had tried to stay away from Apply(), anyway there was no need as the model exported from the Urho3D Exporter was animating fine. Now it looks like I need to use AnimatedModel.ApplyAnimation(). Does anyone know a reason why that might be a bad idea?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2022-09-22T13:42:35.417Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":18,"readers_count":17,"score":8.6,"yours":false,"topic_id":7330,"topic_slug":"is-it-possible-to-get-new-bone-positions-directly-after-animationstate-addtime-called","display_username":"","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/dertom95/Urho3D-Blender","internal":false,"reflection":false,"title":"GitHub - dertom95/Urho3D-Blender","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1456,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[45740,45742]},"timeline_lookup":[[1,62]],"suggested_topics":[{"id":7323,"title":"Missing 1.8 release change log?","fancy_title":"Missing 1.8 release change log?","slug":"missing-1-8-release-change-log","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2022-09-06T02:36:19.003Z","last_posted_at":"2022-09-06T11:11:09.921Z","bumped":true,"bumped_at":"2022-09-06T11:11:09.921Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":117,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1490,"username":"Sunc","name":"DoubleSuper","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/df788c/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]},{"id":7180,"title":"Adding Text3D to scene [SOLVED]","fancy_title":"Adding Text3D to scene [SOLVED]","slug":"adding-text3d-to-scene-solved","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2022-02-01T17:48:21.806Z","last_posted_at":"2022-02-01T19:19:32.934Z","bumped":true,"bumped_at":"2022-02-01T19:19:32.934Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":141,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1499,"username":"csteaderman","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/c/b487fb/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}}]},{"id":7288,"title":"Samples not working!","fancy_title":"Samples not working!","slug":"samples-not-working","posts_count":11,"reply_count":5,"highest_post_number":11,"image_url":null,"created_at":"2022-06-26T08:30:04.842Z","last_posted_at":"2022-06-26T16:52:16.151Z","bumped":true,"bumped_at":"2022-06-26T16:52:16.151Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":0,"views":148,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1528,"username":"cqrtxwd","name":"QR C","avatar_template":"/user_avatar/discourse.urho3d.io/cqrtxwd/{size}/3814_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":263,"username":"1vanK","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/1vank/{size}/768_2.png"}}]},{"id":7209,"title":"Need Compute Shader for Heightmap Normals Calculation","fancy_title":"Need Compute Shader for Heightmap Normals Calculation","slug":"need-compute-shader-for-heightmap-normals-calculation","posts_count":14,"reply_count":5,"highest_post_number":14,"image_url":"https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/f3699392311fc006b02311f4ac539017ce2ba760.jpeg","created_at":"2022-02-26T04:46:13.776Z","last_posted_at":"2022-03-10T00:07:52.127Z","bumped":true,"bumped_at":"2022-03-10T00:07:52.127Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":2,"views":410,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":631,"username":"JTippetts1","name":"J Tippetts","avatar_template":"/user_avatar/discourse.urho3d.io/jtippetts1/{size}/96_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1358,"username":"JSandusky","name":"","avatar_template":"/user_avatar/discourse.urho3d.io/jsandusky/{size}/3220_2.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":628,"username":"SirNate0","name":"SirNate0","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/9f8e36/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":230,"username":"Nerrik","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/958977/{size}.png"}}]},{"id":7193,"title":"Can Z-Axis Feasibly be \"Up\"?","fancy_title":"Can Z-Axis Feasibly be \u0026ldquo;Up\u0026rdquo;?","slug":"can-z-axis-feasibly-be-up","posts_count":4,"reply_count":2,"highest_post_number":4,"image_url":null,"created_at":"2022-02-14T05:17:28.054Z","last_posted_at":"2022-02-14T07:26:53.817Z","bumped":true,"bumped_at":"2022-02-14T07:26:53.817Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags_descriptions":{},"like_count":1,"views":161,"category_id":10,"featured_link":null,"has_accepted_answer":true,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":1334,"username":"najak3d","name":"Brian Knox","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/n/6a8cbe/{size}.png"}},{"extras":null,"description":"Frequent Poster, Accepted Answer","user":{"id":484,"username":"Eugene","name":"Eugene Kozlov","avatar_template":"/user_avatar/discourse.urho3d.io/eugene/{size}/902_2.png"}}]}],"tags_descriptions":{},"id":7330,"title":"Is it Possible to Get New Bone Positions Directly After AnimationState.AddTime() Called?","fancy_title":"Is it Possible to Get New Bone Positions Directly After AnimationState.AddTime() Called?","posts_count":2,"created_at":"2022-09-22T11:18:00.223Z","views":81,"reply_count":0,"like_count":0,"last_posted_at":"2022-09-22T13:40:17.428Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"is-it-possible-to-get-new-bone-positions-directly-after-animationstate-addtime-called","category_id":7,"word_count":302,"deleted_at":null,"user_id":1456,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_7330","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":2,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":false,"bookmarks":[],"topic_timer":null,"message_bus_last_id":0,"participant_count":1,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"tags_disable_ads":false,"details":{"can_edit":false,"notification_level":1,"participants":[{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"trust_level":1}],"created_by":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"},"last_poster":{"id":1456,"username":"Jens","name":"","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/j/d2c977/{size}.png"}}}